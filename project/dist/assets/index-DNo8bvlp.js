var PS=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var L8=PS((U8,xS)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var OS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function MS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ix={exports:{}},Sf={},ax={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gu=Symbol.for("react.element"),LS=Symbol.for("react.portal"),BS=Symbol.for("react.fragment"),US=Symbol.for("react.strict_mode"),WS=Symbol.for("react.profiler"),zS=Symbol.for("react.provider"),VS=Symbol.for("react.context"),HS=Symbol.for("react.forward_ref"),$S=Symbol.for("react.suspense"),jS=Symbol.for("react.memo"),GS=Symbol.for("react.lazy"),s1=Symbol.iterator;function XS(e){return e===null||typeof e!="object"?null:(e=s1&&e[s1]||e["@@iterator"],typeof e=="function"?e:null)}var ox={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sx=Object.assign,ux={};function ws(e,n,t){this.props=e,this.context=n,this.refs=ux,this.updater=t||ox}ws.prototype.isReactComponent={};ws.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};ws.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lx(){}lx.prototype=ws.prototype;function Up(e,n,t){this.props=e,this.context=n,this.refs=ux,this.updater=t||ox}var Wp=Up.prototype=new lx;Wp.constructor=Up;sx(Wp,ws.prototype);Wp.isPureReactComponent=!0;var u1=Array.isArray,cx=Object.prototype.hasOwnProperty,zp={current:null},fx={key:!0,ref:!0,__self:!0,__source:!0};function hx(e,n,t){var r,i={},a=null,o=null;if(n!=null)for(r in n.ref!==void 0&&(o=n.ref),n.key!==void 0&&(a=""+n.key),n)cx.call(n,r)&&!fx.hasOwnProperty(r)&&(i[r]=n[r]);var s=arguments.length-2;if(s===1)i.children=t;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Gu,type:e,key:a,ref:o,props:i,_owner:zp.current}}function KS(e,n){return{$$typeof:Gu,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function Vp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gu}function qS(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var l1=/\/+/g;function fh(e,n){return typeof e=="object"&&e!==null&&e.key!=null?qS(""+e.key):n.toString(36)}function nc(e,n,t,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Gu:case LS:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+fh(o,0):r,u1(i)?(t="",e!=null&&(t=e.replace(l1,"$&/")+"/"),nc(i,n,t,"",function(l){return l})):i!=null&&(Vp(i)&&(i=KS(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(l1,"$&/")+"/")+e)),n.push(i)),1;if(o=0,r=r===""?".":r+":",u1(e))for(var s=0;s<e.length;s++){a=e[s];var u=r+fh(a,s);o+=nc(a,n,t,u,i)}else if(u=XS(e),typeof u=="function")for(e=u.call(e),s=0;!(a=e.next()).done;)a=a.value,u=r+fh(a,s++),o+=nc(a,n,t,u,i);else if(a==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return o}function gl(e,n,t){if(e==null)return e;var r=[],i=0;return nc(e,r,"","",function(a){return n.call(t,a,i++)}),r}function YS(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Pn={current:null},rc={transition:null},QS={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:rc,ReactCurrentOwner:zp};function dx(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:gl,forEach:function(e,n,t){gl(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return gl(e,function(){n++}),n},toArray:function(e){return gl(e,function(n){return n})||[]},only:function(e){if(!Vp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=ws;Xe.Fragment=BS;Xe.Profiler=WS;Xe.PureComponent=Up;Xe.StrictMode=US;Xe.Suspense=$S;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QS;Xe.act=dx;Xe.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sx({},e.props),i=e.key,a=e.ref,o=e._owner;if(n!=null){if(n.ref!==void 0&&(a=n.ref,o=zp.current),n.key!==void 0&&(i=""+n.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in n)cx.call(n,u)&&!fx.hasOwnProperty(u)&&(r[u]=n[u]===void 0&&s!==void 0?s[u]:n[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Gu,type:e.type,key:i,ref:a,props:r,_owner:o}};Xe.createContext=function(e){return e={$$typeof:VS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zS,_context:e},e.Consumer=e};Xe.createElement=hx;Xe.createFactory=function(e){var n=hx.bind(null,e);return n.type=e,n};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:HS,render:e}};Xe.isValidElement=Vp;Xe.lazy=function(e){return{$$typeof:GS,_payload:{_status:-1,_result:e},_init:YS}};Xe.memo=function(e,n){return{$$typeof:jS,type:e,compare:n===void 0?null:n}};Xe.startTransition=function(e){var n=rc.transition;rc.transition={};try{e()}finally{rc.transition=n}};Xe.unstable_act=dx;Xe.useCallback=function(e,n){return Pn.current.useCallback(e,n)};Xe.useContext=function(e){return Pn.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return Pn.current.useDeferredValue(e)};Xe.useEffect=function(e,n){return Pn.current.useEffect(e,n)};Xe.useId=function(){return Pn.current.useId()};Xe.useImperativeHandle=function(e,n,t){return Pn.current.useImperativeHandle(e,n,t)};Xe.useInsertionEffect=function(e,n){return Pn.current.useInsertionEffect(e,n)};Xe.useLayoutEffect=function(e,n){return Pn.current.useLayoutEffect(e,n)};Xe.useMemo=function(e,n){return Pn.current.useMemo(e,n)};Xe.useReducer=function(e,n,t){return Pn.current.useReducer(e,n,t)};Xe.useRef=function(e){return Pn.current.useRef(e)};Xe.useState=function(e){return Pn.current.useState(e)};Xe.useSyncExternalStore=function(e,n,t){return Pn.current.useSyncExternalStore(e,n,t)};Xe.useTransition=function(){return Pn.current.useTransition()};Xe.version="18.3.1";ax.exports=Xe;var It=ax.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS=It,ZS=Symbol.for("react.element"),eC=Symbol.for("react.fragment"),tC=Object.prototype.hasOwnProperty,nC=JS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rC={key:!0,ref:!0,__self:!0,__source:!0};function px(e,n,t){var r,i={},a=null,o=null;t!==void 0&&(a=""+t),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(o=n.ref);for(r in n)tC.call(n,r)&&!rC.hasOwnProperty(r)&&(i[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps,n)i[r]===void 0&&(i[r]=n[r]);return{$$typeof:ZS,type:e,key:a,ref:o,props:i,_owner:nC.current}}Sf.Fragment=eC;Sf.jsx=px;Sf.jsxs=px;ix.exports=Sf;var ce=ix.exports,vx={exports:{}},dr={},mx={exports:{}},gx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(H,X){var Q=H.length;H.push(X);e:for(;0<Q;){var fe=Q-1>>>1,D=H[fe];if(0<i(D,X))H[fe]=X,H[Q]=D,Q=fe;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],Q=H.pop();if(Q!==X){H[0]=Q;e:for(var fe=0,D=H.length,z=D>>>1;fe<z;){var U=2*(fe+1)-1,B=H[U],J=U+1,he=H[J];if(0>i(B,Q))J<D&&0>i(he,B)?(H[fe]=he,H[J]=Q,fe=J):(H[fe]=B,H[U]=Q,fe=U);else if(J<D&&0>i(he,Q))H[fe]=he,H[J]=Q,fe=J;else break e}}return X}function i(H,X){var Q=H.sortIndex-X.sortIndex;return Q!==0?Q:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],l=[],c=1,f=null,h=3,d=!1,v=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(H){for(var X=t(l);X!==null;){if(X.callback===null)r(l);else if(X.startTime<=H)r(l),X.sortIndex=X.expirationTime,n(u,X);else break;X=t(l)}}function w(H){if(p=!1,y(H),!v)if(t(u)!==null)v=!0,ie(_);else{var X=t(l);X!==null&&re(w,X.startTime-H)}}function _(H,X){v=!1,p&&(p=!1,m(b),b=-1),d=!0;var Q=h;try{for(y(X),f=t(u);f!==null&&(!(f.expirationTime>X)||H&&!F());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,h=f.priorityLevel;var D=fe(f.expirationTime<=X);X=e.unstable_now(),typeof D=="function"?f.callback=D:f===t(u)&&r(u),y(X)}else r(u);f=t(u)}if(f!==null)var z=!0;else{var U=t(l);U!==null&&re(w,U.startTime-X),z=!1}return z}finally{f=null,h=Q,d=!1}}var S=!1,E=null,b=-1,C=5,T=-1;function F(){return!(e.unstable_now()-T<C)}function I(){if(E!==null){var H=e.unstable_now();T=H;var X=!0;try{X=E(!0,H)}finally{X?V():(S=!1,E=null)}}else S=!1}var V;if(typeof x=="function")V=function(){x(I)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,G=K.port2;K.port1.onmessage=I,V=function(){G.postMessage(null)}}else V=function(){g(I,0)};function ie(H){E=H,S||(S=!0,V())}function re(H,X){b=g(function(){H(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){v||d||(v=!0,ie(_))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return t(u)},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var Q=h;h=X;try{return H()}finally{h=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=h;h=H;try{return X()}finally{h=Q}},e.unstable_scheduleCallback=function(H,X,Q){var fe=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?fe+Q:fe):Q=fe,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Q+D,H={id:c++,callback:X,priorityLevel:H,startTime:Q,expirationTime:D,sortIndex:-1},Q>fe?(H.sortIndex=Q,n(l,H),t(u)===null&&H===t(l)&&(p?(m(b),b=-1):p=!0,re(w,Q-fe))):(H.sortIndex=D,n(u,H),v||d||(v=!0,ie(_))),H},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(H){var X=h;return function(){var Q=h;h=X;try{return H.apply(this,arguments)}finally{h=Q}}}})(gx);mx.exports=gx;var iC=mx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aC=It,fr=iC;function me(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xx=new Set,vu={};function no(e,n){us(e,n),us(e+"Capture",n)}function us(e,n){for(vu[e]=n,e=0;e<n.length;e++)xx.add(n[e])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yd=Object.prototype.hasOwnProperty,oC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c1={},f1={};function sC(e){return yd.call(f1,e)?!0:yd.call(c1,e)?!1:oC.test(e)?f1[e]=!0:(c1[e]=!0,!1)}function uC(e,n,t,r){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lC(e,n,t,r){if(n===null||typeof n>"u"||uC(e,n,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function On(e,n,t,r,i,a,o){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=o}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hn[e]=new On(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];hn[n]=new On(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hn[e]=new On(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hn[e]=new On(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hn[e]=new On(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hn[e]=new On(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hn[e]=new On(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hn[e]=new On(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hn[e]=new On(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function $p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Hp,$p);hn[n]=new On(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Hp,$p);hn[n]=new On(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Hp,$p);hn[n]=new On(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hn[e]=new On(e,1,!1,e.toLowerCase(),null,!1,!1)});hn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hn[e]=new On(e,1,!1,e.toLowerCase(),null,!0,!0)});function jp(e,n,t,r){var i=hn.hasOwnProperty(n)?hn[n]:null;(i!==null?i.type!==0:r||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(lC(n,t,i,r)&&(t=null),r||i===null?sC(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):i.mustUseProperty?e[i.propertyName]=t===null?i.type===3?!1:"":t:(n=i.attributeName,r=i.attributeNamespace,t===null?e.removeAttribute(n):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}var Di=aC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),Io=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),wd=Symbol.for("react.profiler"),yx=Symbol.for("react.provider"),wx=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),_d=Symbol.for("react.suspense"),Ed=Symbol.for("react.suspense_list"),Kp=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),_x=Symbol.for("react.offscreen"),h1=Symbol.iterator;function Ds(e){return e===null||typeof e!="object"?null:(e=h1&&e[h1]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Object.assign,hh;function Gs(e){if(hh===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);hh=n&&n[1]||""}return`
`+hh+e}var dh=!1;function ph(e,n){if(!e||dh)return"";dh=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(l){var r=l}Reflect.construct(e,[],n)}else{try{n.call()}catch(l){r=l}e.call(n.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=s);break}}}finally{dh=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?Gs(e):""}function cC(e){switch(e.tag){case 5:return Gs(e.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 2:case 15:return e=ph(e.type,!1),e;case 11:return e=ph(e.type.render,!1),e;case 1:return e=ph(e.type,!0),e;default:return""}}function Sd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case No:return"Fragment";case Io:return"Portal";case wd:return"Profiler";case Gp:return"StrictMode";case _d:return"Suspense";case Ed:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wx:return(e.displayName||"Context")+".Consumer";case yx:return(e._context.displayName||"Context")+".Provider";case Xp:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kp:return n=e.displayName||null,n!==null?n:Sd(e.type)||"Memo";case ji:n=e._payload,e=e._init;try{return Sd(e(n))}catch{}}return null}function fC(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sd(n);case 8:return n===Gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ha(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ex(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function hC(e){var n=Ex(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function yl(e){e._valueTracker||(e._valueTracker=hC(e))}function Sx(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=Ex(e)?e.checked?"true":"false":e.value),e=r,e!==t?(n.setValue(e),!0):!1}function vc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cd(e,n){var t=n.checked;return Et({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function d1(e,n){var t=n.defaultValue==null?"":n.defaultValue,r=n.checked!=null?n.checked:n.defaultChecked;t=ha(n.value!=null?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Cx(e,n){n=n.checked,n!=null&&jp(e,"checked",n,!1)}function bd(e,n){Cx(e,n);var t=ha(n.value),r=n.type;if(t!=null)r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Td(e,n.type,t):n.hasOwnProperty("defaultValue")&&Td(e,n.type,ha(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function p1(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!(r!=="submit"&&r!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function Td(e,n,t){(n!=="number"||vc(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var Xs=Array.isArray;function $o(e,n,t,r){if(e=e.options,n){n={};for(var i=0;i<t.length;i++)n["$"+t[i]]=!0;for(t=0;t<e.length;t++)i=n.hasOwnProperty("$"+e[t].value),e[t].selected!==i&&(e[t].selected=i),i&&r&&(e[t].defaultSelected=!0)}else{for(t=""+ha(t),n=null,i=0;i<e.length;i++){if(e[i].value===t){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}n!==null||e[i].disabled||(n=e[i])}n!==null&&(n.selected=!0)}}function kd(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(me(91));return Et({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function v1(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(me(92));if(Xs(t)){if(1<t.length)throw Error(me(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:ha(t)}}function bx(e,n){var t=ha(n.value),r=ha(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),r!=null&&(e.defaultValue=""+r)}function m1(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Tx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ad(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Tx(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wl,kx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,r,i){MSApp.execUnsafeLocalFunction(function(){return e(n,t,r,i)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(wl=wl||document.createElement("div"),wl.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=wl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function mu(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var Qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dC=["Webkit","ms","Moz","O"];Object.keys(Qs).forEach(function(e){dC.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Qs[n]=Qs[e]})});function Ax(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||Qs.hasOwnProperty(e)&&Qs[e]?(""+n).trim():n+"px"}function Rx(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Ax(t,n[t],r);t==="float"&&(t="cssFloat"),r?e.setProperty(t,i):e[t]=i}}var pC=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rd(e,n){if(n){if(pC[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(me(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(me(61))}if(n.style!=null&&typeof n.style!="object")throw Error(me(62))}}function Fd(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=null;function qp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nd=null,jo=null,Go=null;function g1(e){if(e=qu(e)){if(typeof Nd!="function")throw Error(me(280));var n=e.stateNode;n&&(n=Af(n),Nd(e.stateNode,e.type,n))}}function Fx(e){jo?Go?Go.push(e):Go=[e]:jo=e}function Ix(){if(jo){var e=jo,n=Go;if(Go=jo=null,g1(e),n)for(e=0;e<n.length;e++)g1(n[e])}}function Nx(e,n){return e(n)}function Dx(){}var vh=!1;function Px(e,n,t){if(vh)return e(n,t);vh=!0;try{return Nx(e,n,t)}finally{vh=!1,(jo!==null||Go!==null)&&(Dx(),Ix())}}function gu(e,n){var t=e.stateNode;if(t===null)return null;var r=Af(t);if(r===null)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(me(231,n,typeof t));return t}var Dd=!1;if(ki)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Dd=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Dd=!1}function vC(e,n,t,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{n.apply(t,l)}catch(c){this.onError(c)}}var Js=!1,mc=null,gc=!1,Pd=null,mC={onError:function(e){Js=!0,mc=e}};function gC(e,n,t,r,i,a,o,s,u){Js=!1,mc=null,vC.apply(mC,arguments)}function xC(e,n,t,r,i,a,o,s,u){if(gC.apply(this,arguments),Js){if(Js){var l=mc;Js=!1,mc=null}else throw Error(me(198));gc||(gc=!0,Pd=l)}}function ro(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function Ox(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x1(e){if(ro(e)!==e)throw Error(me(188))}function yC(e){var n=e.alternate;if(!n){if(n=ro(e),n===null)throw Error(me(188));return n!==e?null:e}for(var t=e,r=n;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return x1(i),e;if(a===r)return x1(i),n;a=a.sibling}throw Error(me(188))}if(t.return!==r.return)t=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===t){o=!0,t=i,r=a;break}if(s===r){o=!0,r=i,t=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===t){o=!0,t=a,r=i;break}if(s===r){o=!0,r=a,t=i;break}s=s.sibling}if(!o)throw Error(me(189))}}if(t.alternate!==r)throw Error(me(190))}if(t.tag!==3)throw Error(me(188));return t.stateNode.current===t?e:n}function Mx(e){return e=yC(e),e!==null?Lx(e):null}function Lx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Lx(e);if(n!==null)return n;e=e.sibling}return null}var Bx=fr.unstable_scheduleCallback,y1=fr.unstable_cancelCallback,wC=fr.unstable_shouldYield,_C=fr.unstable_requestPaint,At=fr.unstable_now,EC=fr.unstable_getCurrentPriorityLevel,Yp=fr.unstable_ImmediatePriority,Ux=fr.unstable_UserBlockingPriority,xc=fr.unstable_NormalPriority,SC=fr.unstable_LowPriority,Wx=fr.unstable_IdlePriority,Cf=null,ii=null;function CC(e){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Cf,e,void 0,(e.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:kC,bC=Math.log,TC=Math.LN2;function kC(e){return e>>>=0,e===0?32:31-(bC(e)/TC|0)|0}var _l=64,El=4194304;function Ks(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yc(e,n){var t=e.pendingLanes;if(t===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=t&268435455;if(o!==0){var s=o&~i;s!==0?r=Ks(s):(a&=o,a!==0&&(r=Ks(a)))}else o=t&~i,o!==0?r=Ks(o):a!==0&&(r=Ks(a));if(r===0)return 0;if(n!==0&&n!==r&&!(n&i)&&(i=r&-r,a=n&-n,i>=a||i===16&&(a&4194240)!==0))return n;if(r&4&&(r|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=r;0<n;)t=31-Ur(n),i=1<<t,r|=e[t],n&=~i;return r}function AC(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RC(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Ur(a),s=1<<o,u=i[o];u===-1?(!(s&t)||s&r)&&(i[o]=AC(s,n)):u<=n&&(e.expiredLanes|=s),a&=~s}}function Od(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zx(){var e=_l;return _l<<=1,!(_l&4194240)&&(_l=64),e}function mh(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Xu(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Ur(n),e[n]=t}function FC(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var i=31-Ur(t),a=1<<i;n[i]=0,r[i]=-1,e[i]=-1,t&=~a}}function Qp(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-Ur(t),i=1<<r;i&n|e[r]&n&&(e[r]|=n),t&=~i}}var it=0;function Vx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hx,Jp,$x,jx,Gx,Md=!1,Sl=[],ta=null,na=null,ra=null,xu=new Map,yu=new Map,Xi=[],IC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w1(e,n){switch(e){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":xu.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(n.pointerId)}}function Os(e,n,t,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},n!==null&&(n=qu(n),n!==null&&Jp(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,i!==null&&n.indexOf(i)===-1&&n.push(i),e)}function NC(e,n,t,r,i){switch(n){case"focusin":return ta=Os(ta,e,n,t,r,i),!0;case"dragenter":return na=Os(na,e,n,t,r,i),!0;case"mouseover":return ra=Os(ra,e,n,t,r,i),!0;case"pointerover":var a=i.pointerId;return xu.set(a,Os(xu.get(a)||null,e,n,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,yu.set(a,Os(yu.get(a)||null,e,n,t,r,i)),!0}return!1}function Xx(e){var n=La(e.target);if(n!==null){var t=ro(n);if(t!==null){if(n=t.tag,n===13){if(n=Ox(t),n!==null){e.blockedOn=n,Gx(e.priority,function(){$x(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ic(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=Ld(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var r=new t.constructor(t.type,t);Id=r,t.target.dispatchEvent(r),Id=null}else return n=qu(t),n!==null&&Jp(n),e.blockedOn=t,!1;n.shift()}return!0}function _1(e,n,t){ic(e)&&t.delete(n)}function DC(){Md=!1,ta!==null&&ic(ta)&&(ta=null),na!==null&&ic(na)&&(na=null),ra!==null&&ic(ra)&&(ra=null),xu.forEach(_1),yu.forEach(_1)}function Ms(e,n){e.blockedOn===n&&(e.blockedOn=null,Md||(Md=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,DC)))}function wu(e){function n(i){return Ms(i,e)}if(0<Sl.length){Ms(Sl[0],e);for(var t=1;t<Sl.length;t++){var r=Sl[t];r.blockedOn===e&&(r.blockedOn=null)}}for(ta!==null&&Ms(ta,e),na!==null&&Ms(na,e),ra!==null&&Ms(ra,e),xu.forEach(n),yu.forEach(n),t=0;t<Xi.length;t++)r=Xi[t],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xi.length&&(t=Xi[0],t.blockedOn===null);)Xx(t),t.blockedOn===null&&Xi.shift()}var Xo=Di.ReactCurrentBatchConfig,wc=!0;function PC(e,n,t,r){var i=it,a=Xo.transition;Xo.transition=null;try{it=1,Zp(e,n,t,r)}finally{it=i,Xo.transition=a}}function OC(e,n,t,r){var i=it,a=Xo.transition;Xo.transition=null;try{it=4,Zp(e,n,t,r)}finally{it=i,Xo.transition=a}}function Zp(e,n,t,r){if(wc){var i=Ld(e,n,t,r);if(i===null)Th(e,n,r,_c,t),w1(e,r);else if(NC(i,e,n,t,r))r.stopPropagation();else if(w1(e,r),n&4&&-1<IC.indexOf(e)){for(;i!==null;){var a=qu(i);if(a!==null&&Hx(a),a=Ld(e,n,t,r),a===null&&Th(e,n,r,_c,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else Th(e,n,r,null,t)}}var _c=null;function Ld(e,n,t,r){if(_c=null,e=qp(r),e=La(e),e!==null)if(n=ro(e),n===null)e=null;else if(t=n.tag,t===13){if(e=Ox(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return _c=e,null}function Kx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EC()){case Yp:return 1;case Ux:return 4;case xc:case SC:return 16;case Wx:return 536870912;default:return 16}default:return 16}}var qi=null,e0=null,ac=null;function qx(){if(ac)return ac;var e,n=e0,t=n.length,r,i="value"in qi?qi.value:qi.textContent,a=i.length;for(e=0;e<t&&n[e]===i[e];e++);var o=t-e;for(r=1;r<=o&&n[t-r]===i[a-r];r++);return ac=i.slice(e,1<r?1-r:void 0)}function oc(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function E1(){return!1}function pr(e){function n(t,r,i,a,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Cl:E1,this.isPropagationStopped=E1,this}return Et(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),n}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t0=pr(_s),Ku=Et({},_s,{view:0,detail:0}),MC=pr(Ku),gh,xh,Ls,bf=Et({},Ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ls&&(Ls&&e.type==="mousemove"?(gh=e.screenX-Ls.screenX,xh=e.screenY-Ls.screenY):xh=gh=0,Ls=e),gh)},movementY:function(e){return"movementY"in e?e.movementY:xh}}),S1=pr(bf),LC=Et({},bf,{dataTransfer:0}),BC=pr(LC),UC=Et({},Ku,{relatedTarget:0}),yh=pr(UC),WC=Et({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=pr(WC),VC=Et({},_s,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),HC=pr(VC),$C=Et({},_s,{data:0}),C1=pr($C),jC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KC(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=XC[e])?!!n[e]:!1}function n0(){return KC}var qC=Et({},Ku,{key:function(e){if(e.key){var n=jC[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=oc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n0,charCode:function(e){return e.type==="keypress"?oc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YC=pr(qC),QC=Et({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b1=pr(QC),JC=Et({},Ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n0}),ZC=pr(JC),eb=Et({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),tb=pr(eb),nb=Et({},bf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rb=pr(nb),ib=[9,13,27,32],r0=ki&&"CompositionEvent"in window,Zs=null;ki&&"documentMode"in document&&(Zs=document.documentMode);var ab=ki&&"TextEvent"in window&&!Zs,Yx=ki&&(!r0||Zs&&8<Zs&&11>=Zs),T1=" ",k1=!1;function Qx(e,n){switch(e){case"keyup":return ib.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Do=!1;function ob(e,n){switch(e){case"compositionend":return Jx(n);case"keypress":return n.which!==32?null:(k1=!0,T1);case"textInput":return e=n.data,e===T1&&k1?null:e;default:return null}}function sb(e,n){if(Do)return e==="compositionend"||!r0&&Qx(e,n)?(e=qx(),ac=e0=qi=null,Do=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Yx&&n.locale!=="ko"?null:n.data;default:return null}}var ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ub[e.type]:n==="textarea"}function Zx(e,n,t,r){Fx(r),n=Ec(n,"onChange"),0<n.length&&(t=new t0("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var eu=null,_u=null;function lb(e){cy(e,0)}function Tf(e){var n=Mo(e);if(Sx(n))return e}function cb(e,n){if(e==="change")return n}var ey=!1;if(ki){var wh;if(ki){var _h="oninput"in document;if(!_h){var R1=document.createElement("div");R1.setAttribute("oninput","return;"),_h=typeof R1.oninput=="function"}wh=_h}else wh=!1;ey=wh&&(!document.documentMode||9<document.documentMode)}function F1(){eu&&(eu.detachEvent("onpropertychange",ty),_u=eu=null)}function ty(e){if(e.propertyName==="value"&&Tf(_u)){var n=[];Zx(n,_u,e,qp(e)),Px(lb,n)}}function fb(e,n,t){e==="focusin"?(F1(),eu=n,_u=t,eu.attachEvent("onpropertychange",ty)):e==="focusout"&&F1()}function hb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tf(_u)}function db(e,n){if(e==="click")return Tf(n)}function pb(e,n){if(e==="input"||e==="change")return Tf(n)}function vb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Hr=typeof Object.is=="function"?Object.is:vb;function Eu(e,n){if(Hr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!yd.call(n,i)||!Hr(e[i],n[i]))return!1}return!0}function I1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function N1(e,n){var t=I1(e);e=0;for(var r;t;){if(t.nodeType===3){if(r=e+t.textContent.length,e<=n&&r>=n)return{node:t,offset:n-e};e=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=I1(t)}}function ny(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ny(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ry(){for(var e=window,n=vc();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=vc(e.document)}return n}function i0(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function mb(e){var n=ry(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&ny(t.ownerDocument.documentElement,t)){if(r!==null&&i0(t)){if(n=r.start,e=r.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=N1(t,a);var o=N1(t,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(n=n.createRange(),n.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(n),e.extend(o.node,o.offset)):(n.setEnd(o.node,o.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gb=ki&&"documentMode"in document&&11>=document.documentMode,Po=null,Bd=null,tu=null,Ud=!1;function D1(e,n,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ud||Po==null||Po!==vc(r)||(r=Po,"selectionStart"in r&&i0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tu&&Eu(tu,r)||(tu=r,r=Ec(Bd,"onSelect"),0<r.length&&(n=new t0("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=Po)))}function bl(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Oo={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},Eh={},iy={};ki&&(iy=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function kf(e){if(Eh[e])return Eh[e];if(!Oo[e])return e;var n=Oo[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in iy)return Eh[e]=n[t];return e}var ay=kf("animationend"),oy=kf("animationiteration"),sy=kf("animationstart"),uy=kf("transitionend"),ly=new Map,P1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ya(e,n){ly.set(e,n),no(n,[e])}for(var Sh=0;Sh<P1.length;Sh++){var Ch=P1[Sh],xb=Ch.toLowerCase(),yb=Ch[0].toUpperCase()+Ch.slice(1);ya(xb,"on"+yb)}ya(ay,"onAnimationEnd");ya(oy,"onAnimationIteration");ya(sy,"onAnimationStart");ya("dblclick","onDoubleClick");ya("focusin","onFocus");ya("focusout","onBlur");ya(uy,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wb=new Set("cancel close invalid load scroll toggle".split(" ").concat(qs));function O1(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,xC(r,n,void 0,e),e.currentTarget=null}function cy(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var r=e[t],i=r.event;r=r.listeners;e:{var a=void 0;if(n)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;O1(i,s,l),a=u}else for(o=0;o<r.length;o++){if(s=r[o],u=s.instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;O1(i,s,l),a=u}}}if(gc)throw e=Pd,gc=!1,Pd=null,e}function lt(e,n){var t=n[$d];t===void 0&&(t=n[$d]=new Set);var r=e+"__bubble";t.has(r)||(fy(n,e,2,!1),t.add(r))}function bh(e,n,t){var r=0;n&&(r|=4),fy(t,e,r,n)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function Su(e){if(!e[Tl]){e[Tl]=!0,xx.forEach(function(t){t!=="selectionchange"&&(wb.has(t)||bh(t,!1,e),bh(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Tl]||(n[Tl]=!0,bh("selectionchange",!1,n))}}function fy(e,n,t,r){switch(Kx(n)){case 1:var i=PC;break;case 4:i=OC;break;default:i=Zp}t=i.bind(null,n,t,e),i=void 0,!Dd||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(n,t,{capture:!0,passive:i}):e.addEventListener(n,t,!0):i!==void 0?e.addEventListener(n,t,{passive:i}):e.addEventListener(n,t,!1)}function Th(e,n,t,r,i){var a=r;if(!(n&1)&&!(n&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;s!==null;){if(o=La(s),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}s=s.parentNode}}r=r.return}Px(function(){var l=a,c=qp(t),f=[];e:{var h=ly.get(e);if(h!==void 0){var d=t0,v=e;switch(e){case"keypress":if(oc(t)===0)break e;case"keydown":case"keyup":d=YC;break;case"focusin":v="focus",d=yh;break;case"focusout":v="blur",d=yh;break;case"beforeblur":case"afterblur":d=yh;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=S1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=BC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=ZC;break;case ay:case oy:case sy:d=zC;break;case uy:d=tb;break;case"scroll":d=MC;break;case"wheel":d=rb;break;case"copy":case"cut":case"paste":d=HC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=b1}var p=(n&4)!==0,g=!p&&e==="scroll",m=p?h!==null?h+"Capture":null:h;p=[];for(var x=l,y;x!==null;){y=x;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,m!==null&&(w=gu(x,m),w!=null&&p.push(Cu(x,w,y)))),g)break;x=x.return}0<p.length&&(h=new d(h,v,null,t,c),f.push({event:h,listeners:p}))}}if(!(n&7)){e:{if(h=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",h&&t!==Id&&(v=t.relatedTarget||t.fromElement)&&(La(v)||v[Ai]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(v=t.relatedTarget||t.toElement,d=l,v=v?La(v):null,v!==null&&(g=ro(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=l),d!==v)){if(p=S1,w="onMouseLeave",m="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(p=b1,w="onPointerLeave",m="onPointerEnter",x="pointer"),g=d==null?h:Mo(d),y=v==null?h:Mo(v),h=new p(w,x+"leave",d,t,c),h.target=g,h.relatedTarget=y,w=null,La(c)===l&&(p=new p(m,x+"enter",v,t,c),p.target=y,p.relatedTarget=g,w=p),g=w,d&&v)t:{for(p=d,m=v,x=0,y=p;y;y=xo(y))x++;for(y=0,w=m;w;w=xo(w))y++;for(;0<x-y;)p=xo(p),x--;for(;0<y-x;)m=xo(m),y--;for(;x--;){if(p===m||m!==null&&p===m.alternate)break t;p=xo(p),m=xo(m)}p=null}else p=null;d!==null&&M1(f,h,d,p,!1),v!==null&&g!==null&&M1(f,g,v,p,!0)}}e:{if(h=l?Mo(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var _=cb;else if(A1(h))if(ey)_=pb;else{_=hb;var S=fb}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=db);if(_&&(_=_(e,l))){Zx(f,_,t,c);break e}S&&S(e,h,l),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Td(h,"number",h.value)}switch(S=l?Mo(l):window,e){case"focusin":(A1(S)||S.contentEditable==="true")&&(Po=S,Bd=l,tu=null);break;case"focusout":tu=Bd=Po=null;break;case"mousedown":Ud=!0;break;case"contextmenu":case"mouseup":case"dragend":Ud=!1,D1(f,t,c);break;case"selectionchange":if(gb)break;case"keydown":case"keyup":D1(f,t,c)}var E;if(r0)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Do?Qx(e,t)&&(b="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(Yx&&t.locale!=="ko"&&(Do||b!=="onCompositionStart"?b==="onCompositionEnd"&&Do&&(E=qx()):(qi=c,e0="value"in qi?qi.value:qi.textContent,Do=!0)),S=Ec(l,b),0<S.length&&(b=new C1(b,e,null,t,c),f.push({event:b,listeners:S}),E?b.data=E:(E=Jx(t),E!==null&&(b.data=E)))),(E=ab?ob(e,t):sb(e,t))&&(l=Ec(l,"onBeforeInput"),0<l.length&&(c=new C1("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:l}),c.data=E))}cy(f,n)})}function Cu(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Ec(e,n){for(var t=n+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=gu(e,t),a!=null&&r.unshift(Cu(e,a,i)),a=gu(e,n),a!=null&&r.push(Cu(e,a,i))),e=e.return}return r}function xo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function M1(e,n,t,r,i){for(var a=n._reactName,o=[];t!==null&&t!==r;){var s=t,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=gu(t,a),u!=null&&o.unshift(Cu(t,u,s))):i||(u=gu(t,a),u!=null&&o.push(Cu(t,u,s)))),t=t.return}o.length!==0&&e.push({event:n,listeners:o})}var _b=/\r\n?/g,Eb=/\u0000|\uFFFD/g;function L1(e){return(typeof e=="string"?e:""+e).replace(_b,`
`).replace(Eb,"")}function kl(e,n,t){if(n=L1(n),L1(e)!==n&&t)throw Error(me(425))}function Sc(){}var Wd=null,zd=null;function Vd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,Sb=typeof clearTimeout=="function"?clearTimeout:void 0,B1=typeof Promise=="function"?Promise:void 0,Cb=typeof queueMicrotask=="function"?queueMicrotask:typeof B1<"u"?function(e){return B1.resolve(null).then(e).catch(bb)}:Hd;function bb(e){setTimeout(function(){throw e})}function kh(e,n){var t=n,r=0;do{var i=t.nextSibling;if(e.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){e.removeChild(i),wu(n);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);wu(n)}function ia(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function U1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var Es=Math.random().toString(36).slice(2),ei="__reactFiber$"+Es,bu="__reactProps$"+Es,Ai="__reactContainer$"+Es,$d="__reactEvents$"+Es,Tb="__reactListeners$"+Es,kb="__reactHandles$"+Es;function La(e){var n=e[ei];if(n)return n;for(var t=e.parentNode;t;){if(n=t[Ai]||t[ei]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=U1(e);e!==null;){if(t=e[ei])return t;e=U1(e)}return n}e=t,t=e.parentNode}return null}function qu(e){return e=e[ei]||e[Ai],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function Af(e){return e[bu]||null}var jd=[],Lo=-1;function wa(e){return{current:e}}function ft(e){0>Lo||(e.current=jd[Lo],jd[Lo]=null,Lo--)}function st(e,n){Lo++,jd[Lo]=e.current,e.current=n}var da={},Tn=wa(da),Vn=wa(!1),Ga=da;function ls(e,n){var t=e.type.contextTypes;if(!t)return da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=n[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),i}function Hn(e){return e=e.childContextTypes,e!=null}function Cc(){ft(Vn),ft(Tn)}function W1(e,n,t){if(Tn.current!==da)throw Error(me(168));st(Tn,n),st(Vn,t)}function hy(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(me(108,fC(e)||"Unknown",i));return Et({},t,r)}function bc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||da,Ga=Tn.current,st(Tn,e),st(Vn,Vn.current),!0}function z1(e,n,t){var r=e.stateNode;if(!r)throw Error(me(169));t?(e=hy(e,n,Ga),r.__reactInternalMemoizedMergedChildContext=e,ft(Vn),ft(Tn),st(Tn,e)):ft(Vn),st(Vn,t)}var yi=null,Rf=!1,Ah=!1;function dy(e){yi===null?yi=[e]:yi.push(e)}function Ab(e){Rf=!0,dy(e)}function _a(){if(!Ah&&yi!==null){Ah=!0;var e=0,n=it;try{var t=yi;for(it=1;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}yi=null,Rf=!1}catch(i){throw yi!==null&&(yi=yi.slice(e+1)),Bx(Yp,_a),i}finally{it=n,Ah=!1}}return null}var Bo=[],Uo=0,Tc=null,kc=0,gr=[],xr=0,Xa=null,_i=1,Ei="";function Fa(e,n){Bo[Uo++]=kc,Bo[Uo++]=Tc,Tc=e,kc=n}function py(e,n,t){gr[xr++]=_i,gr[xr++]=Ei,gr[xr++]=Xa,Xa=e;var r=_i;e=Ei;var i=32-Ur(r)-1;r&=~(1<<i),t+=1;var a=32-Ur(n)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_i=1<<32-Ur(n)+i|t<<i|r,Ei=a+e}else _i=1<<a|t<<i|r,Ei=e}function a0(e){e.return!==null&&(Fa(e,1),py(e,1,0))}function o0(e){for(;e===Tc;)Tc=Bo[--Uo],Bo[Uo]=null,kc=Bo[--Uo],Bo[Uo]=null;for(;e===Xa;)Xa=gr[--xr],gr[xr]=null,Ei=gr[--xr],gr[xr]=null,_i=gr[--xr],gr[xr]=null}var lr=null,ar=null,dt=!1,Pr=null;function vy(e,n){var t=_r(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function V1(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,lr=e,ar=ia(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,lr=e,ar=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=Xa!==null?{id:_i,overflow:Ei}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=_r(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,lr=e,ar=null,!0):!1;default:return!1}}function Gd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xd(e){if(dt){var n=ar;if(n){var t=n;if(!V1(e,n)){if(Gd(e))throw Error(me(418));n=ia(t.nextSibling);var r=lr;n&&V1(e,n)?vy(r,t):(e.flags=e.flags&-4097|2,dt=!1,lr=e)}}else{if(Gd(e))throw Error(me(418));e.flags=e.flags&-4097|2,dt=!1,lr=e}}}function H1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lr=e}function Al(e){if(e!==lr)return!1;if(!dt)return H1(e),dt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Vd(e.type,e.memoizedProps)),n&&(n=ar)){if(Gd(e))throw my(),Error(me(418));for(;n;)vy(e,n),n=ia(n.nextSibling)}if(H1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){ar=ia(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}ar=null}}else ar=lr?ia(e.stateNode.nextSibling):null;return!0}function my(){for(var e=ar;e;)e=ia(e.nextSibling)}function cs(){ar=lr=null,dt=!1}function s0(e){Pr===null?Pr=[e]:Pr.push(e)}var Rb=Di.ReactCurrentBatchConfig;function Bs(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(me(309));var r=t.stateNode}if(!r)throw Error(me(147,e));var i=r,a=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===a?n.ref:(n=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},n._stringRef=a,n)}if(typeof e!="string")throw Error(me(284));if(!t._owner)throw Error(me(290,e))}return e}function Rl(e,n){throw e=Object.prototype.toString.call(n),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function $1(e){var n=e._init;return n(e._payload)}function gy(e){function n(m,x){if(e){var y=m.deletions;y===null?(m.deletions=[x],m.flags|=16):y.push(x)}}function t(m,x){if(!e)return null;for(;x!==null;)n(m,x),x=x.sibling;return null}function r(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function i(m,x){return m=ua(m,x),m.index=0,m.sibling=null,m}function a(m,x,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<x?(m.flags|=2,x):y):(m.flags|=2,x)):(m.flags|=1048576,x)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function s(m,x,y,w){return x===null||x.tag!==6?(x=Oh(y,m.mode,w),x.return=m,x):(x=i(x,y),x.return=m,x)}function u(m,x,y,w){var _=y.type;return _===No?c(m,x,y.props.children,w,y.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ji&&$1(_)===x.type)?(w=i(x,y.props),w.ref=Bs(m,x,y),w.return=m,w):(w=dc(y.type,y.key,y.props,null,m.mode,w),w.ref=Bs(m,x,y),w.return=m,w)}function l(m,x,y,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Mh(y,m.mode,w),x.return=m,x):(x=i(x,y.children||[]),x.return=m,x)}function c(m,x,y,w,_){return x===null||x.tag!==7?(x=Ha(y,m.mode,w,_),x.return=m,x):(x=i(x,y),x.return=m,x)}function f(m,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Oh(""+x,m.mode,y),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xl:return y=dc(x.type,x.key,x.props,null,m.mode,y),y.ref=Bs(m,null,x),y.return=m,y;case Io:return x=Mh(x,m.mode,y),x.return=m,x;case ji:var w=x._init;return f(m,w(x._payload),y)}if(Xs(x)||Ds(x))return x=Ha(x,m.mode,y,null),x.return=m,x;Rl(m,x)}return null}function h(m,x,y,w){var _=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:s(m,x,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xl:return y.key===_?u(m,x,y,w):null;case Io:return y.key===_?l(m,x,y,w):null;case ji:return _=y._init,h(m,x,_(y._payload),w)}if(Xs(y)||Ds(y))return _!==null?null:c(m,x,y,w,null);Rl(m,y)}return null}function d(m,x,y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(y)||null,s(x,m,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xl:return m=m.get(w.key===null?y:w.key)||null,u(x,m,w,_);case Io:return m=m.get(w.key===null?y:w.key)||null,l(x,m,w,_);case ji:var S=w._init;return d(m,x,y,S(w._payload),_)}if(Xs(w)||Ds(w))return m=m.get(y)||null,c(x,m,w,_,null);Rl(x,w)}return null}function v(m,x,y,w){for(var _=null,S=null,E=x,b=x=0,C=null;E!==null&&b<y.length;b++){E.index>b?(C=E,E=null):C=E.sibling;var T=h(m,E,y[b],w);if(T===null){E===null&&(E=C);break}e&&E&&T.alternate===null&&n(m,E),x=a(T,x,b),S===null?_=T:S.sibling=T,S=T,E=C}if(b===y.length)return t(m,E),dt&&Fa(m,b),_;if(E===null){for(;b<y.length;b++)E=f(m,y[b],w),E!==null&&(x=a(E,x,b),S===null?_=E:S.sibling=E,S=E);return dt&&Fa(m,b),_}for(E=r(m,E);b<y.length;b++)C=d(E,m,b,y[b],w),C!==null&&(e&&C.alternate!==null&&E.delete(C.key===null?b:C.key),x=a(C,x,b),S===null?_=C:S.sibling=C,S=C);return e&&E.forEach(function(F){return n(m,F)}),dt&&Fa(m,b),_}function p(m,x,y,w){var _=Ds(y);if(typeof _!="function")throw Error(me(150));if(y=_.call(y),y==null)throw Error(me(151));for(var S=_=null,E=x,b=x=0,C=null,T=y.next();E!==null&&!T.done;b++,T=y.next()){E.index>b?(C=E,E=null):C=E.sibling;var F=h(m,E,T.value,w);if(F===null){E===null&&(E=C);break}e&&E&&F.alternate===null&&n(m,E),x=a(F,x,b),S===null?_=F:S.sibling=F,S=F,E=C}if(T.done)return t(m,E),dt&&Fa(m,b),_;if(E===null){for(;!T.done;b++,T=y.next())T=f(m,T.value,w),T!==null&&(x=a(T,x,b),S===null?_=T:S.sibling=T,S=T);return dt&&Fa(m,b),_}for(E=r(m,E);!T.done;b++,T=y.next())T=d(E,m,b,T.value,w),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?b:T.key),x=a(T,x,b),S===null?_=T:S.sibling=T,S=T);return e&&E.forEach(function(I){return n(m,I)}),dt&&Fa(m,b),_}function g(m,x,y,w){if(typeof y=="object"&&y!==null&&y.type===No&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case xl:e:{for(var _=y.key,S=x;S!==null;){if(S.key===_){if(_=y.type,_===No){if(S.tag===7){t(m,S.sibling),x=i(S,y.props.children),x.return=m,m=x;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ji&&$1(_)===S.type){t(m,S.sibling),x=i(S,y.props),x.ref=Bs(m,S,y),x.return=m,m=x;break e}t(m,S);break}else n(m,S);S=S.sibling}y.type===No?(x=Ha(y.props.children,m.mode,w,y.key),x.return=m,m=x):(w=dc(y.type,y.key,y.props,null,m.mode,w),w.ref=Bs(m,x,y),w.return=m,m=w)}return o(m);case Io:e:{for(S=y.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){t(m,x.sibling),x=i(x,y.children||[]),x.return=m,m=x;break e}else{t(m,x);break}else n(m,x);x=x.sibling}x=Mh(y,m.mode,w),x.return=m,m=x}return o(m);case ji:return S=y._init,g(m,x,S(y._payload),w)}if(Xs(y))return v(m,x,y,w);if(Ds(y))return p(m,x,y,w);Rl(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(t(m,x.sibling),x=i(x,y),x.return=m,m=x):(t(m,x),x=Oh(y,m.mode,w),x.return=m,m=x),o(m)):t(m,x)}return g}var fs=gy(!0),xy=gy(!1),Ac=wa(null),Rc=null,Wo=null,u0=null;function l0(){u0=Wo=Rc=null}function c0(e){var n=Ac.current;ft(Ac),e._currentValue=n}function Kd(e,n,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Ko(e,n){Rc=e,u0=Wo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(zn=!0),e.firstContext=null)}function Cr(e){var n=e._currentValue;if(u0!==e)if(e={context:e,memoizedValue:n,next:null},Wo===null){if(Rc===null)throw Error(me(308));Wo=e,Rc.dependencies={lanes:0,firstContext:e}}else Wo=Wo.next=e;return n}var Ba=null;function f0(e){Ba===null?Ba=[e]:Ba.push(e)}function yy(e,n,t,r){var i=n.interleaved;return i===null?(t.next=t,f0(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ri(e,r)}function Ri(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var Gi=!1;function h0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wy(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Si(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function aa(e,n,t){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var i=r.pending;return i===null?n.next=n:(n.next=i.next,i.next=n),r.pending=n,Ri(e,t)}return i=r.interleaved,i===null?(n.next=n,f0(r)):(n.next=i.next,i.next=n),r.interleaved=n,Ri(e,t)}function sc(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,Qp(e,t)}}function j1(e,n){var t=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=o:a=a.next=o,t=t.next}while(t!==null);a===null?i=a=n:a=a.next=n}else i=a=n;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Fc(e,n,t,r){var i=e.updateQueue;Gi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,o===null?a=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;o=0,c=l=u=null,s=a;do{var h=s.lane,d=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,p=s;switch(h=n,d=t,p.tag){case 1:if(v=p.payload,typeof v=="function"){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,h=typeof v=="function"?v.call(d,f,h):v,h==null)break e;f=Et({},f,h);break e;case 2:Gi=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,n=i.shared.interleaved,n!==null){i=n;do o|=i.lane,i=i.next;while(i!==n)}else a===null&&(i.shared.lanes=0);qa|=o,e.lanes=o,e.memoizedState=f}}function G1(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var r=e[n],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(me(191,i));i.call(r)}}}var Yu={},ai=wa(Yu),Tu=wa(Yu),ku=wa(Yu);function Ua(e){if(e===Yu)throw Error(me(174));return e}function d0(e,n){switch(st(ku,n),st(Tu,e),st(ai,Yu),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ad(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Ad(n,e)}ft(ai),st(ai,n)}function hs(){ft(ai),ft(Tu),ft(ku)}function _y(e){Ua(ku.current);var n=Ua(ai.current),t=Ad(n,e.type);n!==t&&(st(Tu,e),st(ai,t))}function p0(e){Tu.current===e&&(ft(ai),ft(Tu))}var xt=wa(0);function Ic(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Rh=[];function v0(){for(var e=0;e<Rh.length;e++)Rh[e]._workInProgressVersionPrimary=null;Rh.length=0}var uc=Di.ReactCurrentDispatcher,Fh=Di.ReactCurrentBatchConfig,Ka=0,_t=null,Bt=null,Xt=null,Nc=!1,nu=!1,Au=0,Fb=0;function mn(){throw Error(me(321))}function m0(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!Hr(e[t],n[t]))return!1;return!0}function g0(e,n,t,r,i,a){if(Ka=a,_t=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,uc.current=e===null||e.memoizedState===null?Pb:Ob,e=t(r,i),nu){a=0;do{if(nu=!1,Au=0,25<=a)throw Error(me(301));a+=1,Xt=Bt=null,n.updateQueue=null,uc.current=Mb,e=t(r,i)}while(nu)}if(uc.current=Dc,n=Bt!==null&&Bt.next!==null,Ka=0,Xt=Bt=_t=null,Nc=!1,n)throw Error(me(300));return e}function x0(){var e=Au!==0;return Au=0,e}function Qr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?_t.memoizedState=Xt=e:Xt=Xt.next=e,Xt}function br(){if(Bt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var n=Xt===null?_t.memoizedState:Xt.next;if(n!==null)Xt=n,Bt=e;else{if(e===null)throw Error(me(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Xt===null?_t.memoizedState=Xt=e:Xt=Xt.next=e}return Xt}function Ru(e,n){return typeof n=="function"?n(e):n}function Ih(e){var n=br(),t=n.queue;if(t===null)throw Error(me(311));t.lastRenderedReducer=e;var r=Bt,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,u=null,l=a;do{var c=l.lane;if((Ka&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,o=r):u=u.next=f,_t.lanes|=c,qa|=c}l=l.next}while(l!==null&&l!==a);u===null?o=r:u.next=s,Hr(r,n.memoizedState)||(zn=!0),n.memoizedState=r,n.baseState=o,n.baseQueue=u,t.lastRenderedState=r}if(e=t.interleaved,e!==null){i=e;do a=i.lane,_t.lanes|=a,qa|=a,i=i.next;while(i!==e)}else i===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Nh(e){var n=br(),t=n.queue;if(t===null)throw Error(me(311));t.lastRenderedReducer=e;var r=t.dispatch,i=t.pending,a=n.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Hr(a,n.memoizedState)||(zn=!0),n.memoizedState=a,n.baseQueue===null&&(n.baseState=a),t.lastRenderedState=a}return[a,r]}function Ey(){}function Sy(e,n){var t=_t,r=br(),i=n(),a=!Hr(r.memoizedState,i);if(a&&(r.memoizedState=i,zn=!0),r=r.queue,y0(Ty.bind(null,t,r,e),[e]),r.getSnapshot!==n||a||Xt!==null&&Xt.memoizedState.tag&1){if(t.flags|=2048,Fu(9,by.bind(null,t,r,i,n),void 0,null),Qt===null)throw Error(me(349));Ka&30||Cy(t,n,i)}return i}function Cy(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=_t.updateQueue,n===null?(n={lastEffect:null,stores:null},_t.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function by(e,n,t,r){n.value=t,n.getSnapshot=r,ky(n)&&Ay(e)}function Ty(e,n,t){return t(function(){ky(n)&&Ay(e)})}function ky(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!Hr(e,t)}catch{return!0}}function Ay(e){var n=Ri(e,1);n!==null&&Wr(n,e,1,-1)}function X1(e){var n=Qr();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ru,lastRenderedState:e},n.queue=e,e=e.dispatch=Db.bind(null,_t,e),[n.memoizedState,e]}function Fu(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},n=_t.updateQueue,n===null?(n={lastEffect:null,stores:null},_t.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e)),e}function Ry(){return br().memoizedState}function lc(e,n,t,r){var i=Qr();_t.flags|=e,i.memoizedState=Fu(1|n,t,void 0,r===void 0?null:r)}function Ff(e,n,t,r){var i=br();r=r===void 0?null:r;var a=void 0;if(Bt!==null){var o=Bt.memoizedState;if(a=o.destroy,r!==null&&m0(r,o.deps)){i.memoizedState=Fu(n,t,a,r);return}}_t.flags|=e,i.memoizedState=Fu(1|n,t,a,r)}function K1(e,n){return lc(8390656,8,e,n)}function y0(e,n){return Ff(2048,8,e,n)}function Fy(e,n){return Ff(4,2,e,n)}function Iy(e,n){return Ff(4,4,e,n)}function Ny(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Dy(e,n,t){return t=t!=null?t.concat([e]):null,Ff(4,4,Ny.bind(null,n,e),t)}function w0(){}function Py(e,n){var t=br();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&m0(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Oy(e,n){var t=br();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&m0(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function My(e,n,t){return Ka&21?(Hr(t,n)||(t=zx(),_t.lanes|=t,qa|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,zn=!0),e.memoizedState=t)}function Ib(e,n){var t=it;it=t!==0&&4>t?t:4,e(!0);var r=Fh.transition;Fh.transition={};try{e(!1),n()}finally{it=t,Fh.transition=r}}function Ly(){return br().memoizedState}function Nb(e,n,t){var r=sa(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},By(e))Uy(n,t);else if(t=yy(e,n,t,r),t!==null){var i=Nn();Wr(t,e,r,i),Wy(t,n,r)}}function Db(e,n,t){var r=sa(e),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(By(e))Uy(n,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=n.lastRenderedReducer,a!==null))try{var o=n.lastRenderedState,s=a(o,t);if(i.hasEagerState=!0,i.eagerState=s,Hr(s,o)){var u=n.interleaved;u===null?(i.next=i,f0(n)):(i.next=u.next,u.next=i),n.interleaved=i;return}}catch{}finally{}t=yy(e,n,i,r),t!==null&&(i=Nn(),Wr(t,e,r,i),Wy(t,n,r))}}function By(e){var n=e.alternate;return e===_t||n!==null&&n===_t}function Uy(e,n){nu=Nc=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Wy(e,n,t){if(t&4194240){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,Qp(e,t)}}var Dc={readContext:Cr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},Pb={readContext:Cr,useCallback:function(e,n){return Qr().memoizedState=[e,n===void 0?null:n],e},useContext:Cr,useEffect:K1,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,lc(4194308,4,Ny.bind(null,n,e),t)},useLayoutEffect:function(e,n){return lc(4194308,4,e,n)},useInsertionEffect:function(e,n){return lc(4,2,e,n)},useMemo:function(e,n){var t=Qr();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=Qr();return n=t!==void 0?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=Nb.bind(null,_t,e),[r.memoizedState,e]},useRef:function(e){var n=Qr();return e={current:e},n.memoizedState=e},useState:X1,useDebugValue:w0,useDeferredValue:function(e){return Qr().memoizedState=e},useTransition:function(){var e=X1(!1),n=e[0];return e=Ib.bind(null,e[1]),Qr().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=_t,i=Qr();if(dt){if(t===void 0)throw Error(me(407));t=t()}else{if(t=n(),Qt===null)throw Error(me(349));Ka&30||Cy(r,n,t)}i.memoizedState=t;var a={value:t,getSnapshot:n};return i.queue=a,K1(Ty.bind(null,r,a,e),[e]),r.flags|=2048,Fu(9,by.bind(null,r,a,t,n),void 0,null),t},useId:function(){var e=Qr(),n=Qt.identifierPrefix;if(dt){var t=Ei,r=_i;t=(r&~(1<<32-Ur(r)-1)).toString(32)+t,n=":"+n+"R"+t,t=Au++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=Fb++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Ob={readContext:Cr,useCallback:Py,useContext:Cr,useEffect:y0,useImperativeHandle:Dy,useInsertionEffect:Fy,useLayoutEffect:Iy,useMemo:Oy,useReducer:Ih,useRef:Ry,useState:function(){return Ih(Ru)},useDebugValue:w0,useDeferredValue:function(e){var n=br();return My(n,Bt.memoizedState,e)},useTransition:function(){var e=Ih(Ru)[0],n=br().memoizedState;return[e,n]},useMutableSource:Ey,useSyncExternalStore:Sy,useId:Ly,unstable_isNewReconciler:!1},Mb={readContext:Cr,useCallback:Py,useContext:Cr,useEffect:y0,useImperativeHandle:Dy,useInsertionEffect:Fy,useLayoutEffect:Iy,useMemo:Oy,useReducer:Nh,useRef:Ry,useState:function(){return Nh(Ru)},useDebugValue:w0,useDeferredValue:function(e){var n=br();return Bt===null?n.memoizedState=e:My(n,Bt.memoizedState,e)},useTransition:function(){var e=Nh(Ru)[0],n=br().memoizedState;return[e,n]},useMutableSource:Ey,useSyncExternalStore:Sy,useId:Ly,unstable_isNewReconciler:!1};function Nr(e,n){if(e&&e.defaultProps){n=Et({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function qd(e,n,t,r){n=e.memoizedState,t=t(r,n),t=t==null?n:Et({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var If={isMounted:function(e){return(e=e._reactInternals)?ro(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=Nn(),i=sa(e),a=Si(r,i);a.payload=n,t!=null&&(a.callback=t),n=aa(e,a,i),n!==null&&(Wr(n,e,i,r),sc(n,e,i))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=Nn(),i=sa(e),a=Si(r,i);a.tag=1,a.payload=n,t!=null&&(a.callback=t),n=aa(e,a,i),n!==null&&(Wr(n,e,i,r),sc(n,e,i))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=Nn(),r=sa(e),i=Si(t,r);i.tag=2,n!=null&&(i.callback=n),n=aa(e,i,r),n!==null&&(Wr(n,e,r,t),sc(n,e,r))}};function q1(e,n,t,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):n.prototype&&n.prototype.isPureReactComponent?!Eu(t,r)||!Eu(i,a):!0}function zy(e,n,t){var r=!1,i=da,a=n.contextType;return typeof a=="object"&&a!==null?a=Cr(a):(i=Hn(n)?Ga:Tn.current,r=n.contextTypes,a=(r=r!=null)?ls(e,i):da),n=new n(t,a),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=If,e.stateNode=n,n._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),n}function Y1(e,n,t,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&If.enqueueReplaceState(n,n.state,null)}function Yd(e,n,t,r){var i=e.stateNode;i.props=t,i.state=e.memoizedState,i.refs={},h0(e);var a=n.contextType;typeof a=="object"&&a!==null?i.context=Cr(a):(a=Hn(n)?Ga:Tn.current,i.context=ls(e,a)),i.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(qd(e,n,a,t),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(n=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),n!==i.state&&If.enqueueReplaceState(i,i.state,null),Fc(e,t,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ds(e,n){try{var t="",r=n;do t+=cC(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:n,stack:i,digest:null}}function Dh(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function Qd(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var Lb=typeof WeakMap=="function"?WeakMap:Map;function Vy(e,n,t){t=Si(-1,t),t.tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Oc||(Oc=!0,sp=r),Qd(e,n)},t}function Hy(e,n,t){t=Si(-1,t),t.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=n.value;t.payload=function(){return r(i)},t.callback=function(){Qd(e,n)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Qd(e,n),typeof r!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})}),t}function Q1(e,n,t){var r=e.pingCache;if(r===null){r=e.pingCache=new Lb;var i=new Set;r.set(n,i)}else i=r.get(n),i===void 0&&(i=new Set,r.set(n,i));i.has(t)||(i.add(t),e=Qb.bind(null,e,n,t),n.then(e,e))}function J1(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Z1(e,n,t,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=Si(-1,1),n.tag=2,aa(t,n,1))),t.lanes|=1),e)}var Bb=Di.ReactCurrentOwner,zn=!1;function An(e,n,t,r){n.child=e===null?xy(n,null,t,r):fs(n,e.child,t,r)}function em(e,n,t,r,i){t=t.render;var a=n.ref;return Ko(n,i),r=g0(e,n,t,r,a,i),t=x0(),e!==null&&!zn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i,Fi(e,n,i)):(dt&&t&&a0(n),n.flags|=1,An(e,n,r,i),n.child)}function tm(e,n,t,r,i){if(e===null){var a=t.type;return typeof a=="function"&&!A0(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=a,$y(e,n,a,r,i)):(e=dc(t.type,null,r,n,n.mode,i),e.ref=n.ref,e.return=n,n.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(t=t.compare,t=t!==null?t:Eu,t(o,r)&&e.ref===n.ref)return Fi(e,n,i)}return n.flags|=1,e=ua(a,r),e.ref=n.ref,e.return=n,n.child=e}function $y(e,n,t,r,i){if(e!==null){var a=e.memoizedProps;if(Eu(a,r)&&e.ref===n.ref)if(zn=!1,n.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(zn=!0);else return n.lanes=e.lanes,Fi(e,n,i)}return Jd(e,n,t,r,i)}function jy(e,n,t){var r=n.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Vo,Zn),Zn|=t;else{if(!(t&1073741824))return e=a!==null?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,st(Vo,Zn),Zn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,st(Vo,Zn),Zn|=r}else a!==null?(r=a.baseLanes|t,n.memoizedState=null):r=t,st(Vo,Zn),Zn|=r;return An(e,n,i,t),n.child}function Gy(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Jd(e,n,t,r,i){var a=Hn(t)?Ga:Tn.current;return a=ls(n,a),Ko(n,i),t=g0(e,n,t,r,a,i),r=x0(),e!==null&&!zn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i,Fi(e,n,i)):(dt&&r&&a0(n),n.flags|=1,An(e,n,t,i),n.child)}function nm(e,n,t,r,i){if(Hn(t)){var a=!0;bc(n)}else a=!1;if(Ko(n,i),n.stateNode===null)cc(e,n),zy(n,t,r),Yd(n,t,r,i),r=!0;else if(e===null){var o=n.stateNode,s=n.memoizedProps;o.props=s;var u=o.context,l=t.contextType;typeof l=="object"&&l!==null?l=Cr(l):(l=Hn(t)?Ga:Tn.current,l=ls(n,l));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||u!==l)&&Y1(n,o,r,l),Gi=!1;var h=n.memoizedState;o.state=h,Fc(n,r,o,i),u=n.memoizedState,s!==r||h!==u||Vn.current||Gi?(typeof c=="function"&&(qd(n,t,c,r),u=n.memoizedState),(s=Gi||q1(n,t,s,r,h,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(n.flags|=4194308)):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{o=n.stateNode,wy(e,n),s=n.memoizedProps,l=n.type===n.elementType?s:Nr(n.type,s),o.props=l,f=n.pendingProps,h=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=Cr(u):(u=Hn(t)?Ga:Tn.current,u=ls(n,u));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==u)&&Y1(n,o,r,u),Gi=!1,h=n.memoizedState,o.state=h,Fc(n,r,o,i);var v=n.memoizedState;s!==f||h!==v||Vn.current||Gi?(typeof d=="function"&&(qd(n,t,d,r),v=n.memoizedState),(l=Gi||q1(n,t,l,r,h,v,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(n.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=v),o.props=r,o.state=v,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(n.flags|=1024),r=!1)}return Zd(e,n,t,r,a,i)}function Zd(e,n,t,r,i,a){Gy(e,n);var o=(n.flags&128)!==0;if(!r&&!o)return i&&z1(n,t,!1),Fi(e,n,a);r=n.stateNode,Bb.current=n;var s=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return n.flags|=1,e!==null&&o?(n.child=fs(n,e.child,null,a),n.child=fs(n,null,s,a)):An(e,n,s,a),n.memoizedState=r.state,i&&z1(n,t,!0),n.child}function Xy(e){var n=e.stateNode;n.pendingContext?W1(e,n.pendingContext,n.pendingContext!==n.context):n.context&&W1(e,n.context,!1),d0(e,n.containerInfo)}function rm(e,n,t,r,i){return cs(),s0(i),n.flags|=256,An(e,n,t,r),n.child}var ep={dehydrated:null,treeContext:null,retryLane:0};function tp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ky(e,n,t){var r=n.pendingProps,i=xt.current,a=!1,o=(n.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(a=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),st(xt,i&1),e===null)return Xd(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(o=r.children,e=r.fallback,a?(r=n.mode,a=n.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Pf(o,r,0,null),e=Ha(e,r,t,null),a.return=n,e.return=n,a.sibling=e,n.child=a,n.child.memoizedState=tp(t),n.memoizedState=ep,e):_0(n,o));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Ub(e,n,o,r,s,i,t);if(a){a=r.fallback,o=n.mode,i=e.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&n.child!==i?(r=n.child,r.childLanes=0,r.pendingProps=u,n.deletions=null):(r=ua(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=ua(s,a):(a=Ha(a,o,t,null),a.flags|=2),a.return=n,r.return=n,r.sibling=a,n.child=r,r=a,a=n.child,o=e.child.memoizedState,o=o===null?tp(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~t,n.memoizedState=ep,r}return a=e.child,e=a.sibling,r=ua(a,{mode:"visible",children:r.children}),!(n.mode&1)&&(r.lanes=t),r.return=n,r.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=r,n.memoizedState=null,r}function _0(e,n){return n=Pf({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Fl(e,n,t,r){return r!==null&&s0(r),fs(n,e.child,null,t),e=_0(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Ub(e,n,t,r,i,a,o){if(t)return n.flags&256?(n.flags&=-257,r=Dh(Error(me(422))),Fl(e,n,o,r)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(a=r.fallback,i=n.mode,r=Pf({mode:"visible",children:r.children},i,0,null),a=Ha(a,i,o,null),a.flags|=2,r.return=n,a.return=n,r.sibling=a,n.child=r,n.mode&1&&fs(n,e.child,null,o),n.child.memoizedState=tp(o),n.memoizedState=ep,a);if(!(n.mode&1))return Fl(e,n,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(me(419)),r=Dh(a,r,void 0),Fl(e,n,o,r)}if(s=(o&e.childLanes)!==0,zn||s){if(r=Qt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ri(e,i),Wr(r,e,i,-1))}return k0(),r=Dh(Error(me(421))),Fl(e,n,o,r)}return i.data==="$?"?(n.flags|=128,n.child=e.child,n=Jb.bind(null,e),i._reactRetry=n,null):(e=a.treeContext,ar=ia(i.nextSibling),lr=n,dt=!0,Pr=null,e!==null&&(gr[xr++]=_i,gr[xr++]=Ei,gr[xr++]=Xa,_i=e.id,Ei=e.overflow,Xa=n),n=_0(n,r.children),n.flags|=4096,n)}function im(e,n,t){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),Kd(e.return,n,t)}function Ph(e,n,t,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function qy(e,n,t){var r=n.pendingProps,i=r.revealOrder,a=r.tail;if(An(e,n,r.children,t),r=xt.current,r&2)r=r&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&im(e,t,n);else if(e.tag===19)im(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(st(xt,r),!(n.mode&1))n.memoizedState=null;else switch(i){case"forwards":for(t=n.child,i=null;t!==null;)e=t.alternate,e!==null&&Ic(e)===null&&(i=t),t=t.sibling;t=i,t===null?(i=n.child,n.child=null):(i=t.sibling,t.sibling=null),Ph(n,!1,i,t,a);break;case"backwards":for(t=null,i=n.child,n.child=null;i!==null;){if(e=i.alternate,e!==null&&Ic(e)===null){n.child=i;break}e=i.sibling,i.sibling=t,t=i,i=e}Ph(n,!0,t,null,a);break;case"together":Ph(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function cc(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Fi(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),qa|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(me(153));if(n.child!==null){for(e=n.child,t=ua(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=ua(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function Wb(e,n,t){switch(n.tag){case 3:Xy(n),cs();break;case 5:_y(n);break;case 1:Hn(n.type)&&bc(n);break;case 4:d0(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,i=n.memoizedProps.value;st(Ac,r._currentValue),r._currentValue=i;break;case 13:if(r=n.memoizedState,r!==null)return r.dehydrated!==null?(st(xt,xt.current&1),n.flags|=128,null):t&n.child.childLanes?Ky(e,n,t):(st(xt,xt.current&1),e=Fi(e,n,t),e!==null?e.sibling:null);st(xt,xt.current&1);break;case 19:if(r=(t&n.childLanes)!==0,e.flags&128){if(r)return qy(e,n,t);n.flags|=128}if(i=n.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),st(xt,xt.current),r)break;return null;case 22:case 23:return n.lanes=0,jy(e,n,t)}return Fi(e,n,t)}var Yy,np,Qy,Jy;Yy=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};np=function(){};Qy=function(e,n,t,r){var i=e.memoizedProps;if(i!==r){e=n.stateNode,Ua(ai.current);var a=null;switch(t){case"input":i=Cd(e,i),r=Cd(e,r),a=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),a=[];break;case"textarea":i=kd(e,i),r=kd(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sc)}Rd(t,r);var o;t=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vu.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(a||(a=[]),a.push(l,t)),t=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vu.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&lt("scroll",e),a||s===u||(a=[])):(a=a||[]).push(l,u))}t&&(a=a||[]).push("style",t);var l=a;(n.updateQueue=l)&&(n.flags|=4)}};Jy=function(e,n,t,r){t!==r&&(n.flags|=4)};function Us(e,n){if(!dt)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gn(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,r=0;if(n)for(var i=e.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function zb(e,n,t){var r=n.pendingProps;switch(o0(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(n),null;case 1:return Hn(n.type)&&Cc(),gn(n),null;case 3:return r=n.stateNode,hs(),ft(Vn),ft(Tn),v0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Al(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Pr!==null&&(cp(Pr),Pr=null))),np(e,n),gn(n),null;case 5:p0(n);var i=Ua(ku.current);if(t=n.type,e!==null&&n.stateNode!=null)Qy(e,n,t,r,i),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(n.stateNode===null)throw Error(me(166));return gn(n),null}if(e=Ua(ai.current),Al(n)){r=n.stateNode,t=n.type;var a=n.memoizedProps;switch(r[ei]=n,r[bu]=a,e=(n.mode&1)!==0,t){case"dialog":lt("cancel",r),lt("close",r);break;case"iframe":case"object":case"embed":lt("load",r);break;case"video":case"audio":for(i=0;i<qs.length;i++)lt(qs[i],r);break;case"source":lt("error",r);break;case"img":case"image":case"link":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"input":d1(r,a),lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},lt("invalid",r);break;case"textarea":v1(r,a),lt("invalid",r)}Rd(t,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&kl(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&kl(r.textContent,s,e),i=["children",""+s]):vu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&lt("scroll",r)}switch(t){case"input":yl(r),p1(r,a,!0);break;case"textarea":yl(r),m1(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Sc)}r=i,n.updateQueue=r,r!==null&&(n.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tx(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(t,{is:r.is}):(e=o.createElement(t),t==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,t),e[ei]=n,e[bu]=r,Yy(e,n,!1,!1),n.stateNode=e;e:{switch(o=Fd(t,r),t){case"dialog":lt("cancel",e),lt("close",e),i=r;break;case"iframe":case"object":case"embed":lt("load",e),i=r;break;case"video":case"audio":for(i=0;i<qs.length;i++)lt(qs[i],e);i=r;break;case"source":lt("error",e),i=r;break;case"img":case"image":case"link":lt("error",e),lt("load",e),i=r;break;case"details":lt("toggle",e),i=r;break;case"input":d1(e,r),i=Cd(e,r),lt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),lt("invalid",e);break;case"textarea":v1(e,r),i=kd(e,r),lt("invalid",e);break;default:i=r}Rd(t,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?Rx(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&kx(e,u)):a==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&mu(e,u):typeof u=="number"&&mu(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(vu.hasOwnProperty(a)?u!=null&&a==="onScroll"&&lt("scroll",e):u!=null&&jp(e,a,u,o))}switch(t){case"input":yl(e),p1(e,r,!1);break;case"textarea":yl(e),m1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ha(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?$o(e,!!r.multiple,a,!1):r.defaultValue!=null&&$o(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Sc)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return gn(n),null;case 6:if(e&&n.stateNode!=null)Jy(e,n,e.memoizedProps,r);else{if(typeof r!="string"&&n.stateNode===null)throw Error(me(166));if(t=Ua(ku.current),Ua(ai.current),Al(n)){if(r=n.stateNode,t=n.memoizedProps,r[ei]=n,(a=r.nodeValue!==t)&&(e=lr,e!==null))switch(e.tag){case 3:kl(r.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&kl(r.nodeValue,t,(e.mode&1)!==0)}a&&(n.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ei]=n,n.stateNode=r}return gn(n),null;case 13:if(ft(xt),r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dt&&ar!==null&&n.mode&1&&!(n.flags&128))my(),cs(),n.flags|=98560,a=!1;else if(a=Al(n),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(me(318));if(a=n.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(me(317));a[ei]=n}else cs(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;gn(n),a=!1}else Pr!==null&&(cp(Pr),Pr=null),a=!0;if(!a)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(n.child.flags|=8192,n.mode&1&&(e===null||xt.current&1?Ut===0&&(Ut=3):k0())),n.updateQueue!==null&&(n.flags|=4),gn(n),null);case 4:return hs(),np(e,n),e===null&&Su(n.stateNode.containerInfo),gn(n),null;case 10:return c0(n.type._context),gn(n),null;case 17:return Hn(n.type)&&Cc(),gn(n),null;case 19:if(ft(xt),a=n.memoizedState,a===null)return gn(n),null;if(r=(n.flags&128)!==0,o=a.rendering,o===null)if(r)Us(a,!1);else{if(Ut!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(o=Ic(e),o!==null){for(n.flags|=128,Us(a,!1),r=o.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;t!==null;)a=t,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return st(xt,xt.current&1|2),n.child}e=e.sibling}a.tail!==null&&At()>ps&&(n.flags|=128,r=!0,Us(a,!1),n.lanes=4194304)}else{if(!r)if(e=Ic(o),e!==null){if(n.flags|=128,r=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),Us(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!dt)return gn(n),null}else 2*At()-a.renderingStartTime>ps&&t!==1073741824&&(n.flags|=128,r=!0,Us(a,!1),n.lanes=4194304);a.isBackwards?(o.sibling=n.child,n.child=o):(t=a.last,t!==null?t.sibling=o:n.child=o,a.last=o)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.renderingStartTime=At(),n.sibling=null,t=xt.current,st(xt,r?t&1|2:t&1),n):(gn(n),null);case 22:case 23:return T0(),r=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(n.flags|=8192),r&&n.mode&1?Zn&1073741824&&(gn(n),n.subtreeFlags&6&&(n.flags|=8192)):gn(n),null;case 24:return null;case 25:return null}throw Error(me(156,n.tag))}function Vb(e,n){switch(o0(n),n.tag){case 1:return Hn(n.type)&&Cc(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return hs(),ft(Vn),ft(Tn),v0(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return p0(n),null;case 13:if(ft(xt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(me(340));cs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ft(xt),null;case 4:return hs(),null;case 10:return c0(n.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var Il=!1,yn=!1,Hb=typeof WeakSet=="function"?WeakSet:Set,ke=null;function zo(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){bt(e,n,r)}else t.current=null}function rp(e,n,t){try{t()}catch(r){bt(e,n,r)}}var am=!1;function $b(e,n){if(Wd=wc,e=ry(),i0(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var o=0,s=-1,u=-1,l=0,c=0,f=e,h=null;t:for(;;){for(var d;f!==t||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===e)break t;if(h===t&&++l===i&&(s=o),h===a&&++c===r&&(u=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}t=s===-1||u===-1?null:{start:s,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(zd={focusedElem:e,selectionRange:t},wc=!1,ke=n;ke!==null;)if(n=ke,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ke=e;else for(;ke!==null;){n=ke;try{var v=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,g=v.memoizedState,m=n.stateNode,x=m.getSnapshotBeforeUpdate(n.elementType===n.type?p:Nr(n.type,p),g);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=n.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(w){bt(n,n.return,w)}if(e=n.sibling,e!==null){e.return=n.return,ke=e;break}ke=n.return}return v=am,am=!1,v}function ru(e,n,t){var r=n.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&rp(n,t,a)}i=i.next}while(i!==r)}}function Nf(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function ip(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function Zy(e){var n=e.alternate;n!==null&&(e.alternate=null,Zy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[ei],delete n[bu],delete n[$d],delete n[Tb],delete n[kb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function e2(e){return e.tag===5||e.tag===3||e.tag===4}function om(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||e2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ap(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=Sc));else if(r!==4&&(e=e.child,e!==null))for(ap(e,n,t),e=e.sibling;e!==null;)ap(e,n,t),e=e.sibling}function op(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(op(e,n,t),e=e.sibling;e!==null;)op(e,n,t),e=e.sibling}var nn=null,Dr=!1;function zi(e,n,t){for(t=t.child;t!==null;)t2(e,n,t),t=t.sibling}function t2(e,n,t){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Cf,t)}catch{}switch(t.tag){case 5:yn||zo(t,n);case 6:var r=nn,i=Dr;nn=null,zi(e,n,t),nn=r,Dr=i,nn!==null&&(Dr?(e=nn,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):nn.removeChild(t.stateNode));break;case 18:nn!==null&&(Dr?(e=nn,t=t.stateNode,e.nodeType===8?kh(e.parentNode,t):e.nodeType===1&&kh(e,t),wu(e)):kh(nn,t.stateNode));break;case 4:r=nn,i=Dr,nn=t.stateNode.containerInfo,Dr=!0,zi(e,n,t),nn=r,Dr=i;break;case 0:case 11:case 14:case 15:if(!yn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&rp(t,n,o),i=i.next}while(i!==r)}zi(e,n,t);break;case 1:if(!yn&&(zo(t,n),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){bt(t,n,s)}zi(e,n,t);break;case 21:zi(e,n,t);break;case 22:t.mode&1?(yn=(r=yn)||t.memoizedState!==null,zi(e,n,t),yn=r):zi(e,n,t);break;default:zi(e,n,t)}}function sm(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new Hb),n.forEach(function(r){var i=Zb.bind(null,e,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Rr(e,n){var t=n.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var a=e,o=n,s=o;e:for(;s!==null;){switch(s.tag){case 5:nn=s.stateNode,Dr=!1;break e;case 3:nn=s.stateNode.containerInfo,Dr=!0;break e;case 4:nn=s.stateNode.containerInfo,Dr=!0;break e}s=s.return}if(nn===null)throw Error(me(160));t2(a,o,i),nn=null,Dr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){bt(i,n,l)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)n2(n,e),n=n.sibling}function n2(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rr(n,e),Xr(e),r&4){try{ru(3,e,e.return),Nf(3,e)}catch(p){bt(e,e.return,p)}try{ru(5,e,e.return)}catch(p){bt(e,e.return,p)}}break;case 1:Rr(n,e),Xr(e),r&512&&t!==null&&zo(t,t.return);break;case 5:if(Rr(n,e),Xr(e),r&512&&t!==null&&zo(t,t.return),e.flags&32){var i=e.stateNode;try{mu(i,"")}catch(p){bt(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=t!==null?t.memoizedProps:a,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&Cx(i,a),Fd(s,o);var l=Fd(s,a);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Rx(i,f):c==="dangerouslySetInnerHTML"?kx(i,f):c==="children"?mu(i,f):jp(i,c,f,l)}switch(s){case"input":bd(i,a);break;case"textarea":bx(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?$o(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?$o(i,!!a.multiple,a.defaultValue,!0):$o(i,!!a.multiple,a.multiple?[]:"",!1))}i[bu]=a}catch(p){bt(e,e.return,p)}}break;case 6:if(Rr(n,e),Xr(e),r&4){if(e.stateNode===null)throw Error(me(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){bt(e,e.return,p)}}break;case 3:if(Rr(n,e),Xr(e),r&4&&t!==null&&t.memoizedState.isDehydrated)try{wu(n.containerInfo)}catch(p){bt(e,e.return,p)}break;case 4:Rr(n,e),Xr(e);break;case 13:Rr(n,e),Xr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(C0=At())),r&4&&sm(e);break;case 22:if(c=t!==null&&t.memoizedState!==null,e.mode&1?(yn=(l=yn)||c,Rr(n,e),yn=l):Rr(n,e),Xr(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(ke=e,c=e.child;c!==null;){for(f=ke=c;ke!==null;){switch(h=ke,d=h.child,h.tag){case 0:case 11:case 14:case 15:ru(4,h,h.return);break;case 1:zo(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,t=h.return;try{n=r,v.props=n.memoizedProps,v.state=n.memoizedState,v.componentWillUnmount()}catch(p){bt(r,t,p)}}break;case 5:zo(h,h.return);break;case 22:if(h.memoizedState!==null){lm(f);continue}}d!==null?(d.return=h,ke=d):lm(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=Ax("display",o))}catch(p){bt(e,e.return,p)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(p){bt(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rr(n,e),Xr(e),r&4&&sm(e);break;case 21:break;default:Rr(n,e),Xr(e)}}function Xr(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(e2(t)){var r=t;break e}t=t.return}throw Error(me(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(mu(i,""),r.flags&=-33);var a=om(e);op(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=om(e);ap(e,s,o);break;default:throw Error(me(161))}}catch(u){bt(e,e.return,u)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function jb(e,n,t){ke=e,r2(e)}function r2(e,n,t){for(var r=(e.mode&1)!==0;ke!==null;){var i=ke,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Il;if(!o){var s=i.alternate,u=s!==null&&s.memoizedState!==null||yn;s=Il;var l=yn;if(Il=o,(yn=u)&&!l)for(ke=i;ke!==null;)o=ke,u=o.child,o.tag===22&&o.memoizedState!==null?cm(i):u!==null?(u.return=o,ke=u):cm(i);for(;a!==null;)ke=a,r2(a),a=a.sibling;ke=i,Il=s,yn=l}um(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ke=a):um(e)}}function um(e){for(;ke!==null;){var n=ke;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:yn||Nf(5,n);break;case 1:var r=n.stateNode;if(n.flags&4&&!yn)if(t===null)r.componentDidMount();else{var i=n.elementType===n.type?t.memoizedProps:Nr(n.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=n.updateQueue;a!==null&&G1(n,a,r);break;case 3:var o=n.updateQueue;if(o!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}G1(n,o,t)}break;case 5:var s=n.stateNode;if(t===null&&n.flags&4){t=s;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var l=n.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&wu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}yn||n.flags&512&&ip(n)}catch(h){bt(n,n.return,h)}}if(n===e){ke=null;break}if(t=n.sibling,t!==null){t.return=n.return,ke=t;break}ke=n.return}}function lm(e){for(;ke!==null;){var n=ke;if(n===e){ke=null;break}var t=n.sibling;if(t!==null){t.return=n.return,ke=t;break}ke=n.return}}function cm(e){for(;ke!==null;){var n=ke;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{Nf(4,n)}catch(u){bt(n,t,u)}break;case 1:var r=n.stateNode;if(typeof r.componentDidMount=="function"){var i=n.return;try{r.componentDidMount()}catch(u){bt(n,i,u)}}var a=n.return;try{ip(n)}catch(u){bt(n,a,u)}break;case 5:var o=n.return;try{ip(n)}catch(u){bt(n,o,u)}}}catch(u){bt(n,n.return,u)}if(n===e){ke=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ke=s;break}ke=n.return}}var Gb=Math.ceil,Pc=Di.ReactCurrentDispatcher,E0=Di.ReactCurrentOwner,Sr=Di.ReactCurrentBatchConfig,Ye=0,Qt=null,Nt=null,cn=0,Zn=0,Vo=wa(0),Ut=0,Iu=null,qa=0,Df=0,S0=0,iu=null,Bn=null,C0=0,ps=1/0,xi=null,Oc=!1,sp=null,oa=null,Nl=!1,Yi=null,Mc=0,au=0,up=null,fc=-1,hc=0;function Nn(){return Ye&6?At():fc!==-1?fc:fc=At()}function sa(e){return e.mode&1?Ye&2&&cn!==0?cn&-cn:Rb.transition!==null?(hc===0&&(hc=zx()),hc):(e=it,e!==0||(e=window.event,e=e===void 0?16:Kx(e.type)),e):1}function Wr(e,n,t,r){if(50<au)throw au=0,up=null,Error(me(185));Xu(e,t,r),(!(Ye&2)||e!==Qt)&&(e===Qt&&(!(Ye&2)&&(Df|=t),Ut===4&&Ki(e,cn)),$n(e,r),t===1&&Ye===0&&!(n.mode&1)&&(ps=At()+500,Rf&&_a()))}function $n(e,n){var t=e.callbackNode;RC(e,n);var r=yc(e,e===Qt?cn:0);if(r===0)t!==null&&y1(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(t!=null&&y1(t),n===1)e.tag===0?Ab(fm.bind(null,e)):dy(fm.bind(null,e)),Cb(function(){!(Ye&6)&&_a()}),t=null;else{switch(Vx(r)){case 1:t=Yp;break;case 4:t=Ux;break;case 16:t=xc;break;case 536870912:t=Wx;break;default:t=xc}t=f2(t,i2.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function i2(e,n){if(fc=-1,hc=0,Ye&6)throw Error(me(327));var t=e.callbackNode;if(qo()&&e.callbackNode!==t)return null;var r=yc(e,e===Qt?cn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||n)n=Lc(e,r);else{n=r;var i=Ye;Ye|=2;var a=o2();(Qt!==e||cn!==n)&&(xi=null,ps=At()+500,Va(e,n));do try{qb();break}catch(s){a2(e,s)}while(!0);l0(),Pc.current=a,Ye=i,Nt!==null?n=0:(Qt=null,cn=0,n=Ut)}if(n!==0){if(n===2&&(i=Od(e),i!==0&&(r=i,n=lp(e,i))),n===1)throw t=Iu,Va(e,0),Ki(e,r),$n(e,At()),t;if(n===6)Ki(e,r);else{if(i=e.current.alternate,!(r&30)&&!Xb(i)&&(n=Lc(e,r),n===2&&(a=Od(e),a!==0&&(r=a,n=lp(e,a))),n===1))throw t=Iu,Va(e,0),Ki(e,r),$n(e,At()),t;switch(e.finishedWork=i,e.finishedLanes=r,n){case 0:case 1:throw Error(me(345));case 2:Ia(e,Bn,xi);break;case 3:if(Ki(e,r),(r&130023424)===r&&(n=C0+500-At(),10<n)){if(yc(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Nn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hd(Ia.bind(null,e,Bn,xi),n);break}Ia(e,Bn,xi);break;case 4:if(Ki(e,r),(r&4194240)===r)break;for(n=e.eventTimes,i=-1;0<r;){var o=31-Ur(r);a=1<<o,o=n[o],o>i&&(i=o),r&=~a}if(r=i,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gb(r/1960))-r,10<r){e.timeoutHandle=Hd(Ia.bind(null,e,Bn,xi),r);break}Ia(e,Bn,xi);break;case 5:Ia(e,Bn,xi);break;default:throw Error(me(329))}}}return $n(e,At()),e.callbackNode===t?i2.bind(null,e):null}function lp(e,n){var t=iu;return e.current.memoizedState.isDehydrated&&(Va(e,n).flags|=256),e=Lc(e,n),e!==2&&(n=Bn,Bn=t,n!==null&&cp(n)),e}function cp(e){Bn===null?Bn=e:Bn.push.apply(Bn,e)}function Xb(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!Hr(a(),i))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ki(e,n){for(n&=~S0,n&=~Df,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-Ur(n),r=1<<t;e[t]=-1,n&=~r}}function fm(e){if(Ye&6)throw Error(me(327));qo();var n=yc(e,0);if(!(n&1))return $n(e,At()),null;var t=Lc(e,n);if(e.tag!==0&&t===2){var r=Od(e);r!==0&&(n=r,t=lp(e,r))}if(t===1)throw t=Iu,Va(e,0),Ki(e,n),$n(e,At()),t;if(t===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Ia(e,Bn,xi),$n(e,At()),null}function b0(e,n){var t=Ye;Ye|=1;try{return e(n)}finally{Ye=t,Ye===0&&(ps=At()+500,Rf&&_a())}}function Ya(e){Yi!==null&&Yi.tag===0&&!(Ye&6)&&qo();var n=Ye;Ye|=1;var t=Sr.transition,r=it;try{if(Sr.transition=null,it=1,e)return e()}finally{it=r,Sr.transition=t,Ye=n,!(Ye&6)&&_a()}}function T0(){Zn=Vo.current,ft(Vo)}function Va(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,Sb(t)),Nt!==null)for(t=Nt.return;t!==null;){var r=t;switch(o0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cc();break;case 3:hs(),ft(Vn),ft(Tn),v0();break;case 5:p0(r);break;case 4:hs();break;case 13:ft(xt);break;case 19:ft(xt);break;case 10:c0(r.type._context);break;case 22:case 23:T0()}t=t.return}if(Qt=e,Nt=e=ua(e.current,null),cn=Zn=n,Ut=0,Iu=null,S0=Df=qa=0,Bn=iu=null,Ba!==null){for(n=0;n<Ba.length;n++)if(t=Ba[n],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}t.pending=r}Ba=null}return e}function a2(e,n){do{var t=Nt;try{if(l0(),uc.current=Dc,Nc){for(var r=_t.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nc=!1}if(Ka=0,Xt=Bt=_t=null,nu=!1,Au=0,E0.current=null,t===null||t.return===null){Ut=1,Iu=n,Nt=null;break}e:{var a=e,o=t.return,s=t,u=n;if(n=cn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=J1(o);if(d!==null){d.flags&=-257,Z1(d,o,s,a,n),d.mode&1&&Q1(a,l,n),n=d,u=l;var v=n.updateQueue;if(v===null){var p=new Set;p.add(u),n.updateQueue=p}else v.add(u);break e}else{if(!(n&1)){Q1(a,l,n),k0();break e}u=Error(me(426))}}else if(dt&&s.mode&1){var g=J1(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Z1(g,o,s,a,n),s0(ds(u,s));break e}}a=u=ds(u,s),Ut!==4&&(Ut=2),iu===null?iu=[a]:iu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,n&=-n,a.lanes|=n;var m=Vy(a,u,n);j1(a,m);break e;case 1:s=u;var x=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(oa===null||!oa.has(y)))){a.flags|=65536,n&=-n,a.lanes|=n;var w=Hy(a,s,n);j1(a,w);break e}}a=a.return}while(a!==null)}u2(t)}catch(_){n=_,Nt===t&&t!==null&&(Nt=t=t.return);continue}break}while(!0)}function o2(){var e=Pc.current;return Pc.current=Dc,e===null?Dc:e}function k0(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Qt===null||!(qa&268435455)&&!(Df&268435455)||Ki(Qt,cn)}function Lc(e,n){var t=Ye;Ye|=2;var r=o2();(Qt!==e||cn!==n)&&(xi=null,Va(e,n));do try{Kb();break}catch(i){a2(e,i)}while(!0);if(l0(),Ye=t,Pc.current=r,Nt!==null)throw Error(me(261));return Qt=null,cn=0,Ut}function Kb(){for(;Nt!==null;)s2(Nt)}function qb(){for(;Nt!==null&&!wC();)s2(Nt)}function s2(e){var n=c2(e.alternate,e,Zn);e.memoizedProps=e.pendingProps,n===null?u2(e):Nt=n,E0.current=null}function u2(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=Vb(t,n),t!==null){t.flags&=32767,Nt=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ut=6,Nt=null;return}}else if(t=zb(t,n,Zn),t!==null){Nt=t;return}if(n=n.sibling,n!==null){Nt=n;return}Nt=n=e}while(n!==null);Ut===0&&(Ut=5)}function Ia(e,n,t){var r=it,i=Sr.transition;try{Sr.transition=null,it=1,Yb(e,n,t,r)}finally{Sr.transition=i,it=r}return null}function Yb(e,n,t,r){do qo();while(Yi!==null);if(Ye&6)throw Error(me(327));t=e.finishedWork;var i=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var a=t.lanes|t.childLanes;if(FC(e,a),e===Qt&&(Nt=Qt=null,cn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Nl||(Nl=!0,f2(xc,function(){return qo(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=Sr.transition,Sr.transition=null;var o=it;it=1;var s=Ye;Ye|=4,E0.current=null,$b(e,t),n2(t,e),mb(zd),wc=!!Wd,zd=Wd=null,e.current=t,jb(t),_C(),Ye=s,it=o,Sr.transition=a}else e.current=t;if(Nl&&(Nl=!1,Yi=e,Mc=i),a=e.pendingLanes,a===0&&(oa=null),CC(t.stateNode),$n(e,At()),n!==null)for(r=e.onRecoverableError,t=0;t<n.length;t++)i=n[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Oc)throw Oc=!1,e=sp,sp=null,e;return Mc&1&&e.tag!==0&&qo(),a=e.pendingLanes,a&1?e===up?au++:(au=0,up=e):au=0,_a(),null}function qo(){if(Yi!==null){var e=Vx(Mc),n=Sr.transition,t=it;try{if(Sr.transition=null,it=16>e?16:e,Yi===null)var r=!1;else{if(e=Yi,Yi=null,Mc=0,Ye&6)throw Error(me(331));var i=Ye;for(Ye|=4,ke=e.current;ke!==null;){var a=ke,o=a.child;if(ke.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(ke=l;ke!==null;){var c=ke;switch(c.tag){case 0:case 11:case 15:ru(8,c,a)}var f=c.child;if(f!==null)f.return=c,ke=f;else for(;ke!==null;){c=ke;var h=c.sibling,d=c.return;if(Zy(c),c===l){ke=null;break}if(h!==null){h.return=d,ke=h;break}ke=d}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}ke=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ke=o;else e:for(;ke!==null;){if(a=ke,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,ke=m;break e}ke=a.return}}var x=e.current;for(ke=x;ke!==null;){o=ke;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ke=y;else e:for(o=x;ke!==null;){if(s=ke,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Nf(9,s)}}catch(_){bt(s,s.return,_)}if(s===o){ke=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,ke=w;break e}ke=s.return}}if(Ye=i,_a(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Cf,e)}catch{}r=!0}return r}finally{it=t,Sr.transition=n}}return!1}function hm(e,n,t){n=ds(t,n),n=Vy(e,n,1),e=aa(e,n,1),n=Nn(),e!==null&&(Xu(e,1,n),$n(e,n))}function bt(e,n,t){if(e.tag===3)hm(e,e,t);else for(;n!==null;){if(n.tag===3){hm(n,e,t);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oa===null||!oa.has(r))){e=ds(t,e),e=Hy(n,e,1),n=aa(n,e,1),e=Nn(),n!==null&&(Xu(n,1,e),$n(n,e));break}}n=n.return}}function Qb(e,n,t){var r=e.pingCache;r!==null&&r.delete(n),n=Nn(),e.pingedLanes|=e.suspendedLanes&t,Qt===e&&(cn&t)===t&&(Ut===4||Ut===3&&(cn&130023424)===cn&&500>At()-C0?Va(e,0):S0|=t),$n(e,n)}function l2(e,n){n===0&&(e.mode&1?(n=El,El<<=1,!(El&130023424)&&(El=4194304)):n=1);var t=Nn();e=Ri(e,n),e!==null&&(Xu(e,n,t),$n(e,t))}function Jb(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),l2(e,t)}function Zb(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(me(314))}r!==null&&r.delete(n),l2(e,t)}var c2;c2=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||Vn.current)zn=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return zn=!1,Wb(e,n,t);zn=!!(e.flags&131072)}else zn=!1,dt&&n.flags&1048576&&py(n,kc,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;cc(e,n),e=n.pendingProps;var i=ls(n,Tn.current);Ko(n,t),i=g0(null,n,r,e,i,t);var a=x0();return n.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Hn(r)?(a=!0,bc(n)):a=!1,n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,h0(n),i.updater=If,n.stateNode=i,i._reactInternals=n,Yd(n,r,e,t),n=Zd(null,n,r,!0,a,t)):(n.tag=0,dt&&a&&a0(n),An(null,n,i,t),n=n.child),n;case 16:r=n.elementType;e:{switch(cc(e,n),e=n.pendingProps,i=r._init,r=i(r._payload),n.type=r,i=n.tag=tT(r),e=Nr(r,e),i){case 0:n=Jd(null,n,r,e,t);break e;case 1:n=nm(null,n,r,e,t);break e;case 11:n=em(null,n,r,e,t);break e;case 14:n=tm(null,n,r,Nr(r.type,e),t);break e}throw Error(me(306,r,""))}return n;case 0:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:Nr(r,i),Jd(e,n,r,i,t);case 1:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:Nr(r,i),nm(e,n,r,i,t);case 3:e:{if(Xy(n),e===null)throw Error(me(387));r=n.pendingProps,a=n.memoizedState,i=a.element,wy(e,n),Fc(n,r,null,t);var o=n.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},n.updateQueue.baseState=a,n.memoizedState=a,n.flags&256){i=ds(Error(me(423)),n),n=rm(e,n,r,t,i);break e}else if(r!==i){i=ds(Error(me(424)),n),n=rm(e,n,r,t,i);break e}else for(ar=ia(n.stateNode.containerInfo.firstChild),lr=n,dt=!0,Pr=null,t=xy(n,null,r,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cs(),r===i){n=Fi(e,n,t);break e}An(e,n,r,t)}n=n.child}return n;case 5:return _y(n),e===null&&Xd(n),r=n.type,i=n.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Vd(r,i)?o=null:a!==null&&Vd(r,a)&&(n.flags|=32),Gy(e,n),An(e,n,o,t),n.child;case 6:return e===null&&Xd(n),null;case 13:return Ky(e,n,t);case 4:return d0(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=fs(n,null,r,t):An(e,n,r,t),n.child;case 11:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:Nr(r,i),em(e,n,r,i,t);case 7:return An(e,n,n.pendingProps,t),n.child;case 8:return An(e,n,n.pendingProps.children,t),n.child;case 12:return An(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,i=n.pendingProps,a=n.memoizedProps,o=i.value,st(Ac,r._currentValue),r._currentValue=o,a!==null)if(Hr(a.value,o)){if(a.children===i.children&&!Vn.current){n=Fi(e,n,t);break e}}else for(a=n.child,a!==null&&(a.return=n);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Si(-1,t&-t),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=t,u=a.alternate,u!==null&&(u.lanes|=t),Kd(a.return,t,n),s.lanes|=t;break}u=u.next}}else if(a.tag===10)o=a.type===n.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(me(341));o.lanes|=t,s=o.alternate,s!==null&&(s.lanes|=t),Kd(o,t,n),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===n){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}An(e,n,i.children,t),n=n.child}return n;case 9:return i=n.type,r=n.pendingProps.children,Ko(n,t),i=Cr(i),r=r(i),n.flags|=1,An(e,n,r,t),n.child;case 14:return r=n.type,i=Nr(r,n.pendingProps),i=Nr(r.type,i),tm(e,n,r,i,t);case 15:return $y(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:Nr(r,i),cc(e,n),n.tag=1,Hn(r)?(e=!0,bc(n)):e=!1,Ko(n,t),zy(n,r,i),Yd(n,r,i,t),Zd(null,n,r,!0,e,t);case 19:return qy(e,n,t);case 22:return jy(e,n,t)}throw Error(me(156,n.tag))};function f2(e,n){return Bx(e,n)}function eT(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(e,n,t,r){return new eT(e,n,t,r)}function A0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tT(e){if(typeof e=="function")return A0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xp)return 11;if(e===Kp)return 14}return 2}function ua(e,n){var t=e.alternate;return t===null?(t=_r(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function dc(e,n,t,r,i,a){var o=2;if(r=e,typeof e=="function")A0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case No:return Ha(t.children,i,a,n);case Gp:o=8,i|=8;break;case wd:return e=_r(12,t,n,i|2),e.elementType=wd,e.lanes=a,e;case _d:return e=_r(13,t,n,i),e.elementType=_d,e.lanes=a,e;case Ed:return e=_r(19,t,n,i),e.elementType=Ed,e.lanes=a,e;case _x:return Pf(t,i,a,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yx:o=10;break e;case wx:o=9;break e;case Xp:o=11;break e;case Kp:o=14;break e;case ji:o=16,r=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return n=_r(o,t,n,i),n.elementType=e,n.type=r,n.lanes=a,n}function Ha(e,n,t,r){return e=_r(7,e,r,n),e.lanes=t,e}function Pf(e,n,t,r){return e=_r(22,e,r,n),e.elementType=_x,e.lanes=t,e.stateNode={isHidden:!1},e}function Oh(e,n,t){return e=_r(6,e,null,n),e.lanes=t,e}function Mh(e,n,t){return n=_r(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function nT(e,n,t,r,i){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mh(0),this.expirationTimes=mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function R0(e,n,t,r,i,a,o,s,u){return e=new nT(e,n,t,s,u),n===1?(n=1,a===!0&&(n|=8)):n=0,a=_r(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},h0(a),e}function rT(e,n,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:r==null?null:""+r,children:e,containerInfo:n,implementation:t}}function h2(e){if(!e)return da;e=e._reactInternals;e:{if(ro(e)!==e||e.tag!==1)throw Error(me(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Hn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(me(171))}if(e.tag===1){var t=e.type;if(Hn(t))return hy(e,t,n)}return n}function d2(e,n,t,r,i,a,o,s,u){return e=R0(t,r,!0,e,i,a,o,s,u),e.context=h2(null),t=e.current,r=Nn(),i=sa(t),a=Si(r,i),a.callback=n??null,aa(t,a,i),e.current.lanes=i,Xu(e,i,r),$n(e,r),e}function Of(e,n,t,r){var i=n.current,a=Nn(),o=sa(i);return t=h2(t),n.context===null?n.context=t:n.pendingContext=t,n=Si(a,o),n.payload={element:e},r=r===void 0?null:r,r!==null&&(n.callback=r),e=aa(i,n,o),e!==null&&(Wr(e,i,o,a),sc(e,i,o)),o}function Bc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function F0(e,n){dm(e,n),(e=e.alternate)&&dm(e,n)}function iT(){return null}var p2=typeof reportError=="function"?reportError:function(e){console.error(e)};function I0(e){this._internalRoot=e}Mf.prototype.render=I0.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(me(409));Of(e,n,null,null)};Mf.prototype.unmount=I0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ya(function(){Of(null,e,null,null)}),n[Ai]=null}};function Mf(e){this._internalRoot=e}Mf.prototype.unstable_scheduleHydration=function(e){if(e){var n=jx();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Xi.length&&n!==0&&n<Xi[t].priority;t++);Xi.splice(t,0,e),t===0&&Xx(e)}};function N0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pm(){}function aT(e,n,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=Bc(o);a.call(l)}}var o=d2(n,r,e,0,null,!1,!1,"",pm);return e._reactRootContainer=o,e[Ai]=o.current,Su(e.nodeType===8?e.parentNode:e),Ya(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Bc(u);s.call(l)}}var u=R0(e,0,!1,null,null,!1,!1,"",pm);return e._reactRootContainer=u,e[Ai]=u.current,Su(e.nodeType===8?e.parentNode:e),Ya(function(){Of(n,u,t,r)}),u}function Bf(e,n,t,r,i){var a=t._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var u=Bc(o);s.call(u)}}Of(n,o,e,i)}else o=aT(t,n,e,i,r);return Bc(o)}Hx=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=Ks(n.pendingLanes);t!==0&&(Qp(n,t|1),$n(n,At()),!(Ye&6)&&(ps=At()+500,_a()))}break;case 13:Ya(function(){var r=Ri(e,1);if(r!==null){var i=Nn();Wr(r,e,1,i)}}),F0(e,1)}};Jp=function(e){if(e.tag===13){var n=Ri(e,134217728);if(n!==null){var t=Nn();Wr(n,e,134217728,t)}F0(e,134217728)}};$x=function(e){if(e.tag===13){var n=sa(e),t=Ri(e,n);if(t!==null){var r=Nn();Wr(t,e,n,r)}F0(e,n)}};jx=function(){return it};Gx=function(e,n){var t=it;try{return it=e,n()}finally{it=t}};Nd=function(e,n,t){switch(n){case"input":if(bd(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var i=Af(r);if(!i)throw Error(me(90));Sx(r),bd(r,i)}}}break;case"textarea":bx(e,t);break;case"select":n=t.value,n!=null&&$o(e,!!t.multiple,n,!1)}};Nx=b0;Dx=Ya;var oT={usingClientEntryPoint:!1,Events:[qu,Mo,Af,Fx,Ix,b0]},Ws={findFiberByHostInstance:La,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sT={bundleType:Ws.bundleType,version:Ws.version,rendererPackageName:Ws.rendererPackageName,rendererConfig:Ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Di.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Mx(e),e===null?null:e.stateNode},findFiberByHostInstance:Ws.findFiberByHostInstance||iT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{Cf=Dl.inject(sT),ii=Dl}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oT;dr.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N0(n))throw Error(me(200));return rT(e,n,null,t)};dr.createRoot=function(e,n){if(!N0(e))throw Error(me(299));var t=!1,r="",i=p2;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),n=R0(e,1,!1,null,null,t,!1,r,i),e[Ai]=n.current,Su(e.nodeType===8?e.parentNode:e),new I0(n)};dr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=Mx(n),e=e===null?null:e.stateNode,e};dr.flushSync=function(e){return Ya(e)};dr.hydrate=function(e,n,t){if(!Lf(n))throw Error(me(200));return Bf(null,e,n,!0,t)};dr.hydrateRoot=function(e,n,t){if(!N0(e))throw Error(me(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",o=p2;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),n=d2(n,null,e,1,t??null,i,!1,a,o),e[Ai]=n.current,Su(e),r)for(e=0;e<r.length;e++)t=r[e],i=t._getVersion,i=i(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i);return new Mf(n)};dr.render=function(e,n,t){if(!Lf(n))throw Error(me(200));return Bf(null,e,n,!1,t)};dr.unmountComponentAtNode=function(e){if(!Lf(e))throw Error(me(40));return e._reactRootContainer?(Ya(function(){Bf(null,null,e,!1,function(){e._reactRootContainer=null,e[Ai]=null})}),!0):!1};dr.unstable_batchedUpdates=b0;dr.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Lf(t))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return Bf(e,n,t,!1,r)};dr.version="18.3.1-next-f1338f8080-20240426";function v2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v2)}catch(e){console.error(e)}}v2(),vx.exports=dr;var uT=vx.exports,m2,vm=uT;m2=vm.createRoot,vm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ea=(e,n)=>{const t=It.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:s="",children:u,...l},c)=>It.createElement("svg",{ref:c,...lT,width:i,height:i,stroke:r,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${cT(e)}`,s].join(" "),...l},[...n.map(([f,h])=>It.createElement(f,h)),...Array.isArray(u)?u:[u]]));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=Ea("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=Ea("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Ea("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Ea("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Ea("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Ea("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=Ea("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Ea("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var x2={exports:{}};(function(e,n){(function(r,i){e.exports=i(It)})(OS,function(t){return function(r){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return r[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=r,a.c=i,a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(s&1&&(o=a(o)),s&8||s&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),s&2&&typeof o!="string")for(var l in o)a.d(u,l,(function(c){return o[c]}).bind(null,l));return u},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,i,a){a.r(i);var o=a("react"),s=function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var m in g)g.hasOwnProperty(m)&&(p[m]=g[m])},h(d,v)};return function(d,v){h(d,v);function p(){this.constructor=d}d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),u=function(){return u=Object.assign||function(h){for(var d,v=1,p=arguments.length;v<p;v++){d=arguments[v];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(h[g]=d[g])}return h},u.apply(this,arguments)},l=function(h,d){var v={};for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&d.indexOf(p)<0&&(v[p]=h[p]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,p=Object.getOwnPropertySymbols(h);g<p.length;g++)d.indexOf(p[g])<0&&Object.prototype.propertyIsEnumerable.call(h,p[g])&&(v[p[g]]=h[p[g]]);return v};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(d){var v=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return v?new Promise(function(p,g){v.call(navigator,d,p,g)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function c(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var f=function(h){s(d,h);function d(v){var p=h.call(this,v)||this;return p.canvas=null,p.ctx=null,p.requestUserMediaId=0,p.unmounted=!1,p.state={hasUserMedia:!1},p}return d.prototype.componentDidMount=function(){var v=this,p=v.state,g=v.props;if(this.unmounted=!1,!c()){g.onUserMediaError("getUserMedia not supported");return}p.hasUserMedia||this.requestUserMedia(),g.children&&typeof g.children!="function"&&console.warn("children must be a function")},d.prototype.componentDidUpdate=function(v){var p=this.props;if(!c()){p.onUserMediaError("getUserMedia not supported");return}var g=JSON.stringify(v.audioConstraints)!==JSON.stringify(p.audioConstraints),m=JSON.stringify(v.videoConstraints)!==JSON.stringify(p.videoConstraints),x=v.minScreenshotWidth!==p.minScreenshotWidth,y=v.minScreenshotHeight!==p.minScreenshotHeight;(m||x||y)&&(this.canvas=null,this.ctx=null),(g||m)&&(this.stopAndCleanup(),this.requestUserMedia())},d.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},d.stopMediaStream=function(v){v&&(v.getVideoTracks&&v.getAudioTracks?(v.getVideoTracks().map(function(p){v.removeTrack(p),p.stop()}),v.getAudioTracks().map(function(p){v.removeTrack(p),p.stop()})):v.stop())},d.prototype.stopAndCleanup=function(){var v=this.state;v.hasUserMedia&&(d.stopMediaStream(this.stream),v.src&&window.URL.revokeObjectURL(v.src))},d.prototype.getScreenshot=function(v){var p=this,g=p.state,m=p.props;if(!g.hasUserMedia)return null;var x=this.getCanvas(v);return x&&x.toDataURL(m.screenshotFormat,m.screenshotQuality)},d.prototype.getCanvas=function(v){var p=this,g=p.state,m=p.props;if(!this.video||!g.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var x=this.video.videoWidth,y=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var w=x/y;x=m.minScreenshotWidth||this.video.clientWidth,y=x/w,m.minScreenshotHeight&&y<m.minScreenshotHeight&&(y=m.minScreenshotHeight,x=y*w)}this.canvas=document.createElement("canvas"),this.canvas.width=(v==null?void 0:v.width)||x,this.canvas.height=(v==null?void 0:v.height)||y,this.ctx=this.canvas.getContext("2d")}var _=this,S=_.ctx,E=_.canvas;return S&&E&&(E.width=(v==null?void 0:v.width)||E.width,E.height=(v==null?void 0:v.height)||E.height,m.mirrored&&(S.translate(E.width,0),S.scale(-1,1)),S.imageSmoothingEnabled=m.imageSmoothing,S.drawImage(this.video,0,0,(v==null?void 0:v.width)||E.width,(v==null?void 0:v.height)||E.height),m.mirrored&&(S.scale(-1,1),S.translate(-E.width,0))),E},d.prototype.requestUserMedia=function(){var v=this,p=this.props,g=function(y,w){var _={video:typeof w<"u"?w:!0};p.audio&&(_.audio=typeof y<"u"?y:!0),v.requestUserMediaId++;var S=v.requestUserMediaId;navigator.mediaDevices.getUserMedia(_).then(function(E){v.unmounted||S!==v.requestUserMediaId?d.stopMediaStream(E):v.handleUserMedia(null,E)}).catch(function(E){v.handleUserMedia(E)})};if("mediaDevices"in navigator)g(p.audioConstraints,p.videoConstraints);else{var m=function(y){return{optional:[{sourceId:y}]}},x=function(y){var w=y.deviceId;return typeof w=="string"?w:Array.isArray(w)&&w.length>0?w[0]:typeof w=="object"&&w.ideal?w.ideal:null};MediaStreamTrack.getSources(function(y){var w=null,_=null;y.forEach(function(b){b.kind==="audio"?w=b.id:b.kind==="video"&&(_=b.id)});var S=x(p.audioConstraints);S&&(w=S);var E=x(p.videoConstraints);E&&(_=E),g(m(w),m(_))})}},d.prototype.handleUserMedia=function(v,p){var g=this.props;if(v||!p){this.setState({hasUserMedia:!1}),g.onUserMediaError(v);return}this.stream=p;try{this.video&&(this.video.srcObject=p),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(p)})}g.onUserMedia(p)},d.prototype.render=function(){var v=this,p=this,g=p.state,m=p.props,x=m.audio;m.forceScreenshotSourceSize;var y=m.disablePictureInPicture;m.onUserMedia,m.onUserMediaError,m.screenshotFormat,m.screenshotQuality,m.minScreenshotWidth,m.minScreenshotHeight,m.audioConstraints,m.videoConstraints,m.imageSmoothing;var w=m.mirrored,_=m.style,S=_===void 0?{}:_,E=m.children,b=l(m,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),C=w?u(u({},S),{transform:(S.transform||"")+" scaleX(-1)"}):S,T={getScreenshot:this.getScreenshot.bind(this)};return o.createElement(o.Fragment,null,o.createElement("video",u({autoPlay:!0,disablePictureInPicture:y,src:g.src,muted:!x,playsInline:!0,ref:function(F){v.video=F},style:C},b)),E&&E(T))},d.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},d}(o.Component);i.default=f},react:function(r,i){r.exports=t}}).default})})(x2);var gT=x2.exports;const y2=MS(gT),xT=({onCapture:e})=>{const n=It.useRef(null),t=It.useCallback(()=>{var i;const r=(i=n.current)==null?void 0:i.getScreenshot();r&&e(r)},[e]);return ce.jsxs("div",{className:"relative",children:[ce.jsx(y2,{audio:!1,ref:n,screenshotFormat:"image/jpeg",className:"w-full rounded-lg"}),ce.jsxs("button",{onClick:t,className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-full flex items-center gap-2 hover:bg-blue-700 transition-colors",children:[ce.jsx(D0,{size:20}),"Capture Photo"]})]})},yT=({students:e})=>{const n=e.length,t=e.filter(i=>i.present).length,r=n?(t/n*100).toFixed(1):"0";return ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[ce.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:ce.jsxs("div",{className:"flex items-center gap-4",children:[ce.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:ce.jsx(g2,{className:"text-blue-600",size:24})}),ce.jsxs("div",{children:[ce.jsx("p",{className:"text-sm text-gray-500",children:"Total Students"}),ce.jsx("p",{className:"text-2xl font-semibold",children:n})]})]})}),ce.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:ce.jsxs("div",{className:"flex items-center gap-4",children:[ce.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:ce.jsx(pT,{className:"text-green-600",size:24})}),ce.jsxs("div",{children:[ce.jsx("p",{className:"text-sm text-gray-500",children:"Present Today"}),ce.jsx("p",{className:"text-2xl font-semibold",children:t})]})]})}),ce.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:ce.jsxs("div",{className:"flex items-center gap-4",children:[ce.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:ce.jsx("div",{className:"text-purple-600 text-xl font-bold",children:"%"})}),ce.jsxs("div",{children:[ce.jsx("p",{className:"text-sm text-gray-500",children:"Attendance Rate"}),ce.jsxs("p",{className:"text-2xl font-semibold",children:[r,"%"]})]})]})})]})},wT=({students:e,onMarkAttendance:n})=>ce.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:ce.jsx("div",{className:"overflow-x-auto",children:ce.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[ce.jsx("thead",{className:"bg-gray-50",children:ce.jsxs("tr",{children:[ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll Number"}),ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),ce.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(t=>ce.jsxs("tr",{children:[ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce.jsxs("div",{className:"flex items-center",children:[ce.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:t.image,alt:t.name}),ce.jsx("div",{className:"ml-4",children:ce.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name})})]})}),ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce.jsx("div",{className:"text-sm text-gray-900",children:t.rollNumber})}),ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.present?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.present?"Present":"Absent"})}),ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ce.jsx("button",{onClick:()=>n(t.id),className:`inline-flex items-center px-3 py-1 rounded-md ${t.present?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:t.present?ce.jsxs(ce.Fragment,{children:[ce.jsx(mT,{size:16,className:"mr-1"})," Mark Absent"]}):ce.jsxs(ce.Fragment,{children:[ce.jsx(fT,{size:16,className:"mr-1"})," Mark Present"]})})})]},t.id))})]})})});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var w2=function(e,n){return(w2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(e,n)};function $r(e,n){function t(){this.constructor=e}w2(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}function Ae(e,n,t,r){return new(t||(t=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(c){a(c)}}function s(l){try{u(r.throw(l))}catch(c){a(c)}}function u(l){l.done?i(l.value):new t(function(c){c(l.value)}).then(o,s)}u((r=r.apply(e,[])).next())})}function Re(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(f){c=[6,f],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var _T=function(){function e(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(n,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=n,this.platform=t},e.prototype.registerFlag=function(n,t,r){if(this.flagRegistry[n]={evaluationFn:t,setHook:r},this.urlFlags[n]!=null){var i=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+i+"."),this.set(n,i)}},e.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},e.prototype.getNumber=function(n){return this.get(n)},e.prototype.getBool=function(n){return this.get(n)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(n,t){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=t,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(t)},e.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},e.prototype.setFlags=function(n){this.flags=Object.assign({},n)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,i=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return ET(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(a){var o=a.split(":"),s=o[0],u=o[1];n.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},e}();function ET(e,n,t){e[decodeURIComponent(n)]=decodeURIComponent(t||"")}function oe(){return _2}var _2=null,Uc=new Map,fp=new Map;function E2(e,n){var t=C2(e,n);return Uc.get(t)}function ST(e){return fp.get(e)}function mm(e){for(var n=Uc.entries(),t=[];;){var r=n.next(),i=r.done,a=r.value;if(i)break;var o=a[0],s=a[1];o.split("_")[0]===e&&t.push(s)}return t}function S2(e){var n=e.kernelName,t=e.backendName,r=C2(n,t);if(Uc.has(r))throw new Error("The kernel '"+n+"' for backend '"+t+"' is already registered");Uc.set(r,e)}function CT(e){var n=e.kernelName;fp.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),fp.set(n,e)}function C2(e,n){return n+"_"+e}function hp(e,n,t){return Math.max(e,Math.min(n,t))}function b2(e){return e%2==0?e:e+1}function bT(e){for(var n=0,t=0;t<e.length;t++)n+=e[t];return n}function P(e,n){if(!e)throw new Error(typeof n=="string"?n:n())}function et(e,n,t){t===void 0&&(t=""),P(Jt(e,n),function(){return t+" Shapes "+e+" and "+n+" must match"})}function Ss(e){P(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function vs(e,n,t){if(n===void 0&&(n=[]),t===void 0&&(t=!1),n==null&&(n=[]),Array.isArray(e)||oi(e)&&!t)for(var r=0;r<e.length;++r)vs(e[r],n,t);else n.push(e);return n}function Ne(e){if(e.length===0)return 1;for(var n=e[0],t=1;t<e.length;t++)n*=e[t];return n}function Jt(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function Rt(e){return e%1==0}function TT(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var n=Math.exp(2*e);return(n-1)/(n+1)}function dp(e){var n=Math.ceil(Math.sqrt(e));return[n,Math.ceil(e/n)]}function Yo(e,n){return n<=e.length?e:e+" ".repeat(n-e.length)}function gm(e,n,t){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,i){var a=0,o=function(){if(e())r();else{a++;var s=n(a);t!=null&&a>=t?i():setTimeout(o,s)}};o()})}function kT(e,n){for(var t=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)t*=e[i];else if(e[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i);if(r===-1){if(n>0&&n!==t)throw Error("Size("+n+") must match the product of shape "+e);return e}if(t===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(n%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+t);var a=e.slice();return a[r]=n/t,a}function $t(e,n){var t=n.length;return P((e=e==null?n.map(function(r,i){return i}):[].concat(e)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+e}),P(e.every(function(r){return Rt(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?t+r:r})}function Pa(e,n){for(var t=[],r=[],i=n!=null&&Array.isArray(n)&&n.length===0,a=n==null||i?null:$t(n,e).sort(),o=0,s=0;s<e.length;++s){if(a!=null){if(a[o]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(a[o]==null||a[o]>s)&&e[s]===1&&(t.push(e[s]),r.push(s)),a[o]<=s&&o++}e[s]!==1&&(t.push(e[s]),r.push(s))}return{newShape:t,keptDims:r}}function Nu(e,n){var t=null;if(e==null||e==="float32")t=new Float32Array(n);else if(e==="int32")t=new Int32Array(n);else{if(e!=="bool")throw new Error("Unknown data type "+e);t=new Uint8Array(n)}return t}function Wc(e,n){var t=null;if(e==null||e==="float32")t=new Float32Array(n);else if(e==="int32")t=new Int32Array(n);else if(e==="bool")t=new Uint8Array(n);else{if(e!=="string")throw new Error("Unknown data type "+e);t=new Array(n)}return t}function AT(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function RT(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function FT(e,n){return n!=="complex64"&&(n!=="float32"||e==="complex64")&&(n!=="int32"||e==="float32"||e==="complex64")&&(n!=="bool"||e!=="bool")}function oi(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function T2(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function IT(e){if(e==null)return 0;var n=0;return e.forEach(function(t){return n+=t.length}),n}function P0(e){return typeof e=="string"||e instanceof String}function NT(e){return typeof e=="boolean"}function DT(e){return typeof e=="number"}function Qu(e){return Array.isArray(e)?Qu(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":DT(e)?"float32":P0(e)?"string":NT(e)?"bool":"float32"}function pp(e){return!!(e&&e.constructor&&e.call&&e.apply)}function vp(e,n){for(var t=n;t<e;++t)if(e%t==0)return t;return e}function si(e){var n=e.length;if(n<2)return[];var t=new Array(n-1);t[n-2]=e[n-1];for(var r=n-3;r>=0;--r)t[r]=t[r+1]*e[r+1];return t}function k2(e,n,t){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=vs(e)),t&&AT(e,n),function(a,o){return a instanceof Float32Array&&o==="float32"||a instanceof Int32Array&&o==="int32"||a instanceof Uint8Array&&o==="bool"}(e,n))return e;if(n==null||n==="float32"||n==="complex64")return new Float32Array(e);if(n==="int32")return new Int32Array(e);if(n==="bool"){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)Math.round(e[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+n)}function xm(e,n){if(e.length===0)return n[0];var t=e.reduce(function(r,i){return r*i});if(t===0)return[];if(t!==n.length)throw new Error("["+e+"] does not match the input size.");return function r(i,a,o){var s=new Array;if(a.length===1)for(var u=a[0],l=0;l<u;l++)s[l]=o[i+l];else{u=a[0];var c=a.slice(1),f=c.reduce(function(h,d){return h*d});for(l=0;l<u;l++)s[l]=r(i+l*f,c,o)}return s}(0,e,n)}function A2(e,n){for(var t=Ju(e,n),r=0;r<t.length;r++)t[r]=1;return t}function Ju(e,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(e);if(n==="int32")return new Int32Array(e);if(n==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+n)}function Zr(){return oe().platform.now()}function R2(e){e.forEach(function(n){P(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function PT(e,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",oe().platform.encode(e,n)}function zc(e,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",oe().platform.decode(e,n)}function ym(e,n,t){if(n===0)return 0;if(n===1)return e[0];for(var r=e[e.length-1],i=0;i<e.length-1;++i)r+=t[i]*e[i];return r}function OT(e,n,t){if(n===0)return[];if(n===1)return[e];for(var r=new Array(n),i=0;i<r.length-1;++i)r[i]=Math.floor(e/t[i]),e-=r[i]*t[i];return r[r.length-1]=e,r}var MT=function(){function e(n,t){this.backendTimer=n,this.logger=t,t==null&&(this.logger=new LT)}return e.prototype.profileKernel=function(n,t,r){var i,a=this,o=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,f){if(c!=="float32")return!1;for(var h=0;h<l.length;h++){var d=l[h];if(isNaN(d)||!isFinite(d))return console.warn("Found "+d+" in the result of '"+f+"'"),!0}})(u,s.dtype,n),o.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),a.logger.logKernelProfile(n,s,u,l.kernelMs,t,c)})})}),i},e}(),LT=function(){function e(){}return e.prototype.logKernelProfile=function(n,t,r,i,a,o){var s=typeof i=="number"?Yo(i+"ms",9):i.error,u=Yo(n,25),l=t.rank,c=t.size,f=Yo(t.shape.toString(),14),h="";for(var d in a){var v=a[d].shape||t.shape,p=v.length;h+=d+": "+p+"D "+(p>0?v:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+c+"	%c"+h+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),wm=20,zs=3,Lh=7;function BT(e,n,t,r){var i=si(n),a=function(l,c,f,h){var d=Ne(c),v=h[h.length-1],p=new Array(v).fill(0),g=c.length,m=f==="complex64"?Hs(l):l;if(g>1)for(var x=0;x<d/v;x++)for(var y=x*v,w=0;w<v;w++)p[w]=Math.max(p[w],Vs(m[y+w],0,f).length);return p}(e,n,t,i),o=n.length,s=function l(c,f,h,d,v,p){p===void 0&&(p=!0);var g=h==="complex64"?2:1,m=f[0],x=f.length;if(x===0)return h==="complex64"?[Vs(Hs(c)[0],0,h)]:h==="bool"?[F2(c[0])]:[c[0].toString()];if(x===1){if(m>wm){var y=zs*g,w=Array.from(c.slice(0,y)),_=Array.from(c.slice((m-zs)*g,m*g));return h==="complex64"&&(w=Hs(w),_=Hs(_)),["["+w.map(function(G,ie){return Vs(G,v[ie],h)}).join(", ")+", ..., "+_.map(function(G,ie){return Vs(G,v[m-zs+ie],h)}).join(", ")+"]"]}return["["+(h==="complex64"?Hs(c):Array.from(c)).map(function(G,ie){return Vs(G,v[ie],h)}).join(", ")+"]"]}var S=f.slice(1),E=d.slice(1),b=d[0]*g,C=[];if(m>wm){for(var T=0;T<zs;T++){var F=(I=T*b)+b;C.push.apply(C,l(c.slice(I,F),S,h,E,v,!1))}for(C.push("..."),T=m-zs;T<m;T++)F=(I=T*b)+b,C.push.apply(C,l(c.slice(I,F),S,h,E,v,T===m-1))}else for(T=0;T<m;T++){var I;F=(I=T*b)+b,C.push.apply(C,l(c.slice(I,F),S,h,E,v,T===m-1))}var V=x===2?",":"";for(C[0]="["+C[0]+V,T=1;T<C.length-1;T++)C[T]=" "+C[T]+V;var K=`,
`;for(T=2;T<x;T++)K+=`
`;return C[C.length-1]=" "+C[C.length-1]+"]"+(p?"":K),C}(e,n,t,i,a),u=["Tensor"];return r&&(u.push("  dtype: "+t),u.push("  rank: "+o),u.push("  shape: ["+n+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function Vs(e,n,t){return Yo(Array.isArray(e)?parseFloat(e[0].toFixed(Lh))+" + "+parseFloat(e[1].toFixed(Lh))+"j":P0(e)?"'"+e+"'":t==="bool"?F2(e):parseFloat(e.toFixed(Lh)).toString(),n)}function F2(e){return e===0?"false":"true"}function Hs(e){for(var n=[],t=0;t<e.length;t+=2)n.push([e[t],e[t+1]]);return n}var Du=function(){function e(n,t,r){var i=this;if(this.dtype=t,this.shape=n.slice(),this.size=Ne(n),r!=null){var a=r.length;P(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+i.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Wc(t,this.size),this.strides=si(n)}return e.prototype.set=function(n){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),P(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var a=this.locToIndex(r);this.values[a]=n},e.prototype.get=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.length===0&&(n=[0]);for(var r=0,i=0,a=n;i<a.length;i++){var o=a[i];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=n[n.length-1],l=0;l<n.length-1;++l)u+=this.strides[l]*n[l];return this.values[u]},e.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var t=n[n.length-1],r=0;r<n.length-1;++r)t+=this.strides[r]*n[r];return t},e.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(n/this.strides[r]),n-=t[r]*this.strides[r];return t[t.length-1]=n,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return ti().makeTensor(this.values,this.shape,this.dtype)},e}(),ti=null,ne=null,I2=null,yt=function(){function e(n,t,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=t||"float32",this.size=Ne(n),this.strides=si(n),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(n,t){return this.throwIfDisposed(),this.reshape([n,t])},e.prototype.as3D=function(n,t,r){return this.throwIfDisposed(),this.reshape([n,t,r])},e.prototype.as4D=function(n,t,r,i){return this.throwIfDisposed(),this.reshape([n,t,r,i])},e.prototype.as5D=function(n,t,r,i,a){return this.throwIfDisposed(),this.reshape([n,t,r,i,a])},e.prototype.asType=function(n){return this.throwIfDisposed(),ne.cast(this,n)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Ae(this,void 0,void 0,function(){var n;return Re(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return n=t.sent(),[2,ne.buffer(this.shape,this.dtype,n)]}})})},e.prototype.bufferSync=function(){return ne.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Ae(this,void 0,void 0,function(){var n;return Re(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return n=t.sent(),[2,xm(this.shape,n)]}})})},e.prototype.arraySync=function(){return xm(this.shape,this.dataSync())},e.prototype.data=function(){return Ae(this,void 0,void 0,function(){var n,t;return Re(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=ti().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:t=r.sent();try{return[2,t.map(function(i){return zc(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var n=ti().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(t){return zc(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},e.prototype.bytes=function(){return Ae(this,void 0,void 0,function(){var n;return Re(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,ti().read(this.dataId)];case 1:return n=t.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(ti().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(n){return n===void 0&&(n=!1),ne.print(this,n)},e.prototype.reshape=function(n){return this.throwIfDisposed(),ne.reshape(this,n)},e.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},e.prototype.expandDims=function(n){return n===void 0&&(n=0),ne.expandDims(this,n)},e.prototype.cumsum=function(n,t,r){return n===void 0&&(n=0),t===void 0&&(t=!1),r===void 0&&(r=!1),ne.cumsum(this,n,t,r)},e.prototype.squeeze=function(n){return this.throwIfDisposed(),ne.squeeze(this,n)},e.prototype.clone=function(){return this.throwIfDisposed(),ne.clone(this)},e.prototype.oneHot=function(n,t,r){return this.throwIfDisposed(),ne.oneHot(this,n,t,r)},e.prototype.toString=function(n){return n===void 0&&(n=!1),BT(this.dataSync(),this.shape,this.dtype,n)},e.prototype.tile=function(n){return this.throwIfDisposed(),ne.tile(this,n)},e.prototype.gather=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),ne.gather(this,n,t)},e.prototype.matMul=function(n,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ne.matMul(this,n,t,r)},e.prototype.dot=function(n){return this.throwIfDisposed(),ne.dot(this,n)},e.prototype.norm=function(n,t,r){return n===void 0&&(n="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),ne.norm(this,n,t,r)},e.prototype.slice=function(n,t){return this.throwIfDisposed(),ne.slice(this,n,t)},e.prototype.reverse=function(n){return this.throwIfDisposed(),ne.reverse(this,n)},e.prototype.concat=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),n instanceof e&&(n=[n]),ne.concat([this].concat(n),t)},e.prototype.split=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),ne.split(this,n,t)},e.prototype.stack=function(n,t){return t===void 0&&(t=0),ne.stack([this,n],t)},e.prototype.unstack=function(n){return n===void 0&&(n=0),ne.unstack(this,n)},e.prototype.pad=function(n,t){return t===void 0&&(t=0),ne.pad(this,n,t)},e.prototype.batchNormalization=function(n,t,r,i,a){return r===void 0&&(r=.001),I2("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,t,a,i,r)},e.prototype.batchNorm=function(n,t,r,i,a){return a===void 0&&(a=.001),this.throwIfDisposed(),ne.batchNorm(this,n,t,r,i,a)},e.prototype.all=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.all(this,n,t)},e.prototype.any=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.any(this,n,t)},e.prototype.logSumExp=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.logSumExp(this,n,t)},e.prototype.sum=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.sum(this,n,t)},e.prototype.prod=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.prod(this,n,t)},e.prototype.mean=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.mean(this,n,t)},e.prototype.min=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.min(this,n,t)},e.prototype.max=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),ne.max(this,n,t)},e.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ne.argMin(this,n)},e.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ne.argMax(this,n)},e.prototype.cast=function(n){return this.throwIfDisposed(),ne.cast(this,n)},e.prototype.add=function(n){return this.throwIfDisposed(),ne.add(this,n)},e.prototype.addStrict=function(n){return this.throwIfDisposed(),ne.addStrict(this,n)},e.prototype.atan2=function(n){return this.throwIfDisposed(),ne.atan2(this,n)},e.prototype.sub=function(n){return this.throwIfDisposed(),ne.sub(this,n)},e.prototype.subStrict=function(n){return this.throwIfDisposed(),ne.subStrict(this,n)},e.prototype.pow=function(n){return this.throwIfDisposed(),ne.pow(this,n)},e.prototype.powStrict=function(n){return this.throwIfDisposed(),ne.powStrict(this,n)},e.prototype.mul=function(n){return this.throwIfDisposed(),ne.mul(this,n)},e.prototype.mulStrict=function(n){return this.throwIfDisposed(),ne.mulStrict(this,n)},e.prototype.div=function(n){return this.throwIfDisposed(),ne.div(this,n)},e.prototype.divNoNan=function(n){return this.throwIfDisposed(),ne.divNoNan(this,n)},e.prototype.floorDiv=function(n){return this.throwIfDisposed(),ne.floorDiv(this,n)},e.prototype.divStrict=function(n){return this.throwIfDisposed(),ne.divStrict(this,n)},e.prototype.minimum=function(n){return this.throwIfDisposed(),ne.minimum(this,n)},e.prototype.minimumStrict=function(n){return this.throwIfDisposed(),ne.minimumStrict(this,n)},e.prototype.maximum=function(n){return this.throwIfDisposed(),ne.maximum(this,n)},e.prototype.maximumStrict=function(n){return this.throwIfDisposed(),ne.maximumStrict(this,n)},e.prototype.mod=function(n){return this.throwIfDisposed(),ne.mod(this,n)},e.prototype.modStrict=function(n){return this.throwIfDisposed(),ne.modStrict(this,n)},e.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),ne.squaredDifferenceStrict(this,n)},e.prototype.transpose=function(n){return this.throwIfDisposed(),ne.transpose(this,n)},e.prototype.notEqual=function(n){return this.throwIfDisposed(),ne.notEqual(this,n)},e.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),ne.notEqualStrict(this,n)},e.prototype.less=function(n){return this.throwIfDisposed(),ne.less(this,n)},e.prototype.lessStrict=function(n){return this.throwIfDisposed(),ne.lessStrict(this,n)},e.prototype.equal=function(n){return this.throwIfDisposed(),ne.equal(this,n)},e.prototype.equalStrict=function(n){return this.throwIfDisposed(),ne.equalStrict(this,n)},e.prototype.lessEqual=function(n){return this.throwIfDisposed(),ne.lessEqual(this,n)},e.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),ne.lessEqualStrict(this,n)},e.prototype.greater=function(n){return this.throwIfDisposed(),ne.greater(this,n)},e.prototype.greaterStrict=function(n){return this.throwIfDisposed(),ne.greaterStrict(this,n)},e.prototype.greaterEqual=function(n){return this.throwIfDisposed(),ne.greaterEqual(this,n)},e.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),ne.greaterEqualStrict(this,n)},e.prototype.logicalAnd=function(n){return this.throwIfDisposed(),ne.logicalAnd(this,n)},e.prototype.logicalOr=function(n){return this.throwIfDisposed(),ne.logicalOr(this,n)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),ne.logicalNot(this)},e.prototype.logicalXor=function(n){return this.throwIfDisposed(),ne.logicalXor(this,n)},e.prototype.where=function(n,t){return this.throwIfDisposed(),ne.where(n,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),ne.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),ne.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),ne.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),ne.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),ne.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),ne.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),ne.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),ne.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),ne.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),ne.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),ne.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),ne.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),ne.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),ne.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),ne.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),ne.abs(this)},e.prototype.clipByValue=function(n,t){return this.throwIfDisposed(),ne.clipByValue(this,n,t)},e.prototype.relu=function(){return this.throwIfDisposed(),ne.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),ne.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),ne.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),ne.selu(this)},e.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),ne.leakyRelu(this,n)},e.prototype.prelu=function(n){return this.throwIfDisposed(),ne.prelu(this,n)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),ne.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),ne.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),ne.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),ne.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),ne.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),ne.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),ne.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),ne.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),ne.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),ne.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),ne.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),ne.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),ne.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),ne.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),ne.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),ne.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),ne.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),ne.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),ne.round(this)},e.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),ne.step(this,n)},e.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ne.softmax(this,n)},e.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ne.logSoftmax(this,n)},e.prototype.resizeBilinear=function(n,t){return t===void 0&&(t=!1),this.throwIfDisposed(),ne.image.resizeBilinear(this,n,t)},e.prototype.resizeNearestNeighbor=function(n,t){return t===void 0&&(t=!1),this.throwIfDisposed(),ne.image.resizeNearestNeighbor(this,n,t)},e.prototype.conv1d=function(n,t,r,i,a,o){return i===void 0&&(i="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),ne.conv1d(this,n,t,r,i,a,o)},e.prototype.conv2d=function(n,t,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),ne.conv2d(this,n,t,r,i,a,o)},e.prototype.conv2dTranspose=function(n,t,r,i,a){return this.throwIfDisposed(),ne.conv2dTranspose(this,n,t,r,i,a)},e.prototype.depthwiseConv2D=function(n,t,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),ne.depthwiseConv2d(this,n,t,r,i,a,o)},e.prototype.separableConv2d=function(n,t,r,i,a,o){return a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),ne.separableConv2d(this,n,t,r,i,a,o)},e.prototype.avgPool=function(n,t,r,i){return this.throwIfDisposed(),ne.avgPool(this,n,t,r,i)},e.prototype.maxPool=function(n,t,r,i){return this.throwIfDisposed(),ne.maxPool(this,n,t,r,i)},e.prototype.localResponseNormalization=function(n,t,r,i){return n===void 0&&(n=5),t===void 0&&(t=1),r===void 0&&(r=1),i===void 0&&(i=.5),ne.localResponseNormalization(this,n,t,r,i)},e.prototype.pool=function(n,t,r,i,a){return this.throwIfDisposed(),ne.pool(this,n,t,r,i,a)},e.prototype.variable=function(n,t,r){return n===void 0&&(n=!0),this.throwIfDisposed(),ti().makeVariable(this,n,t,r)},e.prototype.unsortedSegmentSum=function(n,t){return this.throwIfDisposed(),ne.unsortedSegmentSum(this,n,t)},e.prototype.batchToSpaceND=function(n,t){return this.throwIfDisposed(),ne.batchToSpaceND(this,n,t)},e.prototype.spaceToBatchND=function(n,t){return this.throwIfDisposed(),ne.spaceToBatchND(this,n,t)},e.prototype.topk=function(n,t){return n===void 0&&(n=1),t===void 0&&(t=!0),this.throwIfDisposed(),ne.topk(this,n,t)},e.prototype.stridedSlice=function(n,t,r,i,a,o,s,u){return i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),ne.stridedSlice(this,n,t,r,i,a,o,s,u)},e.prototype.depthToSpace=function(n,t){return this.throwIfDisposed(),ne.depthToSpace(this,n,t)},e.prototype.fft=function(){return this.throwIfDisposed(),ne.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),ne.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),ne.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),ne.spectral.irfft(this)},e}();Object.defineProperty(yt,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var _m,mp,gp,xp,yp,ms=function(e){function n(t,r,i,a){var o=e.call(this,t.shape,t.dtype,t.dataId,a)||this;return o.trainable=r,o.name=i,o}return $r(n,e),n.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!Jt(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");ti().disposeTensor(this),this.dataId=t.dataId,ti().incRef(this,null)},n.prototype.dispose=function(){ti().disposeVariable(this),this.isDisposedInternal=!0},n}(yt);Object.defineProperty(ms,Symbol.hasInstance,{value:function(e){return e instanceof yt&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(_m||(_m={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(mp||(mp={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(gp||(gp={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(xp||(xp={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(yp||(yp={}));var UT={float32:xp,int32:mp,bool:gp,complex64:yp};function on(e,n){if(e==="string"||n==="string"){if(e==="string"&&n==="string")return"string";throw new Error("Can not upcast "+e+" with "+n)}return UT[e][n]}function Bh(e){return on(e,"int32")}function St(e,n){if(e.dtype===n.dtype)return[e,n];var t=on(e.dtype,n.dtype);return[e.cast(t),n.cast(t)]}function WT(e,n){P(e.dtype===n.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+n.dtype+") input must match"})}function N2(e){var n=[];return function t(r,i,a){if(r!=null){if(r instanceof yt)return void i.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var u in s){var l=s[u];a.has(l)||(a.add(l),t(l,i,a))}}}}(e,n,new Set),n}var Uh,Em=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},e}(),zT=function(){function e(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Em}return e.prototype.ready=function(){return Ae(this,void 0,void 0,function(){var n,t,r;return Re(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),t=0,i.label=1;case 1:return t<n.length?(r=n[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),t=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},e.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},e.prototype.registerBackend=function(n,t,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:t,priority:r},!0)},e.prototype.setBackend=function(n){return Ae(this,void 0,void 0,function(){var t,r,i;return Re(this,function(a){switch(a.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(n),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return i=a.sent(),[3,3];case 2:i=r,a.label=3;case 3:if(!i)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new MT(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var n=this;mm(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(n.backendInstance)})},e.prototype.disposeRegisteredKernels=function(n){var t=this;mm(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[n])})},e.prototype.initializeBackend=function(n){var t=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var a=++this.pendingBackendInitId,o=i.then(function(s){return!(a<t.pendingBackendInitId)&&(t.registry[n]=s,t.pendingBackendInit=null,!0)}).catch(function(s){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return n.registryFactory[r].priority-n.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),t=0;t<n.length;t++){var r=n[t],i=this.initializeBackend(r),a=i.success,o=i.asyncInit;if(o||a)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(n,t){var r=this.state.tensorInfo.get(t),i=r.backend,a=this.readSync(t);i.disposeData(t),r.backend=n,n.move(t,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(n,t){var r,i=this,a=null;if(t==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");t=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=n}return this.scopedRun(function(){return i.startScope(a)},function(){return i.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(n,t,r){n();try{var i=r();return t(),i}catch(a){throw t(),a}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(n){var t=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[t],function(i){return{x:function(){return i.toFloat()}}},[]),t},e.prototype.runKernel=function(n,t,r,i,a){return this.runKernelFunc(null,t,null,n,r,i,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(n,t,r){var i=this.backend.numDataIds(),a=0;r.forEach(function(u){a+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-t-a-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},e.prototype.runKernelFunc=function(n,t,r,i,a,o,s){var u,l=this;o===void 0&&(o=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var h,d=function(x){f&&(c=x.map(function(y){return l.keep(l.clone(y))}))},v=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,m=E2(i,this.backendName);return h=m!=null?function(){var x=l.backend.numDataIds();g=m.kernelFunc({inputs:t,attrs:a,backend:l.backend});var y=Array.isArray(g)?g:[g];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,y);var w=y.map(function(S){var E=S.dataId,b=S.shape,C=S.dtype;return l.makeTensorFromDataId(E,b,C)}),_=w.filter(function(S,E){return s[E]});return d((o||[]).slice().concat(_)),w}:function(){var x=l.backend.numDataIds();g=l.tidy(function(){return n(l.backend,d)});var y=Array.isArray(g)?g:[g];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,y),y},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,t,function(){return h()}):h()}),f&&this.addTapeNode(i,t,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(x){return t[x].shape}),outputShapes:u.map(function(x){return x.shape})}),Array.isArray(g)?u:u[0]},e.prototype.makeTensor=function(n,t,r,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var a=n;r==="string"&&P0(n[0])&&(a=n.map(function(c){return PT(c)}));var o=i.write(a,t,r),s=new yt(t,r,o,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(o),l=IT(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},e.prototype.makeTensorFromDataId=function(n,t,r,i){var a=new yt(t,r=r||"float32",n,this.nextTensorId());return this.incRef(a,i),a},e.prototype.makeVariable=function(n,t,r,i){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.asType(i));var a=new ms(n,t,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(n,t){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*T2(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:t||this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof ms||this.track(n)},e.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(n.dataId);t.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var t=this.state.registeredVariables[n];this.disposeVariable(t)}},e.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},e.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},e.prototype.profile=function(n){return Ae(this,void 0,void 0,function(){var t,r;return Re(this,function(i){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(n,t,r,i,a){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:n,inputs:t,outputs:r,saved:a},u=ST(n);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(c,f){if(c==null){var h=r[f],d=Ju(h.size,h.dtype);return o.makeTensor(d,h.shape,h.dtype)}return c}),i(l.length>1?l:l[0],a)}),this.state.activeTape.push(s)},e.prototype.keep=function(n){return n.kept=!0,n},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(n){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(t.name=n),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(n){for(var t=this,r=N2(n),i=new Set(r.map(function(u){return u.id})),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||i.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||t.track(u)})},e.prototype.gradients=function(n,t,r,i){var a=this;if(i===void 0&&(i=!1),P(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",n)});P(o instanceof yt,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var f={},h={},d=0;d<l.length;d++)f[l[d].id]=!0;for(d=0;d<u.length;d++){var v=(S=u[d]).inputs;for(var p in v){for(var g=v[p],m=!1,x=0;x<l.length;x++)if(f[g.id]){S.outputs.forEach(function(T){return f[T.id]=!0}),m=!0,h[S.id]=!0;break}if(m)break}}var y={};y[c.id]=!0;var w={};for(d=u.length-1;d>=0;d--)for(v=(S=u[d]).inputs,x=0;x<S.outputs.length;x++)if(y[S.outputs[x].id]){for(var p in v)y[v[p].id]=!0,w[S.id]=!0;break}var _=[];for(d=0;d<u.length;d++){var S;if(h[(S=u[d]).id]&&w[S.id]){var E={};for(var p in S.inputs){var b=S.inputs[p];f[b.id]&&(E[p]=b)}var C=Object.assign({},S);C.inputs=E,C.outputs=S.outputs,_.push(C)}}return _}(this.state.activeTape,t,o);if(!i&&s.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[o.id]=r??(u=o.shape,l=A2(Ne(u),"float32"),j.makeTensor(l,u,"float32")),function(h,d,v){for(var p=function(m){var x=d[m],y=[];if(x.outputs.forEach(function(E){var b=h[E.id];b!=null?y.push(b):y.push(null)}),x.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+x.kernelName+".");var w=x.gradient(y),_=function(E){if(!(E in w))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(w)+".");var b=v(function(){return w[E]()});if(b.dtype!=="float32")throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+b.dtype+"'");var C=x.inputs[E];if(!Jt(b.shape,C.shape))throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input '"+E+"' has shape '"+b.shape+"', which does not match the shape of the input '"+C.shape+"'");if(h[C.id]==null)h[C.id]=b;else{var T=h[C.id];h[C.id]=T.add(b),T.dispose()}};for(var S in x.inputs)_(S)},g=d.length-1;g>=0;g--)p(g)}(c,s,function(h){return a.tidy(h)});var f=t.map(function(h){return c[h.id]});return a.state.gradientDepth===0&&(a.state.activeTape.forEach(function(h){for(var d=0,v=h.saved;d<v.length;d++)v[d].dispose()}),a.state.activeTape=null),{value:o,grads:f}})},e.prototype.customGrad=function(n){var t=this;return P(pp(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];P(i.every(function(s){return s instanceof yt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return i.forEach(function(s,u){o[u]=s}),t.runKernelFunc(function(s,u){return P((r=n.apply(void 0,i.concat([u]))).value instanceof yt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),P(pp(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];P(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),P(c.every(function(h){return h instanceof yt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(h,d){f[d]=function(){return h}}),f})}},e.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},e.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},e.prototype.time=function(n){return Ae(this,void 0,void 0,function(){var t,r;return Re(this,function(i){switch(i.label){case 0:return t=Zr(),[4,this.backend.time(n)];case 1:return(r=i.sent()).wallMs=Zr()-t,[2,r]}})})},e.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Em,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),j=function(){var e=function(){if(Uh==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}Uh=t}return Uh}();if(e._tfengine==null){var n=new _T(e);e._tfengine=new zT(n)}return function(t){_2=t}(e._tfengine.ENV),ti=function(){return e._tfengine},e._tfengine}();function D2(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var mi=oe();mi.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),mi.registerFlag("IS_BROWSER",function(){return D2()}),mi.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),mi.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),mi.registerFlag("PROD",function(){return!1}),mi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return mi.getBool("DEBUG")}),mi.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),mi.registerFlag("IS_TEST",function(){return!1});var Pu,or,nr,Na={},Wh={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function VT(e,n){Na[e]=n}function fi(e){e in Na||(Na[e]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Na[t]},!1),t===1?r.getContext("webgl",Wh)||r.getContext("experimental-webgl",Wh):r.getContext("webgl2",Wh)}(e));var n=Na[e];return n.isContextLost()?(delete Na[e],fi(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Na[e])}function Uf(e,n){return[n,e]}function ou(e){var n=Ne(e);return dp(Math.ceil(n/4))}function Zu(e,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(e/2))]}function O0(e,n){var t,r,i,a,o,s,u,l,c,f=e;return oe().getNumber("WEBGL_VERSION")===2?(t=f.R32F,r=f.R16F,i=f.RGBA16F,a=f.RGBA32F,o=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(t=e.RGBA,r=e.RGBA,i=e.RGBA,a=f.RGBA,o=e.RGBA,s=4,u=4,l=n!=null?n.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function De(e,n,t){var r=t();return n&&function(i){var a=i.getError();if(a!==i.NO_ERROR)throw new Error("WebGL Error: "+GT(i,a))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Pu||(Pu={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(or||(or={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(nr||(nr={}));var HT=596e-10,$T=65504;function jT(e){return!!(oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||HT<Math.abs(e)&&Math.abs(e)<$T)}function GT(e,n){switch(n){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function Pl(e,n,t){return Pi(e,n,function(){return e.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function XT(e,n,t){var r=Pi(e,n,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(De(e,n,function(){return e.shaderSource(r,t)}),De(e,n,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function KT(e,n,t){var r=Pi(e,n,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(De(e,n,function(){return e.shaderSource(r,t)}),De(e,n,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(i,a){var o=qT.exec(a);if(o==null)return console.log("Couldn't parse line number in error: "+a),void console.log(i);for(var s=+o[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(g,m){return Yo((m+1).toString(),l)+g}),f=0,h=0;h<c.length;h++)f=Math.max(c[h].length,f);var d=c.slice(0,s-1),v=c.slice(s-1,s),p=c.slice(s);console.log(d.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+Yo(v[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join(`
`))}(t,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var zh,Vh,qT=/ERROR: [0-9]+:([0-9]+):/g;function YT(e,n){return Pi(e,n,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function QT(e,n,t){if(De(e,n,function(){return e.linkProgram(t)}),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Hh(e,n,t){if(De(e,n,function(){return e.validateProgram(t)}),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function JT(e,n,t){var r=Pi(e,n,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return De(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),De(e,n,function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}),r}function ZT(e,n,t){var r=Pi(e,n,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return De(e,n,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),De(e,n,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}),r}function e4(e,n){return Pi(e,n,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function t4(e,n){var t=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||n<=0){var r="["+e+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>t||n>t)throw r="["+e+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function n4(e,n){return Pi(e,n,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Sm(e,n,t,r,i,a,o,s){var u=e.getAttribLocation(t,r);return u!==-1&&(De(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,i)}),De(e,n,function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,o,s)}),De(e,n,function(){return e.enableVertexAttribArray(u)}),!0)}function r4(e,n,t,r){u4(e,r),De(e,n,function(){return e.activeTexture(e.TEXTURE0+r)}),De(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)})}function i4(e,n,t,r){return Pi(e,n,function(){return e.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function a4(e,n,t){return e.getUniformLocation(n,t)}function o4(e,n,t,r,i,a){De(e,n,function(){return r4(e,n,r,a)}),De(e,n,function(){return e.uniform1i(i,a)})}function $h(e,n,t,r){De(e,n,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),De(e,n,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)})}function Cm(e,n,t){De(e,n,function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)}),De(e,n,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Ol(e){var n=e.checkFramebufferStatus(e.FRAMEBUFFER);if(n!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+s4(e,n))}function s4(e,n){switch(n){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function Pi(e,n,t,r){var i=De(e,n,function(){return t()});if(i==null)throw new Error(r);return i}function u4(e,n){var t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+e.TEXTURE0;if(r<e.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function Vc(e,n){return n===void 0&&(n=2),Ne(e.slice(0,e.length-n))}function Hc(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function jh(e){var n=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(n=[Vc(e)].concat(Hc(e))),n}function l4(e,n){var t;n===void 0&&(n=!1);var r=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(e=e.map(function(l,c){return c>=e.length-2?b2(e[c]):e[c]})).length===1&&(e=[2,e[0]])),e.length!==2){var i=Pa(e);e=i.newShape}var a=Ne(e);if(e.length<=1&&a<=r)return[1,a];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(n){var o=Vc(e),s=2,u=2;return e.length&&(s=(t=Hc(e))[0],u=t[1]),dp(a=o*(s/2)*(u/2)).map(function(l){return 2*l})}return dp(a)}function Ml(e){return e%2==0}function Ll(e,n){if(Jt(e=e.slice(-2),n=n.slice(-2))||!e.length||!n.length||e[0]===0||e[1]===0||n[0]===0||n[1]===0)return!0;if(e.length!==n.length){var t=e.slice(-1)[0],r=n.slice(-1)[0];if(t===r||Ml(t)&&Ml(r)&&(e[0]===1||n[0]===1))return!0}return e[1]===n[1]&&Ml(e[0])&&Ml(n[0])}function c4(e){if(zh==null){var n=fi(e);zh=n.getParameter(n.MAX_TEXTURE_SIZE)}return zh}function f4(e){if(Vh==null){var n=fi(e);Vh=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Vh)}function h4(e){if(e===0)return 0;var n=fi(e);return Er(n,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Er(n,"EXT_disjoint_timer_query")?1:0}function Er(e,n){return e.getExtension(n)!=null}function bm(e){try{if(fi(e)!=null)return!0}catch{return!1}return!1}function d4(e){if(e===0)return!1;var n=fi(e);if(e===1){if(!Er(n,"OES_texture_float"))return!1}else if(!Er(n,"EXT_color_buffer_float"))return!1;return wp(n)}function p4(e){if(e===0)return!1;var n=fi(e);if(e!==1){if(Er(n,"EXT_color_buffer_float"))return wp(n);if(Er(n,"EXT_color_buffer_half_float")){var t=n.getExtension("EXT_color_buffer_half_float");return function(r,i){var a=O0(r,i),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),u}(n,t)}return!1}return!!Er(n,"OES_texture_float")&&!!Er(n,"WEBGL_color_buffer_float")&&wp(n)}function wp(e){var n=O0(e),t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(r),i}function v4(e){return e===2&&fi(e).fenceSync!=null}var Be=oe();function P2(e){oe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function be(e,n){return j.tidy(e,n)}function jn(e){N2(e).forEach(function(n){return n.dispose()})}function m4(e){return j.keep(e)}function $c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];oe().getBool("IS_TEST")||console.warn.apply(console,e)}function Sa(e,n){var t=e;if(oi(e))return n==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(t)||oi(t)&&n!=="string";)r.push(t.length),t=t[0];return Array.isArray(e)&&oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(a,o,s){if(s=s||[],!Array.isArray(a)&&!oi(a))return void P(o.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});P(o.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"}),P(a.length===o[0],function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+a.length+" elements"});for(var u=o.slice(1),l=0;l<a.length;++l)i(a[l],u,s.concat(l))}(e,r,[]),r}function Tm(e,n,t,r){if(e!=null&&(e!=="numeric"&&e!==n||e==="numeric"&&n==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+e+" tensor, but got "+n+" tensor")}function A(e,n,t,r){if(r===void 0&&(r="numeric"),e instanceof yt)return Tm(r,e.dtype,n,t),e;var i=Qu(e);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Tm(r,i,n,t),e==null||!oi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var a=e==null?"null":e.constructor.name;throw new Error("Argument '"+n+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=Sa(e,i);oi(e)||Array.isArray(e)||(e=[e]);var s=i!=="string"?k2(e,i,oe().getBool("DEBUG")):vs(e,[],!0);return j.makeTensor(s,o,i)}function jc(e,n,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+n+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(i,a){return A(i,n+"["+a+"]",t)},r)}function O2(e,n){for(var t=0;t<e.length;++t)if(e[e.length-t-1]!==n-1-t)return!1;return!0}function g4(e,n,t){for(var r=e.length+n.length,i=[],a=0,o=0,s=0;s<r;s++)t.indexOf(s)===-1?i.push(e[a++]):i.push(n[o++]);return i}function xn(e,n){for(var t=[],r=e.length,i=0;i<r;i++)n.indexOf(i)===-1&&t.push(e[i]);return[t,n.map(function(a){return e[a]})]}function Xn(e,n){return g4(e,n.map(function(t){return 1}),n)}function er(e,n,t){P(O2(n,t),function(){return e+" supports only inner-most axes for now. Got axes "+n+" and rank-"+t+" input."})}function hi(e,n){if(O2(e,n))return null;for(var t=[],r=0;r<n;++r)e.indexOf(r)===-1&&t.push(r);return e.forEach(function(i){return t.push(i)}),t}function M0(e){return e.map(function(n,t){return[t,n]}).sort(function(n,t){return n[1]-t[1]}).map(function(n){return n[0]})}function di(e,n){for(var t=[],r=n-e;r<n;++r)t.push(r);return t}function x4(e,n){var t=e[0].length;e.forEach(function(i,a){P(i.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+t+")"})}),P(n>=0&&n<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=e[0];e.forEach(function(i,a){for(var o=0;o<t;o++)P(o===n||i[o]===r[o],function(){return"Error in concat"+t+"D: Shape of tensors["+a+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function gs(e,n){for(var t=e[0].slice(),r=1;r<e.length;r++)t[n]+=e[r][n];return t}function W(e){var n=Object.keys(e);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var t=n[0],r=e[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];j.startScope(t);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),j.endScope(s),s}catch(u){throw j.endScope(null),u}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}Be.registerFlag("HAS_WEBGL",function(){return Be.getNumber("WEBGL_VERSION")>0}),Be.registerFlag("WEBGL_VERSION",function(){return bm(2)?2:bm(1)?1:0}),Be.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Be.get("WEBGL_VERSION")===2}),Be.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Be.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Be.registerFlag("WEBGL_PACK",function(){return Be.getBool("HAS_WEBGL")}),Be.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_PACK_CLIP",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Be.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_PACK_REDUCE",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_CONV_IM2COL",function(){return Be.getBool("WEBGL_PACK")}),Be.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return c4(Be.getNumber("WEBGL_VERSION"))}),Be.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return f4(Be.getNumber("WEBGL_VERSION"))}),Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Be.getNumber("WEBGL_VERSION");return e===0?0:h4(e)}),Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Be.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Be.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return d4(Be.getNumber("WEBGL_VERSION"))}),Be.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Be.getBool("WEBGL_FORCE_F16_TEXTURES")&&Be.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Be.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return p4(Be.getNumber("WEBGL_VERSION"))}),Be.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return v4(Be.getNumber("WEBGL_VERSION"))}),Be.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Be.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),I2=P2;var rn=W({complex_:function(e,n){var t=A(e,"real","complex"),r=A(n,"imag","complex");return et(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),j.runKernelFunc(function(i){return i.complex(t,r)},{$real:t,$imag:r})}}),wr=W({real_:function(e){var n=A(e,"input","real");return j.runKernelFunc(function(t){return t.real(n)},{$input:n})}}),ni=W({imag_:function(e){var n=A(e,"input","imag");return j.runKernelFunc(function(t){return t.imag(n)},{$input:n})}});function sn(e,n,t){return Ca(e,n,Sa(e,t),t)}function Ca(e,n,t,r){if(r==null&&(r=Qu(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!oi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){R2(n);var i=Ne(n),a=Ne(t);P(i===a,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+a});for(var o=0;o<t.length;++o){var s=t[o],u=o!==t.length-1||s!==Ne(n.slice(o));P(t[o]===n[o]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+n+"). "})}}return oi(e)||Array.isArray(e)||(e=[e]),n=n||t,e=r!=="string"?k2(e,r,oe().getBool("DEBUG")):vs(e,[],!0),j.makeTensor(e,n,r)}function Ee(e,n){if((oi(e)&&n!=="string"||Array.isArray(e))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&oi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ca(e,[],[],n)}function Dt(e,n){Ss(e);var t=Sa(e,n);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ca(e,null,t,n)}function la(e,n,t){if(Ss(e),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Sa(e,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ca(e,n,r,t)}function L0(e,n,t){if(Ss(e),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Sa(e,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ca(e,n,r,t)}function Un(e,n,t){if(Ss(e),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Sa(e,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ca(e,n,r,t)}function y4(e,n,t){if(Ss(e),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Sa(e,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ca(e,n,r,t)}function w4(e,n,t){if(Ss(e),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Sa(e,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ca(e,n=n||r,r,t)}function _4(e,n,t,r){return n===void 0&&(n=!0),j.makeVariable(e,n,t,r)}function Cs(e,n){if(n===void 0&&(n="float32"),n==="complex64"){var t=Cs(e,"float32"),r=ct(e,"float32");return rn(t,r)}var i=A2(Ne(e),n);return j.makeTensor(i,e,n)}function ct(e,n){if(n===void 0&&(n="float32"),n==="complex64"){var t=ct(e,"float32"),r=ct(e,"float32");return rn(t,r)}var i=Ju(Ne(e),n);return j.makeTensor(i,e,n)}function ui(e,n,t){return j.runKernelFunc(function(r){return r.fill(e,n,t)},{})}function E4(e,n,t){if(t<=0)throw new Error("The number of values should be positive.");return j.runKernelFunc(function(r){return r.linspace(e,n,t)},{})}function Gc(e,n,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(e===n||e<n&&t<0||n<e&&t>1)return ct([0],r);var i=Ju(Math.abs(Math.ceil((n-e)/t)),r);n<e&&t===1&&(t=-1),i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+t;return Dt(i,r)}var M2=W({onesLike_:function(e){var n=A(e,"x","onesLike");if(n.dtype==="complex64"){var t=M2(wr(n)),r=Ke(ni(n));return rn(t,r)}return j.runKernelFunc(function(i){return i.onesLike(n)},{$x:n},function(i,a){return{$x:function(){return Ke(i)}}})}}),Ke=W({zerosLike_:function(e){var n=A(e,"x","zerosLike");return j.runKernelFunc(function(t){return t.zerosLike(n)},{$x:n},function(t,r){return{$x:function(){return Ke(t)}}})}}),Wt=W({concat_:function(e,n){n===void 0&&(n=0),P(e.length>=1,function(){return"Pass at least one tensor to concat"});var t=jc(e,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),n=$t(n,t[0].shape)[0];var r=gs(t.map(function(s){return s.shape}),n);if(Ne(r)===0)return sn([],r);if((t=t.filter(function(s){return s.size>0})).length===1)return t[0];var i=t.map(function(s){return s.shape});x4(i,n);var a=t,o={axis:n};return j.runKernelFunc(function(s){return s.concat(t,n)},a,function(s){var u=i.map(function(l){return l[n]});return B0(s,u,n).map(function(l){return function(){return l}})},"Concat",o)}}),S4=W({concat1d_:function(e){return Wt(e,0)}}),C4=W({concat2d_:function(e,n){return Wt(e,n)}}),b4=W({concat3d_:function(e,n){return Wt(e,n)}}),T4=W({concat4d_:function(e,n){return Wt(e,n)}}),B0=W({split_:function(e,n,t){t===void 0&&(t=0);var r,i=A(e,"x","split");return t=$t(t,i.shape)[0],typeof n=="number"?(P(i.shape[t]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(i.shape[t]/n)):(P(i.shape[t]===n.reduce(function(a,o){return a+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),j.runKernelFunc(function(a){return a.split(i,r,t)},{$x:i},function(a){return{$x:function(){return Wt(a,t)}}})}});function io(e,n){return e(n={exports:{}},n.exports),n.exports}var k4=io(function(e){(function(n,t,r){function i(s){var u,l=this,c=(u=4022871197,function(f){f=f.toString();for(var h=0;h<f.length;h++){var d=.02519603282416938*(u+=f.charCodeAt(h));d-=u=d>>>0,u=(d*=u)>>>0,u+=4294967296*(d-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function o(s,u){var l=new i(s),c=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:this.alea=o})(0,e)}),A4=io(function(e){(function(n,t,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:this.xor128=o})(0,e)}),R4=io(function(e){(function(n,t,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:this.xorwow=o})(0,e)}),F4=io(function(e){(function(n,t,r){function i(s){var u=this;u.next=function(){var l,c,f=u.x,h=u.i;return l=f[h],c=(l^=l>>>7)^l<<24,c^=(l=f[h+1&7])^l>>>10,c^=(l=f[h+3&7])^l>>>3,c^=(l=f[h+4&7])^l<<7,l=f[h+7&7],c^=(l^=l<<13)^l<<9,f[h]=c,u.i=h+1&7,c},function(l,c){var f,h=[];if(c===(0|c))h[0]=c;else for(c=""+c,f=0;f<c.length;++f)h[7&f]=h[7&f]<<15^c.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],l.x=h,l.i=0,f=256;f>0;--f)l.next()}(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:this.xorshift7=o})(0,e)}),I4=io(function(e){(function(n,t,r){function i(s){var u=this;u.next=function(){var l,c,f=u.w,h=u.X,d=u.i;return u.w=f=f+1640531527|0,c=h[d+34&127],l=h[d=d+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=h[d]=c^l,u.i=d,c+(f^f>>>16)|0},function(l,c){var f,h,d,v,p,g=[],m=128;for(c===(0|c)?(h=c,c=null):(c+="\0",h=0,m=Math.max(m,c.length)),d=0,v=-32;v<m;++v)c&&(h^=c.charCodeAt((v+32)%c.length)),v===0&&(p=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(p=p+1640531527|0,d=(f=g[127&v]^=h+p)==0?d+1:0);for(d>=128&&(g[127&(c&&c.length||0)]=-1),d=127,v=512;v>0;--v)h=g[d+34&127],f=g[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,g[d]=h^f;l.w=p,l.X=g,l.i=d}(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:this.xor4096=o})(0,e)}),N4=io(function(e){(function(n,t,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,h=u.c,d=u.d,v=u.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^v,v=v-f|0,u.b=f=f<<20^f>>>12^h,u.c=h=h-d|0,u.d=d<<16^h>>>16^v,u.a=v-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:this.tychei=o})(0,e)}),Da=io(function(e){(function(n,t){var r,i=this,a=256,o=6,s="random",u=t.pow(a,o),l=t.pow(2,52),c=2*l,f=a-1;function h(m,x,y){var w=[],_=p(function b(C,T){var F,I=[],V=typeof C;if(T&&V=="object")for(F in C)try{I.push(b(C[F],T-1))}catch{}return I.length?I:V=="string"?C:C+"\0"}((x=x==1?{entropy:!0}:x||{}).entropy?[m,g(n)]:m??function(){try{var b;return r&&(b=r.randomBytes)?b=b(a):(b=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(b)),g(b)}catch{var C=i.navigator,T=C&&C.plugins;return[+new Date,i,T,i.screen,g(n)]}}(),3),w),S=new d(w),E=function(){for(var b=S.g(o),C=u,T=0;b<l;)b=(b+T)*a,C*=a,T=S.g(1);for(;b>=c;)b/=2,C/=2,T>>>=1;return(b+T)/C};return E.int32=function(){return 0|S.g(4)},E.quick=function(){return S.g(4)/4294967296},E.double=E,p(g(S.S),n),(x.pass||y||function(b,C,T,F){return F&&(F.S&&v(F,S),b.state=function(){return v(S,{})}),T?(t[s]=b,C):b})(E,_,"global"in x?x.global:this==t,x.state)}function d(m){var x,y=m.length,w=this,_=0,S=w.i=w.j=0,E=w.S=[];for(y||(m=[y++]);_<a;)E[_]=_++;for(_=0;_<a;_++)E[_]=E[S=f&S+m[_%y]+(x=E[_])],E[S]=x;(w.g=function(b){for(var C,T=0,F=w.i,I=w.j,V=w.S;b--;)C=V[F=f&F+1],T=T*a+V[f&(V[F]=V[I=f&I+C])+(V[I]=C)];return w.i=F,w.j=I,T})(a)}function v(m,x){return x.i=m.i,x.j=m.j,x.S=m.S.slice(),x}function p(m,x){for(var y,w=m+"",_=0;_<w.length;)x[f&_]=f&(y^=19*x[f&_])+w.charCodeAt(_++);return g(x)}function g(m){return String.fromCharCode.apply(0,m)}if(t["seed"+s]=h,p(t.random(),n),e.exports){e.exports=h;try{r=require("crypto")}catch{}}})([],Math)});Da.alea=k4,Da.xor128=A4,Da.xorwow=R4,Da.xorshift7=F4,Da.xor4096=I4,Da.tychei=N4;var Wf=Da.alea,U0=function(){function e(n,t,r,i,a){this.mean=n,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=a||Math.random();this.random=Wf(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var t,r,i=!1;!i;){var a=void 0,o=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*o*u,this.truncated&&!this.isValidTruncated(t)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},e.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},e.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},e}(),D4=function(){function e(n,t,r,i){this.alpha=n,this.beta=1/t,this.dtype=r;var a=i||Math.random();this.randu=Wf(a.toString()),this.randn=new U0(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var n,t,r,i,a,o;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,t=1-.331*(n=i*i)*n,r=.5*n+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},e}(),P4=function(){function e(n,t,r,i){var a=this;if(n===void 0&&(n=0),t===void 0&&(t=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=n,this.range=t-n,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+t+" <= 1 and dtype is not float");this.random=Wf(i)}return e.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function ze(e,n,t){return n===void 0&&(n="float32"),n=n||"float32",R2(e),new Du(e,n,t)}function O4(e,n){n===void 0&&(n=!1),console.log(e.toString(n))}var L2=W({batchToSpaceND_:function(e,n,t){var r=A(e,"x","batchToSpaceND"),i=n.reduce(function(a,o){return a*o});return P(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),P(t.length===n.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+n.length}),P(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),j.runKernelFunc(function(a){return a.batchToSpaceND(r,n,t)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(n,t)}}})}}),M4=W({broadcastTo_:function(e,n){var t=A(e,"broadcastTo","x"),r=t.shape;if(n.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<t.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+t.rank+".");if(n.length>t.rank){for(var i=t.shape.slice();i.length<n.length;)i.unshift(1);t=t.reshape(i)}for(var a=Array.from(n),o=n.length-1;o>=0;o--)if(t.shape[o]===n[o])a[o]=1;else if(t.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var s=a.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?t.clone():j.runKernelFunc(function(u){return u.tile(t,a)},{input:t},function(u){return{input:function(){return u.sum(s,!0)}}})}}),L4=W({cast_:function(e,n){var t=A(e,"x","cast");if(!RT(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&t.dtype!=="string"||n!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return j.runKernelFunc(function(i){return i.cast(t,n)},{x:t},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),B4=W({clone_:function(e){var n=A(e,"x","clone",null);return j.runKernelFunc(function(){return j.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(t){return{$x:function(){return t.toFloat()}}})}}),U4=W({cumsum_:function(e,n,t,r){n===void 0&&(n=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var i=A(e,"x","cumsum"),a=hi([n|=0],i.rank),o=i;a!=null&&(o=i.transpose(a));var s=di(1,i.rank)[0],u=j.runKernelFunc(function(l){return l.cumsum(o,s,t,r)},{permutedX:o},function(l){return{permutedX:function(){return l.cumsum(n,t,!r)}}});return a!=null&&(u=u.transpose(a)),u}}),W4=W({depthToSpace_:function(e,n,t){t===void 0&&(t="NHWC");var r=A(e,"x","depthToSpace"),i=t==="NHWC"?r.shape[1]:r.shape[2],a=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];return P(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),P(a*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+n+` for depthToSpace with input shape
          `+r.shape}),P(o%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+o+" for depthToSpace with input shape "+r.shape}),j.runKernelFunc(function(s){return s.depthToSpace(r,n,t)},{$x:r})}}),yr=W({expandDims_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","expandDims",null);P(n<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return n<0&&(P(-(t.rank+1)<=n,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),n=t.rank+n+1),r.splice(n,0,1),Lr(t,r)}}),B2=W({eye_:function(e,n,t,r){r===void 0&&(r="float32"),n==null&&(n=e);for(var i=ze([e,n],r),a=e<=n?e:n,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(e,n);if(t==null)return s;if(t.length===1)return Qo(yr(s,0),[t[0],1,1]);if(t.length===2)return Qo(yr(yr(s,0),0),[t[0],t[1],1,1]);if(t.length===3)return Qo(yr(yr(yr(s,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),z4=W({multinomial_:function(e,n,t,r){r===void 0&&(r=!1);var i=A(e,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);t=t||Math.random();var s=o===1?i.as2D(1,-1):i,u=j.runKernelFunc(function(l){return l.multinomial(s,r,n,t)},{logits2D:s});return o===1?u.as1D():u}}),_p=W({oneHot_:function(e,n,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=A(e,"indices","oneHot","int32"),a=i.shape.concat([n]);return i=i.flatten(),j.runKernelFunc(function(o){return o.oneHot(i,n,t,r)},{$indices:i},function(o){return{$indices:function(){return ct(i.shape,"float32")}}}).reshape(a)}}),ao=W({pad_:function(e,n,t){t===void 0&&(t=0);var r=A(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:n,constantValue:t};return j.runKernelFunc(function(a){return a.pad(r,n,t)},{x:r},function(a){var o=n.map(function(s){return s[0]});return{x:function(){return a.slice(o,r.shape)}}},"PadV2",i)}}),V4=W({pad1d_:function(e,n,t){return t===void 0&&(t=0),P(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ao(e,[n],t)}}),H4=W({pad2d_:function(e,n,t){return t===void 0&&(t=0),P(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ao(e,n,t)}}),$4=W({pad3d_:function(e,n,t){return t===void 0&&(t=0),P(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ao(e,n,t)}}),j4=W({pad4d_:function(e,n,t){return t===void 0&&(t=0),P(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ao(e,n,t)}}),G4=W({rand_:function(e,n,t){var r=Ne(e),i=null;if(t==null||t==="float32")i=new Float32Array(r);else if(t==="int32")i=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=n();return j.makeTensor(i,e,t)}}),X4=W({randomNormal_:function(e,n,t,r,i){if(n===void 0&&(n=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new U0(n,t,r,!1,i),o=ze(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),K4=W({randomGamma_:function(e,n,t,r,i){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new D4(n,t,r,i),o=ze(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),U2=W({randomUniform_:function(e,n,t,r,i){n===void 0&&(n=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var a=ze(e,r),o=new P4(n,t,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Lr=W({reshape_:function(e,n){var t=A(e,"x","reshape",null);n=kT(n,t.size),P(t.size===Ne(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return j.runKernelFunc(function(i){return i.reshape(t,n)},{x:t},function(i){return{x:function(){return i.reshape(t.shape)}}},"Reshape",r)}}),W2=W({spaceToBatchND_:function(e,n,t){var r=A(e,"x","spaceToBatchND");return P(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),P(t.length===n.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+n.length}),P(r.shape.reduce(function(i,a,o){return o>0&&o<=n.length?i&&(a+t[o-1][0]+t[o-1][1])%n[o-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+n.toString()}),j.runKernelFunc(function(i){return i.spaceToBatchND(r,n,t)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(n,t)}}})}}),z2=W({squeeze_:function(e,n){var t=A(e,"x","squeeze");return Lr(t,Pa(t.shape,n).newShape)}}),cr=W({stack_:function(e,n){n===void 0&&(n=0);var t=jc(e,"tensors","stack");if(P(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(n);var r=t[0].rank,i=t[0].shape,a=t[0].dtype;P(n<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(s){et(i,s.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(s){P(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=t.map(function(s){return s.expandDims(n)});return Wt(o,n)}}),Qo=W({tile_:function(e,n){var t=A(e,"x","tile",null);P(t.rank===n.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+n+"."});var r=[t],i={reps:n};return j.runKernelFunc(function(a,o){var s=a.tile(t,n);return o([t]),s},{x:t},function(a,o){var s=o[0];return{x:function(){var u=Ke(s);if(s.rank===1)for(var l=0;l<n[0];++l)u=u.add(a.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<n[0];++l)for(var c=0;c<n[1];++c)u=u.add(a.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<n[0];++l)for(c=0;c<n[1];++c)for(var f=0;f<n[2];++f)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<n[0];++l)for(c=0;c<n[1];++c)for(f=0;f<n[2];++f)for(var h=0;h<n[3];++h)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",i,r)}}),q4=W({truncatedNormal_:function(e,n,t,r,i){if(n===void 0&&(n=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new U0(n,t,r,!0,i),o=ze(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),zt=W({unstack_:function(e,n){n===void 0&&(n=0),n=n||0;var t=A(e,"x","unstack");P(n>=-t.shape.length&&n<t.shape.length,function(){return"Axis = "+n+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),n<0&&(n+=t.shape.length);var r={axis:n};return j.runKernelFunc(function(i){return i.unstack(t,n)},{x:t},function(i){return{x:function(){return cr(i,n)}}},"Unpack",r)}}),Y4=function(e,n){return Ae(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,c,f;return Re(this,function(h){switch(h.label){case 0:return t=A(e,"x","setdiff1d"),r=A(n,"y","setdiff1d"),P(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),P(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),P(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(a=h.sent(),o=new Set(a),s=0,c=0;c<i.length;c++)o.has(i[c])||s++;for(u=new Du([s],t.dtype),l=new Du([s],"int32"),c=0,f=0;c<i.length;c++)o.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}})})};function Xc(e,n,t,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(n.slice(0))).push(e[0]/t),i=i.concat(e.slice(1));else{i=i.concat(e[0]);for(var a=n.length,o=0;o<a;++o)i=i.concat([e[o+1]/n[o],n[o]]);i=i.concat(e.slice(a+1))}return i}function Kc(e,n,t){t===void 0&&(t=!0);var r=[];if(t){r.push(n);for(var i=n+1;i<e;++i)i<=2*n?(r.push(i),r.push(i-(n+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<e;++i)i>=2*n+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function qc(e,n,t,r){r===void 0&&(r=!0);var i=[];r?i.push(e[0]/t):i.push(e[0]*t);for(var a=1;a<e.length;++a)a<=n.length?r?i.push(n[a-1]*e[a]):i.push(e[a]/n[a-1]):i.push(e[a]);return i}function V2(e,n){for(var t=[0],r=0;r<n;++r)t.push(e[r][0]);return t}function H2(e,n,t){for(var r=e.slice(0,1),i=0;i<t;++i)r.push(e[i+1]-n[i][0]-n[i][1]);return r}function $2(e,n){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var t=n.shape,r=t[t.length-1],i=1,a=0;a<t.length-1;++a)i*=t[a];var o=e.shape,s=t.slice();s.pop();var u=1;for(a=r;a<e.rank;++a)u*=o[a],s.push(o[a]);var l=si(e.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var j2=30;function Gh(e){return e<=j2?e:vp(e,Math.floor(Math.sqrt(e)))}function Q4(e,n,t){var r=n.rank>1?n.shape[n.rank-1]:1,i=n.rank>1?n.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+n.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+".";if(t.rank<i)throw new Error(a+" update.rank < "+i+". ");if(e.length<r+(t.rank-i))throw new Error(a+" Output shape length < "+(r+(t.rank-i)));if(t.rank!==i+e.length-r)throw new Error(a+" update.rank != "+(i+e.length-r));for(var o=0;o<i;++o)if(t.shape[o]!==n.shape[o])throw new Error(a+" updates.shape["+o+"] ("+t.shape[o]+") != indices.shape["+o+"] ("+n.shape[o]+").");for(o=0;o<t.rank-i;++o)if(t.shape[o+i]!==e[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+t.shape[o+i]+") != shape["+(o+i)+"] ("+e[o+i]+")")}function J4(e,n,t){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Q4(t,n,e)}function Yc(e,n,t){for(var r=n.shape.length,i=r>1?n.shape[r-1]:1,a=t.length,o=1,s=i;s<a;++s)o*=t[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:Ne(n.shape)/u,sliceSize:o,strides:si(t.slice(0,i)).concat([1]),outputSize:Ne(t)}}function Z4(e,n,t){P(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+n+" must match the rank of the array ("+e.rank+")."}),P(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of size "+t+" must match the rank of the array ("+e.rank+")."});for(var r=function(a){P(n[a]+t[a]<=e.shape[a],function(){return"Error in slice"+e.rank+"D: begin["+a+"] + size["+a+"] ("+(n[a]+t[a])+") would overflow input.shape["+a+"] ("+e.shape[a]+")"})},i=0;i<e.rank;++i)r(i)}function km(e){for(var n=[],t=0;e>0;)1&e&&n.push(t),e/=2,t++;return n}function W0(e,n,t){for(var r=[],i=0;i<e.length;i++)r[i]=Math.ceil((n[i]-e[i])/t[i]);return r}function e3(e,n,t,r,i){var a=n[i],o=t[i]||1;(e&1<<i||a==null)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=hp(0,a,s-1)}function t3(e,n,t,r,i){var a=n[i],o=t[i]||1;(e&1<<i||a==null)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=o>0?hp(0,a,s):hp(-1,a,s-1)}function G2(e,n,t){for(var r=t.length,i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(i=r+1;i<t.length;i++)if(n[i]>0||t[i]!==e[i])return!1;return!0}function X2(e,n){for(var t=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)t+=e[r]*n[r];return t}function n3(e,n){P(pp(e),function(){return"The f passed in variableGrads(f) must be a function"}),P(n==null||Array.isArray(n)&&n.every(function(c){return c instanceof ms}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=n!=null;if(!t)for(var r in n=[],j.registeredVariables)n.push(j.registeredVariables[r]);var i=t?n.filter(function(c){return!c.trainable}):null,a=n.length;P((n=n.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var o=j.gradients(e,n,null,!0),s=o.value,u=o.grads;P(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),P(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return n.forEach(function(c,f){u[f]!=null&&(l[c.name]=u[f])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function zf(e){return j.customGrad(e)}var Oi=W({softmax_:function(e,n){n===void 0&&(n=-1);var t=A(e,"logits","softmax","float32");if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+n);return j.runKernelFunc(function(r,i){var a=r.softmax(t,n);return i([a]),a},{logits:t},function(r,i){var a=i[0],o=r.mul(a);return{logits:function(){return o.sub(o.sum([n],!0).mul(a))}}},"Softmax",{dim:n},[],[!0])}}),r3=W({logSoftmax_:function(e,n){n===void 0&&(n=-1);var t=A(e,"logits","logSoftmax");if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+n);return zf(function(r,i){var a=r.max(n,!0),o=r.sub(a),s=o.toFloat().sub(o.exp().sum(n,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(n,!0).mul(c))}}})(t)}}),K2=function(){function e(n,t){this.backend=n,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},e.prototype.set=function(n,t){this.dataIdsCount++,this.data.set(n,t)},e.prototype.has=function(n){return this.data.has(n)},e.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),q2=function(){function e(){}return e.prototype.time=function(n){return ee("time")},e.prototype.read=function(n){return ee("read")},e.prototype.readSync=function(n){return ee("readSync")},e.prototype.numDataIds=function(){return ee("numDataIds")},e.prototype.disposeData=function(n){return ee("disposeData")},e.prototype.write=function(n,t,r){return ee("write")},e.prototype.move=function(n,t,r,i){return ee("move")},e.prototype.memory=function(){return ee("memory")},e.prototype.floatPrecision=function(){return ee("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(n,t,r,i){return ee("batchMatMul")},e.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,ee("fusedBatchMatMul")},e.prototype.slice=function(n,t,r){return ee("slice")},e.prototype.stridedSlice=function(n,t,r,i){return ee("stridedSlice")},e.prototype.unstack=function(n,t){return ee("unstack")},e.prototype.reverse=function(n,t){return ee("reverse")},e.prototype.concat=function(n,t){return ee("concat")},e.prototype.neg=function(n){return ee("neg")},e.prototype.add=function(n,t){return ee("add")},e.prototype.addN=function(n){return ee("addN")},e.prototype.subtract=function(n,t){return ee("subtract")},e.prototype.multiply=function(n,t){return ee("multiply")},e.prototype.realDivide=function(n,t){return ee("realDivide")},e.prototype.floorDiv=function(n,t){return ee("floorDiv")},e.prototype.sum=function(n,t){return ee("sum")},e.prototype.prod=function(n,t){return ee("prod")},e.prototype.unsortedSegmentSum=function(n,t,r){return ee("unsortedSegmentSum")},e.prototype.argMin=function(n,t){return ee("argMin")},e.prototype.argMax=function(n,t){return ee("argMax")},e.prototype.equal=function(n,t){return ee("equal")},e.prototype.notEqual=function(n,t){return ee("notEqual")},e.prototype.less=function(n,t){return ee("less")},e.prototype.lessEqual=function(n,t){return ee("lessEqual")},e.prototype.greater=function(n,t){return ee("greater")},e.prototype.greaterEqual=function(n,t){return ee("greaterEqual")},e.prototype.logicalNot=function(n){return ee("logicalNot")},e.prototype.logicalAnd=function(n,t){return ee("logicalAnd")},e.prototype.logicalOr=function(n,t){return ee("logicalOr")},e.prototype.where=function(n){return ee("where")},e.prototype.select=function(n,t,r){return ee("select")},e.prototype.topk=function(n,t,r){return ee("topk")},e.prototype.min=function(n,t){return ee("min")},e.prototype.minimum=function(n,t){return ee("minimum")},e.prototype.mod=function(n,t){return ee("mod")},e.prototype.max=function(n,t){return ee("max")},e.prototype.maximum=function(n,t){return ee("maximum")},e.prototype.all=function(n,t){return ee("all")},e.prototype.any=function(n,t){return ee("any")},e.prototype.squaredDifference=function(n,t){return ee("squaredDifference")},e.prototype.ceil=function(n){return ee("ceil")},e.prototype.floor=function(n){return ee("floor")},e.prototype.round=function(n){return ee("round")},e.prototype.sign=function(n){return ee("sign")},e.prototype.isNaN=function(n){return ee("isNaN")},e.prototype.isInf=function(n){return ee("isInf")},e.prototype.isFinite=function(n){return ee("isFinite")},e.prototype.pow=function(n,t){return ee("pow")},e.prototype.exp=function(n){return ee("exp")},e.prototype.expm1=function(n){return ee("expm1")},e.prototype.softmax=function(n,t){return ee("softmax")},e.prototype.log=function(n){return ee("log")},e.prototype.log1p=function(n){return ee("log1p")},e.prototype.sqrt=function(n){return ee("sqrt")},e.prototype.rsqrt=function(n){return ee("rsqrt")},e.prototype.square=function(n){return ee("square")},e.prototype.reciprocal=function(n){return ee("reciprocal")},e.prototype.relu=function(n){return ee("relu")},e.prototype.relu6=function(n){return ee("relu6")},e.prototype.prelu=function(n,t){return ee("prelu")},e.prototype.elu=function(n){return ee("elu")},e.prototype.eluDer=function(n,t){return ee("eluDer")},e.prototype.selu=function(n){return ee("selu")},e.prototype.int=function(n){return ee("int")},e.prototype.clip=function(n,t,r){return ee("clip")},e.prototype.abs=function(n){return ee("abs")},e.prototype.complexAbs=function(n){return ee("complexAbs")},e.prototype.sigmoid=function(n){return ee("sigmoid")},e.prototype.softplus=function(n){return ee("softplus")},e.prototype.sin=function(n){return ee("sin")},e.prototype.cos=function(n){return ee("cos")},e.prototype.tan=function(n){return ee("tan")},e.prototype.asin=function(n){return ee("asin")},e.prototype.acos=function(n){return ee("acos")},e.prototype.atan=function(n){return ee("atan")},e.prototype.atan2=function(n,t){return ee("atan2")},e.prototype.sinh=function(n){return ee("sinh")},e.prototype.cosh=function(n){return ee("cosh")},e.prototype.tanh=function(n){return ee("tanh")},e.prototype.asinh=function(n){return ee("asinh")},e.prototype.acosh=function(n){return ee("acosh")},e.prototype.atanh=function(n){return ee("atanh")},e.prototype.erf=function(n){return ee("erf")},e.prototype.step=function(n,t){return ee("step")},e.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ee("fusedConv2d")},e.prototype.conv2d=function(n,t,r){return ee("conv2d")},e.prototype.conv2dDerInput=function(n,t,r){return ee("conv2dDerInput")},e.prototype.conv2dDerFilter=function(n,t,r){return ee("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ee("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(n,t,r){return ee("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(n,t,r){return ee("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(n,t,r){return ee("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(n,t,r){return ee("conv3d")},e.prototype.conv3dDerInput=function(n,t,r){return ee("conv3dDerInput")},e.prototype.conv3dDerFilter=function(n,t,r){return ee("conv3dDerFilter")},e.prototype.maxPool=function(n,t){return ee("maxPool")},e.prototype.maxPoolBackprop=function(n,t,r,i){return ee("maxPoolBackprop")},e.prototype.avgPool=function(n,t){return ee("avgPool")},e.prototype.avgPoolBackprop=function(n,t,r){return ee("avgPoolBackprop")},e.prototype.avgPool3d=function(n,t){return ee("avgPool3d")},e.prototype.avgPool3dBackprop=function(n,t,r){return ee("avgPool3dBackprop")},e.prototype.maxPool3d=function(n,t){return ee("maxPool3d")},e.prototype.maxPool3dBackprop=function(n,t,r,i){return ee("maxPool3dBackprop")},e.prototype.reshape=function(n,t){return ee("reshape")},e.prototype.cast=function(n,t){return ee("cast")},e.prototype.tile=function(n,t){return ee("tile")},e.prototype.pad=function(n,t,r){return ee("pad")},e.prototype.transpose=function(n,t){return ee("transpose")},e.prototype.gather=function(n,t,r){return ee("gather")},e.prototype.gatherND=function(n,t){return ee("gatherND")},e.prototype.scatterND=function(n,t,r){return ee("scatterND")},e.prototype.batchToSpaceND=function(n,t,r){return ee("batchToSpaceND")},e.prototype.spaceToBatchND=function(n,t,r){return ee("spaceToBatchND")},e.prototype.resizeBilinear=function(n,t,r,i){return ee("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(n,t,r){return ee("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(n,t,r,i){return ee("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(n,t,r){return ee("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(n,t,r,i,a,o){return ee("batchNormalization")},e.prototype.localResponseNormalization4D=function(n,t,r,i,a){return ee("localResponseNormalization4D")},e.prototype.LRNGrad=function(n,t,r,i,a,o,s){return ee("LRNGrad")},e.prototype.multinomial=function(n,t,r,i){return ee("multinomial")},e.prototype.oneHot=function(n,t,r,i){return ee("oneHot")},e.prototype.cumsum=function(n,t,r,i){return ee("cumsum")},e.prototype.nonMaxSuppression=function(n,t,r,i,a){return ee("nonMaxSuppression")},e.prototype.fft=function(n){return ee("fft")},e.prototype.ifft=function(n){return ee("ifft")},e.prototype.complex=function(n,t){return ee("complex")},e.prototype.real=function(n){return ee("real")},e.prototype.imag=function(n){return ee("imag")},e.prototype.cropAndResize=function(n,t,r,i,a,o){return ee("cropAndResize")},e.prototype.depthToSpace=function(n,t,r){return ee("depthToSpace")},e.prototype.split=function(n,t,r){return ee("split")},e.prototype.sparseToDense=function(n,t,r,i){return ee("sparseToDense")},e.prototype.diag=function(n){return ee("diag")},e.prototype.fill=function(n,t,r){return ee("fill")},e.prototype.onesLike=function(n){return ee("onesLike")},e.prototype.zerosLike=function(n){return ee("zerosLike")},e.prototype.linspace=function(n,t,r){return ee("linspace")},e.prototype.dispose=function(){return ee("dispose")},e}();function ee(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Qi(e,n){for(var t=e.length,r=[],i=0;i<t;i++){var a=t-1-i,o=e[a]||1;(n[n.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function Vt(e,n){for(var t=[],r=0;r<n.length;r++){var i=e[e.length-r-1],a=n.length-r-1,o=n[a];(i==null||i===1&&o>1)&&t.unshift(a)}return t}function Ge(e,n){for(var t=[],r=Math.max(e.length,n.length),i=0;i<r;i++){var a=e[e.length-i-1];a==null&&(a=1);var o=n[n.length-i-1];if(o==null&&(o=1),a===1)t.unshift(o);else if(o===1)t.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+n+".");t.unshift(a)}}return t}function Ou(e,n,t,r,i,a,o){o===void 0&&(o="channelsLast");var s,u=Zc(n),l=u[0],c=u[1];if(o==="channelsLast")s=[l,c,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[l,c,e[1],e[1]]}return oo(e,s,t,r,i,a,!1,o)}function Qc(e,n,t,r,i,a,o){o===void 0&&(o="NDHWC");var s,u,l=Ep(n),c=l[0],f=l[1],h=l[2];if(o==="NDHWC")u="channelsLast",s=[c,f,h,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[c,f,h,e[1],e[1]]}return Jc(e,s,t,r,i,!1,u,a)}function oo(e,n,t,r,i,a,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3];if(s==="channelsLast")l=e[0],c=e[1],f=e[2],h=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=e[0],h=e[1],c=e[2],f=e[3]}var d,v=n[0],p=n[1],g=n[3],m=Zc(t),x=m[0],y=m[1],w=Zc(r),_=w[0],S=w[1],E=Jo(v,_),b=Jo(p,S),C=function(K,G,ie,re,H,X,Q,fe){var D,z,U;if(typeof K=="number"){D={top:K,bottom:K,left:K,right:K,type:K===0?"VALID":"NUMBER"};var B=function(Fe,Ie,Le,Me,qe){Me==null&&(Me=Y2(Fe,Ie,Le));var Ue=Fe[0],Se=Fe[1],pt=su((Ue-Ie+2*Me)/Le+1,qe);P(Rt(pt),function(){return"The output # of rows ("+pt+") must be an integer. Change the stride and/or zero pad parameters"});var vt=su((Se-Ie+2*Me)/Le+1,qe);return P(Rt(vt),function(){return"The output # of columns ("+vt+") must be an integer. Change the stride and/or zero pad parameters"}),[pt,vt]}([G,ie],X,re,K,fe);z=B[0],U=B[1]}else if(K==="same"){z=Math.ceil(G/re),U=Math.ceil(ie/H);var J=Math.max(0,(z-1)*re+X-G),he=Math.max(0,(U-1)*H+Q-ie),ge=Math.floor(J/2),de=J-ge,pe=Math.floor(he/2);D={top:ge,bottom:de,left:pe,right:he-pe,type:"SAME"}}else{if(K!=="valid")throw Error("Unknown padding parameter: "+K);D={top:0,bottom:0,left:0,right:0,type:"VALID"},z=Math.ceil((G-X+1)/re),U=Math.ceil((ie-Q+1)/H)}return{padInfo:D,outHeight:z,outWidth:U}}(i,c,f,x,y,E,b,a),T=C.padInfo,F=C.outHeight,I=C.outWidth,V=o?g*h:g;return s==="channelsFirst"?d=[l,V,F,I]:s==="channelsLast"&&(d=[l,F,I,V]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:h,outHeight:F,outWidth:I,outChannels:V,padInfo:T,strideHeight:x,strideWidth:y,filterHeight:v,filterWidth:p,effectiveFilterHeight:E,effectiveFilterWidth:b,dilationHeight:_,dilationWidth:S,inShape:e,outShape:d,filterShape:n}}function Jc(e,n,t,r,i,a,o,s){a===void 0&&(a=!1),o===void 0&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3],d=u[4];if(o==="channelsLast")l=e[0],c=e[1],f=e[2],h=e[3],d=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=e[0],d=e[1],c=e[2],f=e[3],h=e[4]}var v,p=n[0],g=n[1],m=n[2],x=n[4],y=Ep(t),w=y[0],_=y[1],S=y[2],E=Ep(r),b=E[0],C=E[1],T=E[2],F=Jo(p,b),I=Jo(g,C),V=Jo(m,T),K=function(Q,fe,D,z,U,B,J,he,ge,de,pe){var Fe,Ie,Le,Me;if(typeof Q=="number"){Fe={top:Q,bottom:Q,left:Q,right:Q,front:Q,back:Q,type:Q===0?"VALID":"NUMBER"};var qe=function(en,Ln,ka,Gr,jt,Rs){jt==null&&(jt=Y2(en,Ln,Gr));var dl=en[0],pl=en[1],vl=en[2],vo=su((dl-Ln+2*jt)/Gr+1,Rs);P(Rt(vo),function(){return"The output # of depths ("+vo+") must be an integer. Change the stride and/or zero pad parameters"});var mo=su((pl-Ln+2*jt)/Gr+1,Rs);P(Rt(mo),function(){return"The output # of rows ("+mo+") must be an integer. Change the stride and/or zero pad parameters"});var go=su((vl-Ln+2*jt)/Gr+1,Rs);return P(Rt(go),function(){return"The output # of columns ("+go+") must be an integer. Change the stride and/or zero pad parameters"}),[vo,mo,go,ka]}([fe,D,z,1],he,1,U,Q,pe);Ie=qe[0],Le=qe[1],Me=qe[2]}else if(Q==="same"){Ie=Math.ceil(fe/U),Le=Math.ceil(D/B),Me=Math.ceil(z/J);var Ue=(Ie-1)*U+he-fe,Se=(Le-1)*B+ge-D,pt=(Me-1)*J+de-z,vt=Math.floor(Ue/2),Mn=Ue-vt,pn=Math.floor(Se/2),Ar=Se-pn,Qn=Math.floor(pt/2);Fe={top:pn,bottom:Ar,left:Qn,right:pt-Qn,front:vt,back:Mn,type:"SAME"}}else{if(Q!=="valid")throw Error("Unknown padding parameter: "+Q);Fe={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ie=Math.ceil((fe-he+1)/U),Le=Math.ceil((D-ge+1)/B),Me=Math.ceil((z-de+1)/J)}return{padInfo:Fe,outDepth:Ie,outHeight:Le,outWidth:Me}}(i,c,f,h,w,_,S,F,I,V,s),G=K.padInfo,ie=K.outDepth,re=K.outHeight,H=K.outWidth,X=a?x*d:x;return o==="channelsFirst"?v=[l,X,ie,re,H]:o==="channelsLast"&&(v=[l,ie,re,H,X]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:f,inWidth:h,inChannels:d,outDepth:ie,outHeight:re,outWidth:H,outChannels:X,padInfo:G,strideDepth:w,strideHeight:_,strideWidth:S,filterDepth:p,filterHeight:g,filterWidth:m,effectiveFilterDepth:F,effectiveFilterHeight:I,effectiveFilterWidth:V,dilationDepth:b,dilationHeight:C,dilationWidth:T,inShape:e,outShape:v,filterShape:n}}function Y2(e,n,t,r){r===void 0&&(r=1);var i=Jo(n,r);return Math.floor((e[0]*(t-1)-t+i)/2)}function Zc(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Ep(e){return typeof e=="number"?[e,e,e]:e}function Jo(e,n){return n<=1?e:e+(e-1)*(n-1)}function su(e,n){if(!n)return e;switch(n){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+n)}}function xs(e){var n=Zc(e),t=n[0],r=n[1],i=n[2];return t===1&&r===1&&i===1}function Kn(e,n){return xs(e)||xs(n)}function z0(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function Q2(e,n,t){if(n==="complex64"){if(e.dtype==="complex64")return e.clone();var r=ct(e.shape),i=e.toFloat(),a=t.complex(i,r);return r.dispose(),i.dispose(),a}if(!FT(e.dtype,n))return j.makeTensorFromDataId(e.dataId,e.shape,n);if(e.dtype==="complex64"){var o=t.real(e);return a=o.cast(n),o.dispose(),a}if(n==="int32")return t.int(e);if(n==="bool"){var s=Ee(0,e.dtype);return a=t.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+n)}function Sp(e,n){return j.makeTensorFromDataId(e.dataId,n,e.dtype)}function J2(e,n,t){var r=(n-e)/(t-1),i=Ju(t,"float32");i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Dt(i,"float32")}function Cp(e,n){if(e.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+n.length+".");for(var t=new Float32Array(2*e.length),r=0;r<t.length;r+=2)t[r]=e[r/2],t[r+1]=n[r/2];return t}function Am(e,n){return{real:e[2*n],imag:e[2*n+1]}}function i3(e,n,t,r){e[2*r]=n,e[2*r+1]=t}function a3(e,n,t){var r=(t?2:-2)*Math.PI*(e/n);return{real:Math.cos(r),imag:Math.sin(r)}}function o3(e,n,t){var r=function(a,o,s){return function(u,l,c){for(var f=0,h=u.length,d=0,v=!1;f<h;){var p=c(l,u[d=f+(h-f>>>1)]);p>0?f=d+1:(h=d,v=!p)}return v?f:-f-1}(a,o,s||s3)}(e,n,t),i=r<0?-(r+1):r;e.splice(i,0,n)}function s3(e,n){return e>n?1:e<n?-1:0}function V0(e,n,t,r,i){return Z2(e,n,t,r,i,0).selectedIndices}function H0(e,n,t,r,i,a){var o=Z2(e,n,t,r,i,a);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Z2(e,n,t,r,i,a,o,s){s===void 0&&(s=!1);for(var u=Array.from(n).map(function(w,_){return{score:w,boxIndex:_,suppressBeginIndex:0}}).filter(function(w){return w.score>i}).sort(Rm),l=a>0?-.5/a:0,c=[],f=[];c.length<t&&u.length>0;){var h=u.pop(),d=h.score,v=h.boxIndex,p=h.suppressBeginIndex;if(d<i)break;for(var g=!1,m=c.length-1;m>=p;--m){var x=u3(e,v,c[m]);if(x>=r){g=!0;break}if(h.score=h.score*l3(r,l,x),h.score<=i)break}h.suppressBeginIndex=c.length,g||(h.score===d?(c.push(v),f.push(h.score)):h.score>i&&o3(u,h,Rm))}var y=c.length;return s&&(c.fill(0,y),f.fill(0,y)),{selectedIndices:Dt(c,"int32"),selectedScores:Dt(f,"float32"),numValidOutputs:Ee(y,"int32")}}function u3(e,n,t){var r=e.subarray(4*n,4*n+4),i=e.subarray(4*t,4*t+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(s-a)*(u-o),v=(f-l)*(h-c);if(d<=0||v<=0)return 0;var p=Math.max(a,l),g=Math.max(o,c),m=Math.min(s,f),x=Math.min(u,h),y=Math.max(m-p,0)*Math.max(x-g,0);return y/(d+v-y)}function l3(e,n,t){var r=Math.exp(n*t*t);return t<=e?r:0}function Rm(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}function ew(e,n,t){var r=new Array(e.rank).fill(0),i=e.shape.slice();return n.map(function(a){i[t]=a;var o=e.slice(r,i);return r[t]+=a,o})}function tw(e,n){for(var t=new Array(e.rank),r=0;r<t.length;r++)t[r]=e.shape[r]*n[r];var i=ze(t,e.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=a[s]%e.shape[s];var u=e.locToIndex(o);i.values[r]=e.values[u]}return i.toTensor()}function nw(e,n,t,r,i){for(var a=n[n.length-1],o=[e.length/a,a],s=o[0],u=o[1],l=Nu(t,s*r),c=Nu("int32",s*r),f=0;f<s;f++){for(var h=f*u,d=e.subarray(h,h+u),v=[],p=0;p<d.length;p++)v.push({value:d[p],index:p});v.sort(function(w,_){return _.value-w.value});var g=f*r,m=l.subarray(g,g+r),x=c.subarray(g,g+r);for(p=0;p<r;p++)m[p]=v[p].value,x[p]=v[p].index}var y=n.slice();return y[y.length-1]=r,[sn(l,y,t),sn(c,y,"int32")]}function $0(e,n){for(var t=[],r=0;r<n.length;r++)n[r]&&t.push(r);var i=ze(e,"int32"),a=ze([t.length,e.length],"int32");for(r=0;r<t.length;r++){var o=i.indexToLoc(t[r]),s=r*e.length;a.values.set(o,s)}return a.toTensor()}var c3=function(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map(function(i,a){return"T"+a});var t=[];this.variableNames.forEach(function(i){t.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},f3=function(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map(function(i,a){return"T"+a});var t=[];this.variableNames.forEach(function(i){t.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},h3=function(e,n,t){this.variableNames=["A"];var r=e.windowSize,i=e.batchSize,a=e.inSize,o=Math.ceil(a/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s=n==="max"?">":"<",u=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function rw(e,n){return["x","y","z","w","u","v"].slice(0,n).map(function(t){return e+"."+t})}function Wn(e,n){return n===1?[e]:rw(e,n)}function _n(){var e,n,t,r,i,a,o,s,u,l;return oe().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",n="in",t="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",n="attribute",t="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:n,varyingVs:t,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Wa(e,n,t){t===void 0&&(t="index");var r=si(n);return r.map(function(i,a){return"int "+e[a]+" = "+t+" / "+i+"; "+(a===r.length-1?"int "+e[a+1]+" = "+t+" - "+e[a]+" * "+i:"index -= "+e[a]+" * "+i)+";"}).join("")}function j0(e){var n=si(e).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var iw=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function d3(e,n,t,r){var i=[];e.forEach(function(d){var v=Ne(d.shapeInfo.logicalShape);d.shapeInfo.isUniform?i.push("uniform float "+d.name+(v>1?"["+v+"]":"")+";"):(i.push("uniform sampler2D "+d.name+";"),i.push("uniform int offset"+d.name+";"))});var a,o,s=i.join(`
`),u=e.map(function(d){return function(v,p,g){g===void 0&&(g=!1);var m="";m+=g?aw(v):To(v);var x=v.shapeInfo.logicalShape,y=p.logicalShape;return x.length<=y.length&&(m+=g?function(w,_){var S,E=w.name,b=E.charAt(0).toUpperCase()+E.slice(1),C="get"+b+"AtOutCoords",T=w.shapeInfo.logicalShape.length,F=_.logicalShape.length,I=Qi(w.shapeInfo.logicalShape,_.logicalShape),V=ut(F),K=F-T,G=["x","y","z","w","u","v"];S=T===0?"":F<2&&I.length>=1?"coords = 0;":I.map(function(D){return"coords."+G[D+K]+" = 0;"}).join(`
`);var ie="";ie=F<2&&T>0?"coords":w.shapeInfo.logicalShape.map(function(D,z){return"coords."+G[z+K]}).join(", ");var re="return outputValue;",H=Ne(w.shapeInfo.logicalShape)===1,X=Ne(_.logicalShape)===1;if(T!==1||H||X){if(H&&!X)re=F===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(I.length){var Q=T-2,fe=T-1;I.indexOf(Q)>-1&&I.indexOf(fe)>-1?re="return vec4(outputValue.x);":I.indexOf(Q)>-1?re="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":I.indexOf(fe)>-1&&(re="return vec4(outputValue.xx, outputValue.zz);")}}else re=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+C+`() {
      `+V+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+b+"("+ie+`);
      `+re+`
    }
  `}(v,p):function(w,_){var S=w.name,E=S.charAt(0).toUpperCase()+S.slice(1),b="get"+E+"AtOutCoords",C=_.texShape,T=w.shapeInfo.texShape,F=w.shapeInfo.logicalShape.length,I=_.logicalShape.length;if(!w.shapeInfo.isUniform&&F===I&&w.shapeInfo.flatOffset==null&&Jt(T,C))return`
      float `+b+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var V,K=ut(I),G=Qi(w.shapeInfo.logicalShape,_.logicalShape),ie=I-F,re=["x","y","z","w","u","v"];V=F===0?"":I<2&&G.length>=1?"coords = 0;":G.map(function(X){return"coords."+re[X+ie]+" = 0;"}).join(`
`);var H="";return H=I<2&&F>0?"coords":w.shapeInfo.logicalShape.map(function(X,Q){return"coords."+re[Q+ie]}).join(", "),`
    float `+b+`() {
      `+K+` coords = getOutputCoords();
      `+V+`
      return get`+E+"("+H+`);
    }
  `}(v,p)),m}(d,n,r)}).join(`
`),l=n.texShape,c=_n(),f=function(d){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+d.texture2D+`(textureSampler, uv).r;
    }
  `}(c),h=function(d){return d.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+d.varyingFs+` vec2 resultUV;
    `+d.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+d.defineSpecialNaN+`
    `+d.defineSpecialInf+`
    `+d.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+p3+`
    `+v3+`
    `+m3+`
  `}(c);return n.isPacked?(a=function(d,v){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,_){var S=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(w,_){var S=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];if(Jt(w,_))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var E=Math.ceil(w[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(d,v);case 3:return p=d,g=v,m=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],x=Math.ceil(p[2]/2),y=x*Math.ceil(p[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;

      int b = index / `+y+`;
      index -= b * `+y+`;

      int r = 2 * (index / `+x+`);
      int c = imod(index, `+x+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(w,_){for(var S=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)],E=Math.ceil(w[w.length-1]/2),b=E*Math.ceil(w[w.length-2]/2),C=b,T="",F="b, r, c",I=2;I<w.length-1;I++)C*=w[w.length-I-1],T=`
      int b`+I+" = index / "+C+`;
      index -= b`+I+" * "+C+`;
    `+T,F="b"+I+", "+F;return`
    ivec`+w.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+T+`

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+w.length+"("+F+`);
    }
  `}(d,v)}var p,g,m,x,y}(n.logicalShape,l),o=function(d){return`
    void setOutput(vec4 val) {
      `+d.output+` = val;
    }
  `}(c)):(a=function(d,v){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(m,x){return x[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+x[1]+`.0);
      }
    `:x[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+x[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      return resTexRC.x * `+x[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(m,x){return Jt(m,x)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+x[0]+", "+x[1]+`));
      }
    `:m[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:m[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      int r = index / `+m[1]+`;
      int c = index - r * `+m[1]+`;
      return ivec2(r, c);
    }
  `}(d,v);case 3:return p=v,g=Wa(["r","c","d"],d),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+p[0]+", "+p[1]+`));
      int index = resTexRC.x * `+p[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(m,x){var y=Wa(["r","c","d","d2"],m);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+y+`
      return ivec4(r, c, d, d2);
    }
  `}(d,v);case 5:return function(m,x){var y=Wa(["r","c","d","d2","d3"],m);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+x[0]+`,
                             `+x[1]+`));

      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(d,v);case 6:return function(m,x){var y=Wa(["r","c","d","d2","d3","d4"],m);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(d,v);default:throw new Error(d.length+"-D output sampling is not yet supported")}var p,g}(n.logicalShape,l),o=function(d){return`
    void setOutput(float val) {
      `+d.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(h+=g3),[h,f,o,s,a,u,t].join(`
`)}function To(e){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){var r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var a=t.shapeInfo.texShape,o=a[0],s=a[1];if(o===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=t.shapeInfo.texShape,l=u[0],c=u[1],f=Ra(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(t){var r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+yo(t)+`
      }
    `;var a=t.shapeInfo.texShape,o=a[0],s=a[1];if(s===1&&o===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Ra(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape;if(o!=null&&Jt(r,o)){var s=o[0],u=o[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=Pa(r),c=l.newShape,f=l.keptDims,h=c;if(h.length<r.length){var d=ko(t,h);return`
      `+To(d)+`
      float `+a+`(int row, int col) {
        return `+a+"("+Ao(["row","col"],f)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+yo(t)+`
      }
    `;var v=o[0],p=o[1],g=Ra(i);return p===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:v===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+p+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+v+", "+p+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(e);case 3:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[1]*r[2],s=r[2],u=Pa(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var h=ko(t,f);return`
        `+To(h)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+Ao(["row","col","depth"],c)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+yo(t)+`
      }
    `;var d=t.shapeInfo.texShape,v=d[0],p=d[1],g=t.shapeInfo.flatOffset;if(p===o&&g==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+p+".0, "+v+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(p===s&&g==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+".0, "+v+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var m=Ra(i);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+m+`;
        vec2 uv = uvFromFlat(`+v+", "+p+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(e);case 4:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[3],s=r[2]*o,u=r[1]*s,l=Pa(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var h=ko(t,c);return`
      `+To(h)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+Ao(["row","col","depth","depth2"],f)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+o+`, 1)));
        `+yo(t)+`
      }
    `;var d=t.shapeInfo.flatOffset,v=t.shapeInfo.texShape,p=v[0],g=v[1];if(g===u&&d==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+p+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===o&&d==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+p+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var m=Ra(i);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+p+", "+g+", index + "+m+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(e);case 5:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[4],s=r[3]*o,u=r[2]*s,l=r[1]*u,c=Pa(r),f=c.newShape,h=c.keptDims;if(f.length<r.length){var d=ko(t,f);return`
      `+To(d)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+Ao(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+o+`)) +
          depth3;
        `+yo(t)+`
      }
    `;var v=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],m=p[1];if(m===l&&v==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(m===o&&v==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var x=Ra(i);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+m+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(e);case 6:return function(t){var r=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=Pa(r),s=o.newShape,u=o.keptDims;if(s.length<r.length){var l=ko(t,s);return`
      `+To(l)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+Ao(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],f=r[4]*c,h=r[3]*f,d=r[2]*h,v=r[1]*d;if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+d+", "+h+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+yo(t)+`
      }
    `;var p=t.shapeInfo.flatOffset,g=t.shapeInfo.texShape,m=g[0],x=g[1];if(x===v&&p==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+h+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(x===c&&p==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=Ra(i);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+d+" + depth * "+h+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+y+`;
      vec2 uv = uvFromFlat(`+m+", "+x+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function aw(e){var n,t,r;switch(e.shapeInfo.logicalShape.length){case 0:return n=e.name,t="get"+n.charAt(0).toUpperCase()+n.slice(1),r=_n(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(i){var a=i.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=_n();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+a+`, uv);
    }
  `}(e);case 2:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],f=_n();if(u!=null&&Jt(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+f.texture2D+"("+o+`, uv);
      }
    `;var h=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+d+", "+h[0]+", "+h[1]+`, row, col);
      return `+f.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var c=a.slice(1),f=ko(i,c);return`
        `+aw(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Ao(["b","row","col"],[1,2])+`);
        }
      `}var h=l[0],d=l[1],v=Math.ceil(a[2]/2),p=v*Math.ceil(a[1]/2),g=_n();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+d+", "+p+", "+v+`, b, row, col);
      return `+g.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(i){for(var a=i.shapeInfo.logicalShape,o=a.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=c[0],h=c[1],d=Math.ceil(a[o-1]/2),v=d*Math.ceil(a[o-2]/2),p="int b, int row, int col",g="b * "+v+" + (row / 2) * "+d+" + (col / 2)",m=2;m<o-1;m++)p="int b"+m+", "+p,v*=a[o-m-1],g="b"+m+" * "+v+" + "+g;var x=_n();return`
    vec4 `+u+"("+p+`) {
      int index = `+g+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+f+`);
      return `+x.texture2D+"("+s+`, uv);
    }
  `}(e)}}var p3=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,v3=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,m3=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,g3=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ra(e){return"offset"+e}function yo(e){var n=e.name,t=Ne(e.shapeInfo.logicalShape);return t<2?"return "+n+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function ut(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function ko(e,n){var t=JSON.parse(JSON.stringify(e));return t.shapeInfo.logicalShape=n,t}function Ao(e,n){return n.map(function(t){return e[t]}).join(", ")}var x3=function(e,n,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(e.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var i=e[e.length-1],a=Math.ceil(i/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,l=u.length,c=ut(l),f=Wn("coords",l);if(a===1){var h=ut(s=l+1);o=`
        `+h+" sourceLocR = "+h+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+h+" sourceLocG = "+h+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+h+" sourceLocA = "+h+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+h+" sourceLocB = "+h+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,o=`
        `+c+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[l-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),v="."+d[s-1],p=d.map(function(b){return"int "+b}),g=Wn("sourceLocR",s-1).concat("inIdx.r"),m=Wn("sourceLocG",s-1).concat("inIdx.g"),x=Wn("sourceLocB",s-1).concat("inIdx.b"),y=Wn("sourceLocA",s-1).concat("inIdx.a"),w=t==="max"?"greaterThan":"lessThan",_=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+y.join()+")));",S=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+m.join()+`) : 0.,
            hasNextRow ? getAChannel(`+x.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+y.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+p.join()+`) {
        return getChannel(getBestIndicesA(`+d.join()+`),
                                          vec2(`+d.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+p.join()+`) {
        return getChannel(getA(`+d.join()+`),
                               vec2(`+d.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+_+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+w+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},y3=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,f=1/(n*t);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},w3=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=c-1-e.padInfo.front,v=f-1-e.padInfo.top,p=h-1-e.padInfo.left,g=1/(n*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+v+", "+p+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},_3=function(e,n,t,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Ge(e,n),Ge(e,t);var o="0.0";r!=null&&(Ge(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";i!=null&&(Ge(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},E3=function(e,n,t,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ge(e,n),Ge(e,t);var o="vec4(0.0)";r!=null&&(Ge(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(Ge(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},S3="return areal * breal - aimag * bimag;",C3="return areal * bimag + aimag * breal;",Fm=function(e,n,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ge(n,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Xh="return a + b;",Kh="return a - b;",Im="return a * b;",ow="return (a < 0.) ? b * a : a;",Ct=function(e,n,t){this.variableNames=["A","B"],this.outputShape=Ge(n,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},sw=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,gi=function(e,n,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ge(n,t);var i=this.outputShape.length,a="";if(r)if(i===0||Ne(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+ut(i)+` coords = getOutputCoords();
        `,i===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=Wn("coords",i);a+=`
            bool nextRowOutOfBounds =
              (`+o[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+o[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},b3=function(){function e(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(n,t){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,t)}},e}(),T3=function(){function e(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(n,t){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,t)}},e}(),k3=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},A3=function(e){this.outputShape=[],this.outputShape=gs(e,1),this.variableNames=e.map(function(s,u){return"T"+u});var n=new Array(e.length-1);n[0]=e[0][1];for(var t=1;t<n.length;t++)n[t]=n[t-1]+e[t][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<n.length;t++){var i=n[t-1];r.push("else if (yC < "+n[t]+") setOutput(getT"+t+"(yR, yC-"+i+"));")}var a=n.length,o=n[n.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},R3=function(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=gs(e,n);var t=this.outputShape,r=t.length,i=ut(r),a=Wn("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(g,m){return"T"+m});var s=new Array(e.length-1);s[0]=e[0][n];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][n];var l=o[n],c=o.slice(-2),f=o.join(),h="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var d=s[u-1];h+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Bl(o,l,d)+`),
            vec2(`+Bl(c,l,d)+`));
        }`}var v=s.length,p=s[s.length-1];h+=`
        return getChannel(
          getT`+v+"("+Bl(o,l,p)+`),
          vec2(`+Bl(c,l,p)+"));",this.userCode=`
      float getValue(`+o.map(function(g){return"int "+g})+`) {
        `+h+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+t[r-2]+` &&
            `+a[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function Bl(e,n,t){var r=e.indexOf(n);return e.map(function(i,a){return a===r?i+" - "+t:i}).join()}var F3=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+i+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},I3=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,s=t-1-e.padInfo.left,u=a?1:2,l=a?2:3,c=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},N3=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideDepth,t=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+i+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+a+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},D3=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=n-1-e.padInfo.front,u=t-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},P3=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+i+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},O3=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=n-1-e.padInfo.top,o=t-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Nm=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),d=e.inChannels%4,v=e.dataFormat==="channelsLast",p=v?1:2,g=v?2:3,m=v?3:1,x="",y="";t&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,y="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+m+`];

        ivec2 xRCCorner =
            ivec2(coords[`+p+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(d===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(d===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(d===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+w+`
        `+y+`
        setOutput(result);
      }
    `},M3=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.padInfo.front,t=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,f=e.filterHeight,h=e.filterWidth,d=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+n+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+d+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+d+`) *
                  getW(wF, wR, wC, `+d+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1),
                  getX(batch, xF, xR, xC, `+d+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2),
                  getW(wF, wR, wC, `+d+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Dm=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,v=e.outChannels/e.inChannels,p="",g="";t&&(p=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,g="result = activation(result);");var m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+m+`
        `+g+`
        setOutput(result);
      }
    `},Pm=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,v=d,p="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var m=0;m<d;m++)p+=`
          vec4 xTexelR`+g+"C"+2*m+` = vec4(0.);
          vec4 wR`+g+"C"+m+` = vec4(0.);
          vec4 xR`+g+"C"+m+" = vec4(0.);";for(g=0;g<h;g++)for(var x=0;x<v;x++){if(p+=`
          xR = xRCorner + `+g*c+`;
          xC = xCCorner + `+(m=2*x)*f+`;
        `,l===1){if(m<d&&(p+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+g+"C"+m+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+m+" = vec4(previous.zw, xTexelR"+g+"C"+m+`.xy);
                } else {
                  xR`+g+"C"+m+" = vec4(0, 0, xTexelR"+g+"C"+m+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                xR`+g+"C"+m+" = xTexelR"+g+"C"+m+`;
              `,m+1<d)){var y=s%2==0?b2(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(p+=`
                  xCOffset = xC + `+s%2+" + "+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(p+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+g+"C"+m+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+m+` = vec4(0.);
                    }
                  `),p+=`
                  xR`+g+"C"+(m+1)+` = vec4(
                    xTexelR`+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+`.xy);
                `):p+=`
                  xCOffset = xC + `+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(m+1)+" = xTexelR"+g+"C"+(m+2)+`;
                `}}else m<d&&(p+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(p+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(m+2)+` = vec4(0.);
                }

                xR`+g+"C"+m+` = vec4(
                  xTexelR`+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+`.zw);
              `,m+1<d&&(p+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(m+1)+" = vec4(xTexelR"+g+"C"+(m+2)+`.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(m+2)+` = vec4(0.);
                }

                xR`+g+"C"+m+` = vec4(
                  xTexelR`+g+"C"+m+".xy, xTexelR"+g+"C"+(m+2)+`.xy);
              `,m+1<d&&(p+=`
                  xR`+g+"C"+(m+1)+` = vec4(
                    xTexelR`+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+`.zw);
                `)),p+="}");m<d&&(p+=`
            vec4 wTexelR`+g+"C"+m+" = getW("+g+", "+m+`, d1, q);
            wR`+g+"C"+m+" = vec4(wTexelR"+g+"C"+m+".xz, wTexelR"+g+"C"+m+`.xz);
          `,m+1<d&&(p+=`
              vec4 wTexelR`+g+"C"+(m+1)+" = getW("+g+", "+(m+1)+`, d1, q);
              wR`+g+"C"+(m+1)+` =
                vec4(wTexelR`+g+"C"+(m+1)+".xz, wTexelR"+g+"C"+(m+1)+".xz);"))}for(g=0;g<h;g++)for(m=0;m<d;m++)p+="dotProd += xR"+g+"C"+m+" * wR"+g+"C"+m+";";var w="",_="";t&&(w=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,_="result = activation(result);");var S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+p+`

        vec4 result = dotProd;
        `+S+`
        `+_+`
        setOutput(result);
      }
    `},L3=function(e,n,t,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],o=e[1],s=e[2],u=e[3],l=n[0],c=t[0],f=t[1];this.outputShape=[l,c,f,u];var h=r==="bilinear"?1:0,d=[o-1+".0",s-1+".0"],v=d[0],p=d[1],g=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],m=g[0],x=g[1],y=g[2],w=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+p+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+p],_=w[0],S=w[1],E=w[2];this.userCode=`
      const float height_ratio = float(`+m+`);
      const float width_ratio = float(`+_+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+x+`;
        float width_scale = `+S+`;

        float in_y = `+y+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},B3=function(e,n,t){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=e[e.length-1],a=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+ut(r)+` coords = getOutputCoords();
        int end = `+Om(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+Om(r,"coords")+` = idx;
          val += getX(`+function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function Om(e,n){if(e===1)return""+n;if(e===2)return n+".y";if(e===3)return n+".z";if(e===4)return n+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var U3=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Pu.DENSE;var n=ou(e),t=_n();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Wa(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},W3=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Pu.DENSE;var n=ou(e),t=_n();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Wa(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},z3=function(){function e(n,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),V3=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},H3=function(e){this.variableNames=["A"],this.outTexUsage=or.DOWNLOAD;var n=_n();this.outputShape=e,this.userCode=`
      `+iw+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},$3=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=or.DOWNLOAD;var n=_n();this.outputShape=e,this.userCode=`
      `+iw+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},j3=function(e,n,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=_n(),i=n[0],a=n[1];this.outputShape=e;var o="result";t&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+j0(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},G3=function(e,n,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=_n(),i=n[0],a=n[1];this.outputShape=e;var o="",s="result";t&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;o+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+e[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+e[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+j0(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},X3="return real * expR - imag * expI;",K3="return real * expI + imag * expR;",Mm=function(e,n,t){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var i=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},q3=function(){function e(n,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;return function(r,i){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(t.valueLoc,n)}},e}(),Y3=function(e,n,t){this.variableNames=["A","indices"];var r=e.slice();r[t]=n,this.outputShape=r,this.rank=r.length;var i=ut(this.rank),a=function(o,s){var u=o.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<o.length;f++)f===s?c.push("int(getIndices("+l[f]+"))"):c.push(""+l[f]);return c.join()}(e,t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},Q3=function(e,n,t){this.sliceDim=e,this.strides=n,this.variableNames=["x","indices"],this.outputShape=t;var r=ut(n.length),i=ut(t.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function J3(e,n){var t=_n();return XT(e,n,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Z3(e,n){return JT(e,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ek(e,n){return ZT(e,n,new Uint16Array([0,1,2,2,1,3]))}function el(e,n,t,r,i,a,o){t4(t,r);var s=e4(e,n),u=e.TEXTURE_2D;return De(e,n,function(){return e.bindTexture(u,s)}),De(e,n,function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),De(e,n,function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),De(e,n,function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)}),De(e,n,function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)}),De(e,n,function(){return e.texImage2D(u,0,i,t,r,0,a,o,null)}),De(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function tk(e,n,t,r,i){var a=Uf(t,r);return el(e,n,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function nk(e,n,t,r,i){var a=Uf(t,r);return el(e,n,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function rk(e,n,t,r,i){var a=Uf(t,r);return el(e,n,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function ik(e,n,t,r,i){var a=Zu(t,r);return el(e,n,a[0],a[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function ak(e,n,t,r,i){var a=Zu(t,r);return el(e,n,a[0],a[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function ok(e,n,t,r){return De(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Sm(e,n,t,"clipSpacePos",r,3,20,0)&&Sm(e,n,t,"uv",r,2,20,12)}function sk(e,n,t,r,i,a,o){var s,u,l;De(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)}),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*i*4),u=e.FLOAT,l=o.internalFormatPackedFloat),s.set(a),De(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,i,0,e.RGBA,u,s)}),De(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function uk(e,n,t,r){De(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)}),r.data instanceof Uint8Array?De(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):De(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),De(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function lk(e,n,t,r,i){var a=e.createBuffer();De(e,n,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)});var o=16*t*r;return De(e,n,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),De(e,n,function(){return e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,0)}),De(e,n,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),a}function ck(e,n,t){var r=e,i=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function fk(e,n,t,r,i){var a=Uf(t,r),o=a[0],s=a[1],u=new Uint8Array(t*r*4);return De(e,n,function(){return e.readPixels(0,0,o,s,i.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function hk(e,n,t,r,i,a,o,s){var u=e,l=new Float32Array(function(c,f){var h=Zu(c,f);return h[0]*h[1]*4}(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,n),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function dk(e,n,t,r){var i=new Float32Array(t*r*4);return De(e,n,function(){return e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,i)}),i}var pk=function(){function e(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=oe().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,VT(t,n)):this.gl=fi(t);var r="WEBGL_color_buffer_float";if(oe().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Pl(this.gl,this.debug,"OES_texture_float"),Er(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Pl(this.gl,this.debug,"OES_texture_half_float");else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Er(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Pl(this.gl,this.debug,"EXT_color_buffer_half_float");else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Er(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Er(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Z3(this.gl,this.debug),this.indexBuffer=ek(this.gl,this.debug),this.framebuffer=n4(this.gl,this.debug),this.textureConfig=O0(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return oe().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;De(t,this.debug,function(){return t.finish()}),De(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),De(t,this.debug,function(){return t.deleteFramebuffer(n.framebuffer)}),De(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),De(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),De(t,this.debug,function(){return t.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(n,t){return this.throwIfDisposed(),tk(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(n,t){return this.throwIfDisposed(),nk(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(n,t){return this.throwIfDisposed(),rk(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(n,t){this.throwIfDisposed(),uk(this.gl,this.debug,n,t)},e.prototype.uploadDenseMatrixToTexture=function(n,t,r,i){this.throwIfDisposed(),sk(this.gl,this.debug,n,t,r,i,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(n,t){return this.throwIfDisposed(),ak(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(n,t){return this.throwIfDisposed(),ik(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(n){var t=this;this.throwIfDisposed(),this.outputTexture===n&&(Cm(this.gl,this.debug,this.framebuffer),this.outputTexture=null),De(this.gl,this.debug,function(){return t.gl.deleteTexture(n)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,t,r){var i=this;return this.downloadMatrixDriver(n,function(){return fk(i.gl,i.debug,t,r,i.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(n,t,r,i,a,o){return hk(this.gl,n,0,0,0,a,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(n,t){return ck(this.gl,n,t)},e.prototype.createBufferFromTexture=function(n,t,r){this.bindTextureToFrameBuffer(n);var i=lk(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},e.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},e.prototype.createFence=function(n){var t,r,i=this;if(oe().getBool("WEBGL_FENCE_API_ENABLED")){var a=n,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var s=a.clientWaitSync(o,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},t=o}else oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(t,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(n,t,r){var i=this;return this.downloadMatrixDriver(n,function(){return dk(i.gl,i.debug,t,r)})},e.prototype.createProgram=function(n){this.throwIfDisposed();var t=this.gl,r=KT(t,this.debug,n),i=J3(t,this.debug),a=YT(t,this.debug);return De(t,this.debug,function(){return t.attachShader(a,i)}),De(t,this.debug,function(){return t.attachShader(a,r)}),QT(t,this.debug,a),this.debug&&Hh(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=ok(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(n){var t=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&De(this.gl,this.debug,function(){return t.gl.deleteProgram(n)})},e.prototype.setProgram=function(n){var t=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&Hh(this.gl,this.debug,this.program),De(this.gl,this.debug,function(){return t.gl.useProgram(n)})},e.prototype.getUniformLocation=function(n,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?i4(this.gl,this.debug,n,t):a4(this.gl,n,t)},e.prototype.getAttributeLocation=function(n,t){var r=this;return this.throwIfDisposed(),De(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,t)})},e.prototype.getUniformLocationNoThrow=function(n,t){return this.throwIfDisposed(),this.gl.getUniformLocation(n,t)},e.prototype.setInputMatrixTexture=function(n,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),o4(this.gl,this.debug,this.program,n,t,r)},e.prototype.setOutputMatrixTexture=function(n,t,r){this.setOutputMatrixTextureDriver(n,r,t)},e.prototype.setOutputPackedMatrixTexture=function(n,t,r){this.throwIfDisposed();var i=Zu(t,r),a=i[0],o=i[1];this.setOutputMatrixTextureDriver(n,a,o)},e.prototype.setOutputMatrixWriteRegion=function(n,t,r,i){this.setOutputMatrixWriteRegionDriver(r,n,i,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(n,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&Hh(this.gl,this.debug,this.program),Ol(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),De(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),De(this.gl,this.debug,function(){return n.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Pl(this.gl,this.debug,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(t.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),a=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(n){return Ae(this,void 0,void 0,function(){var t=this;return Re(this,function(r){switch(r.label){case 0:return[4,gm(function(){return t.disposed||t.isQueryAvailable(n,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(n,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(n,t){if(t===0)return!0;if(t===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(n){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var n=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=n;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},e.prototype.addItemToPoll=function(n,t){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:t}),this.itemsToPoll.length>1||gm(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),$h(this.gl,this.debug,n,this.framebuffer),this.debug&&Ol(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?($h(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Ol(this.gl)):Cm(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(n,t){this.bindTextureToFrameBuffer(n);var r=t();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(n,t,r){this.throwIfDisposed();var i=this.gl;$h(i,this.debug,n,this.framebuffer),this.debug&&Ol(i),this.outputTexture=n,De(i,this.debug,function(){return i.viewport(0,0,t,r)}),De(i,this.debug,function(){return i.scissor(0,0,t,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(n,t,r,i){var a=this;this.throwIfDisposed(),De(this.gl,this.debug,function(){return a.gl.scissor(n,t,r,i)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function Lm(e,n){if(e.length!==n.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+n.length+" inputs");e.forEach(function(t,r){var i=t.logicalShape,a=n[r],o=a.shape;if(!Jt(i,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+o+" must match");if(!t.isUniform||!a.isUniform){var s=t.texShape,u=a.isUniform?null:a.texData.texShape;if(!Jt(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var vk=function(e,n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=t.filterWidth,i=t.inChannels,a=t.strideWidth,o=t.strideHeight,s=t.padInfo,u=t.outWidth,l=t.dilationWidth,c=t.dilationHeight,f=t.dataFormat,h=s.left,d=s.top,v=i*r,p=_n(),g=f==="channelsLast",m=g?0:1,x=g?1:2,y="",w=0;w<=1;w++)for(var _=0;_<=1;_++)y+=`
          blockIndex = rc.y + `+_+`;
          pos = rc.x + `+w+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+o+" - "+d+`;
            d0 = offsetY + `+c+" * (pos / "+v+`);

            if(d0 < `+n[m]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+h+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+v+".) / "+i+`.));

              if(d1 < `+n[x]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*w+_)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*w+_)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+y+`

        `+p.output+` = result;
      }
    `},mk=function(e,n,t,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=n,s=e[3]-1;this.outputShape=e;var u="float("+t+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},gk=function(e,n,t,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=t,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},xk=function(e,n,t,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=n,s=e[3]-1;this.outputShape=e;var u="float("+t+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},yk=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideHeight,t=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,s=a-1-e.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},wk=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideDepth,t=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,f=u-1-e.padInfo.top,h=l-1-e.padInfo.left,d=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+d+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},qh=function(e,n,t,r,i,a,o){t===void 0&&(t=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),a===void 0&&(a=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=t?e[1]:e[2],u=Math.ceil(s/2),l=t?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",v="";a&&(d=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,v="result = activation(result);");var p=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+d+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+h[0]+`);
          result += (`+f[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+p+`

        `+v+`

        setOutput(result);
      }
    `},_k=function(){function e(n,t,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;return function(r,i){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(t.seedLoc,n)}},e}(),Ek=function(e,n,t,r){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},Sk=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var n=e.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=Wn("rc",n),r=ut(n),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",f=s-2;f<s;f++)c+=l[f]+" >= "+u[f],f<s-1&&(c+="||");return c}(n,e,t),a=function(s,u,l,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(n,e[e.length-1],e[e.length-2],t),o=function(s,u){var l=s.length,c=function(f,h){for(var d=[],v=0;v<=1;v++)for(var p=0;p<=1;p++){for(var g=(v===0?"r":"rp1")+", "+(p===0?"c":"cp1"),m=2;m<f;m++)g=h[h.length-1-m]+","+g;d.push(g)}return d}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(e,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},Ck=function(e,n,t){this.variableNames=["x"],this.outputShape=n.map(function(u,l){return u[0]+e[l]+u[1]});var r=e.length,i=ut(r),a=n.map(function(u){return u[0]}).join(","),o=n.map(function(u,l){return u[0]+e[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+a+`);
      `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},bk=function(e,n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(g,m){return g[0]+e[m]+g[1]});for(var r=e.length,i=ut(r),a=n.map(function(g){return g[0]}).join(","),o=n.map(function(g,m){return g[0]+e[m]}).join(","),s=Wn("rc",r),u=Wn("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",v=0,p=r===1?2:4;v<p;v++)d+=`
        `+f[v]+`
        if (`+h+`) {
          result[`+v+"] = float("+t+`);
        } else {
          `+i+` source = rc - start;
          result[`+v+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;d+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+a+`);
      const `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+d+`
        setOutput(result);
      }
    `},Yh=function(e,n,t){if(this.variableNames=["x"],n==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var h=n==="avg",d="0.0";if(h||(d="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+a+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(v="avgValue / count");var p=4*Math.floor(r/4),g=r%4,m=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+a+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+d+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+d+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+m+`
          }

          int xC = xCCorner + `+p+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+m+`
          }
        }
        setOutput(`+v+`);
      }
    `}},Qh=function(e,n,t){if(this.variableNames=["x"],n==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,v=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;var g=n==="avg",m="0.0";if(g||(m="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+a+", "+o+`);
        const ivec3 pads = ivec3(`+d+", "+v+", "+p+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(x="avgValue / count");var y=4*Math.floor(r/4),w=r%4,_=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+d+", "+v+", "+p+`);
      const float initializationValue = `+m+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+m+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+y+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+_+`
            }

            int xC = xCCorner + `+y+`;
            if (`+(w===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(w===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(w===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+_+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},Tk=function(e,n){this.variableNames=["x"];var t=e.windowSize,r=e.batchSize,i=e.inSize,a=Math.ceil(i/t);this.outputShape=[r,a];var o="0.0",s="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",s="min"):n==="max"&&(o="-1.0 / 1e-20",s="max");var u=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");var l=4*Math.floor(t/4),c=t%4,f=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";n==="all"?(o="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var d="";i%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},kk=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var t="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),t+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Wa(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+j0(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+t+`

        setOutput(result);
      }
    `},Ak=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],a=r[2],o=e.shape,s=o[1],u=o[2],l=[t&&s>1?i-1:i,t&&u>1?a-1:a],c=[t&&s>1?s-1:s,t&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,v=1/h,p=2*Math.ceil(d)+2,g=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+p+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Rk=function(e,n,t,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,n,t,s];var u=[r&&n>1?a-1:a,r&&t>1?o-1:o],l=[r&&n>1?n-1:n,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},Fk=function(e,n,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,n,t,s];var u=[r&&n>1?a-1:a,r&&t>1?o-1:o],l=[r&&n>1?n-1:n,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},Ik=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],a=r[2],o=e.shape,s=o[1],u=o[2],l=[t&&s>1?i-1:i,t&&u>1?a-1:a],c=[t&&s>1?s-1:s,t&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,v=1/h,p=2*Math.ceil(d)+2,g=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+p+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Nk=function(e,n,t,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,n,t,s];var u=[r&&n>1?a-1:a,r&&t>1?o-1:o],l=[r&&n>1?n-1:n,r&&t>1?t-1:t],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},Dk=function(e,n){this.variableNames=["x"];var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=e,t!==1){var r=e.map(function(a,o){return function(s){return n.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(o)}).join(","),i=ut(t);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},Pk=function(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=e;var r=Wn("rc",t),i=r[t-1]+" + 1 < "+this.outputShape[t-1],a=r[t-2]+" + 1 < "+this.outputShape[t-2],o=ut(t);function s(u){var l=e.map(function(c,f){return function(h,d){return n.indexOf(h)!==-1&&e[h]!==1?e[h]+" - "+d[h]+" - 1":""+d[h]}(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[t-1]="("+u[t-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+function(u){return u[t-2]="("+u[t-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[t-1]="("+u[t-1]+" + 1)",u[t-2]="("+u[t-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Bm=function(e,n,t,r,i,a,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=ut(i.length),u=ut(a.length),l="";t===1?l="i":t===2&&(l="i, j");var c="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var h="getUpdates("+f+")",d=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+d+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},Ok=function(e,n){this.variableNames=["x","segmentIds"];var t=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/t);this.outputShape=[r,o];var s=4*Math.floor(t/4),u=t%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%t>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var f="";i%t>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},Mk=function(e,n,t){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=n,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<n.length;u++)s.push(""+a[u]),u<e&&o.push(""+a[u]);r=o.join(),i=s.join()}var l=ut(t);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},Lk=function(){function e(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var t,r=ut(this.rank),i="uniform int start["+this.rank+"];",a=function(o){if(o===1)return"sourceLoc";if(o<=6)return Jh.slice(0,o).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(o,s){return"sourceLoc."+Jh[s]+" = start["+s+"] + coords."+Jh[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+t+`
        setOutput(getSource(`+a+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(i,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,n)}},e}(),Jh=["x","y","z","w","u","v"],Bk=function(){function e(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var t=ut(this.rank),r=Wn("coords",this.rank),i=Wn("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",o="getChannel(getSource("+i.join()+"), "+a+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+o+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+t+"("+n.map(function(c,f){return"start["+f+"]"}).join()+");":n.map(function(c,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(i,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,n)}},e}(),Uk=function(e,n,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=ut(t.length),a=ut(t.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=t.map(function(u,l){return s++,t.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+e+`);
      `+i+" strides = "+i+"("+n+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},Wk=function(){function e(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(n,t,r){var i,a=Um(t,r),o=Wm(n,a,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),a===nr.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):a===nr.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):a===nr.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):a===nr.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):a===nr.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[o].push(i),i},e.prototype.releaseTexture=function(n,t,r,i){if(this.freeTextures!=null){var a=Wm(t,Um(r,i),i);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(n),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[a],s=o.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Um(e,n){if(e===or.UPLOAD)return nr.PACKED_2X2_FLOAT32;if(e===or.RENDER||e==null)return function(t){return oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?nr.PACKED_2X2_FLOAT32:nr.UNPACKED_FLOAT32:t?nr.PACKED_2X2_FLOAT16:nr.UNPACKED_FLOAT16}(n);if(e===or.DOWNLOAD||e===or.PIXELS)return nr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Wm(e,n,t){return e[0]+"_"+e[1]+"_"+n+"_"+t}var zk=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[r]*n[r];this.outputShape=t,this.rank=t.length;var i=ut(this.rank),a=function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<o.length;c++)l.push("imod("+u[c]+", "+o[c]+")");return l.join()}(e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},Vk=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[n[r]];this.outputShape=t,this.rank=t.length;var i=ut(this.rank),a=function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<o.length;c++)l[o[c]]=u[c];return l.join()}(n);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},Hk=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[n[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=ut(this.rank),a=rw("rc",this.rank),o=new Array(this.rank);for(r=0;r<n.length;r++)o[n[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+t[this.rank-1],l="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},G0=1.7580993408473768,X0=1.0507009873554805,He=function(e,n){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},jr="if (isnan(x)) return x;",$k="return x;",zm="return abs(x);",uw=jr+`
  return (x < 0.0) ? 0.0 : x;
`,lw=jr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,cw="return (x >= 0.0) ? x : (exp(x) - 1.0);",jk=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+G0+`;
  float scale = `+X0+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Vm="return -x;",Hm="return ceil(x);",$m="return floor(x);",jm="return exp(x);",Gm="return exp(x) - 1.0;",Gk=jr+`
  return sin(x);
`,Xk=jr+`
  return cos(x);
`,Kk=jr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,qk=jr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Yk=jr+`
  return atan(x);
`,Qk=jr+"return log(x + sqrt(x * x + 1.0));",Jk=jr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Zk=jr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ul="return x;",eA="return x;",fw=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hw=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,dw=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,$s=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},tA=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var n=e.length,t=Wn("rc",n),r=ut(n),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(n,t),a=t.slice(-2),o=n<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Wl={};function zl(e,n){if(n===void 0&&(n=!1),e==="linear")return n?eA:$k;if(e==="relu")return n?fw:uw;if(e==="elu")return n?dw:cw;if(e==="relu6")return n?hw:lw;if(e==="prelu")return n?sw:ow;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var nA=600,rA=function(e){function n(t){var r,i=e.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var a=fi(oe().getNumber("WEBGL_VERSION"));i.binaryCache=((r=oe().getNumber("WEBGL_VERSION"))in Wl||(Wl[r]={}),Wl[r]),i.gpgpu=new pk(a),i.canvas=a.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=t,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=t.gl.canvas;return i.textureManager=new Wk(i.gpgpu),i.numMBBeforeWarning=oe().global.screen==null?1024:oe().global.screen.height*oe().global.screen.width*window.devicePixelRatio*nA/1024/1024,i.texData=new K2(i,j),i}return $r(n,e),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(t,r,i){if(oe().getBool("DEBUG")&&this.checkNumericalProblems(t),i==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:i,values:t,usage:or.UPLOAD}),a},n.prototype.move=function(t,r,i,a){if(oe().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:i,dtype:a,values:r,usage:or.UPLOAD})},n.prototype.readSync=function(t){var r=this.texData.get(t),i=r.values,a=r.dtype,o=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new $s(u,Ul):new He(u,Ul);var f=this.runWebGLProgram(c,[{dataId:t,shape:u,dtype:a}],a),h=this.readSync(f.dataId);return this.disposeData(f.dataId),h}if(i!=null)return this.convertAndCacheOnCPU(t);if(a==="string")return i;var d,v,p=this.activeTimers!=null;return p&&(d=Zr()),a==="complex64"?v=Cp(o.real.dataSync(),o.imag.dataSync()):v=this.getValuesFromTexture(t),p&&(this.downloadWaitMs+=Zr()-d),this.convertAndCacheOnCPU(t,v)},n.prototype.read=function(t){return Ae(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,v,p,g,m,x,y,w,_,S,E,b;return Re(this,function(C){switch(C.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(T){return r.push(T)})];if(i=this.texData.get(t),a=i.values,o=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return f=void 0,f=c?new $s(o,Ul):new He(o,Ul),h=this.runWebGLProgram(f,[{dataId:t,shape:o,dtype:u}],u),d=this.read(h.dataId),this.disposeData(h.dataId),[2,d];if(a!=null)return[2,this.convertAndCacheOnCPU(t)];if(!oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&oe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,u!=="complex64"&&oe().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),g=this.texData.get(p.dataId),v=(b=this.gpgpu).createBufferFromTexture.apply(b,[g.texture].concat(ou(o)))),this.pendingRead.set(t,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return x=C.sent(),y=x[0],w=x[1],m=Cp(y,w),[3,5];case 4:v==null?m=this.getValuesFromTexture(t):(_=Ne(o),m=this.gpgpu.downloadFloat32MatrixFromBuffer(v,_)),C.label=5;case 5:return p!=null&&this.disposeData(p.dataId),S=this.convertAndCacheOnCPU(t,m),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach(function(T){return T(S)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,S]}})})},n.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var i=t[r];if(!jT(i))throw oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(t){var r,i=this.texData.get(t),a=i.shape,o=i.dtype,s=i.isPacked,u=Ne(a);if(oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(t),c=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(ou(a))).subarray(0,u);return this.disposeData(l.dataId),f}var h=oe().getBool("WEBGL_PACK")&&s===!0,d=h?jh(a):a,v=h?new $3(d):new H3(d),p=this.runWebGLProgram(v,[{shape:d,dtype:o,dataId:t}],"float32"),g=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,u);return this.disposeData(p.dataId),m},n.prototype.time=function(t){return Ae(this,void 0,void 0,function(){var r,i,a,o,s,u,l;return Re(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],a=!1,this.programTimersStack==null?(this.programTimersStack=i,a=!0):this.activeTimers.push(i),this.activeTimers=i,t(),o=vs(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=vs(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return l=c.sent(),u.kernelMs=bT(l),u.getExtraProfileInfo=function(){return l.map(function(f,h){return{name:s[h],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Zr(),endMs:null}},n.prototype.endTimer=function(t){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Zr(),t)},n.prototype.getQueryTime=function(t){return Ae(this,void 0,void 0,function(){var r;return Re(this,function(i){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},n.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},n.prototype.releaseGPUData=function(t){var r=this.texData.get(t),i=r.texture,a=r.dtype,o=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||t,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(o,a),this.textureManager.releaseTexture(i,o,s,u)));var h=this.texData.get(t);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},n.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},n.prototype.getDataInfo=function(t){return this.texData.get(t)},n.prototype.getCPUBackend=function(){return oe().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=j.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(t,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(a){return i.texData.get(a.dataId).texture==null&&a.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(t,r){var i=this.makeOutput(t.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:j.keep(t.clone()),imag:j.keep(r.clone())},i},n.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},n.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},n.prototype.slice=function(t,r,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,i);if(Ne(i)===0)return sn([],i,t.dtype);var a=this.texData.get(t.dataId).isPacked,o=G2(t.shape,r,i);if(a||!o){var s=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bk(i):new Lk(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[t],null,u)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,i)},n.prototype.shallowSlice=function(t,r,i){var a=this.texData.get(t.dataId),o=this.makeOutput(i,t.dtype),s=this.texData.get(o.dataId);Object.assign(s,a),s.shape=i,s.dtype=t.dtype;var u=X2(r,t.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||t.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),o},n.prototype.stridedSlice=function(t,r,i,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,i,a);var o=W0(r,i,a);if(o.some(function(u){return u===0}))return sn([],o);var s=new Uk(r,a,o);return this.compileAndRun(s,[t])},n.prototype.reverse=function(t,r){var i=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Pk(t.shape,r):new Dk(t.shape,r);return this.compileAndRun(i,[t])},n.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var i=t.map(function(d){return wr(d)}),a=t.map(function(d){return ni(d)});return rn(this.concat(i,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),s=this.concat(t.slice(0,o),r),u=this.concat(t.slice(o),r);return this.concat([s,u],r)}if(oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var l=new R3(t.map(function(d){return d.shape}),r);return this.compileAndRun(l,t)}var c=gs(t.map(function(d){return d.shape}),r),f=t.map(function(d){return d.as2D(-1,Ne(d.shape.slice(r)))}),h=new A3(f.map(function(d){return d.shape}));return this.compileAndRun(h,f).reshape(c)},n.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Vm,t.dtype);var r=new He(t.shape,Vm);return this.compileAndRun(r,[t])},n.prototype.batchMatMul=function(t,r,i,a){var o=i?t.shape[2]:t.shape[1],s=a?r.shape[1]:r.shape[2],u=i?t.shape[1]:t.shape[2],l=t.shape[0];if((o===1||s===1)&&u>1e3){i&&(t=t.transpose([0,2,1])),a&&(r=r.transpose([0,2,1]));var c=s===1?t:t.as3D(l,u,1),f=s===1?2:1,h=s===1?r.as3D(l,1,u):r;return this.multiply(c,h).sum(f,!0)}var d=on(t.dtype,r.dtype),v=new qh(t.shape,[l,o,s],i,a);return this.compileAndRun(v,[t,r],d)},n.prototype.fusedBatchMatMul=function(t){var r=t.a,i=t.b,a=t.transposeA,o=t.transposeB,s=t.bias,u=t.activation,l=t.preluActivationWeights,c=a?r.shape[2]:r.shape[1],f=o?i.shape[1]:i.shape[2],h=r.shape[0],d=on(r.dtype,i.dtype),v=s!=null,p=l!=null,g=u?zl(u,!0):null,m=new qh(r.shape,[h,c,f],a,o,v,g,p),x=[r,i];return s&&x.push(s),l&&x.push(l),this.compileAndRun(m,x,d)},n.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var i=this.texData.get(t.dataId),a=this.texData.get(r.dataId),o=new Fm(S3,t.shape,r.shape),s=new Fm(C3,t.shape,r.shape),u=[this.makeComplexComponentTensorInfo(t,i.complexTensors.real),this.makeComplexComponentTensorInfo(t,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],l=this.compileAndRun(o,u),c=this.compileAndRun(s,u),f=this.complex(l,c);return l.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Im,t.dtype);var h=new Ct(Im,t.shape,r.shape);return this.compileAndRun(h,[t,r],t.dtype)},n.prototype.batchNormalization=function(t,r,i,a,o,s){var u=[t,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(o!=null&&(c=o.shape,u.push(o)),oe().getBool("WEBGL_PACK_NORMALIZATION")){var f=new E3(t.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(f,u)}var h=new _3(t.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(h,u)},n.prototype.localResponseNormalization4D=function(t,r,i,a,o){var s=oe().getBool("WEBGL_PACK_NORMALIZATION")?new xk(t.shape,r,i,a,o):new mk(t.shape,r,i,a,o);return this.compileAndRun(s,[t])},n.prototype.LRNGrad=function(t,r,i,a,o,s,u){var l=new gk(r.shape,a,o,s,u);return this.compileAndRun(l,[r,i,t])},n.prototype.tile=function(t,r){if(t.dtype==="string"){var i=this.readSync(t.dataId).map(function(o){return zc(o)});return tw(ze(t.shape,t.dtype,i),r)}var a=new zk(t.shape,r);return this.compileAndRun(a,[t])},n.prototype.pad=function(t,r,i){var a=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bk(t.shape,r,i):new Ck(t.shape,r,i);return this.compileAndRun(a,[t])},n.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var i=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Hk(t.shape,r):new Vk(t.shape,r);return this.compileAndRun(i,[t])},n.prototype.gather=function(t,r,i){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,i);var a=new Y3(t.shape,r.size,i);return this.compileAndRun(a,[t,r])},n.prototype.batchToSpaceND=function(t,r,i){P(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(f,h){return f*h}),o=Xc(t.shape,r,a),s=Kc(o.length,r.length),u=qc(t.shape,r,a),l=V2(i,r.length),c=H2(u,i,r.length);return t.reshape(o).transpose(s).reshape(u).slice(l,c)},n.prototype.spaceToBatchND=function(t,r,i){P(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(h,d){return h*d}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<t.shape.length;++s)o.push([0,0]);var u=t.pad(o),l=Xc(u.shape,r,a,!1),c=Kc(l.length,r.length,!1),f=qc(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},n.prototype.reduce=function(t,r,i){var a=t.shape[0],o=t.shape[1],s=Gh(o),u=new Tk({windowSize:s,inSize:o,batchSize:a},r),l=this.compileAndRun(u,[t],i);return l.shape[1]===1?l:this.reduce(l,r,i)},n.prototype.argReduce=function(t,r,i){i===void 0&&(i=null);var a=t.shape[0],o=t.shape[1];i!=null&&(a=i.shape[0],o=i.shape[1]);var s=Gh(o),u=new h3({windowSize:s,inSize:o,batchSize:a},r,i==null),l=[t];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(t,r,c)},n.prototype.argReducePacked=function(t,r,i){i===void 0&&(i=null);var a=i!=null?i.shape:t.shape,o=Gh(a[a.length-1]),s=new x3(a,o,r,i==null),u=i==null?[t]:[t,i],l=this.compileAndRun(s,u,"int32");return l.rank===t.rank?this.argReducePacked(t,r,l):l},n.prototype.sum=function(t,r){er("sum",r,t.rank);var i=xn(t.shape,r),a=i[0],o=Ne(i[1]),s=t.as2D(-1,o),u=Bh(t.dtype);return this.reduce(s,"sum",u).reshape(a)},n.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var i=xn(t.shape,r),a=i[0],o=Ne(i[1]),s=t.as2D(-1,o),u=Bh(t.dtype);return this.reduce(s,"prod",u).reshape(a)},n.prototype.unsortedSegmentSum=function(t,r,i){var a=0,o=hi([a],t.rank),s=t;o!=null&&(s=t.transpose(o),a=di(1,t.rank)[0]);var u=function(d,v,p){for(var g=[],m=d.length,x=0;x<m;x++)x!==v?g.push(d[x]):g.push(p);return g}(s.shape,a,i),l=Ne([s.shape[a]]),c=s.as2D(-1,l),f=Bh(t.dtype),h=this.segOpCompute(c,"unsortedSegmentSum",r,f,i).reshape(u);return o!=null&&(h=h.transpose(M0(o))),h},n.prototype.segOpCompute=function(t,r,i,a,o){var s=t.shape[0],u=t.shape[1],l=function(h,d){var v,p=!1;for(h<=j2?(v=h,p=!0):v=vp(h,Math.floor(Math.sqrt(h)));!p;)v>d||v===h?p=!0:v=vp(h,v+1);return v}(u,o),c=new Ok({windowSize:l,inSize:u,batchSize:s,numSegments:o}),f=this.compileAndRun(c,[t,i],a);return f.shape[1]===o?f:(i=Gc(0,o).tile([u/l]),this.segOpCompute(f,r,i,a,o))},n.prototype.argMinMaxReduce=function(t,r,i){var a=[r];if(er("arg"+i.charAt(0).toUpperCase()+i.slice(1),a,t.rank),!oe().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=xn(t.shape,a),s=o[0],u=Ne(o[1]),l=t.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(t,i)},n.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},n.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},n.prototype.cumsum=function(t,r,i,a){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var o=new B3(t.shape,i,a);return this.compileAndRun(o,[t])},n.prototype.equal=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var i=new Ct("return float(a == b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.notEqual=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Ct("return float(a != b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Ct("return float(a < b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.lessEqual=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Ct("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Ct("return float(a > b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.greaterEqual=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Ct("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.logicalNot=function(t){var r=new He(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},n.prototype.logicalAnd=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Ct("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.logicalOr=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Ct("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r],"bool")},n.prototype.select=function(t,r,i){var a=new Mk(t.rank,r.shape,r.rank);return this.compileAndRun(a,[t,r,i],on(r.dtype,i.dtype))},n.prototype.where=function(t){$c("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return $0(t.shape,r)},n.prototype.topk=function(t,r,i){return nw(t.dataSync(),t.shape,t.dtype,r)},n.prototype.min=function(t,r){er("min",r,t.rank);var i=xn(t.shape,r),a=i[0],o=Ne(i[1]),s=t.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(a)},n.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ct(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},n.prototype.mod=function(t,r){var i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ct(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},n.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);er("max",r,t.rank);var i=xn(t.shape,r),a=i[0],o=Ne(i[1]),s=t.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(a)},n.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ct(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},n.prototype.all=function(t,r){er("all",r,t.rank);var i=xn(t.shape,r),a=i[0],o=Ne(i[1]),s=t.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(a)},n.prototype.any=function(t,r){er("any",r,t.rank);var i=xn(t.shape,r),a=i[0],o=Ne(i[1]),s=t.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(a)},n.prototype.realDivide=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Ct(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(i,[t,r],"float32")},n.prototype.floorDiv=function(t,r){if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Ct(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(i,[t,r],"int32")},n.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,Xh);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var i=on(t.dtype,r.dtype);if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Xh,i);var a=new Ct(Xh,t.shape,r.shape);return this.compileAndRun(a,[t,r],i)},n.prototype.packedUnaryOp=function(t,r,i){var a=new $s(t.shape,r);return this.compileAndRun(a,[t],i)},n.prototype.packedBinaryOp=function(t,r,i,a,o){o===void 0&&(o=!1);var s=new gi(i,t.shape,r.shape,o);return this.compileAndRun(s,[t,r],a)},n.prototype.complexSeparableBinaryOp=function(t,r,i){var a=this,o=this.texData.get(t.dataId),s=this.texData.get(r.dataId),u=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(h){var d=h[0],v=h[1],p=a.makeComplexComponentTensorInfo(t,d),g=a.makeComplexComponentTensorInfo(r,v),m=new Ct(i,t.shape,r.shape);return a.compileAndRun(m,[p,g],on(d.dtype,v.dtype))}),l=u[0],c=u[1],f=this.complex(l,c);return l.dispose(),c.dispose(),f},n.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},n.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>oe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),i=this.addN(t.slice(0,r)),a=this.addN(t.slice(r));return this.addN([i,a])}var o=t.map(function(l){return l.dtype}).reduce(function(l,c){return on(l,c)}),s=t.map(function(l){return l.shape}),u=oe().getBool("WEBGL_PACK")?new f3(t[0].shape,s):new c3(t[0].shape,s);return this.compileAndRun(u,t,o)},n.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,Kh);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var i=on(t.dtype,r.dtype);if(oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Kh,t.dtype);var a=new Ct(Kh,t.shape,r.shape);return this.compileAndRun(a,[t,r],i)},n.prototype.pow=function(t,r){var i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ct(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),a=on(t.dtype,r.dtype);return this.compileAndRun(i,[t,r],a)},n.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Hm,t.dtype);var r=new He(t.shape,Hm);return this.compileAndRun(r,[t])},n.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,$m,t.dtype);var r=new He(t.shape,$m);return this.compileAndRun(r,[t])},n.prototype.sign=function(t){var r=new He(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},n.prototype.isNaN=function(t){var r=new He(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.isInf=function(t){var r=new He(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.isFinite=function(t){var r=new He(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.round=function(t){var r=new He(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},n.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,jm,t.dtype);var r=new He(t.shape,jm);return this.compileAndRun(r,[t])},n.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Gm,t.dtype);var r=new He(t.shape,Gm);return this.compileAndRun(r,[t])},n.prototype.softmax=function(t,r){var i=$t([r],t.shape),a=this.max(t,i),o=Xn(a.shape,i),s=this.subtract(t,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},n.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new He(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},n.prototype.log1p=function(t){var r=new He(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},n.prototype.sqrt=function(t){var r=new He(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},n.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new He(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},n.prototype.reciprocal=function(t){var r=new He(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},n.prototype.relu=function(t){var r;return r=oe().getBool("WEBGL_PACK")?new $s(t.shape,fw):new He(t.shape,uw),this.compileAndRun(r,[t])},n.prototype.relu6=function(t){var r;return r=oe().getBool("WEBGL_PACK")?new $s(t.shape,hw):new He(t.shape,lw),this.compileAndRun(r,[t])},n.prototype.prelu=function(t,r){var i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi(sw,t.shape,r.shape):new Ct(ow,t.shape,r.shape);return this.compileAndRun(i,[t,r])},n.prototype.elu=function(t){if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,dw,t.dtype);var r=new He(t.shape,cw);return this.compileAndRun(r,[t])},n.prototype.eluDer=function(t,r){var i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new Ct("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(i,[t,r])},n.prototype.selu=function(t){var r=new He(t.shape,jk);return this.compileAndRun(r,[t])},n.prototype.int=function(t){var r=new He(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},n.prototype.clip=function(t,r,i){var a,o=(a=oe().getBool("WEBGL_PACK_CLIP")?new T3(t.shape):new b3(t.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(a,[t],null,o)},n.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,zm,t.dtype);var r=new He(t.shape,zm);return this.compileAndRun(r,[t])},n.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),i=new k3(t.shape),a=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(i,a)},n.prototype.sigmoid=function(t){var r=new He(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},n.prototype.softplus=function(t){var r=new He(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},n.prototype.sin=function(t){var r=new He(t.shape,Gk);return this.compileAndRun(r,[t])},n.prototype.cos=function(t){var r=new He(t.shape,Xk);return this.compileAndRun(r,[t])},n.prototype.tan=function(t){var r=new He(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},n.prototype.asin=function(t){var r=new He(t.shape,Kk);return this.compileAndRun(r,[t])},n.prototype.acos=function(t){var r=new He(t.shape,qk);return this.compileAndRun(r,[t])},n.prototype.atan=function(t){var r=new He(t.shape,Yk);return this.compileAndRun(r,[t])},n.prototype.atan2=function(t,r){var i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ct(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(i,[t,r])},n.prototype.sinh=function(t){var r=new He(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},n.prototype.cosh=function(t){var r=new He(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},n.prototype.tanh=function(t){var r=new He(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},n.prototype.asinh=function(t){var r=new He(t.shape,Qk);return this.compileAndRun(r,[t])},n.prototype.acosh=function(t){var r=new He(t.shape,Jk);return this.compileAndRun(r,[t])},n.prototype.atanh=function(t){var r=new He(t.shape,Zk);return this.compileAndRun(r,[t])},n.prototype.erf=function(t){var r=new He(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},n.prototype.step=function(t,r){var i=new He(t.shape,function(a){return a===void 0&&(a=0),jr+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `}(r));return this.compileAndRun(i,[t])},n.prototype.conv2dByMatMul=function(t,r,i,a,o,s){var u=t.shape,l=this.texData.get(t.dataId),c=i.inChannels,f=u[0]*u[1]*u[2],h=i.outChannels,d=i.dataFormat==="channelsLast",v=(f===1||h===1)&&c>1e3,p=u[2]%2!=0&&!!l.isPacked;if(v||!oe().getBool("WEBGL_LAZILY_UNPACK")||!oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!p){var g=d?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],m=this.reshape(t,[1,g,i.inChannels]),x=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:x,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),i.outShape)}var y=d?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),w={dataId:t.dataId,shape:[1,y,i.inChannels],dtype:t.dtype},_=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,P(Ll(l.shape,w.shape),function(){return"packed reshape "+l.shape+" to "+w.shape+" isn't free"});var S=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:w,b:S,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),b=this.texData.get(E.dataId);return P(b.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=_,b.shape=i.outShape,j.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},n.prototype.conv2dWithIm2Row=function(t,r,i,a,o,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,f=i.outWidth,h=i.outHeight,d=i.dataFormat==="channelsLast",v=u*l*c,p=h*f,g=[v,p],m=t.squeeze([0]),x=r.reshape([1,v,-1]),y=new vk(g,m.shape,i),w=this.compileAndRun(y,[m]).reshape([1,g[0],g[1]]),_=a!=null,S=s!=null,E=o?zl(o,!0):null,b=new qh(w.shape,[1,p,i.outChannels],!0,!1,_,E,S),C=[w,x];a&&C.push(a),S&&C.push(s);var T=this.compileAndRun(b,C);return d?T.reshape([1,h,f,i.outChannels]):T.reshape([1,i.outChannels,h,f])},n.prototype.fusedConv2d=function(t){var r=t.input,i=t.filter,a=t.convInfo,o=t.bias,s=t.activation,u=t.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,a,o,s,u);if(oe().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,a,o,s,u);var l=o!=null,c=u!=null,f=s?zl(s,!1):null,h=new Nm(a,l,f,c),d=[r,i];return o&&d.push(o),u&&d.push(u),this.compileAndRun(h,d)},n.prototype.conv2d=function(t,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,i);if(oe().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,i);var a=new Nm(i);return this.compileAndRun(a,[t,r])},n.prototype.conv2dDerInput=function(t,r,i){var a=new I3(i);return this.compileAndRun(a,[t,r])},n.prototype.conv2dDerFilter=function(t,r,i){var a=new F3(i);return this.compileAndRun(a,[t,r])},n.prototype.fusedDepthwiseConv2D=function(t){var r,i=t.input,a=t.filter,o=t.convInfo,s=t.bias,u=t.activation,l=t.preluActivationWeights,c=oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,f=u?zl(u,c):null,h=[i,a],d=s!=null,v=l!=null;return d&&h.push(s),v&&h.push(l),c?(r=new Pm(o,d,f,v),this.compileAndRun(r,h)):(r=new Dm(o,d,f,v),this.compileAndRun(r,h))},n.prototype.depthwiseConv2D=function(t,r,i){var a;return oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(a=new Pm(i),this.compileAndRun(a,[t,r])):(a=new Dm(i),this.compileAndRun(a,[t,r]))},n.prototype.depthwiseConv2DDerInput=function(t,r,i){var a=new O3(i);return this.compileAndRun(a,[t,r])},n.prototype.depthwiseConv2DDerFilter=function(t,r,i){var a=new P3(i);return this.compileAndRun(a,[t,r])},n.prototype.conv3d=function(t,r,i){var a=new M3(i);return this.compileAndRun(a,[t,r])},n.prototype.conv3dDerInput=function(t,r,i){var a=new D3(i);return this.compileAndRun(a,[t,r])},n.prototype.conv3dDerFilter=function(t,r,i){var a=new N3(i);return this.compileAndRun(a,[t,r])},n.prototype.maxPool=function(t,r){var i=new Yh(r,"max",!1);return this.compileAndRun(i,[t])},n.prototype.avgPool=function(t,r){var i=new Yh(r,"avg",!1);return this.compileAndRun(i,[t],"float32")},n.prototype.maxPoolBackprop=function(t,r,i,a){var o=new Yh(a,"max",!0),s=this.compileAndRun(o,[r]),u=new yk(a),l=this.compileAndRun(u,[t,s],r.dtype);return s.dispose(),l},n.prototype.avgPoolBackprop=function(t,r,i){var a=new y3(i);return this.compileAndRun(a,[t],r.dtype)},n.prototype.cast=function(t,r){return Q2(t,r,this)},n.prototype.unstack=function(t,r){for(var i=t.shape[r],a=new Array(t.rank-1),o=0,s=0;s<t.rank;s++)s!==r&&(a[o++]=t.shape[s]);var u=new Array(t.rank).fill(0),l=t.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(t,u,l).reshape(a);return c},n.prototype.avgPool3d=function(t,r){var i=new Qh(r,"avg",!1);return this.compileAndRun(i,[t],"float32")},n.prototype.avgPool3dBackprop=function(t,r,i){var a=new w3(i);return this.compileAndRun(a,[t],r.dtype)},n.prototype.maxPool3d=function(t,r){var i=new Qh(r,"max",!1);return this.compileAndRun(i,[t],"float32")},n.prototype.maxPool3dBackprop=function(t,r,i,a){var o=new Qh(a,"max",!0),s=this.compileAndRun(o,[r]),u=new wk(a),l=this.compileAndRun(u,[t,s],r.dtype);return s.dispose(),l},n.prototype.reshape=function(t,r){var i=this.texData.get(t.dataId);if(i.isPacked&&!Ll(t.shape,r)&&(i.texture===null||!Ll(i.shape,r))){var a=this.packedReshape(t,r);return j.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return Sp(t,r)},n.prototype.resizeBilinear=function(t,r,i,a){var o=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Fk(t.shape,r,i,a):new Rk(t.shape,r,i,a);return this.compileAndRun(o,[t],"float32")},n.prototype.resizeBilinearBackprop=function(t,r,i){var a=new Ak(t,r,i);return this.compileAndRun(a,[t])},n.prototype.resizeNearestNeighbor=function(t,r,i,a){var o=new Nk(t.shape,r,i,a);return this.compileAndRun(o,[t])},n.prototype.resizeNearestNeighborBackprop=function(t,r,i){var a=new Ik(t,r,i);return this.compileAndRun(a,[t])},n.prototype.multinomial=function(t,r,i,a){var o=r?t:Oi(t),s=o.shape[0],u=o.shape[1],l=new _k(s,u,i),c=l.getCustomSetupFunc(a);return this.compileAndRun(l,[o],"int32",c)},n.prototype.oneHot=function(t,r,i,a){var o=new Ek(t.size,r,i,a);return this.compileAndRun(o,[t])},n.prototype.diag=function(t){var r=new V3(t.size);return this.compileAndRun(r,[t])},n.prototype.nonMaxSuppression=function(t,r,i,a,o){return $c("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),V0(t.dataSync(),r.dataSync(),i,a,o)},n.prototype.cropAndResize=function(t,r,i,a,o,s){var u=new L3(t.shape,r.shape,a,o,s);return this.compileAndRun(u,[t,r,i],"float32")},n.prototype.depthToSpace=function(t,r,i){P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var a=t.shape[0],o=i==="NHWC"?t.shape[1]:t.shape[2],s=i==="NHWC"?t.shape[2]:t.shape[3],u=i==="NHWC"?t.shape[3]:t.shape[1],l=o*r,c=s*r,f=u/(r*r),h=new z3(i==="NHWC"?[a,l,c,f]:[a,f,l,c],r,i);return this.compileAndRun(h,[t])},n.prototype.split=function(t,r,i){return ew(t,r,i)},n.prototype.scatterND=function(t,r,i){var a=Yc(0,t,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=[c/u,u],h=t.reshape([s,o]),d=r.reshape([s,u]);if(c===0)return Sp(sn([]),i);var v=Ee(0),p=new Bm(s,o,h.rank,d.rank,l,f);return this.compileAndRun(p,[d,h,v]).reshape(i)},n.prototype.sparseToDense=function(t,r,i,a){var o=Yc(0,t,i),s=o.sliceRank,u=o.numUpdates,l=o.strides,c=o.outputSize,f=new Bm(u,s,t.rank,r.rank,l,[c,1]);return this.compileAndRun(f,[r,t,a]).reshape(i)},n.prototype.fft=function(t){return this.fftImpl(t,!1)},n.prototype.ifft=function(t){return this.fftImpl(t,!0)},n.prototype.fftImpl=function(t,r){var i=this.texData.get(t.dataId),a=new Mm(X3,t.shape,r),o=new Mm(K3,t.shape,r),s=[this.makeComplexComponentTensorInfo(t,i.complexTensors.real),this.makeComplexComponentTensorInfo(t,i.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(o,s),c=this.complex(u,l).as2D(t.shape[0],t.shape[1]);return u.dispose(),l.dispose(),c},n.prototype.gatherND=function(t,r){var i=r.shape,a=i[i.length-1],o=$2(t,r),s=o[0],u=o[1],l=o[2],c=o[3],f=r.reshape([u,a]),h=t.reshape([t.size/l,l]),d=new Q3(a,c,[u,l]);return this.compileAndRun(d,[h,f]).reshape(s)},n.prototype.fill=function(t,r,i){if((i=i||Qu(r))==="string"){var a=Wc(i,Ne(t));return a.fill(r),j.makeTensor(a,t,i,this)}var o=new q3(t,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],i,s)},n.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},n.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},n.prototype.linspace=function(t,r,i){return J2(t,r,i)},n.prototype.makeTensorInfo=function(t,r){var i=this.write(null,t,r);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:r}},n.prototype.makeOutput=function(t,r){var i=this.makeTensorInfo(t,r).dataId;return j.makeTensorFromDataId(i,t,r,this)},n.prototype.unpackTensor=function(t){var r=new tA(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},n.prototype.packTensor=function(t){var r=new Sk(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},n.prototype.packedReshape=function(t,r){var i=[Vc(t.shape)].concat(Hc(t.shape)),a={dtype:t.dtype,shape:i,dataId:t.dataId},o=[Vc(r)].concat(Hc(r)),s=new kk(o,i),u=this.runWebGLProgram(s,[a],t.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},n.prototype.decode=function(t){var r,i=this.texData.get(t),a=i.isPacked,o=i.shape,s=i.dtype,u=jh(o);return r=a?new W3(u):new U3(u),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:t}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(t,r,i,a,o){var s=this;o===void 0&&(o=!1);var u=this.makeTensorInfo(t.outputShape,i),l=this.texData.get(u.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===Pu.DENSE){var c=ou(t.outputShape);l.texShape=c.map(function(y){return 2*y})}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),Ne(u.shape)===0)return l.values=Nu(u.dtype,0),u;var f=[],h=r.map(function(y){if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var w=s.texData.get(y.dataId);if(w.texture==null){if(!t.packedInputs&&Ne(y.shape)<=oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:w.values};t.packedInputs&&(w.isPacked=!0,w.shape=y.shape)}else if(!!w.isPacked!=!!t.packedInputs)y=w.isPacked?s.unpackTensor(y):s.packTensor(y),f.push(y),w=s.texData.get(y.dataId);else if(w.isPacked&&!Ll(w.shape,y.shape)){var _=y,S=y.shape;y.shape=w.shape,y=s.packedReshape(y,S),f.push(y),w=s.texData.get(y.dataId),_.shape=S}return s.uploadToGPU(y.dataId),{shape:y.shape,texData:w,isUniform:!1}});this.uploadToGPU(u.dataId);var d,v={shape:u.shape,texData:l,isUniform:!1},p=function(y,w,_){var S="";w.concat(_).forEach(function(C){var T=C.texData!=null&&C.texData.slice!=null&&C.texData.slice.flatOffset>0,F=C.isUniform?"uniform":C.texData.texShape;S+=C.shape+"_"+F+"_"+T});var E=y.userCode,b=y.constructor.name;return b+="_"+S+"_"+E}(t,h,v),g=this.getAndSaveBinary(p,function(){return function(y,w,_,S){var E=w.userCode,b=_.map(function(H,X){var Q={logicalShape:H.shape,texShape:H.isUniform?null:H.texData.texShape,isUniform:H.isUniform,isPacked:!H.isUniform&&H.texData.isPacked,flatOffset:null};return H.texData!=null&&H.texData.slice!=null&&H.texData.slice.flatOffset>0&&(Q.flatOffset=H.texData.slice.flatOffset),{name:w.variableNames[X],shapeInfo:Q}}),C=b.map(function(H){return H.shapeInfo}),T={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},F=d3(b,T,E,w.packedInputs),I=y.createProgram(F),V=null,K=y.getUniformLocation(I,"NAN",!1);oe().getNumber("WEBGL_VERSION")===1&&(V=y.getUniformLocation(I,"INFINITY",!1));for(var G={},ie=0;ie<w.variableNames.length;ie++){var re=w.variableNames[ie];G[re]=y.getUniformLocation(I,re,!1),G["offset"+re]=y.getUniformLocation(I,"offset"+re,!1)}return{program:w,source:F,webGLProgram:I,uniformLocations:G,inShapeInfos:C,outShapeInfo:T,infLoc:V,nanLoc:K}}(s.gpgpu,t,h,v)}),m=this.activeTimers!=null;if(m&&(d=this.startTimer()),function(y,w,_,S,E){Lm(w.inShapeInfos,_),Lm([w.outShapeInfo],[S]);var b=S.texData.texture,C=S.texData.texShape;S.texData.isPacked?y.setOutputPackedMatrixTexture(b,C[0],C[1]):y.setOutputMatrixTexture(b,C[0],C[1]),y.setProgram(w.webGLProgram),oe().getNumber("WEBGL_VERSION")===1&&w.infLoc!==null&&y.gl.uniform1f(w.infLoc,1/0),w.nanLoc!==null&&y.gl.uniform1f(w.nanLoc,NaN),_.forEach(function(T,F){var I=w.program.variableNames[F],V=w.uniformLocations[I],K=w.uniformLocations["offset"+I];if(V!=null)if(T.isUniform)if(Ne(T.shape)<2)y.gl.uniform1f(V,T.uniformValues[0]);else{var G=T.uniformValues;G instanceof Float32Array||(G=new Float32Array(G)),y.gl.uniform1fv(V,G)}else T.texData.slice!=null&&K!=null&&y.gl.uniform1i(K,T.texData.slice.flatOffset),y.setInputMatrixTexture(T.texData.texture,V,F)}),E!=null&&E(y,w.webGLProgram),y.executeProgram()}(this.gpgpu,g,h,v,a),f.forEach(function(y){return s.disposeData(y.dataId)}),m&&(d=this.endTimer(d),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(d)})),!oe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){var x=this.unpackTensor(u);return this.disposeData(u.dataId),x}return u},n.prototype.compileAndRun=function(t,r,i,a,o){o===void 0&&(o=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(t,r,i,a,o);return j.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var t=this;this.disposed||(oe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=be(function(){if(!oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=oe().getBool("DEBUG");oe().set("DEBUG",!1);var i=t.abs(Ee(1e-8)).dataSync()[0];if(oe().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(t){var r,i=this.texData.get(t),a=i.shape,o=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var f,h=this.activeTimers!=null;h&&(f=Zr());var d=i.texShape;if(d==null&&(d=l4(a,c),i.texShape=d),s!=null){var v=jh(a),p=void 0,g=d[1],m=d[0],x=s instanceof Uint8Array;c?(g=(r=Zu(d[0],d[1]))[0],m=r[1],p=new G3(v,[m,g],x)):p=new j3(v,[m,g],x);var y=this.makeTensorInfo([m,g],o);this.texData.get(y.dataId).usage=x?or.PIXELS:or.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),g,m,s);var w=this.runWebGLProgram(p,[y],o,null,!0),_=this.texData.get(w.dataId);i.texture=_.texture,i.texShape=_.texShape,i.isPacked=_.isPacked,i.usage=_.usage,this.disposeData(y.dataId),this.texData.delete(w.dataId),i.values=null,h&&(this.uploadWaitMs+=Zr()-f)}else{var S=this.acquireTexture(d,l,o,c);i.texture=S}}},n.prototype.convertAndCacheOnCPU=function(t,r){var i=this.texData.get(t),a=i.dtype;return this.releaseGPUData(t),r!=null&&(i.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),l=0;l<u.length;++l)u[l]=Math.round(o[l]);return u}throw new Error("Unknown dtype "+s)}(r,a)),i.values},n.prototype.acquireTexture=function(t,r,i,a){if(this.numBytesInGPU+=this.computeBytes(t,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,a)},n.prototype.computeBytes=function(t,r){return t[0]*t[1]*T2(r)},n}(q2);D2()&&j.registerBackend("webgl",function(){return new rA},2);var iA=W({square_:function(e){var n=A(e,"x","square"),t=[n];return j.runKernelFunc(function(r,i){return i([n]),r.square(n)},{x:n},null,"Square",{},t,[])}}),Mu="SquaredDifference",pw=W({squaredDifference_:function(e,n){var t,r=A(e,"a","squaredDifference"),i=A(n,"b","squaredDifference");t=St(r,i),r=t[0],i=t[1],Ge(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return j.runKernelFunc(function(s,u){var l=s.squaredDifference(r,i);return u([r,i]),l},a,function(s,u){var l=u[0],c=u[1],f=Ee(2);return{a:function(){return s.mul(l.sub(c).mul(f))},b:function(){return s.mul(c.sub(l).mul(f))}}},Mu,{},o,[])}}),aA=W({abs_:function(e){var n=A(e,"x","abs");return n.dtype==="complex64"?j.runKernelFunc(function(t){return t.complexAbs(n)},{$x:n}):j.runKernelFunc(function(t,r){var i=t.abs(n);return r([n]),i},{x:n},function(t,r){var i=r[0];return{x:function(){return t.mul(i.toFloat().step(-1))}}},"Abs")}}),oA=W({acos_:function(e){var n=A(e,"x","acos");return j.runKernelFunc(function(t,r){var i=t.acos(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(Ee(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),sA=W({acosh_:function(e){var n=A(e,"x","acosh");return j.runKernelFunc(function(t,r){var i=t.acosh(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),uA=W({asin_:function(e){var n=A(e,"x","asin");return j.runKernelFunc(function(t,r){var i=t.asin(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(Ee(1).sub(i.toFloat().square()).sqrt())}}})}}),lA=W({asinh_:function(e){var n=A(e,"x","asinh");return j.runKernelFunc(function(t,r){var i=t.asinh(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.divStrict(Ee(1).add(i.toFloat().square()).sqrt())}}})}}),cA=W({atan_:function(e){var n=A(e,"x","atan");return j.runKernelFunc(function(t,r){var i=t.atan(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.div(i.toFloat().square().add(1))}}})}}),fA=W({atanh_:function(e){var n=A(e,"x","atanh");return j.runKernelFunc(function(t,r){var i=t.atanh(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.div(Ee(1).sub(i.toFloat().square()))}}})}}),hA=W({ceil_:function(e){var n=A(e,"x","ceil");return j.runKernelFunc(function(t){return t.ceil(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),K0=W({clipByValue_:function(e,n,t){var r=A(e,"x","clipByValue");P(n<=t,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+t+")."});var i=[r],a={min:n,max:t};return j.runKernelFunc(function(o,s){var u=o.clip(r,n,t);return s([r]),u},{x:r},function(o,s){var u=s[0];return{x:function(){return o.where(u.greaterEqual(n).logicalAnd(u.lessEqual(t)),Ke(o))}}},"ClipByValue",a,i)}}),dA=W({cos_:function(e){var n=A(e,"x","cos"),t=[n];return j.runKernelFunc(function(r,i){var a=r.cos(n);return i([n]),a},{x:n},function(r,i){var a=i[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),pA=W({cosh_:function(e){var n=A(e,"x","cosh");return j.runKernelFunc(function(t,r){var i=t.cosh(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(t)}}})}}),vA=W({erf_:function(e){var n=A(e,"x","erf");return P(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),j.runKernelFunc(function(t,r){var i=t.erf(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),bp=W({exp_:function(e){var n=A(e,"x","exp");return j.runKernelFunc(function(t,r){var i=t.exp(n);return r([i]),i},{x:n},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),mA=W({expm1_:function(e){var n=A(e,"x","expm1");return j.runKernelFunc(function(t,r){var i=t.expm1(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.exp())}}})}}),gA=W({floor_:function(e){var n=A(e,"x","floor");return j.runKernelFunc(function(t){return t.floor(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),xA=W({log_:function(e){var n=A(e,"x","log"),t=[n];return j.runKernelFunc(function(r,i){var a=r.log(n);return i([n]),a},{x:n},function(r,i){var a=i[0];return{x:function(){return r.div(a.toFloat())}}},"Log",{},t)}}),yA=W({log1p_:function(e){var n=A(e,"x","log1p");return j.runKernelFunc(function(t,r){var i=t.log1p(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.div(i.add(1))}}})}}),wA=W({logSigmoid_:function(e){var n=A(e,"x","logSigmoid");return j.runKernelFunc(function(t,r){var i=t.softplus(n.neg()).neg();return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.neg().sigmoid())}}})}}),ef=W({neg_:function(e){var n=A(e,"x","neg"),t=[n];return j.runKernelFunc(function(r){return r.neg(n)},{x:n},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),_A=W({reciprocal_:function(e){var n=A(e,"x","reciprocal");return j.runKernelFunc(function(t,r){var i=t.reciprocal(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.div(i.square().neg())}}})}}),EA=W({round_:function(e){var n=A(e,"x","round");return j.runKernelFunc(function(t){return t.round(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),vw=W({rsqrt_:function(e){var n=A(e,"x","rsqrt"),t=[n];return j.runKernelFunc(function(r,i){var a=r.rsqrt(n);return i([n]),a},{x:n},function(r,i){var a=i[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),mw=W({sigmoid_:function(e){var n=A(e,"x","sigmoid");return j.runKernelFunc(function(t,r){var i=t.sigmoid(n);return r([i]),i},{x:n},function(t,r){var i=r[0];return{x:function(){return t.mul(i.mul(Ee(1).sub(i)))}}},"Sigmoid")}}),SA=W({sign_:function(e){var n=A(e,"x","sign");return j.runKernelFunc(function(t){return t.sign(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),CA=W({isNaN_:function(e){var n=A(e,"x","isNaN");return j.runKernelFunc(function(t){return t.isNaN(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),bA=W({isInf_:function(e){var n=A(e,"x","isInf");return j.runKernelFunc(function(t){return t.isInf(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),TA=W({isFinite_:function(e){var n=A(e,"x","isFinite");return j.runKernelFunc(function(t){return t.isFinite(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),kA=W({sin_:function(e){var n=A(e,"x","sin"),t=[n];return j.runKernelFunc(function(r,i){var a=r.sin(n);return i([n]),a},{x:n},function(r,i){var a=i[0];return{x:function(){return a.toFloat().cos().mul(r)}}},"Sin",{},t)}}),AA=W({sinh_:function(e){var n=A(e,"x","sinh");return j.runKernelFunc(function(t,r){var i=t.sinh(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(t)}}})}}),RA=W({softplus_:function(e){var n=A(e,"x","softplus");return j.runKernelFunc(function(t,r){var i=t.softplus(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.mul(i.sigmoid())}}})}}),FA=W({sqrt_:function(e){var n=A(e,"x","sqrt");return j.runKernelFunc(function(t,r){var i=t.sqrt(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.div(i.toFloat().sqrt().mul(2))}}})}}),IA=W({step_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","step");return j.runKernelFunc(function(r){return r.step(t,n)},{$x:t},function(r){return{$x:function(){return Ke(r)}}})}}),NA=W({tan_:function(e){var n=A(e,"x","tan");return j.runKernelFunc(function(t,r){var i=t.tan(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return t.div(i.cos().square())}}})}}),DA=W({tanh_:function(e){var n=A(e,"x","tanh");return j.runKernelFunc(function(t,r){var i=t.tanh(n);return r([i]),i},{x:n},function(t,r){var i=r[0];return{x:function(){return Ee(1).sub(i.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function gw(e,n,t,r,i,a){var o,s,u=A(e,"x","batchNorm"),l=A(n,"mean","batchNorm"),c=A(t,"variance","batchNorm");return i!=null&&(o=A(i,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),P(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),P(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),o!=null&&P(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),s!=null&&P(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),tl(u,l,c,s,o,a)}function xw(e,n,t,r,i,a){var o,s,u=A(e,"x","batchNorm"),l=A(n,"mean","batchNorm"),c=A(t,"variance","batchNorm");return i!=null&&(o=A(i,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),P(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),P(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),o!=null&&P(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),s!=null&&P(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),tl(u,l,c,s,o,a)}function yw(e,n,t,r,i,a){var o,s,u=A(e,"x","batchNorm"),l=A(n,"mean","batchNorm"),c=A(t,"variance","batchNorm");return i!=null&&(o=A(i,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),P(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),P(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),P(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),o!=null&&P(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),s!=null&&P(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),tl(u,l,c,s,o,a)}function tl(e,n,t,r,i,a){a==null&&(a=.001);var o,s,u,l=A(e,"x","batchNorm"),c=A(n,"mean","batchNorm"),f=A(t,"variance","batchNorm");i!=null&&(o=A(i,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),P(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),P(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),P(o==null||c.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,c,f,o];return j.runKernelFunc(function(d,v){var p=d.batchNormalization(u,Vl(c),Vl(f),a,Vl(o),Vl(s));return v([l,c,f,o]),p},{x:l,mean:c,variance:f,scale:o,offset:s},function(d,v){var p=v,g=p[0],m=p[1],x=p[2],y=p[3],w=y??Ee(1),_=Vt(m.shape,u.shape),S=[];if(m.rank===1){for(var E=0;E<u.shape.length-1;++E)S.push(u.shape[E]);S.push(1)}var b=g.sub(m),C=d.mul(w),T=vw(x.add(Ee(a))),F=T.mul(T).mul(T).mul(Ee(-.5));return{x:function(){return m.rank===1?d.mul(Qo(T.as4D(1,1,1,m.shape[0]),S)).mul(w).reshape(g.shape):d.mul(T).mul(w).reshape(g.shape)},mean:function(){var I=T.mul(Ee(-1)).mul(C);return m.rank===1&&(I=I.sum(_)),I.reshape(m.shape)},variance:function(){var I=F.mul(b).mul(C);return m.rank===1&&(I=I.sum(_)),I.reshape(m.shape)},scale:function(){var I=b.mul(T),V=d.mul(I);return m.rank===1&&(V=V.sum(_)),V.reshape(m.shape)},offset:function(){var I=d;return m.rank===1&&(I=I.sum(_)),I.reshape(m.shape)}}},"BatchNormalization",{varianceEpsilon:a},h).reshape(l.shape)}function Vl(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Vf(){P2("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var PA=W({batchNormalization2d_:function(e,n,t,r,i,a){return r===void 0&&(r=.001),Vf(),gw(e,n,t,a,i,r)}}),OA=W({batchNormalization3d_:function(e,n,t,r,i,a){return r===void 0&&(r=.001),Vf(),xw(e,n,t,a,i,r)}}),MA=W({batchNormalization4d_:function(e,n,t,r,i,a){return r===void 0&&(r=.001),Vf(),yw(e,n,t,a,i,r)}}),LA=W({batchNormalization_:function(e,n,t,r,i,a){return r===void 0&&(r=.001),Vf(),tl(e,n,t,a,i,r)}}),ww=W({batchNorm_:tl}),BA=W({batchNorm2d_:gw}),UA=W({batchNorm3d_:xw}),WA=W({batchNorm4d_:yw}),Hf=W({logicalAnd_:function(e,n){var t=A(e,"a","logicalAnd","bool"),r=A(n,"b","logicalAnd","bool");return Ge(t.shape,r.shape),j.runKernelFunc(function(i){return i.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),zA=W({logicalNot_:function(e){var n=A(e,"x","logicalNot","bool");return j.runKernelFunc(function(t){return t.logicalNot(n)},{$x:n})}}),_w=W({logicalOr_:function(e,n){var t=A(e,"a","logicalOr","bool"),r=A(n,"b","logicalOr","bool");return Ge(t.shape,r.shape),j.runKernelFunc(function(i){return i.logicalOr(t,r)},{$a:t,$b:r})}}),VA=W({logicalXor_:function(e,n){var t=A(e,"a","logicalXor","bool"),r=A(n,"b","logicalXor","bool");return Ge(t.shape,r.shape),_w(e,n).logicalAnd(Hf(e,n).logicalNot())}}),Qa=W({where_:function(e,n,t){var r=A(n,"a","where"),i=A(t,"b","where"),a=A(e,"condition","where","bool");return et(r.shape,i.shape,"Error in where: "),a.rank===1?P(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):et(a.shape,i.shape,"Error in where: "),j.runKernelFunc(function(o,s){var u=o.select(a,r,i);return s([a]),u},{$condition:a,$a:r,$b:i},function(o,s){var u=s[0];return{$condition:function(){return Ke(u).toFloat()},$a:function(){return o.mul(u.cast(o.dtype))},$b:function(){return o.mul(u.logicalNot().cast(o.dtype))}}})}}),Ew=function(e){return Ae(this,void 0,void 0,function(){var n,t,r;return Re(this,function(i){switch(i.label){case 0:return[4,(n=A(e,"condition","whereAsync","bool")).data()];case 1:return t=i.sent(),r=$0(n.shape,t),e!==n&&n.dispose(),[2,r]}})})},je=W({add_:function(e,n){var t,r=A(e,"a","add"),i=A(n,"b","add");t=St(r,i),r=t[0],i=t[1];var a=Ge(r.shape,i.shape);return j.runKernelFunc(function(o){return o.add(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=Vt(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=Vt(i.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),HA=W({addN_:function(e){P(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),P(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var n=e.map(function(i,a){return A(i,"tensors"+a,"addN")}),t=n[0];n.forEach(function(i){if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!Jt(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return j.runKernelFunc(function(i){return i.addN(n)},r,function(i){var a={};return n.forEach(function(o,s){a[s]=function(){return i.clone()}}),a},"AddN")}}),$A=W({addStrict_:function(e,n){var t=A(e,"a","addStrict"),r=A(n,"b","addStrict");return et(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),jA=W({atan2_:function(e,n){var t,r=A(e,"a","atan2"),i=A(n,"b","atan2");t=St(r,i),r=t[0],i=t[1];var a=Ge(r.shape,i.shape);return j.runKernelFunc(function(o,s){var u=o.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=je(u.square(),l.square()),f=o.mul(l.div(c)),h=Vt(u.shape,a);return h.length>0&&(f=f.sum(h)),f.reshape(u.shape)},$b:function(){var c=je(u.square(),l.square()),f=ef(o.mul(u.div(c))),h=Vt(l.shape,a);return h.length>0&&(f=f.sum(h)),f.reshape(l.shape)}}})}}),Or=W({div_:function(e,n){var t,r=A(e,"a","div"),i=A(n,"b","div");if(t=St(r,i),r=t[0],i=t[1],r.dtype==="int32"&&i.dtype==="int32")return Sw(r,i);var a=Ge(r.shape,i.shape);return j.runKernelFunc(function(o,s){var u=o.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=Vt(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Vt(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"Div")}}),GA=W({divNoNan_:function(e,n){var t,r=A(e,"a","div"),i=A(n,"b","div");r=(t=St(r,i))[0],i=t[1];var a=Or(r,i),o=Ke(a),s=i.equal(o);return Qa(s,o,a)}}),XA=W({divStrict_:function(e,n){var t=A(e,"a","div"),r=A(n,"b","div");return et(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),Sw=W({floorDiv_:function(e,n){var t,r=A(e,"a","floorDiv"),i=A(n,"b","floorDiv");t=St(r,i),r=t[0],i=t[1];var a=Ge(r.shape,i.shape);return j.runKernelFunc(function(o,s){var u=o.floorDiv(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=Vt(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Vt(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"FloorDiv")}}),q0=W({maximum_:function(e,n){var t,r=A(e,"a","maximum"),i=A(n,"b","maximum");return t=St(r,i),r=t[0],i=t[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Ge(r.shape,i.shape),j.runKernelFunc(function(a,o){var s=a.maximum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}},"Maximum")}}),KA=W({maximumStrict_:function(e,n){var t=A(e,"a","maximumStrict"),r=A(n,"b","maximumStrict");return et(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),Cw=W({minimum_:function(e,n){var t,r=A(e,"a","minimum"),i=A(n,"b","minimum");return t=St(r,i),r=t[0],i=t[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Ge(r.shape,i.shape),j.runKernelFunc(function(a,o){var s=a.minimum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}},"Minimum")}}),qA=W({minimumStrict_:function(e,n){var t=A(e,"a","minimumStrict"),r=A(n,"b","minimumStrict");return et(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),YA=W({mod_:function(e,n){var t,r=A(e,"a","mod"),i=A(n,"b","mod");t=St(r,i),r=t[0],i=t[1];var a=Ge(r.shape,i.shape);return j.runKernelFunc(function(o,s){var u=o.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=Vt(u.shape,a);return c.length>0?o.sum(c).reshape(u.shape):o},$b:function(){var c=o.mul(u.div(l).floor().neg()),f=Vt(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}})}}),QA=W({modStrict_:function(e,n){var t=A(e,"a","modStrict"),r=A(n,"b","modStrict");return et(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),Sn=W({mul_:function(e,n){var t,r=A(e,"a","mul"),i=A(n,"b","mul");t=St(r,i),r=t[0],i=t[1];var a=Ge(r.shape,i.shape);return j.runKernelFunc(function(o,s){var u=o.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.mul(l.toFloat()),f=Vt(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Vt(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}},"Mul")}}),JA=W({mulStrict_:function(e,n){var t=A(e,"a","mul"),r=A(n,"b","mul");return et(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),tf=W({pow_:function(e,n){var t,r=A(e,"base","pow"),i=A(n,"exp","pow");t=St(r,i),r=t[0],i=t[1];var a=Ge(r.shape,i.shape),o=[r,i];return j.runKernelFunc(function(s,u){var l=s.pow(r,i);return u([r,i,l]),l},{a:r,b:i},function(s,u){var l=u[0],c=u[1],f=u[2];return{a:function(){var h=c.toFloat(),d=s.mul(h.mul(l.pow(h.sub(Ee(1))))),v=Vt(l.shape,a);return v.length>0&&(d=d.sum(v)),d.reshape(l.shape)},b:function(){var h=l.greater(0),d=l.log().where(h,Ke(l)),v=s.mul(f.mul(d)),p=Vt(c.shape,a);return p.length>0&&(v=v.sum(p)),v.reshape(c.shape)}}},"Pow",{},o,[!0])}}),ZA=W({powStrict_:function(e,n){return et(e.shape,n.shape,"Error in powStrict: "),e.pow(n)}}),eR=W({squaredDifferenceStrict_:function(e,n){var t=A(e,"a","squaredDifferenceStrict"),r=A(n,"b","squaredDifferenceStrict");return et(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),Ht=W({sub_:function(e,n){var t,r=A(e,"a","sub"),i=A(n,"b","sub");t=St(r,i),r=t[0],i=t[1];var a=Ge(r.shape,i.shape);return j.runKernelFunc(function(o){return o.subtract(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=Vt(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=Vt(i.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),tR=W({subStrict_:function(e,n){var t=A(e,"a","subStrict"),r=A(n,"b","subStrict");return et(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),bw=W({equal_:function(e,n){var t,r=A(e,"a","equal"),i=A(n,"b","equal");return t=St(r,i),r=t[0],i=t[1],Ge(r.shape,i.shape),j.runKernelFunc(function(a){return a.equal(r,i)},{$a:r,$b:i})}}),nR=W({equalStrict_:function(e,n){var t=A(e,"a","equalStrict"),r=A(n,"b","equalStrict");return et(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),rR=W({greater_:function(e,n){var t,r=A(e,"a","greater"),i=A(n,"b","greater");return t=St(r,i),r=t[0],i=t[1],Ge(r.shape,i.shape),j.runKernelFunc(function(a){return a.greater(r,i)},{a:r,b:i},null,"Greater")}}),Tw=W({greaterEqual_:function(e,n){var t,r=A(e,"a","greaterEqual"),i=A(n,"b","greaterEqual");return t=St(r,i),r=t[0],i=t[1],Ge(r.shape,i.shape),j.runKernelFunc(function(a,o){var s=a.greaterEqual(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return Ke(s)},b:function(){return Ke(u)}}},"GreaterEqual")}}),iR=W({greaterEqualStrict_:function(e,n){var t=A(e,"a","greaterEqualStrict"),r=A(n,"b","greaterEqualStrict");return et(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),aR=W({greaterStrict_:function(e,n){var t=A(e,"a","greaterStrict"),r=A(n,"b","greaterStrict");return et(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),oR=W({less_:function(e,n){var t,r=A(e,"a","less"),i=A(n,"b","less");return t=St(r,i),r=t[0],i=t[1],Ge(r.shape,i.shape),j.runKernelFunc(function(a){return a.less(r,i)},{a:r,b:i},null,"Less")}}),sR=W({lessEqual_:function(e,n){var t,r=A(e,"a","lessEqual"),i=A(n,"b","lessEqual");return t=St(r,i),r=t[0],i=t[1],Ge(r.shape,i.shape),j.runKernelFunc(function(a,o){var s=a.lessEqual(r,i);return o([r,i]),s},{a:r,b:i},null,"LessEqual")}}),uR=W({lessEqualStrict_:function(e,n){var t=A(e,"a","lessEqualStrict"),r=A(n,"b","lessEqualStrict");return et(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),lR=W({lessStrict_:function(e,n){var t=A(e,"a","lessStrict"),r=A(n,"b","lessStrict");return et(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),cR=W({notEqual_:function(e,n){var t,r=A(e,"a","notEqual"),i=A(n,"b","notEqual");return t=St(r,i),r=t[0],i=t[1],Ge(r.shape,i.shape),j.runKernelFunc(function(a){return a.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),fR=W({notEqualStrict_:function(e,n){var t=A(e,"a","notEqualStrict"),r=A(n,"b","notEqualStrict");return et(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function Xm(e,n){for(var t=[],r=e;r<n;++r)t.push(r);return t}function Km(e){for(var n=[],t=0;t<e.length;++t)for(var r=0;r<e[t].length;++r)n.push(e[t][r]);return n}var Y0=W({gather_:function(e,n,t){t===void 0&&(t=0);var r=A(e,"x","gather"),i=A(n,"indices","gather","int32");t=$t(t,r.shape)[0];var a=function(o,s,u){for(var l=o.shape[u],c=[],f=1,h=1,d=0;d<u;d++)c.push(o.shape[d]),f*=o.shape[d];for(d=0;d<s.rank;d++)c.push(s.shape[d]);for(d=u+1;d<o.rank;d++)c.push(o.shape[d]),h*=o.shape[d];return{batchSize:f,sliceSize:h,dimSize:l,outputShape:c}}(r,i,t);return j.runKernelFunc(function(o,s){var u=o.gather(r,i.flatten(),t);return s([i]),u},{x:r,indices:i},function(o,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,f=l.slice(0,t),h=f.length,d=l.slice(t,l.length).slice(1),v=d.length,p=Xm(0,h),g=Xm(h+1,h+1+v),m=Km([f,[c],d]),x=o.reshape(m),y=u.reshape([c]),w=Km([[h],p,g]),_=x.transpose(w),S=kw(_,y,r.shape[t]),E=M0(w);return S=S.transpose(E)},indices:function(){return u}}},"Gather",{axis:t}).reshape(a.outputShape)}}),kw=W({unsortedSegmentSum_:function(e,n,t){var r=A(e,"x","unsortedSegmentSum"),i=A(n,"segmentIds","unsortedSegmentSum","int32");return P(Rt(t),function(){return"numSegments must be of dtype int"}),j.runKernelFunc(function(a,o){var s=a.unsortedSegmentSum(r,i,t);return o([i]),s},{$x:r},function(a,o){var s=o[0];return{$x:function(){return function(u,l){for(var c=q0(l,Ke(l)),f=Y0(u,c),h=Tw(l,Ee(0,"int32")),d=f.rank-h.rank,v=0;v<d;++v)h=yr(h,v+1);h=Hf(h,Cs(f.shape,"bool"));var p=Ke(f);return Qa(h,f,p)}(a,s)}}})}}),hR=function(e,n,t){return Ae(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,v,p;return Re(this,function(g){switch(g.label){case 0:for(r=A(e,"tensor","boolMask"),i=A(n,"mask","boolMask","bool"),a=t??0,o=i.rank,s=r.shape,P(o>0,function(){return"mask cannot be scalar"}),et(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+o;l++)u*=s[l];return c=s.slice(0,a).concat([u],s.slice(a+o)),f=r.reshape(c),h=i.reshape([-1]),[4,Ew(h)];case 1:return d=g.sent(),v=d.squeeze([1]),p=Y0(f,v,a),e!==r&&r.dispose(),n!==i&&i.dispose(),v.dispose(),f.dispose(),h.dispose(),d.dispose(),[2,p]}})})};function Aw(e,n,t,r,i,a,o){a===void 0&&(a="NHWC"),P(e.length===n.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+n.rank+") must match"});var s=e,u=n,l=!1;n.rank===3&&(l=!0,u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,e[0],e[1],e[2]]),P(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),P(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),P(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var c=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];P(c===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+t.shape[2]+"."}),P(f===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+t.shape[3]+"."}),o!=null&&P(Rt(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var h=z0(a),d=oo(s,t.shape,r,1,i,o,!1,h),v=j.runKernelFunc(function(p,g){var m=p.conv2dDerInput(u,t,d);return g([t,u]),m},{dy4D:u,filter:t},function(p,g){var m=g[0],x=g[1];return{dy4D:function(){return Tr(p,m,r,i,a,1,o)},filter:function(){return Q0(p,x,m.shape,r,i,a,o)}}});return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function Zh(e){var n=function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}(e),t=n[0],r=n[1],i=n[2];return t===1&&r===1&&i===1}function Rw(e,n,t,r,i){P(e.length===n.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+n.rank+") must match"});var a=e,o=n,s=!1;n.rank===4&&(s=!0,o=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var u=a[4],l=o.shape[4];P(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),P(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),P(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),P(u===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+t.shape[3]+"."}),P(l===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+t.shape[4]+"."});var c=Jc(a,t.shape,r,1,i),f=j.runKernelFunc(function(h){return h.conv3dDerInput(o,t,c)},{dy5D:o});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var dR=W({conv1d_:function(e,n,t,r,i,a,o){i===void 0&&(i="NWC"),a===void 0&&(a=1);var s=A(e,"x","conv1d"),u=A(n,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),P(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),P(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),o!=null&&P(Rt(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),P(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),P(Kn(t,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+a+"'"}),P(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),d=Tr(h,f,[1,t],r,"NHWC",[1,a],o);return c?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Tr=W({conv2d_:function(e,n,t,r,i,a,o){i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]);var s=A(e,"x","conv2d"),u=A(n,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),P(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),o!=null&&P(Rt(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=i==="NHWC"?l.shape[3]:l.shape[1];P(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),P(Kn(t,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"});var h=z0(i),d=oo(l.shape,u.shape,t,a,r,o,!1,h),v=[u,l],p=j.runKernelFunc(function(g,m){var x=g.conv2d(l,u,d);return m([u,l]),x},{x:l,filter:u},function(g,m){var x=m,y=x[0],w=x[1];return P(xs(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return Fw(w.shape,g,y,t,r,i)},filter:function(){return Q0(w,g,y.shape,t,r,i)}}},"Conv2D",d,v);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),pR=W({conv3d_:function(e,n,t,r,i,a){i===void 0&&(i="NDHWC"),a===void 0&&(a=[1,1,1]);var o=A(e,"x","conv3d"),s=A(n,"filter","conv3d"),u=o,l=!1;o.rank===4&&(l=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),P(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),P(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),P(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),P(function(h,d){return Zh(h)||Zh(d)}(t,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"}),P(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=Jc(u.shape,s.shape,t,a,r),f=j.runKernelFunc(function(h,d){var v=h.conv3d(u,s,c);return d([u,s]),v},{x:u,$filter:s},function(h,d){P(Zh(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var v=d[0],p=d[1];return{x:function(){return Rw(v.shape,h,p,t,r)},$filter:function(){return function(g,m,x,y,w){var _=g;g.rank===4&&(_=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var S=m;S.rank===4&&(S=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3])),P(_.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_.shape+"."}),P(S.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."}),P(x.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+x+"."}),P(_.shape[4]===x[3],function(){return"Error in conv3dDerFilter: depth of input "+_.shape[4]+") must match input depth in filter ("+x[3]+"."}),P(S.shape[4]===x[4],function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+x[4]+")."});var E=Jc(_.shape,x,y,1,w);return j.runKernelFunc(function(b){return b.conv3dDerFilter(_,S,E)},{x5D:_,dy5D:S})}(v,h,p.shape,t,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Q0=W({conv2dDerFilter_:function(e,n,t,r,i,a,o){a===void 0&&(a="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=n;u.rank===3&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),P(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),P(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),P(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var l=a==="NHWC"?s.shape[3]:s.shape[1],c=a==="NHWC"?u.shape[3]:u.shape[1];P(l===t[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+t[2]+"."}),P(c===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+t[3]+")."}),o!=null&&P(Rt(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var f=z0(a),h=oo(s.shape,t,r,1,i,o,!1,f);return j.runKernelFunc(function(d){return d.conv2dDerFilter(s,u,h)},{x4D:s,dy4D:u})}}),Fw=W({conv2dDerInput_:Aw}),$f=W({depthwiseConv2d_:function(e,n,t,r,i,a,o){a===void 0&&(a=[1,1]);var s=A(e,"x","depthwiseConv2d"),u=A(n,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),P(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),P(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),P(Kn(t,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"}),o!=null&&P(Rt(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=oo(l.shape,u.shape,t,a,r,o,!0),h=[l,u],d=j.runKernelFunc(function(v,p){var g=v.depthwiseConv2D(l,u,f);return p([l,u]),g},{x:l,filter:u},function(v,p){P(xs(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var g=p[0],m=p[1];return{x:function(){return Iw(g.shape,v,m,f)},filter:function(){return Nw(g,v,m.shape,f)}}},"DepthwiseConv2dNative",f,h);return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Iw=W({depthwiseConv2dDerInput_:function(e,n,t,r){var i=n,a=!1;n.rank===3&&(a=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=j.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,t,r)},{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Nw=W({depthwiseConv2dDerFilter_:function(e,n,t,r){var i=e;e.rank===3&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=n;return a.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),j.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(i,a,r)},{x4D:i,dy4D:a})}}),J0=W({separableConv2d_:function(e,n,t,r,i,a,o){a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC");var s=A(e,"x","separableConv2d"),u=A(n,"depthwiseFilter","separableConv2d"),l=A(t,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),P(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),P(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),P(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),P(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=u.shape[2],d=u.shape[3];P(l.shape[2]===h*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+l.shape[2]+"."});var v=$f(c,u,r,i,o,a),p=Tr(v,l,1,"valid",o);return f?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),vR=W({conv2dTranspose_:function(e,n,t,r,i,a){return Aw(t,A(e,"x","conv2dTranspose"),A(n,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),mR=W({conv3dTranspose_:function(e,n,t,r,i){return Rw(t,A(e,"x","conv3dTranspose"),A(n,"filter","conv3dTranspose"),r,i)}}),jf=W({matMul_:function(e,n,t,r){var i;t===void 0&&(t=!1),r===void 0&&(r=!1);var a=A(e,"a","matMul"),o=A(n,"b","matMul");i=St(a,o),a=i[0],o=i[1];var s=t?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],l=t?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],f=a.shape.slice(0,-2),h=o.shape.slice(0,-2),d=Ne(f),v=Ne(h);P(a.rank>=2&&o.rank>=2&&a.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."}),P(Jt(f,h),function(){return"Error in matMul: outer dimensions ("+f+") and ("+h+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."}),P(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var p=a.shape.slice(0,-2).concat([l,c]),g=t?a.as3D(d,s,l):a.as3D(d,l,s),m=r?o.as3D(v,c,u):o.as3D(v,u,c),x={transposeA:t,transposeB:r};return j.runKernelFunc(function(y,w){var _=y.batchMatMul(g,m,t,r);return w([g,m]),_},{a:g,b:m},function(y,w){var _=w,S=_[0],E=_[1];return t||r?!t&&r?{a:function(){return y.matMul(E,!1,!1)},b:function(){return y.matMul(S,!0,!1)}}:t&&!r?{a:function(){return E.matMul(y,!1,!0)},b:function(){return S.matMul(y,!1,!1)}}:{a:function(){return E.matMul(y,!0,!0)},b:function(){return y.matMul(S,!0,!0)}}:{a:function(){return y.matMul(E,!1,!0)},b:function(){return S.matMul(y,!0,!1)}}},"BatchMatMul",x).reshape(p)}}),gR=W({dot_:function(e,n){var t=A(e,"t1","dot"),r=A(n,"t2","dot");P(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var i=t.rank===1?t.size:t.shape[1],a=r.rank===1?r.size:r.shape[0];return P(i===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),xR=W({outerProduct_:function(e,n){var t=A(e,"v1","outerProduct"),r=A(n,"v2","outerProduct");return P(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),nl=W({reverse_:function(e,n){var t=A(e,"x","reverse");if(t.rank===0)return t.clone();var r=$t(n,t.shape);return j.runKernelFunc(function(i){return i.reverse(t,r)},{$x:t},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(t)}}),yR=W({reverse1d_:function(e){var n=A(e,"x","reverse");return P(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),nl(n,0)}}),wR=W({reverse2d_:function(e,n){var t=A(e,"x","reverse");return P(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),nl(t,n)}}),_R=W({reverse3d_:function(e,n){var t=A(e,"x","reverse");return P(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),nl(t,n)}}),ER=W({reverse4d_:function(e,n){var t=A(e,"x","reverse");return P(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),nl(t,n)}});function Dw(e,n,t,r,i,a){var o=A(e,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),P(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),P(Kn(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),a!=null&&P(Rt(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=Ou(s.shape,n,t,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&Jt(l.inShape,l.outShape))return o.clone();var c=[s],f=j.runKernelFunc(function(h,d){var v=h.maxPool(s,l);return d([s,v]),v},{x:s},function(h,d){var v=d[0],p=d[1];return{x:function(){return function(g,m,x,y,w,_,S,E){var b=A(g,"dy","maxPoolBackprop"),C=A(m,"input","maxPoolBackprop"),T=A(x,"output","maxPoolBackprop");P(C.rank===b.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+b.rank+")"}),P(Kn(w,_),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),P(b.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+b.rank+"."}),P(C.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+C.rank+"."});var F=Ou(C.shape,y,w,_,S,E);return j.runKernelFunc(function(I){return I.maxPoolBackprop(b,C,T,F)},{$dy:b,$input:C})}(h,v,p,n,t,r,i)}}},"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Pw(e,n,t,r,i,a){var o=A(e,"x","avgPool","float32");P(Kn(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),P(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&P(Rt(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=Ou(s.shape,n,t,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&Jt(l.inShape,l.outShape))return o.clone();var c=j.runKernelFunc(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return function(h,d,v,p,g,m){var x=A(h,"dy","avgPoolBackprop"),y=A(d,"input","avgPoolBackprop");P(y.rank===x.rank,function(){return"Rank of input ("+y.rank+") does not match rank of dy ("+x.rank+")"}),P(Kn(p,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+p+" and dilations '"+g+"'"});var w=y,_=x,S=!1;y.rank===3&&(S=!0,w=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]),_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),P(_.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_.rank+"."}),P(w.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+w.rank+"."});var E=Ou(w.shape,v,p,g,m),b=j.runKernelFunc(function(C){return C.avgPoolBackprop(_,w,E)},{dy4D:_,input4D:w});return S?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}(f,s,n,t,r,i)}}},"AvgPool",l);return c=c.cast(o.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Gt=W({maxPool_:function(e,n,t,r,i){return Dw(e,n,t,1,r,i)}}),rl=W({avgPool_:function(e,n,t,r,i){return Pw(e,n,t,1,r,i)}}),SR=W({pool_:function(e,n,t,r,i,a){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");var o=A(e,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),P(Kn(a,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"});var l,c=Ou(s.shape,n,a,i,r),f=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(w,_){var S=w.map(function(C,T){return C+(C-1)*(_[T]-1)}).map(function(C){return C-1}),E=S.map(function(C){return Math.floor(C/2)}),b=S.map(function(C,T){return C-E[T]});return S.map(function(C,T){return[E[T],b[T]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var h=f[0]===1&&f[1]===1,d=function(w,_,S){var E=S.map(function(K){return K[0]}),b=S.map(function(K){return K[1]}),C=w.concat(E,b),T=_.map(function(K,G){return(K-C[G]%K)%K}),F=b.map(function(K,G){return K+T[G]}),I=_.map(function(K,G){return[E[G],F[G]]}),V=_.map(function(K,G){return[0,T[G]]});return[I,V]}([c.inHeight,c.inWidth],f,l),v=d[0],p=d[1],g=h?r:"valid",m=h?s:W2(s,f,v),x=(t==="avg"?function(){return Pw(m,n,a,1,g)}:function(){return Dw(m,n,a,1,g)})(),y=h?x:L2(x,f,p);return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),CR=W({maxPool3d_:function(e,n,t,r,i,a,o){a===void 0&&(a="NDHWC");var s=A(e,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),P(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),P(a==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),P(Kn(t,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),i!=null&&P(Rt(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Qc(u.shape,n,t,o,r,i,a),f=j.runKernelFunc(function(h,d){var v=h.maxPool3d(u,c);return d([u,v]),v},{x:u},function(h,d){var v=d[0],p=d[1];return{x:function(){return function(g,m,x,y,w,_,S,E){var b=A(g,"dy","maxPool3dBackprop"),C=A(m,"input","maxPool3dBackprop"),T=A(x,"output","maxPool3dBackprop"),F=b,I=C,V=T,K=!1;C.rank===4&&(K=!0,F=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),I=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),V=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),P(F.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+F.rank+"."}),P(I.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+I.rank+"."}),P(V.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+V.rank+"."}),_==null&&(_=[1,1,1]),P(Kn(w,_),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),E!=null&&P(Rt(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."});var G=Qc(I.shape,y,w,_,S,E),ie=j.runKernelFunc(function(re){return re.maxPool3dBackprop(F,I,V,G)},{dy5D:F,input5D:I});return K?ie.as4D(ie.shape[1],ie.shape[2],ie.shape[3],ie.shape[4]):ie}(h,v,p,n,t,o,r,i)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),bR=W({avgPool3d_:function(e,n,t,r,i,a,o){a===void 0&&(a="NDHWC");var s=A(e,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),P(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),P(a==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),P(Kn(t,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),i!=null&&P(Rt(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Qc(u.shape,n,t,o,r,i,a),f=j.runKernelFunc(function(h){return h.avgPool3d(u,c)},{x:u},function(h){return{x:function(){return function(d,v,p,g,m,x,y){var w=A(d,"dy","avgPool3dBackprop"),_=A(v,"input","avgPool3dBackprop"),S=w,E=_,b=!1;_.rank===4&&(b=!0,S=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]),E=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),P(S.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."}),P(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),m==null&&(m=[1,1,1]),P(Kn(g,m),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+m+"'"}),y!=null&&P(Rt(x),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+x+"."});var C=Qc(E.shape,p,g,m,x,y),T=j.runKernelFunc(function(F){return F.avgPool3dBackprop(S,E,C)},{dy5D:S,input5D:E});return b?T.as4D(T.shape[1],T.shape[2],T.shape[3],T.shape[4]):T}(h,u,n,t,o,r,i)}}});return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),li=W({slice_:function(e,n,t){var r,i,a=A(e,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(a.rank-1).fill(0)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(0)):n.slice()).forEach(function(u){P(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=t==null?new Array(a.rank).fill(-1):typeof t=="number"?[t].concat(new Array(a.rank-1).fill(-1)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(-1)):t).map(function(u,l){return u>=0?u:(P(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),a.shape[l]-r[l])}),Z4(a,r,i);var o=a.shape,s={begin:r,size:i};return j.runKernelFunc(function(u){return u.slice(a,r,i)},{x:a},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],o[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),TR=W({slice1d_:function(e,n,t){var r=A(e,"x","slice1d");return P(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),li(r,[n],[t])}}),kR=W({slice2d_:function(e,n,t){var r=A(e,"x","slice2d");return P(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),li(r,n,t)}}),Ow=W({slice3d_:function(e,n,t){var r=A(e,"x","slice3d");return P(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),li(r,n,t)}}),AR=W({slice4d_:function(e,n,t){var r=A(e,"x","slice4d");return P(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),li(r,n,t)}});function Mw(e,n,t,r,i){return n.rank<t.rank&&(n=n.reshape(Xn(n.shape,r))),e.rank<t.rank&&(e=e.reshape(Xn(e.shape,r))),{x:function(){var a=e.mul(t.equal(n).cast(e.dtype));return i==null?a:a.transpose(i)}}}var RR=W({all_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","all","bool"),i=$t(n,r.shape),a=i,o=hi(a,r.rank);o!=null&&(r=r.transpose(o),a=di(a.length,r.rank));var s=j.runKernelFunc(function(l){return l.all(r,a)},{$x:r});if(t){var u=Xn(s.shape,i);return s.reshape(u)}return s}}),FR=W({any_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","any","bool"),i=$t(n,r.shape),a=i,o=hi(a,r.rank);o!=null&&(r=r.transpose(o),a=di(a.length,r.rank));var s=j.runKernelFunc(function(l){return l.any(r,a)},{$x:r});if(t){var u=Xn(s.shape,i);return s.reshape(u)}return s}}),IR=W({argMax_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","argMax");n==null&&(n=0);var r=$t(n,t.shape),i=hi(r,t.rank);i!=null&&(t=t.transpose(i),r=di(r.length,t.rank));var a={axis:r[0]},o=[t];return j.runKernelFunc(function(s,u){var l=s.argMax(t,r[0]);return u([t]),l},{x:t},function(s,u){var l=u[0];return{x:function(){return Ke(l)}}},"ArgMax",a,o)}}),NR=W({argMin_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","argMin");n==null&&(n=0);var r=$t(n,t.shape),i=hi(r,t.rank);return i!=null&&(t=t.transpose(i),r=di(r.length,t.rank)),j.runKernelFunc(function(a,o){var s=a.argMin(t,r[0]);return o([t]),s},{$x:t},function(a,o){var s=o[0];return{$x:function(){return Ke(s)}}})}}),DR=W({logSumExp_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","logSumExp"),i=$t(n,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(t){var u=Xn(s.shape,i);return s.reshape(u)}return s}}),Gf=W({max_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","max"),i=r,a=$t(n,r.shape),o=a,s=hi(o,r.rank);s!=null&&(r=r.transpose(s),o=di(o.length,r.rank));var u=[r],l=j.runKernelFunc(function(f,h){var d=f.max(r,o);return h([i,d]),d},{x:r},function(f,h){return Mw(f,h[1],h[0],a,s)},"Max",{axes:o},u,[!0]);if(t){var c=Xn(l.shape,a);l=l.reshape(c)}return l}}),PR=W({mean_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","mean"),i=$t(n,r.shape),a=Ne(xn(r.shape,i)[1]);return zf(function(o){var s=Ee(a);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(n,t),gradFunc:function(u){var l=o.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(Cs(o.shape,"float32")).div(a)}}})(r)}}),OR=W({min_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","min"),i=r,a=$t(n,r.shape),o=a,s=hi(o,r.rank);s!=null&&(r=r.transpose(s),o=di(o.length,r.rank));var u=[r],l=j.runKernelFunc(function(f,h){var d=f.min(r,o);return h([i,d]),d},{x:r},function(f,h){return Mw(f,h[1],h[0],a,s)},"Min",{axes:o},u,[!0]);if(t){var c=Xn(l.shape,a);l=l.reshape(c)}return l}}),MR=W({moments_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=$t(n,(e=A(e,"x","moments")).shape),i=e.mean(r,t),a=i.shape;t||(a=Xn(i.shape,r));var o=e.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,t)}}}),Lw=W({sum_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=$t(n,r.shape);return zf(function(a){var o=hi(i,a.rank),s=i,u=a;o!=null&&(u=a.transpose(o),s=di(s.length,a.rank));var l=function(d){var v=a.shape.slice();return i.forEach(function(p){v[p]=1}),d.reshape(v).mul(Cs(a.shape,"float32"))},c={axes:s},f=j.runKernelFunc(function(d){return d.sum(u,s)},{x:u},function(d){return{x:function(){return l(d)}}},"Sum",c);if(t){var h=Xn(f.shape,i);f=f.reshape(h)}return{value:f,gradFunc:l}})(r)}}),LR=W({prod_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=$t(n,r.shape),a=hi(i,r.rank),o=i,s=r;a!=null&&(s=r.transpose(a),o=di(o.length,r.rank));var u=j.runKernelFunc(function(c){return c.prod(s,o)},{permutedX:s});if(t){var l=Xn(u.shape,i);u=u.reshape(l)}return u}}),Bw=W({elu_:function(e){var n=A(e,"x","elu");return j.runKernelFunc(function(t,r){var i=t.elu(n);return r([i]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){return j.runKernelFunc(function(a){return a.eluDer(t,i)},{dy:t,y:i})}}})}}),BR=W({leakyRelu_:function(e,n){n===void 0&&(n=.2);var t=A(e,"x","leakyRelu");return q0(Ee(n).mul(t),t)}}),Uw=W({prelu_:function(e,n){var t=A(e,"x","prelu"),r=A(n,"alpha","prelu");return j.runKernelFunc(function(i,a){var o=i.prelu(t,r);return a([t,r]),o},{x:t,alpha:r},function(i,a){var o=a[0],s=a[1],u=o.greater(0);return{x:function(){return Qa(u,i,i.mul(s))},alpha:function(){var l=Qa(u,Ke(i),i.mul(o)),c=Vt(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),wt=W({relu_:function(e){var n=A(e,"x","relu");return n.dtype==="bool"?n.toInt():j.runKernelFunc(function(t,r){var i=t.relu(n);return r([n]),i},{x:n},function(t,r){var i=r[0];return{x:function(){return t.mulStrict(i.step().toFloat())}}},"Relu")}}),Ww=W({relu6_:function(e){var n=A(e,"x","relu6");return n.dtype==="bool"?n.toInt():j.runKernelFunc(function(t,r){var i=t.relu6(n);return r([n]),i},{x:n},function(t,r){var i=r[0],a=i.lessEqual(6).mul(i.step());return{x:function(){return t.mulStrict(a.toFloat())}}},"Relu6")}}),UR=W({selu_:function(e){var n=A(e,"x","selu");return j.runKernelFunc(function(t,r){var i=t.selu(n);return r([n]),i},{$x:n},function(t,r){var i=r[0];return{$x:function(){var a=i.greater(Ee(0)),o=Ee(G0),s=Ee(X0),u=t.mul(s),l=t.mul(o).mul(i.toFloat().exp());return Qa(a,u,l)}}})}}),pa=W({transpose_:function(e,n){var t=A(e,"x","transpose");if(n==null&&(n=t.shape.map(function(i,a){return a}).reverse()),P(t.rank===n.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+n+"."}),n.forEach(function(i){P(i>=0&&i<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+n})}),t.rank<=1)return t.clone();var r={perm:n};return j.runKernelFunc(function(i){return i.transpose(t,n)},{x:t},function(i){var a=M0(n);return{x:function(){return i.transpose(a)}}},"Transpose",r)}}),WR=W({localResponseNormalization_:function(e,n,t,r,i){n===void 0&&(n=5),t===void 0&&(t=1),r===void 0&&(r=1),i===void 0&&(i=.5);var a=A(e,"x","localResponseNormalization");P(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),P(Rt(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var o=a,s=!1;a.rank===3&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=j.runKernelFunc(function(l,c){var f=l.localResponseNormalization4D(o,n,t,r,i);return c([o,f]),f},{x4D:o},function(l,c){var f=c[0],h=c[1];return{x4D:function(){return j.runKernelFunc(function(d){return d.LRNGrad(l,f,h,n,t,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),zw=W({norm_:function(e,n,t,r){n===void 0&&(n="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(Ee(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(e=A(e,"x","norm"),n,t),a=i.shape;if(r){var o=$t(t,e.shape);a=Xn(i.shape,o)}return i.reshape(a)}}),zR=W({basicLSTMCell_:function(e,n,t,r,i,a){var o=A(e,"forgetBias","basicLSTMCell"),s=A(n,"lstmKernel","basicLSTMCell"),u=A(t,"lstmBias","basicLSTMCell"),l=A(r,"data","basicLSTMCell"),c=A(i,"c","basicLSTMCell"),f=A(a,"h","basicLSTMCell"),h=l.concat(f,1).matMul(s).add(u),d=h.shape[0],v=h.shape[1]/4,p=[d,v],g=h.slice([0,0],p),m=h.slice([0,v],p),x=h.slice([0,2*v],p),y=h.slice([0,3*v],p),w=g.sigmoid().mulStrict(m.tanh()).addStrict(c.mulStrict(o.add(x).sigmoid())),_=w.tanh().mulStrict(y.sigmoid());return[w,_]}}),VR=W({multiRNNCell_:function(e,n,t,r){for(var i=A(n,"data","multiRNNCell"),a=jc(t,"c","multiRNNCell"),o=jc(r,"h","multiRNNCell"),s=i,u=[],l=0;l<e.length;l++){var c=e[l](s,a[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],h=[];for(l=0;l<u.length;l+=2)f.push(u[l]),h.push(u[l+1]);return[f,h]}}),HR=W({movingAverage_:function(e,n,t,r,i){i===void 0&&(i=!0);var a=A(e,"v","movingAverage"),o=A(n,"x","movingAverage"),s=A(t,"decay","movingAverage");WT(a,o),P(Jt(a.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=Ee(1),l=u.sub(s),c=o.sub(a).mul(l);if(i){P(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=A(r,"step","movingAverage");c=c.div(u.sub(tf(s,f)))}return a.add(c)}}),$R=W({stridedSlice_:function(e,n,t,r,i,a,o,s,u){if(i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(n.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var l=A(e,"x","stridedSlice"),c=km(s),f=l.shape.slice();c.forEach(function(g){n[g]=0,t[g]=1,f.splice(g,0,1)}),l=l.reshape(f);for(var h=0;h<l.rank;h++)n[h]=e3(i,n,r,l.shape,h),t[h]=t3(a,t,r,l.shape,h),r[h]=r[h]||1;var d=km(u);d.forEach(function(g){t[g]=n[g]+1,r[g]=1});var v=W0(n,t,r),p=v.filter(function(g,m){return d.indexOf(m)===-1});return r.every(function(g){return g===1})?li(l,n,v).reshape(p):j.runKernelFunc(function(g){return g.stridedSlice(l,n,t,r)},{$x:l}).reshape(p)}}),jR=W({topk_:function(e,n,t){n===void 0&&(n=1),t===void 0&&(t=!0);var r=A(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var a=j.runKernelFunc(function(o){return o.topk(r,n,t)},{$x:r});return{values:a[0],indices:a[1]}}}),GR=W({scatterND_:function(e,n,t){var r=A(e,"indices","scatterND","int32"),i=A(n,"updates","scatterND");return J4(i,r,t),j.runKernelFunc(function(a){return a.scatterND(r,i,t)},{indices:r,updates:i},null,"ScatterNd",{shape:t})}}),Z0=W({fft_:function(e){P(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var n=e.shape[e.shape.length-1],t=e.size/n,r=e.as2D(t,n);return j.runKernelFunc(function(i){return i.fft(r)},{input:e}).reshape(e.shape)}}),nf=W({ifft_:function(e){P(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var n=e.shape[e.shape.length-1],t=e.size/n,r=e.as2D(t,n);return j.runKernelFunc(function(i){return i.ifft(r)},{input:e}).reshape(e.shape)}}),ev=W({rfft_:function(e,n){P(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var t,r=e.shape[e.shape.length-1],i=e.size/r;if(n!=null&&n<r){var a=e.shape.map(function(m){return 0}),o=e.shape.map(function(m){return m});o[e.shape.length-1]=n,t=e.slice(a,o),r=n}else if(n!=null&&n>r){var s=e.shape.map(function(m){return m});s[e.shape.length-1]=n-r,t=e.concat(ct(s),e.shape.length-1),r=n}else t=e;var u=t.zerosLike(),l=rn(t,u).as2D(i,r),c=Z0(l),f=Math.floor(r/2)+1,h=wr(c),d=ni(c),v=h.split([f,r-f],h.shape.length-1),p=d.split([f,r-f],d.shape.length-1),g=t.shape.slice();return g[t.shape.length-1]=f,rn(v[0],p[0]).reshape(g)}}),Vw=W({irfft_:function(e){var n=e.shape[e.shape.length-1],t=e.size/n;if(n<=2){var r=e.as2D(t,n),i=nf(r);return wr(i)}var a=[t,2*(n-1)],o=wr(e).as2D(t,n),s=ni(e).as2D(t,n),u=o.slice([0,1],[t,n-2]).reverse(1),l=s.slice([0,1],[t,n-2]).reverse(1).mul(Ee(-1)),c=o.concat(u,1),f=s.concat(l,1);return r=rn(c,f).as2D(a[0],a[1]),i=nf(r),wr(i)}}),XR=Object.freeze({fft:Z0,ifft:nf,rfft:ev,irfft:Vw}),KR=W({sparseToDense_:function(e,n,t,r){r===void 0&&(r=0);var i=A(e,"sparseIndices","sparseToDense","int32"),a=A(n,"sparseValues","sparseToDense"),o=A(r,"defaultValue","sparseToDense",a.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var d=u.size;if(u.rank!==0&&(u.rank!==1||d!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,t,o),j.runKernelFunc(function(s){return s.sparseToDense(i,a,t,o)},{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),qR=W({gatherND_:function(e,n){var t=A(n,"indices","gatherND","int32"),r=A(e,"x","gatherND");return j.runKernelFunc(function(i){return i.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),YR=W({diag_:function(e){var n=A(e,"x","diag").flatten(),t=e.shape.concat(e.shape);return j.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(t)}}),QR=W({dropout_:function(e,n,t,r){var i=A(e,"x","dropout");if(P(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),P(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return e instanceof yt?i.clone():i;var a=function(u,l){if(l==null)return u.shape.slice();if(Jt(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?c.push(u.shape[f]):c.push(l[f]);return c}return l}(i,t),o=1-n,s=U2(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function Hw(e,n,t){for(var r=1-e%2,i=new Float32Array(e),a=0;a<e;++a){var o=2*Math.PI*a/(e+r-1);i[a]=n-t*Math.cos(o)}return Dt(i,"float32")}var tv=W({hannWindow_:function(e){return Hw(e,.5,.5)}}),$w=W({hammingWindow_:function(e){return Hw(e,.54,.46)}}),nv=W({frame_:function(e,n,t,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var a=0,o=[];a+n<=e.size;)o.push(li(e,a,n)),a+=t;if(r)for(;a<e.size;){var s=a+n-e.size,u=Wt([li(e,a,n-s),ui([s],i)]);o.push(u),a+=t}return o.length===0?la([],[0,n]):Wt(o).as2D(o.length,n)}}),jw=W({stft_:function(e,n,t,r,i){var a;i===void 0&&(i=tv),r==null&&(a=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=nv(e,n,t),s=Sn(o,i(n)),u=[],l=0;l<o.shape[0];l++)u.push(ev(s.slice([l,0],[1,n]),r));return Wt(u)}}),JR=Object.freeze({hannWindow:tv,hammingWindow:$w,frame:nv,stft:jw}),En,ZR=function(e,n,t){return t===void 0&&(t=1),Ae(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,v,p,g;return Re(this,function(m){switch(m.label){case 0:return r=A(e,"predictions","inTopK"),i=A(n,"targets","inTopK"),P(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),P(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),et(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],P(t>0&&t<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+t}),[4,r.data()];case 1:return o=m.sent(),[4,i.data()];case 2:for(s=m.sent(),u=[o.length/a,a],c=u[1],f=Nu("bool",l=u[0]),h=0;h<l;h++){for(d=h*c,v=o.subarray(d,d+c),p=[],g=0;g<v.length;g++)p.push({value:v[g],index:g});for(p.sort(function(x,y){return y.value-x.value}),f[h]=0,g=0;g<t;g++)if(p[g].index===s[h]){f[h]=1;break}}return e!==r&&r.dispose(),n!==i&&i.dispose(),[2,sn(f,i.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(En||(En={}));var eF=W({absoluteDifference_:function(e,n,t,r){r===void 0&&(r=En.SUM_BY_NONZERO_WEIGHTS);var i=A(e,"labels","absoluteDifference"),a=A(n,"predictions","absoluteDifference"),o=null;t!=null&&(o=A(t,"weights","absoluteDifference")),et(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return Mi(s,o,r)}}),Mi=W({computeWeightedLoss_:function(e,n,t){t===void 0&&(t=En.SUM_BY_NONZERO_WEIGHTS);var r=A(e,"losses","computeWeightedLoss"),i=null;n!=null&&(i=A(n,"weights","computeWeightedLoss"));var a=i==null?r:r.mul(i);if(t===En.NONE)return a;if(t===En.SUM)return a.sum();if(t===En.MEAN){if(i==null)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(Ee(o)):s}if(t===En.SUM_BY_NONZERO_WEIGHTS){if(i==null)return a.sum().div(Ee(r.size));var u=i.mul(Cs(r.shape)).notEqual(Ee(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+t)}}),tF=W({cosineDistance_:function(e,n,t,r,i){i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"labels","cosineDistance"),o=A(n,"predictions","cosineDistance"),s=null;r!=null&&(s=A(r,"weights","cosineDistance")),et(a.shape,o.shape,"Error in cosineDistance: ");var u=Ee(1).sub(a.mul(o).sum(t,!0));return Mi(u,s,i)}}),nF=W({hingeLoss_:function(e,n,t,r){r===void 0&&(r=En.SUM_BY_NONZERO_WEIGHTS);var i=A(e,"labels","hingeLoss"),a=A(n,"predictions","hingeLoss"),o=null;t!=null&&(o=A(t,"weights","hingeLoss")),et(i.shape,a.shape,"Error in hingeLoss: ");var s=Ee(1);i=Ee(2).mul(i).sub(s);var u=s.sub(i.mul(a)).relu();return Mi(u,o,r)}}),rF=W({huberLoss_:function(e,n,t,r,i){r===void 0&&(r=1),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"labels","huberLoss"),o=A(n,"predictions","huberLoss"),s=null;t!=null&&(s=A(t,"weights","huberLoss")),et(a.shape,o.shape,"Error in huberLoss: ");var u=Ee(r),l=o.sub(a).abs(),c=Cw(l,u),f=l.sub(c),h=Ee(.5).mul(c.square()).add(u.mul(f));return Mi(h,s,i)}}),iF=W({logLoss_:function(e,n,t,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"labels","logLoss"),o=A(n,"predictions","logLoss"),s=null;t!=null&&(s=A(t,"weights","logLoss")),et(a.shape,o.shape,"Error in logLoss: ");var u=Ee(1),l=Ee(r),c=a.mul(o.add(l).log()).neg().sub(u.sub(a).mul(u.sub(o).add(l).log()));return Mi(c,s,i)}}),aF=W({meanSquaredError_:function(e,n,t,r){r===void 0&&(r=En.SUM_BY_NONZERO_WEIGHTS);var i=A(e,"labels","meanSquaredError"),a=A(n,"predictions","meanSquaredError"),o=null;t!=null&&(o=A(t,"weights","meanSquaredError")),et(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return Mi(s,o,r)}}),oF=W({sigmoidCrossEntropy_:function(e,n,t,r,i){r===void 0&&(r=0),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"multiClassLabels","sigmoidCrossEntropy"),o=A(n,"logits","sigmoidCrossEntropy"),s=null;if(t!=null&&(s=A(t,"weights","sigmoidCrossEntropy")),et(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Ee(r),l=Ee(1),c=Ee(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var f=function(h,d){var v=A(h,"labels","sigmoidCrossEntropyWithLogits"),p=A(d,"logits","sigmoidCrossEntropyWithLogits");et(v.shape,p.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=p.relu(),m=p.mul(v),x=p.abs().neg().exp().log1p();return g.sub(m).add(x)}(a,o);return Mi(f,s,i)}}),sF=W({softmaxCrossEntropy_:function(e,n,t,r,i){r===void 0&&(r=0),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"onehotLabels","softmaxCrossEntropy"),o=A(n,"logits","softmaxCrossEntropy"),s=null;if(t!=null&&(s=A(t,"weights","softmaxCrossEntropy")),et(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Ee(r),l=Ee(1),c=Ee(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var f=function(h,d,v){if(v===void 0&&(v=-1),v===-1&&(v=d.rank-1),v!==d.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+d.rank+" and dim was "+v);return zf(function(p,g,m){var x=g.logSumExp([v],!0),y=g.toFloat().sub(x);return m([p,y]),{value:y.mul(p).neg().sum([v]),gradFunc:function(w,_){var S=_[0],E=_[1],b=Xn(w.shape,[v]);return[w.reshape(b).mul(S.toFloat().sub(E.exp())),w.reshape(b).mul(E.exp().sub(S.toFloat()))]}}})(h,d)}(a,o);return Mi(f,s,i)}}),uF=Object.freeze({get Reduction(){return En},absoluteDifference:eF,computeWeightedLoss:Mi,cosineDistance:tF,hingeLoss:nF,huberLoss:rF,logLoss:iF,meanSquaredError:aF,sigmoidCrossEntropy:oF,softmaxCrossEntropy:sF});function qm(e,n){return n===void 0&&(n=!1),j.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var t=e.shape[0],r=e.shape[1],i=B2(t),a=e.clone(),o=la([[1]],[1,1]),s=o.clone(),u=t>=r?r:t,l=function(f){var h,d=a,v=s,p=i;h=j.tidy(function(){var g=a.slice([f,f],[t-f,1]),m=g.norm(),x=a.slice([f,f],[1,1]),y=la([[-1]]).where(x.greater(0),la([[1]])),w=x.sub(y.mul(m)),_=g.div(w);s=_.shape[0]===1?o.clone():o.concat(_.slice([1,0],[_.shape[0]-1,_.shape[1]]),0);var S=y.matMul(w).div(m).neg(),E=a.slice([f,0],[t-f,r]),b=S.mul(s);if(f===0)a=E.sub(b.matMul(s.transpose().matMul(E)));else{var C=E.sub(b.matMul(s.transpose().matMul(E)));a=a.slice([0,0],[f,r]).concat(C,0)}var T=i.slice([0,f],[t,i.shape[1]-f]);if(f===0)i=T.sub(T.matMul(s).matMul(b.transpose()));else{var F=T.sub(T.matMul(s).matMul(b.transpose()));i=i.slice([0,0],[t,f]).concat(F,1)}return[s,a,i]}),s=h[0],a=h[1],i=h[2],jn([d,v,p])},c=0;c<u;++c)l(c);return!n&&t>r&&(i=i.slice([0,0],[t,r]),a=a.slice([0,0],[r,r])),[i,a]})}var lF=W({bandPart_:function(e,n,t){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=A(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(n<=o))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+o+").");if(!(t<=s))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+s+").");n<0&&(n=o),t<0&&(t=s);var u=Gc(0,o,1,"int32").reshape([-1,1]),l=Gc(0,s,1,"int32"),c=Ht(u,l),f=Hf(c.lessEqual(Ee(+n,"int32")),c.greaterEqual(Ee(-t,"int32"))),h=ct([o,s],r.dtype);return cr(zt(r.reshape([-1,o,s])).map(function(d){return Qa(f,d,h)})).reshape(i)}}),cF=W({gramSchmidt_:function(e){var n;if(Array.isArray(e)){n=!1,P(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=e[0].shape[0],r=function(u){P(e[u].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[u].shape[0]+" vs. "+t+")"})},i=1;i<e.length;++i)r(i)}else n=!0,e=B0(e,e.shape[0],0).map(function(u){return z2(u,[0])});P(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var a=[],o=e,s=function(u){a.push(j.tidy(function(){var l=o[u];if(u>0)for(var c=0;c<u;++c){var f=Lw(a[c].mulStrict(l)).mul(a[c]);l=l.sub(f)}return l.div(zw(l,"euclidean"))}))};for(i=0;i<e.length;++i)s(i);return n?cr(a,0):a}}),fF=W({qr_:function(e,n){if(n===void 0&&(n=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return qm(e,n);var t=e.shape.slice(0,e.shape.length-2).reduce(function(o,s){return o*s}),r=zt(e.reshape([t,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];return r.forEach(function(o){var s=qm(o,n),u=s[0],l=s[1];i.push(u),a.push(l)}),[cr(i,0).reshape(e.shape),cr(a,0).reshape(e.shape)]}}),hF=Object.freeze({bandPart:lF,gramSchmidt:cF,qr:fF});function Xf(e,n,t,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);var o=e.shape[0];return t=Math.min(t,o),P(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),P(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),P(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),P(n.rank===1,function(){return"scores must be a 1D tensor"}),P(n.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+n.shape[0]}),P(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var dF=W({resizeBilinear_:function(e,n,t){t===void 0&&(t=!1);var r=A(e,"images","resizeBilinear");P(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=n[0],s=n[1],u=j.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,o,s,t)},{x:i},function(l,c){return{x:function(){return j.runKernelFunc(function(f){return f.resizeBilinearBackprop(l,c[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:o,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),pF=W({resizeNearestNeighbor_:function(e,n,t){t===void 0&&(t=!1);var r=A(e,"images","resizeNearestNeighbor");P(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),P(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=n[0],s=n[1],u=j.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,o,s,t)},{batchImages:i},function(l,c){return{batchImages:function(){return j.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(l,c[0],t)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),vF=W({nonMaxSuppression_:function(e,n,t,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var a=A(e,"boxes","nonMaxSuppression"),o=A(n,"scores","nonMaxSuppression"),s=Xf(a,o,t,r,i);t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:t,iouThreshold:r,scoreThreshold:i};return j.runKernelFunc(function(l){return l.nonMaxSuppression(a,o,t,r,i)},{boxes:a,scores:o},null,"NonMaxSuppressionV3",u)}}),mF=function(e,n,t,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Ae(this,void 0,void 0,function(){var a,o,s,u,l,c,f;return Re(this,function(h){switch(h.label){case 0:return a=A(e,"boxes","nonMaxSuppressionAsync"),o=A(n,"scores","nonMaxSuppressionAsync"),s=Xf(a,o,t,r,i),t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],f=V0(l,c,t,r,i),a!==e&&a.dispose(),o!==n&&o.dispose(),[2,f]}})})},gF=W({nonMaxSuppressionWithScore_:function(e,n,t,r,i,a){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var o=A(e,"boxes","nonMaxSuppression"),s=A(n,"scores","nonMaxSuppression"),u=Xf(o,s,t,r,i,a),l={maxOutputSize:t=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},c=j.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),xF=function(e,n,t,r,i,a){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),Ae(this,void 0,void 0,function(){var o,s,u,l,c,f,h;return Re(this,function(d){switch(d.label){case 0:return o=A(e,"boxes","nonMaxSuppressionAsync"),s=A(n,"scores","nonMaxSuppressionAsync"),u=Xf(o,s,t,r,i,a),t=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=d.sent(),c=l[0],f=l[1],h=H0(c,f,t,r,i,a),o!==e&&o.dispose(),s!==n&&s.dispose(),[2,h]}})})},yF=W({cropAndResize_:function(e,n,t,r,i,a){var o=A(e,"image","cropAndResize"),s=A(n,"boxes","cropAndResize","float32"),u=A(t,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var l=s.shape[0];return P(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),P(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),P(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),P(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),P(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),P(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),j.runKernelFunc(function(c,f){return c.cropAndResize(o,s,u,r,i,a)},{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),rv=Object.freeze({resizeBilinear:dF,resizeNearestNeighbor:pF,nonMaxSuppression:vF,nonMaxSuppressionAsync:mF,nonMaxSuppressionWithScore:gF,nonMaxSuppressionWithScoreAsync:xF,cropAndResize:yF}),iv=function(e,n){return!(e>0)||n==="linear"},av=function(e,n,t){if(t==null||t==="linear")return e;if(t==="relu")return e.mul(n.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},ov=function(e,n){var t=n,r=Vt(e.shape,n.shape);return r.length>0&&(t=t.sum(r)),t.reshape(e.shape)},sv=function(e,n,t){if(n==="linear")return e;if(n==="relu")return wt(e);if(n==="elu")return Bw(e);if(n==="relu6")return Ww(e);if(n==="prelu")return Uw(e,t);throw new Error("Unknown fused activation "+n+".")},wF=W({fusedMatMul_:function(e){var n,t=e.a,r=e.b,i=e.transposeA,a=i!==void 0&&i,o=e.transposeB,s=o!==void 0&&o,u=e.bias,l=e.activation,c=l===void 0?"linear":l,f=e.preluActivationWeights;if(iv(j.state.gradientDepth,c)===!1){var h=jf(t,r,a,s);return u!=null&&(h=je(h,u)),sv(h,c,f)}var d=A(t,"a","fused matMul"),v=A(r,"b","fused matMul");n=St(d,v),d=n[0],v=n[1];var p=a?d.shape[d.rank-2]:d.shape[d.rank-1],g=s?v.shape[v.rank-1]:v.shape[v.rank-2],m=a?d.shape[d.rank-1]:d.shape[d.rank-2],x=s?v.shape[v.rank-2]:v.shape[v.rank-1],y=d.shape.slice(0,-2),w=v.shape.slice(0,-2),_=Ne(y),S=Ne(w);P(d.rank>=2&&v.rank>=2&&d.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+v.rank+"."}),P(Jt(y,w),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+w+") of Tensors with shapes "+d.shape+" and "+v.shape+" must match."}),P(p===g,function(){return"Error in fused matMul: inner shapes ("+p+") and ("+g+") of Tensors with shapes "+d.shape+" and "+v.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,b,C=d.shape.slice(0,-2).concat([m,x]),T=a?d.as3D(_,p,m):d.as3D(_,m,p),F=s?v.as3D(S,x,g):v.as3D(S,g,x);u!=null&&Ge(C,(E=St(E=A(u,"bias","fused matMul"),d)[0]).shape),f!=null&&(b=A(f,"prelu weights","fused matMul"));var I={a:T,b:F};u!=null&&(I.bias=E),f!=null&&(I.preluActivationWeights=b);var V=[T,F];return j.runKernelFunc(function(K,G){var ie=K.fusedBatchMatMul({a:T,b:F,transposeA:a,transposeB:s,bias:E,activation:c,preluActivationWeights:b});return G([T,F,ie]),ie},I,function(K,G){var ie=G[0],re=G[1],H=G[2],X=av(K,H,c),Q={};return u!=null&&(Q={bias:function(){return ov(E,X)}}),Object.assign(a||s?!a&&s?{a:function(){return X.matMul(re,!1,!1)},b:function(){return X.matMul(ie,!0,!1)}}:a&&!s?{a:function(){return re.matMul(X,!1,!0)},b:function(){return ie.matMul(X,!1,!1)}}:{a:function(){return re.matMul(X,!0,!0)},b:function(){return X.matMul(ie,!0,!0)}}:{a:function(){return X.matMul(re,!1,!0)},b:function(){return ie.matMul(X,!0,!1)}},Q)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},V,[!0]).reshape(C)}}),_F=W({fusedConv2d_:function(e){var n=e.x,t=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=a===void 0?"NHWC":a,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,h=f===void 0?"linear":f,d=e.preluActivationWeights;if(h=h||"linear",iv(j.state.gradientDepth,h)===!1){var v=Tr(n,t,r,i,o,u,l);return c!=null&&(v=je(v,c)),sv(v,h,d)}var p=A(n,"x","conv2d"),g=A(t,"filter","conv2d"),m=p,x=!1;p.rank===3&&(x=!0,m=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),P(m.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+m.rank+"."}),P(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),l!=null&&P(Rt(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),P(m.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+m.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),P(Kn(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),P(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var y,w,_=oo(m.shape,g.shape,r,u,i,l);c!=null&&(y=St(y=A(c,"bias","fused conv2d"),p)[0],Ge(_.outShape,y.shape)),d!=null&&(w=A(d,"prelu weights","fused conv2d"));var S={x:m,filter:g};c!=null&&(S.bias=y),d!=null&&(S.preluActivationWeights=w);var E=[g,m],b=j.runKernelFunc(function(C,T){var F=C.fusedConv2d({input:m,filter:g,convInfo:_,bias:y,activation:h,preluActivationWeights:w});return T([g,m,F]),F},S,function(C,T){var F=T,I=F[0],V=F[1],K=F[2],G=av(C,K,h);P(xs(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var ie={};return c!=null&&(ie={bias:function(){return ov(y,G)}}),Object.assign({x:function(){return Fw(V.shape,G,I,r,i)},filter:function(){return Q0(V,G,I.shape,r,i)}},ie)},"FusedConv2D",{convInfo:_,activation:h},E,[!0]);return x?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),EF=W({fusedDepthwiseConv2d_:function(e){var n=e.x,t=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=a===void 0?"NHWC":a,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,h=f===void 0?"linear":f,d=e.preluActivationWeights;if(iv(j.state.gradientDepth,h)===!1){var v=$f(n,t,r,i,o,u,l);return c!=null&&(v=je(v,c)),sv(v,h,d)}var p=A(n,"x","depthwiseConv2d"),g=A(t,"filter","depthwiseConv2d"),m=p,x=!1;p.rank===3&&(x=!0,m=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),P(m.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+m.rank+"."}),P(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),P(m.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+m.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),u==null&&(u=[1,1]),P(Kn(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&P(Rt(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var y,w,_=oo(m.shape,g.shape,r,u,i,l,!0);c!=null&&(y=St(y=A(c,"bias","fused conv2d"),p)[0],Ge(_.outShape,y.shape)),d!=null&&(w=A(d,"prelu weights","fused depthwiseConv2d"));var S={x:m,filter:g};c!=null&&(S.bias=y),d!=null&&(S.preluActivationWeights=w);var E=[g,m],b=j.runKernelFunc(function(C,T){var F=C.fusedDepthwiseConv2D({input:m,filter:g,convInfo:_,bias:y,activation:h,preluActivationWeights:w});return T([g,m,F]),F},S,function(C,T){P(xs(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var F=T[0],I=T[1],V=T[2],K=av(C,V,h),G={};return c!=null&&(G={bias:function(){return ov(y,K)}}),Object.assign({x:function(){return Iw(I.shape,K,F,_)},filter:function(){return Nw(I,K,F.shape,_)}},G)},"FusedDepthwiseConv2D",{convInfo:_,activation:h},E,[!0]);return x?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),SF=Object.freeze({matMul:wF,conv2d:_F,depthwiseConv2d:EF}),CF=Object.freeze({image:rv,linalg:hF,losses:uF,spectral:XR,fused:SF,signal:JR,square:iA,squaredDifference:pw,conv1d:dR,conv2d:Tr,conv3d:pR,depthwiseConv2d:$f,separableConv2d:J0,conv2dTranspose:vR,conv3dTranspose:mR,op:W,batchNormalization2d:PA,batchNormalization3d:OA,batchNormalization4d:MA,batchNormalization:LA,batchNorm:ww,batchNorm2d:BA,batchNorm3d:UA,batchNorm4d:WA,booleanMaskAsync:hR,complex:rn,real:wr,imag:ni,concat:Wt,concat1d:S4,concat2d:C4,concat3d:b4,concat4d:T4,split:B0,matMul:jf,dot:gR,outerProduct:xR,reverse:nl,reverse1d:yR,reverse2d:wR,reverse3d:_R,reverse4d:ER,maxPool:Gt,avgPool:rl,pool:SR,maxPool3d:CR,avgPool3d:bR,slice:li,slice1d:TR,slice2d:kR,slice3d:Ow,slice4d:AR,abs:aA,acos:oA,acosh:sA,asin:uA,asinh:lA,atan:cA,atanh:fA,ceil:hA,clipByValue:K0,cos:dA,cosh:pA,erf:vA,exp:bp,expm1:mA,floor:gA,log:xA,log1p:yA,logSigmoid:wA,neg:ef,reciprocal:_A,round:EA,rsqrt:vw,sigmoid:mw,sign:SA,isNaN:CA,isInf:bA,isFinite:TA,sin:kA,sinh:AA,softplus:RA,sqrt:FA,step:IA,tan:NA,tanh:DA,all:RR,any:FR,argMax:IR,argMin:NR,logSumExp:DR,max:Gf,mean:PR,min:OR,moments:MR,sum:Lw,prod:LR,equal:bw,equalStrict:nR,greater:rR,greaterEqual:Tw,greaterEqualStrict:iR,greaterStrict:aR,less:oR,lessEqual:sR,lessEqualStrict:uR,lessStrict:lR,notEqual:cR,notEqualStrict:fR,add:je,addN:HA,addStrict:$A,atan2:jA,div:Or,divNoNan:GA,divStrict:XA,floorDiv:Sw,maximum:q0,maximumStrict:KA,minimum:Cw,minimumStrict:qA,mod:YA,modStrict:QA,mul:Sn,mulStrict:JA,pow:tf,powStrict:ZA,squaredDifferenceStrict:eR,sub:Ht,subStrict:tR,elu:Bw,leakyRelu:BR,prelu:Uw,relu:wt,relu6:Ww,selu:UR,logicalAnd:Hf,logicalNot:zA,logicalOr:_w,logicalXor:VA,where:Qa,whereAsync:Ew,buffer:ze,print:O4,batchToSpaceND:L2,broadcastTo:M4,cast:L4,clone:B4,cumsum:U4,depthToSpace:W4,expandDims:yr,eye:B2,multinomial:z4,oneHot:_p,pad:ao,pad1d:V4,pad2d:H4,pad3d:$4,pad4d:j4,rand:G4,randomNormal:X4,randomGamma:K4,randomUniform:U2,reshape:Lr,spaceToBatchND:W2,squeeze:z2,stack:cr,tile:Qo,truncatedNormal:q4,unstack:zt,setdiff1dAsync:Y4,fill:ui,linspace:E4,ones:Cs,range:Gc,scalar:Ee,tensor:sn,tensor1d:Dt,tensor2d:la,tensor3d:L0,tensor4d:Un,tensor5d:y4,tensor6d:w4,variable:_4,zeros:ct,onesLike:M2,zerosLike:Ke,transpose:pa,softmax:Oi,logSoftmax:r3,localResponseNormalization:WR,norm:zw,gather:Y0,unsortedSegmentSum:kw,basicLSTMCell:zR,multiRNNCell:VR,movingAverage:HR,stridedSlice:$R,topk:jR,scatterND:GR,fft:Z0,ifft:nf,rfft:ev,irfft:Vw,sparseToDense:KR,gatherND:qR,diag:YR,dropout:QR,hannWindow:tv,hammingWindow:$w,frame:nv,stft:jw,inTopKAsync:ZR});function ue(e,n){Array.isArray(e)||(e=[e]),e.forEach(function(t){t!=null&&P(t.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function ed(e,n,t,r){if(t==="linear")return e.linear(n);if(t==="relu")return e.relu(n);if(t==="elu")return e.elu(n);if(t==="relu6")return e.relu6(n);if(t==="prelu")return e.prelu(n,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var bF=function(e){function n(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new K2(t,j),t}return $r(n,e),n.prototype.write=function(t,r,i){this.firstUse&&(this.firstUse=!1,oe().get("IS_NODE")&&$c(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:t,dtype:i}),a},n.prototype.move=function(t,r,i,a){this.data.set(t,{values:r,dtype:a})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(t){return Ae(this,void 0,void 0,function(){return Re(this,function(r){return[2,this.readSync(t)]})})},n.prototype.readSync=function(t){var r=this.data.get(t),i=r.dtype,a=r.complexTensors;return i==="complex64"?Cp(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(t).values},n.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),i=r;if(t.dtype==="string")try{i=r.map(function(a){return zc(a)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ze(t.shape,t.dtype,i)},n.prototype.makeOutput=function(t,r,i){var a=this.write(t,r,i);return j.makeTensorFromDataId(a,r,i,this)},n.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},n.prototype.time=function(t){return Ae(this,void 0,void 0,function(){var r;return Re(this,function(i){return r=Zr(),t(),[2,{kernelMs:Zr()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(t,r){var i=this.makeOutput(null,t.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:j.keep(t.clone()),imag:j.keep(r.clone())},i},n.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},n.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},n.prototype.slice=function(t,r,i){if(ue(t,"slice"),G2(t.shape,r,i)){var a=X2(r,t.strides),o=Ne(i);return sn(this.readSync(t.dataId).subarray(a,a+o),i,t.dtype)}for(var s=ze(i,t.dtype),u=this.bufferSync(t),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(f,h){return f+r[h]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},n.prototype.stridedSlice=function(t,r,i,a){ue(t,"stridedSlice");var o=W0(r,i,a);if(o.some(function(d){return d===0}))return sn([],o);for(var s=ze(o,t.dtype),u=this.bufferSync(t),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),f=new Array(c.length),h=0;h<f.length;h++)f[h]=c[h]*a[h]+r[h];s.set.apply(s,[u.get.apply(u,f)].concat(c))}return s.toTensor()},n.prototype.diag=function(t){for(var r=this.readSync(t.dataId),i=ze([t.size,t.size],t.dtype),a=i.values,o=0;o<r.length;o++)a[o*t.size+o]=r[o];return i.toTensor()},n.prototype.unstack=function(t,r){for(var i=t.shape[r],a=new Array(t.rank-1),o=0,s=0;s<t.rank;s++)s!==r&&(a[o++]=t.shape[s]);var u=new Array(t.rank).fill(0),l=t.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(t,u,l).reshape(a);return c},n.prototype.reverse=function(t,r){ue(t,"reverse");for(var i=ze(t.shape,t.dtype),a=this.bufferSync(t),o=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(f){return c[f]=t.shape[f]-1-c[f]}),i.set.apply(i,[a.get.apply(a,c)].concat(l))},s=0;s<i.size;s++)o(s);return i.toTensor()},n.prototype.concat=function(t,r){var i=this;if(t[0].dtype==="complex64"){var a=t.map(function(d){return wr(d)}),o=t.map(function(d){return ni(d)});return rn(this.concat(a,r),this.concat(o,r))}var s=t.map(function(d){var v=Ne(d.shape.slice(r));return d.as2D(-1,v)}),u=gs(s.map(function(d){return d.shape}),1),l=ze(u,t[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(d){l.set(i.readSync(d.dataId),c),c+=d.size})}else{var f=0;s.forEach(function(d){for(var v=i.readSync(d.dataId),p=0,g=0;g<d.shape[0];++g)for(var m=g*u[1]+f,x=0;x<d.shape[1];++x)l[m+x]=v[p++];f+=d.shape[1]})}var h=gs(t.map(function(d){return d.shape}),r);return sn(l,h,t[0].dtype)},n.prototype.neg=function(t){return ue(t,"neg"),this.multiply(Ee(-1),t)},n.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i+o,imag:a+s}}):this.broadcastedBinaryOp(t,r,on(t.dtype,r.dtype),function(i,a){return i+a})},n.prototype.addN=function(t){var r=this;ue(t,"addN");for(var i=t.map(function(c){return r.readSync(c.dataId)}),a=ze(t[0].shape,t[0].dtype),o=a.values,s=0;s<t.length;s++)for(var u=i[s],l=0;l<o.length;l++)o[l]+=u[l];return a.toTensor()},n.prototype.softmax=function(t,r){var i=$t([r],t.shape),a=this.max(t,i),o=Xn(a.shape,i),s=this.subtract(t,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},n.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i-o,imag:a-s}}):this.broadcastedBinaryOp(t,r,on(t.dtype,r.dtype),function(i,a){return i-a})},n.prototype.pow=function(t,r){return ue([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.pow(i,a)})},n.prototype.batchMatMul=function(t,r,i,a){ue([t,r],"matMul");for(var o=i?t.shape[1]:t.shape[2],s=i?t.shape[2]:t.shape[1],u=a?r.shape[1]:r.shape[2],l=t.shape[0],c=this.readSync(t.dataId),f=this.readSync(r.dataId),h=i?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],d=h[0],v=h[1],p=h[2],g=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],m=g[0],x=g[1],y=g[2],w=s*u,_=ze([l,s,u],t.dtype),S=_.values,E=this.blockSize,b=0;b<l;b++)for(var C=0;C<s;C+=E)for(var T=0;T<u;T+=E)for(var F=0;F<o;F+=E)for(var I=Math.min(C+E,s),V=Math.min(T+E,u),K=Math.min(F+E,o),G=C;G<I;G++)for(var ie=T;ie<V;ie++){for(var re=0,H=F;H<K;H++)re+=c[b*d+G*v+H*p]*f[H*m+ie*x+b*y];S[b*w+(G*u+ie)]+=re}return _.toTensor()},n.prototype.fusedBatchMatMul=function(t){var r=t.a,i=t.b,a=t.transposeA,o=t.transposeB,s=t.bias,u=t.activation,l=t.preluActivationWeights,c=this.batchMatMul(r,i,a,o);return s&&(c=this.add(c,s)),u&&(c=ed(this,c,u,l)),c},n.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i*o-a*s,imag:i*s+a*o}}):this.broadcastedBinaryOp(t,r,on(t.dtype,r.dtype),function(i,a){return i*a})},n.prototype.realDivide=function(t,r){return ue([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(i,a){return i/a})},n.prototype.floorDiv=function(t,r){return ue([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(i,a){return Math.floor(i/a)})},n.prototype.sum=function(t,r){ue(t,"sum"),er("sum",r,t.rank);for(var i=xn(t.shape,r),a=i[0],o=i[1],s=ct(a,on(t.dtype,"int32")),u=Ne(o),l=this.readSync(s.dataId),c=this.readSync(t.dataId),f=0;f<l.length;++f){for(var h=f*u,d=0,v=0;v<u;++v)d+=c[h+v];l[f]=d}return s},n.prototype.prod=function(t,r){ue(t,"sum");for(var i=xn(t.shape,r),a=i[0],o=i[1],s=ct(a,on(t.dtype,"int32")),u=Ne(o),l=this.readSync(s.dataId),c=this.readSync(t.dataId),f=0;f<l.length;++f){for(var h=f*u,d=1,v=0;v<u;++v)d*=c[h+v];l[f]=d}return s},n.prototype.unsortedSegmentSum=function(t,r,i){ue(t,"unsortedSegmentSum");for(var a=[],o=t.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=Ee(s,"int32"),l=bw(u,r).asType("float32").mul(t).sum(0);a.push(l)}return cr(a)},n.prototype.argMin=function(t,r){ue(t,"argMin");var i=[r];er("argMin",i,t.rank);for(var a=xn(t.shape,i),o=a[0],s=a[1],u=ct(o,"int32"),l=Ne(s),c=this.readSync(u.dataId),f=this.readSync(t.dataId),h=0;h<c.length;++h){for(var d=h*l,v=f[d],p=0,g=0;g<l;++g){var m=f[d+g];m<v&&(v=m,p=g)}c[h]=p}return u},n.prototype.argMax=function(t,r){ue(t,"argMax");var i=[r];er("argMax",i,t.rank);for(var a=xn(t.shape,i),o=a[0],s=a[1],u=ct(o,"int32"),l=Ne(s),c=this.readSync(u.dataId),f=this.readSync(t.dataId),h=0;h<c.length;++h){for(var d=h*l,v=f[d],p=0,g=0;g<l;++g){var m=f[d+g];m>v&&(v=m,p=g)}c[h]=p}return u},n.prototype.cumsum=function(t,r,i,a){if(ue(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var o=on(t.dtype,"int32"),s=ct(t.shape,o),u=this.readSync(s.dataId),l=this.readSync(t.dataId),c=t.shape[t.rank-1],f=a?function(g,m){return g+c-m-1}:function(g,m){return g+m},h=0;h<l.length;h+=c)for(var d=0;d<c;d++){var v=f(h,d);if(d===0)u[v]=i?0:l[v];else{var p=f(h,d-1);u[v]=i?l[p]+u[p]:l[v]+u[p]}}return s},n.prototype.equal=function(t,r){return ue([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i===a?1:0})},n.prototype.notEqual=function(t,r){return ue([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i!==a?1:0})},n.prototype.less=function(t,r){return ue([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i<a?1:0})},n.prototype.lessEqual=function(t,r){return ue([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i<=a?1:0})},n.prototype.greater=function(t,r){return ue([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i>a?1:0})},n.prototype.greaterEqual=function(t,r){return ue([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i>=a?1:0})},n.prototype.logicalNot=function(t){ue(t,"logicalNot");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r[a]?0:1;return this.makeOutput(i,t.shape,"bool")},n.prototype.logicalAnd=function(t,r){return ue([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i&&a})},n.prototype.logicalOr=function(t,r){return ue([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(i,a){return i||a})},n.prototype.select=function(t,r,i){ue([t,r,i],"select");for(var a=this.readSync(t.dataId),o=this.readSync(r.dataId),s=this.readSync(i.dataId),u=ct(r.shape,on(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,f=t.rank===0||t.rank>1||r.rank===1?1:Ne(r.shape.slice(1)),h=0;h<a.length;h++)for(var d=0;d<f;d++)a[h]===1?l[c++]=o[h]:l[c++]=s[h];return u},n.prototype.where=function(t){ue([t],"where");var r=this.readSync(t.dataId);return $0(t.shape,r)},n.prototype.topk=function(t,r,i){return ue(t,"topk"),nw(this.readSync(t.dataId),t.shape,t.dtype,r)},n.prototype.min=function(t,r){ue(t,"min"),er("min",r,t.rank);for(var i=xn(t.shape,r),a=i[0],o=i[1],s=ct(a,t.dtype),u=Ne(o),l=this.readSync(s.dataId),c=this.readSync(t.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];p<d&&(d=p)}l[f]=d}return s},n.prototype.minimum=function(t,r){return ue([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.min(i,a)})},n.prototype.mod=function(t,r){return ue([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){var o=i%a;return i<0&&a<0||i>=0&&a>=0?o:(o+a)%a})},n.prototype.max=function(t,r){ue(t,"max"),er("max",r,t.rank);for(var i=xn(t.shape,r),a=i[0],o=i[1],s=ct(a,t.dtype),u=Ne(o),l=this.readSync(s.dataId),c=this.readSync(t.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];p>d&&(d=p)}l[f]=d}return s},n.prototype.maximum=function(t,r){return ue([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.max(i,a)})},n.prototype.all=function(t,r){ue(t,"all"),er("all",r,t.rank);for(var i=xn(t.shape,r),a=i[0],o=i[1],s=ct(a,t.dtype),u=Ne(o),l=this.readSync(s.dataId),c=this.readSync(t.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];d=d&&p}l[f]=d}return s},n.prototype.any=function(t,r){ue(t,"any"),er("any",r,t.rank);for(var i=xn(t.shape,r),a=i[0],o=i[1],s=ct(a,t.dtype),u=Ne(o),l=this.readSync(s.dataId),c=this.readSync(t.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];d=d||p}l[f]=d}return s},n.prototype.squaredDifference=function(t,r){return ue([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){var o=i-a;return o*o})},n.prototype.ceil=function(t){ue(t,"ceil");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.ceil(r[a]);return this.makeOutput(i,t.shape,"float32")},n.prototype.floor=function(t){ue(t,"floor");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.floor(r[a]);return this.makeOutput(i,t.shape,"float32")},n.prototype.sign=function(t){ue(t,"x");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?i[a]=-1:r[a]>0?i[a]=1:i[a]=0;return this.makeOutput(i,t.shape,"float32")},n.prototype.isNaN=function(t){ue(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(i[a]=1);return this.makeOutput(i,t.shape,"bool")},n.prototype.isInf=function(t){ue(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(i[a]=1);return this.makeOutput(i,t.shape,"bool")},n.prototype.isFinite=function(t){ue(t,"x");for(var r=this.readSync(t.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(i[a]=1);return this.makeOutput(i,t.shape,"bool")},n.prototype.round=function(t){ue(t,"round");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=Math.floor(r[a]);r[a]-o<.5?i[a]=Math.floor(r[a]):r[a]-o>.5?i[a]=Math.ceil(r[a]):i[a]=o%2==0?o:o+1}return this.makeOutput(i,t.shape,"float32")},n.prototype.exp=function(t){ue(t,"exp");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.exp(r[a]);return this.makeOutput(i,t.shape,"float32")},n.prototype.expm1=function(t){ue(t,"expm1");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.expm1(r[a]);return this.makeOutput(i,t.shape,"float32")},n.prototype.log=function(t){ue(t,"log");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log(o)}return this.makeOutput(i,t.shape,"float32")},n.prototype.log1p=function(t){ue(t,"log1p");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log1p(o)}return this.makeOutput(i,t.shape,"float32")},n.prototype.sqrt=function(t){ue(t,"sqrt");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.sqrt(o)}return this.makeOutput(i,t.shape,"float32")},n.prototype.rsqrt=function(t){ue(t,"rsqrt");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=1/Math.sqrt(o)}return this.makeOutput(i,t.shape,"float32")},n.prototype.reciprocal=function(t){ue(t,"reciprocal");for(var r=this.readSync(t.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=1/r[a];return this.makeOutput(i,t.shape,"float32")},n.prototype.linear=function(t){return t},n.prototype.relu=function(t){ue(t,"relu");for(var r=ct(t.shape,t.dtype),i=this.readSync(r.dataId),a=this.readSync(t.dataId),o=0;o<a.length;++o)i[o]=Math.max(0,a[o]);return r},n.prototype.relu6=function(t){ue(t,"relu");for(var r=ct(t.shape,t.dtype),i=this.readSync(r.dataId),a=this.readSync(t.dataId),o=0;o<a.length;++o)i[o]=Math.min(Math.max(0,a[o]),6);return r},n.prototype.prelu=function(t,r){return ue([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return i<0?a*i:i})},n.prototype.elu=function(t){ue(t,"elu");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,t.shape,"float32")},n.prototype.eluDer=function(t,r){ue([t,r],"eluDer");for(var i=new Float32Array(r.size),a=this.readSync(r.dataId),o=this.readSync(t.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=1?o[s]:o[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},n.prototype.selu=function(t){ue(t,"selu");for(var r=G0,i=X0,a=new Float32Array(t.size),o=this.readSync(t.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(a,t.shape,"float32")},n.prototype.clip=function(t,r,i){ue(t,"clip");for(var a=new Float32Array(t.size),o=this.readSync(t.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>i?i:u<r?r:u}return this.makeOutput(a,t.shape,"float32")},n.prototype.abs=function(t){for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.abs(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<t.size;++a){var o=i[2*a],s=i[2*a+1];r[a]=Math.hypot(o,s)}return this.makeOutput(r,t.shape,"float32")},n.prototype.int=function(t){ue(t,"int");for(var r=new Int32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=i[a];return this.makeOutput(r,t.shape,"int32")},n.prototype.sigmoid=function(t){ue(t,"sigmoid");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=1/(1+Math.exp(-i[a]));return this.makeOutput(r,t.shape,"float32")},n.prototype.softplus=function(t){ue(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o){var s=a[o]>-r,u=a[o]<r,l=Math.exp(a[o]),c=void 0;c=u?l:s?a[o]:Math.log(1+l),i[o]=c}return this.makeOutput(i,t.shape,"float32")},n.prototype.sin=function(t){ue(t,"sin");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.sin(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.cos=function(t){ue(t,"cos");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.cos(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.tan=function(t){ue(t,"tan");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.tan(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.asin=function(t){ue(t,"asin");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.asin(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.acos=function(t){ue(t,"acos");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.acos(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atan=function(t){ue(t,"atan");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.atan(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atan2=function(t,r){return ue([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(i,a){return Math.atan2(i,a)})},n.prototype.sinh=function(t){ue(t,"sinh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.sinh(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.cosh=function(t){ue(t,"cosh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.cosh(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.tanh=function(t){ue(t,"tanh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=TT(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.asinh=function(t){ue(t,"asinh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.asinh(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.acosh=function(t){ue(t,"acosh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.acosh(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atanh=function(t){ue(t,"atanh");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a)r[a]=Math.atanh(i[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.erf=function(t){ue(t,"erf");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),a=0;a<i.length;++a){var o=Math.sign(i[a]),s=Math.abs(i[a]),u=1/(1+.3275911*s);r[a]=o*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,t.shape,"float32")},n.prototype.step=function(t,r){r===void 0&&(r=0),ue(t,"step");for(var i=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o){var s=a[o];isNaN(s)?i[o]=NaN:i[o]=s>0?1:r}return this.makeOutput(i,t.shape,"float32")},n.prototype.fusedConv2d=function(t){var r=t.input,i=t.filter,a=t.convInfo,o=t.bias,s=t.activation,u=t.preluActivationWeights,l=this.conv2d(r,i,a);return o&&(l=this.add(l,o)),s&&(l=ed(this,l,s,u)),l},n.prototype.conv2d=function(t,r,i){ue([t,r],"conv2d");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.dataFormat==="channelsLast",h=ze(i.outShape,t.dtype),d=t.strides[0],v=f?t.strides[1]:t.strides[2],p=f?t.strides[2]:1,g=f?1:t.strides[1],m=h.strides[0],x=f?h.strides[1]:h.strides[2],y=f?h.strides[2]:1,w=f?1:h.strides[1],_=this.readSync(t.dataId),S=this.readSync(r.dataId),E=h.values,b=0;b<i.batchSize;++b)for(var C=b*d,T=b*m,F=0;F<i.outHeight;++F)for(var I=T+F*x,V=F*i.strideHeight-c,K=0;K<a;K++){var G=V+K*s;if(!(G<0||G>=i.inHeight))for(var ie=K*r.strides[0],re=C+G*v,H=0;H<i.outWidth;++H)for(var X=I+H*y,Q=H*i.strideWidth-l,fe=0;fe<o;fe++){var D=Q+fe*u;if(!(D<0||D>=i.inWidth))for(var z=re+D*p,U=ie+fe*r.strides[1],B=0;B<i.inChannels;++B){for(var J=_[z+B*g],he=0;he<i.outChannels;++he)E[X+he*w]+=J*S[U+he];U+=i.outChannels}}}return h.toTensor()},n.prototype.conv3d=function(t,r,i){for(var a=i.filterDepth,o=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,f=i.padInfo.front,h=i.padInfo.left,d=i.padInfo.top,v=ze(i.outShape,t.dtype),p=this.readSync(t.dataId),g=this.readSync(r.dataId),m=v.values,x=0;x<i.batchSize;++x)for(var y=x*t.strides[0],w=x*v.strides[0],_=0;_<i.outDepth;++_)for(var S=w+_*v.strides[1],E=_*i.strideDepth-f,b=0;b<a;b++){var C=E+b*u;if(!(C<0||C>=i.inDepth))for(var T=b*r.strides[0],F=y+C*t.strides[1],I=0;I<i.outHeight;++I)for(var V=S+I*v.strides[2],K=I*i.strideHeight-d,G=0;G<o;G++){var ie=K+G*l;if(!(ie<0||ie>=i.inHeight))for(var re=T+G*r.strides[1],H=F+ie*t.strides[2],X=0;X<i.outWidth;++X)for(var Q=V+X*i.outChannels,fe=X*i.strideWidth-h,D=0;D<s;D++){var z=fe+D*c;if(!(z<0||z>=i.inWidth))for(var U=re+D*r.strides[2],B=H+z*i.inChannels,J=U,he=0;he<i.inChannels;++he){for(var ge=p[B+he],de=0;de<i.outChannels;++de)m[Q+de]+=ge*g[J+de];J+=i.outChannels}}}}return v.toTensor()},n.prototype.conv2dDerInput=function(t,r,i){ue([t,r],"conv2dDerInput");for(var a=ze(i.inShape,"float32"),o=a.values,s=this.readSync(t.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],f=l[1],h=l[2],d=i.batchSize,v=i.filterHeight,p=i.filterWidth,g=i.inChannels,m=i.inHeight,x=i.inWidth,y=i.outChannels,w=i.outHeight,_=i.outWidth,S=i.strideHeight,E=i.strideWidth,b=i.dataFormat,C=v-1-i.padInfo.top,T=p-1-i.padInfo.left,F=b==="channelsLast",I=a.strides[0],V=F?a.strides[1]:a.strides[2],K=F?a.strides[2]:1,G=F?1:a.strides[1],ie=t.strides[0],re=F?t.strides[1]:t.strides[2],H=F?t.strides[2]:1,X=F?1:t.strides[1],Q=0;Q<d;++Q)for(var fe=0;fe<g;++fe)for(var D=0;D<m;++D)for(var z=D-C,U=Math.max(0,Math.ceil(z/S)),B=Math.min(w,(v+z)/S),J=0;J<x;++J){for(var he=J-T,ge=Math.max(0,Math.ceil(he/E)),de=Math.min(_,(p+he)/E),pe=0,Fe=U;Fe<B;++Fe)for(var Ie=Fe*S-z,Le=ge;Le<de;++Le)for(var Me=ie*Q+re*Fe+H*Le,qe=c*(v-1-Ie)+f*(p-1-(Le*E-he))+h*fe,Ue=0;Ue<y;++Ue)pe+=s[Me+X*Ue]*u[qe+Ue];o[I*Q+V*D+K*J+G*fe]=pe}return a.toTensor()},n.prototype.conv3dDerInput=function(t,r,i){for(var a=ze(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=s[3],h=this.readSync(t.dataId),d=t.strides,v=d[0],p=d[1],g=d[2],m=d[3],x=this.readSync(r.dataId),y=r.strides,w=y[0],_=y[1],S=y[2],E=y[3],b=i.batchSize,C=i.filterDepth,T=i.filterHeight,F=i.filterWidth,I=i.inChannels,V=i.inDepth,K=i.inHeight,G=i.inWidth,ie=i.outChannels,re=i.outDepth,H=i.outHeight,X=i.outWidth,Q=i.strideDepth,fe=i.strideHeight,D=i.strideWidth,z=C-1-i.padInfo.front,U=T-1-i.padInfo.top,B=F-1-i.padInfo.left,J=0;J<b;++J)for(var he=0;he<I;++he)for(var ge=0;ge<V;++ge)for(var de=ge-z,pe=Math.max(0,Math.ceil(de/Q)),Fe=Math.min(re,(C+de)/Q),Ie=0;Ie<K;++Ie)for(var Le=Ie-U,Me=Math.max(0,Math.ceil(Le/fe)),qe=Math.min(H,(T+Le)/fe),Ue=0;Ue<G;++Ue){for(var Se=Ue-B,pt=Math.max(0,Math.ceil(Se/D)),vt=Math.min(X,(F+Se)/D),Mn=0,pn=pe;pn<Fe;++pn)for(var Ar=pn*Q-de,Qn=Me;Qn<qe;++Qn)for(var en=Qn*fe-Le,Ln=pt;Ln<vt;++Ln)for(var ka=v*J+p*pn+g*Qn+m*Ln,Gr=w*(C-1-Ar)+_*(T-1-en)+S*(F-1-(Ln*D-Se))+E*he,jt=0;jt<ie;++jt)Mn+=h[ka+jt]*x[Gr+jt];o[u*J+l*ge+c*Ie+f*Ue+he]=Mn}return a.toTensor()},n.prototype.conv2dDerFilter=function(t,r,i){ue([t,r],"conv2dDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=ze(i.filterShape,"float32"),f=i.padInfo.left,h=i.padInfo.top,d=this.bufferSync(t),v=this.bufferSync(r),p=0;p<s;++p)for(var g=Math.max(0,Math.ceil((h-p)/a)),m=Math.min(i.outHeight,(i.inHeight+h-p)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((f-x)/o)),w=Math.min(i.outWidth,(i.inWidth+f-x)/o),_=0;_<i.inChannels;++_)for(var S=0;S<i.outChannels;++S){for(var E=0,b=0;b<i.batchSize;++b)for(var C=g;C<m;++C)for(var T=p+C*a-h,F=y;F<w;++F){var I=x+F*o-f;E+=l?d.get(b,T,I,_)*v.get(b,C,F,S):d.get(b,_,T,I)*v.get(b,S,C,F)}c.set(E,p,x,_,S)}return c.toTensor()},n.prototype.conv3dDerFilter=function(t,r,i){for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=ze(i.filterShape,"float32"),h=f.values,d=f.strides,v=d[0],p=d[1],g=d[2],m=d[3],x=this.readSync(r.dataId),y=r.strides,w=y[0],_=y[1],S=y[2],E=y[3],b=this.readSync(t.dataId),C=t.strides,T=C[0],F=C[1],I=C[2],V=C[3],K=i.padInfo.front,G=i.padInfo.left,ie=i.padInfo.top,re=0;re<u;++re)for(var H=Math.max(0,Math.ceil((K-re)/a)),X=Math.min(i.outDepth,(i.inDepth+K-re)/a),Q=re*v,fe=0;fe<l;++fe)for(var D=Math.max(0,Math.ceil((ie-fe)/o)),z=Math.min(i.outHeight,(i.inHeight+ie-fe)/o),U=fe*p+Q,B=0;B<c;++B)for(var J=Math.max(0,Math.ceil((G-B)/s)),he=Math.min(i.outWidth,(i.inWidth+G-B)/s),ge=B*g+U,de=0;de<i.inChannels;++de)for(var pe=de*m+ge,Fe=0;Fe<i.outChannels;++Fe){for(var Ie=0,Le=0;Le<i.batchSize;++Le)for(var Me=Le*T,qe=Le*w,Ue=H;Ue<X;++Ue)for(var Se=(re+Ue*a-K)*F+Me,pt=Ue*_+qe,vt=D;vt<z;++vt)for(var Mn=(fe+vt*o-ie)*I+Se,pn=vt*S+pt,Ar=J;Ar<he;++Ar){var Qn=Ar*E+pn;Ie+=b[(B+Ar*s-G)*V+Mn+de]*x[Qn+Fe]}h[pe+Fe]=Ie}return f.toTensor()},n.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,i=t.filter,a=t.convInfo,o=t.bias,s=t.activation,u=t.preluActivationWeights,l=this.depthwiseConv2D(r,i,a);return o&&(l=this.add(l,o)),s&&(l=ed(this,l,s,u)),l},n.prototype.depthwiseConv2D=function(t,r,i){ue([t,r],"depthwiseConv2D");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.outChannels/i.inChannels,h=ze(i.outShape,t.dtype),d=this.readSync(t.dataId),v=this.readSync(r.dataId),p=h.values,g=0;g<i.batchSize;++g)for(var m=g*t.strides[0],x=g*h.strides[0],y=0;y<i.outHeight;++y)for(var w=x+y*h.strides[1],_=y*i.strideHeight-l,S=0;S<a;++S){var E=_+S*s;if(!(E<0||E>=i.inHeight))for(var b=S*r.strides[0],C=m+E*t.strides[1],T=0;T<i.outWidth;++T)for(var F=w+T*h.strides[2],I=T*i.strideWidth-c,V=0;V<o;++V){var K=I+V*u;if(!(K<0||K>=i.inWidth))for(var G=b+V*r.strides[1],ie=C+K*i.inChannels,re=F,H=G,X=0;X<i.inChannels;++X){for(var Q=d[ie+X],fe=0;fe<f;++fe)p[re+fe]+=Q*v[H+fe];re+=f,H+=f}}}return h.toTensor()},n.prototype.depthwiseConv2DDerInput=function(t,r,i){ue([t,r],"depthwiseConv2DDerInput");for(var a=ze(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=this.readSync(t.dataId),h=t.strides,d=h[0],v=h[1],p=h[2],g=this.readSync(r.dataId),m=r.strides,x=m[0],y=m[1],w=m[2],_=i.batchSize,S=i.filterHeight,E=i.filterWidth,b=i.inChannels,C=i.inHeight,T=i.inWidth,F=i.outChannels,I=i.outHeight,V=i.outWidth,K=i.strideHeight,G=i.strideWidth,ie=S-1-i.padInfo.top,re=E-1-i.padInfo.left,H=F/b,X=0;X<_;++X)for(var Q=0;Q<b;++Q)for(var fe=0;fe<C;++fe)for(var D=fe-ie,z=Math.max(0,Math.ceil(D/K)),U=Math.min(I,(S+D)/K),B=0;B<T;++B){for(var J=B-re,he=Math.max(0,Math.ceil(J/G)),ge=Math.min(V,(E+J)/G),de=0,pe=z;pe<U;++pe)for(var Fe=pe*K-D,Ie=he;Ie<ge;++Ie)for(var Le=d*X+v*pe+p*Ie,Me=x*(S-1-Fe)+y*(E-1-(Ie*G-J))+w*Q,qe=0;qe<H;++qe)de+=f[Le+(Q*H+qe)]*g[Me+qe];o[u*X+l*fe+c*B+Q]=de}return a.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(t,r,i){ue([t,r],"depthwiseConv2DDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=ze(i.filterShape,"float32"),c=i.padInfo.left,f=i.padInfo.top,h=i.outChannels/i.inChannels,d=this.bufferSync(t),v=this.bufferSync(r),p=0;p<s;++p)for(var g=Math.max(0,Math.ceil((f-p)/a)),m=Math.min(i.outHeight,(i.inHeight+f-p)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((c-x)/o)),w=Math.min(i.outWidth,(i.inWidth+c-x)/o),_=0;_<i.outChannels;++_){for(var S=Math.trunc(_/h),E=_%h,b=0,C=0;C<i.batchSize;++C)for(var T=g;T<m;++T)for(var F=p+T*a-f,I=y;I<w;++I){var V=x+I*o-c;b+=d.get(C,F,V,S)*v.get(C,T,I,_)}l.set(b,p,x,S,E)}return l.toTensor()},n.prototype.tile=function(t,r){return ue(t,"tile"),tw(this.bufferSync(t),r)},n.prototype.pad=function(t,r,i){ue(t,"pad");var a=r.map(function(h,d){return h[0]+t.shape[d]+h[1]}),o=r.map(function(h){return h[0]}),s=this.bufferSync(t),u=ze(a,t.dtype);i!==0&&u.values.fill(i);for(var l=0;l<t.size;l++){var c=s.indexToLoc(l),f=c.map(function(h,d){return h+o[d]});u.set.apply(u,[s.get.apply(s,c)].concat(f))}return u.toTensor()},n.prototype.transpose=function(t,r){ue(t,"transpose");for(var i=new Array(t.rank),a=0;a<i.length;a++)i[a]=t.shape[r[a]];var o=this.readSync(t.dataId),s=ze(i,t.dtype),u=this.bufferSync(t);for(a=0;a<t.size;++a){for(var l=u.indexToLoc(a),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[r[f]];var h=s.locToIndex(c);s.values[h]=o[a]}return s.toTensor()},n.prototype.gather=function(t,r,i){ue([t,r],"gather");var a=t.shape.slice(),o=this.readSync(r.dataId);a[i]=o.length;for(var s=ze(a,t.dtype),u=this.bufferSync(t),l=0;l<s.size;++l){var c=s.indexToLoc(l),f=c.slice();f[i]=o[c[i]];var h=u.locToIndex(f);s.values[l]=u.values[h]}return s.toTensor()},n.prototype.batchToSpaceND=function(t,r,i){ue([t],"batchToSpaceND");var a=r.reduce(function(f,h){return f*h}),o=Xc(t.shape,r,a),s=Kc(o.length,r.length),u=qc(t.shape,r,a),l=V2(i,r.length),c=H2(u,i,r.length);return t.reshape(o).transpose(s).reshape(u).slice(l,c)},n.prototype.spaceToBatchND=function(t,r,i){ue([t],"spaceToBatchND");var a=r.reduce(function(h,d){return h*d}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<t.shape.length;++s)o.push([0,0]);var u=t.pad(o),l=Xc(u.shape,r,a,!1),c=Kc(l.length,r.length,!1),f=qc(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},n.prototype.pool=function(t,r,i){ue(t,"pool");for(var a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(t.dataId),p=ze(r.outShape,t.dtype),g=p.values,m=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],y=r.outShape[3],w=0;w<r.batchSize;++w)for(var _=w*m,S=w*t.strides[0],E=0;E<r.inChannels;++E)for(var b=0;b<r.outHeight;++b)for(var C=b*a-f,T=Math.max(0,C),F=Math.min(r.inHeight,l+C),I=_+b*x,V=0;V<r.outWidth;++V){for(var K=V*o-h,G=Math.max(0,K),ie=Math.min(r.inWidth,c+K),re=d,H=0,X=0,Q=T;Q<F;Q+=s){for(var fe=S+Q*t.strides[1],D=G;D<ie;D+=u){var z=v[fe+D*t.strides[2]+E];i==="max"&&z>re?re=z:i==="avg"&&(H+=z,X++)}if(isNaN(re))break}g[I+V*y+E]=i==="avg"?H/X:re}return p.toTensor()},n.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},n.prototype.maxPoolPositions=function(t,r){for(var i=ze(r.outShape,"int32"),a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=this.bufferSync(t),v=0;v<r.batchSize;++v)for(var p=0;p<r.inChannels;++p)for(var g=0;g<r.outHeight;++g){for(var m=g*a-f,x=m;x<0;)x+=s;for(var y=Math.min(r.inHeight,l+m),w=0;w<r.outWidth;++w){for(var _=w*o-h,S=_;S<0;)S+=u;for(var E=Math.min(r.inWidth,c+_),b=Number.NEGATIVE_INFINITY,C=-1,T=x;T<y;T+=s)for(var F=T-m,I=S;I<E;I+=u){var V=I-_,K=d.get(v,T,I,p);K>b&&(b=K,C=F*c+V)}i.set(C,v,g,w,p)}}return i.toTensor()},n.prototype.maxPoolBackprop=function(t,r,i,a){ue([r,i],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,a),s=a.strideHeight,u=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,d=h-1-a.padInfo.left,v=f-1-a.padInfo.top,p=ze(r.shape,"float32"),g=this.bufferSync(o),m=this.bufferSync(t),x=0;x<a.batchSize;++x)for(var y=0;y<a.inChannels;++y)for(var w=0;w<a.inHeight;++w)for(var _=0;_<a.inWidth;++_){for(var S=w-v,E=_-d,b=0,C=0;C<f;C+=l){var T=(S+C)/s;if(!(T<0||T>=a.outHeight||Math.floor(T)!==T))for(var F=0;F<h;F+=c){var I=(E+F)/u;if(!(I<0||I>=a.outWidth||Math.floor(I)!==I)){var V=f*h-1-g.get(x,T,I,y)===C*h+F?1:0;V!==0&&(b+=m.get(x,T,I,y)*V)}}}p.set(b,x,w,_,y)}return p.toTensor()},n.prototype.avgPoolBackprop=function(t,r,i){ue([t,r],"avgPoolBackprop");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=h-1-i.padInfo.left,v=f-1-i.padInfo.top,p=ze(r.shape,"float32"),g=1/(s*u),m=this.bufferSync(t),x=0;x<i.batchSize;++x)for(var y=0;y<i.inChannels;++y)for(var w=0;w<i.inHeight;++w)for(var _=0;_<i.inWidth;++_){for(var S=w-v,E=_-d,b=0,C=0;C<f;C+=l){var T=(S+C)/a;if(!(T<0||T>=i.outHeight||Math.floor(T)!==T))for(var F=0;F<h;F+=c){var I=(E+F)/o;I<0||I>=i.outWidth||Math.floor(I)!==I||(b+=m.get(x,T,I,y))}}p.set(b*g,x,w,_,y)}return p.toTensor()},n.prototype.pool3d=function(t,r,i){ue(t,"pool3d");for(var a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.front,p=r.padInfo.top,g=r.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(t.dataId),y=ze(r.outShape,t.dtype),w=y.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],b=r.outShape[4],C=0;C<r.batchSize;++C)for(var T=C*_,F=C*t.strides[0],I=0;I<r.inChannels;++I)for(var V=0;V<r.outDepth;++V){for(var K=V*a-v,G=K;G<0;)G+=u;for(var ie=Math.min(r.inDepth,f+K),re=T+V*S,H=0;H<r.outHeight;++H){for(var X=H*o-p,Q=X;Q<0;)Q+=l;for(var fe=Math.min(r.inHeight,h+X),D=re+H*E,z=0;z<r.outWidth;++z){for(var U=z*s-g,B=U;B<0;)B+=c;for(var J=Math.min(r.inWidth,d+U),he=D+z*b,ge=m,de=0,pe=0,Fe=G;Fe<ie;Fe+=u){for(var Ie=F+Fe*t.strides[1],Le=Q;Le<fe;Le+=l){for(var Me=Ie+Le*t.strides[2],qe=B;qe<J;qe+=c){var Ue=x[Me+qe*t.strides[3]+I];if(i==="max"&&Ue>ge?ge=Ue:i==="avg"&&(de+=Ue,pe++),isNaN(ge))break}if(isNaN(ge))break}if(isNaN(ge))break}w[he+I]=i==="avg"?de/pe:ge}}}return y.toTensor()},n.prototype.avgPool3d=function(t,r){return ue(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(t,r,i){ue([t,r],"avgPool3dBackprop");for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=i.dilationDepth,h=i.dilationHeight,d=i.dilationWidth,v=i.effectiveFilterDepth,p=i.effectiveFilterHeight,g=i.effectiveFilterWidth,m=v-1-i.padInfo.front,x=g-1-i.padInfo.left,y=p-1-i.padInfo.top,w=ze(r.shape,"float32"),_=1/(u*l*c),S=this.bufferSync(t),E=0;E<i.batchSize;++E)for(var b=0;b<i.inChannels;++b)for(var C=0;C<i.inDepth;++C)for(var T=0;T<i.inHeight;++T)for(var F=0;F<i.inWidth;++F){for(var I=C-m,V=T-y,K=F-x,G=0,ie=0;ie<v;ie+=f){var re=(I+ie)/a;if(!(re<0||re>=i.outDepth||Math.floor(re)!==re))for(var H=0;H<p;H+=h){var X=(V+H)/o;if(!(X<0||X>=i.outHeight||Math.floor(X)!==X))for(var Q=0;Q<g;Q+=d){var fe=(K+Q)/s;fe<0||fe>=i.outWidth||Math.floor(fe)!==fe||(G+=S.get(E,re,X,fe,b))}}}w.set(G*_,E,C,T,F,b)}return w.toTensor()},n.prototype.maxPool3d=function(t,r){return ue(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(t,r){for(var i=ze(r.outShape,"int32"),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.front,p=r.padInfo.top,g=r.padInfo.left,m=this.bufferSync(t),x=0;x<r.batchSize;++x)for(var y=0;y<r.inChannels;++y)for(var w=0;w<r.outDepth;++w){for(var _=w*a-v,S=_;S<0;)S+=u;for(var E=Math.min(r.inDepth,f+_),b=0;b<r.outHeight;++b){for(var C=b*o-p,T=C;T<0;)T+=l;for(var F=Math.min(r.inHeight,h+C),I=0;I<r.outWidth;++I){for(var V=I*s-g,K=V;K<0;)K+=c;for(var G=Math.min(r.inWidth,d+V),ie=Number.NEGATIVE_INFINITY,re=-1,H=S;H<E;H+=u)for(var X=H-_,Q=T;Q<F;Q+=l)for(var fe=Q-C,D=K;D<G;D+=c){var z=D-V,U=m.get(x,H,Q,D,y);U>=ie&&(ie=U,re=X*h*d+fe*h+z)}i.set(re,x,w,b,I,y)}}}return i.toTensor()},n.prototype.maxPool3dBackprop=function(t,r,i,a){ue([r,i],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,f=a.dilationHeight,h=a.dilationWidth,d=a.effectiveFilterDepth,v=a.effectiveFilterHeight,p=a.effectiveFilterWidth,g=d-1-a.padInfo.front,m=p-1-a.padInfo.left,x=v-1-a.padInfo.top,y=ze(r.shape,"float32"),w=this.bufferSync(o),_=this.bufferSync(t),S=0;S<a.batchSize;++S)for(var E=0;E<a.inChannels;++E)for(var b=0;b<a.inDepth;++b)for(var C=0;C<a.inHeight;++C)for(var T=0;T<a.inWidth;++T){for(var F=b-g,I=C-x,V=T-m,K=0,G=0;G<d;G+=c){var ie=(F+G)/s;if(!(ie<0||ie>=a.outDepth||Math.floor(ie)!==ie))for(var re=0;re<v;re+=f){var H=(I+re)/u;if(!(H<0||H>=a.outHeight||Math.floor(H)!==H))for(var X=0;X<p;X+=h){var Q=(V+X)/l;if(!(Q<0||Q>=a.outWidth||Math.floor(Q)!==Q)){var fe=d*v*p-1-w.get(S,ie,H,Q,E)===G*v*p+re*p+X?1:0;fe!==0&&(K+=_.get(S,ie,H,Q,E)*fe)}}}}y.set(K,S,b,C,T,E)}return y.toTensor()},n.prototype.cast=function(t,r){return Q2(t,r,this)},n.prototype.reshape=function(t,r){return Sp(t,r)},n.prototype.avgPool=function(t,r){return ue(t,"avgPool"),this.pool(t,r,"avg").toFloat()},n.prototype.resizeBilinear=function(t,r,i,a){ue(t,"resizeBilinear");for(var o=t.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(t.dataId),h=new Float32Array(Ne([s,r,i,c])),d=[a&&r>1?u-1:u,a&&i>1?l-1:l],v=[a&&r>1?r-1:r,a&&i>1?i-1:i],p=0,g=d[0]/v[0],m=d[1]/v[1],x=0;x<s;x++)for(var y=0;y<r;y++)for(var w=g*y,_=Math.floor(w),S=w-_,E=Math.min(u-1,Math.ceil(w)),b=x*t.strides[0]+_*t.strides[1],C=x*t.strides[0]+E*t.strides[1],T=0;T<i;T++)for(var F=m*T,I=Math.floor(F),V=F-I,K=Math.min(l-1,Math.ceil(F)),G=b+I*t.strides[2],ie=C+I*t.strides[2],re=b+K*t.strides[2],H=C+K*t.strides[2],X=0;X<c;X++){var Q=f[G+X],fe=f[ie+X],D=Q+(f[re+X]-Q)*V,z=D+(fe+(f[H+X]-fe)*V-D)*S;h[p++]=z}return sn(h,[s,r,i,c])},n.prototype.resizeBilinearBackprop=function(t,r,i){ue([t,r],"resizeBilinearBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=t.shape,f=c[1],h=c[2],d=new Float32Array(o*s*u*l),v=[i&&f>1?s-1:s,i&&h>1?u-1:u],p=[i&&f>1?f-1:f,i&&h>1?h-1:h],g=v[0]/p[0],m=v[1]/p[1],x=this.readSync(t.dataId),y=0,w=0;w<o;w++)for(var _=w*r.strides[0],S=0;S<f;S++)for(var E=S*g,b=Math.floor(E),C=Math.min(Math.ceil(E),s-1),T=_+b*r.strides[1],F=_+C*r.strides[1],I=E-b,V=1-I,K=0;K<h;K++)for(var G=K*m,ie=Math.floor(G),re=Math.min(Math.ceil(G),u-1),H=G-ie,X=1-H,Q=T+ie*r.strides[2],fe=T+re*r.strides[2],D=F+ie*r.strides[2],z=F+re*r.strides[2],U=V*X,B=V*H,J=I*X,he=I*H,ge=0;ge<l;ge++){var de=x[y++];d[Q+ge]+=de*U,d[fe+ge]+=de*B,d[D+ge]+=de*J,d[z+ge]+=de*he}return Un(d,[o,u,s,l],r.dtype)},n.prototype.resizeNearestNeighbor=function(t,r,i,a){ue(t,"resizeNearestNeighbor");for(var o=t.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(t.dataId),h=new Float32Array(s*r*i*c),d=[a&&r>1?u-1:u,a&&i>1?l-1:l],v=[a&&r>1?r-1:r,a&&i>1?i-1:i],p=d[0]/v[0],g=d[1]/v[1],m=0,x=0;x<s;x++)for(var y=x*t.strides[0],w=0;w<r;w++)for(var _=p*w,S=y+Math.min(u-1,a?Math.round(_):Math.floor(_))*t.strides[1],E=0;E<i;E++)for(var b=g*E,C=S+Math.min(l-1,a?Math.round(b):Math.floor(b))*t.strides[2],T=0;T<c;T++){var F=f[C+T];h[m++]=F}return sn(h,[s,r,i,c],t.dtype)},n.prototype.resizeNearestNeighborBackprop=function(t,r,i){ue([t,r],"resizeNearestNeighborBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=t.shape,f=c[1],h=c[2],d=new Float32Array(o*s*u*l),v=this.readSync(t.dataId),p=[i&&f>1?s-1:s,i&&h>1?u-1:u],g=[i&&f>1?f-1:f,i&&h>1?h-1:h],m=p[0]/g[0],x=p[1]/g[1],y=1/m,w=1/x,_=2*Math.ceil(y)+2,S=2*Math.ceil(w)+2,E=0;E<o;E++)for(var b=E*r.strides[0],C=0;C<s;C++)for(var T=b+C*r.strides[1],F=Math.floor(C*y),I=Math.floor(F-_/2),V=0;V<u;V++)for(var K=T+V*r.strides[2],G=Math.floor(V*w),ie=Math.floor(G-S/2),re=0;re<l;re++){for(var H=0,X=0;X<_;X++){var Q=X+I;if(!(Q<0||Q>=f)){var fe=b+Q*t.strides[1],D=Q*m;if(C===Math.min(s-1,i?Math.round(D):Math.floor(D)))for(var z=0;z<S;z++){var U=z+ie;if(!(U<0||U>=h)){var B=fe+U*t.strides[2],J=U*x;V===Math.min(u-1,i?Math.round(J):Math.floor(J))&&(H+=v[B+re])}}}}d[K+re]=H}return Un(d,r.shape,r.dtype)},n.prototype.batchNormalization=function(t,r,i,a,o,s){ue([t,r,i,o,s],"batchNorm");for(var u=this.readSync(t.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),f=o?this.readSync(o.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),d=new Float32Array(u.length),v=h.length,p=f.length,g=c.length,m=l.length,x=0,y=0,w=0,_=0,S=0;S<u.length;++S)d[S]=h[x++]+(u[S]-l[y++])*f[w++]/Math.sqrt(c[_++]+a),x>=v&&(x=0),y>=m&&(y=0),w>=p&&(w=0),_>=g&&(_=0);return Un(d,t.shape)},n.prototype.localResponseNormalization4D=function(t,r,i,a,o){ue(t,"localResponseNormalization4D");var s=t.shape[3],u=s-1,l=this.readSync(t.dataId),c=t.size,f=new Float32Array(c);function h(g){for(var m=g%s,x=g-m+Math.max(0,m-r),y=g-m+Math.min(m+r,u),w=0;x<=y;x++){var _=l[x];w+=_*_}return w}for(var d=0;d<c;d++){var v=h(d),p=l[d]*Math.pow(i+a*v,-o);f[d]=p}return Un(f,t.shape)},n.prototype.LRNGrad=function(t,r,i,a,o,s,u){ue(t,"LRNGrad");for(var l=t.shape[3],c=this.readSync(t.dataId),f=this.readSync(r.dataId),h=this.readSync(i.dataId),d=new Float32Array(t.size),v=t.size,p=0;p<v;p++){for(var g=p%l,m=p-g+Math.max(0,g-a),x=p-g+Math.min(l,g+a+1),y=0,w=m;w<x;w++)y+=Math.pow(f[w],2);for(y=s*y+o,w=m;w<x;w++){var _=-2*s*u*f[w]*h[p]/y;p===w&&(_+=Math.pow(y,-u)),_*=c[p],d[w]+=_}}return Un(d,t.shape)},n.prototype.multinomial=function(t,r,i,a){ue(t,"multinomial");for(var o=r?t:Oi(t),s=o.shape[0],u=o.shape[1],l=ct([s,i],"int32"),c=this.readSync(l.dataId),f=this.readSync(o.dataId),h=0;h<s;++h){var d=h*u,v=new Float32Array(u-1);v[0]=f[d];for(var p=1;p<v.length;++p)v[p]=v[p-1]+f[d+p];for(var g=Wf(a.toString()),m=h*i,x=0;x<i;++x){var y=g();c[m+x]=v.length;for(var w=0;w<v.length;w++)if(y<v[w]){c[m+x]=w;break}}}return l},n.prototype.oneHot=function(t,r,i,a){ue(t,"oneHot");var o=new Float32Array(t.size*r);o.fill(a);for(var s=this.readSync(t.dataId),u=0;u<t.size;++u)s[u]>=0&&s[u]<r&&(o[u*r+s[u]]=i);return la(o,[t.size,r],"int32")},n.prototype.nonMaxSuppression=function(t,r,i,a,o){return ue(t,"nonMaxSuppression"),V0(this.readSync(t.dataId),this.readSync(r.dataId),i,a,o)},n.prototype.fft=function(t){return this.fftBatch(t,!1)},n.prototype.ifft=function(t){return this.fftBatch(t,!0)},n.prototype.fftBatch=function(t,r){for(var i=t.shape[0],a=t.shape[1],o=ze(t.shape,"float32"),s=ze(t.shape,"float32"),u=wr(t).as2D(i,a),l=ni(t).as2D(i,a),c=0;c<i;c++)for(var f=u.slice([c,0],[1,a]),h=l.slice([c,0],[1,a]),d=rn(f,h),v=this.readSync(this.fftImpl(d,r).dataId),p=0;p<a;p++){var g=Am(v,p);o.values[c*a+p]=g.real,s.values[c*a+p]=g.imag}return rn(o.toTensor(),s.toTensor()).as2D(i,a)},n.prototype.fftImpl=function(t,r){var i=t.as1D(),a=i.size;if(this.isExponentOf2(a)){var o=this.fftRadix2(i,a,r).as2D(t.shape[0],t.shape[1]);return r&&(o=rn(wr(o).div(Ee(a)),ni(o).div(Ee(a)))),o}var s=this.readSync(t.dataId),u=function(l){for(var c=new Float32Array(l.length/2),f=new Float32Array(l.length/2),h=0;h<l.length;h+=2)c[h/2]=l[h],f[h/2]=l[h+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,a,r));return rn(u.real,u.imag).as2D(t.shape[0],t.shape[1])},n.prototype.isExponentOf2=function(t){return(t&t-1)==0},n.prototype.fftRadix2=function(t,r,i){if(r===1)return t;var a=this.readSync(t.dataId),o=r/2,s=function(m){for(var x=Math.ceil(m.length/4),y=new Float32Array(x),w=new Float32Array(x),_=0;_<m.length;_+=4)y[Math.floor(_/4)]=m[_],w[Math.floor(_/4)]=m[_+1];return{real:y,imag:w}}(a),u=rn(s.real,s.imag).as1D(),l=function(m){for(var x=Math.floor(m.length/4),y=new Float32Array(x),w=new Float32Array(x),_=2;_<m.length;_+=4)y[Math.floor(_/4)]=m[_],w[Math.floor(_/4)]=m[_+1];return{real:y,imag:w}}(a),c=rn(l.real,l.imag).as1D();u=this.fftRadix2(u,o,i),c=this.fftRadix2(c,o,i);var f=function(m,x){for(var y=new Float32Array(m/2),w=new Float32Array(m/2),_=0;_<Math.ceil(m/2);_++){var S=(x?2:-2)*Math.PI*(_/m);y[_]=Math.cos(S),w[_]=Math.sin(S)}return{real:y,imag:w}}(r,i),h=rn(f.real,f.imag).mul(c),d=u.add(h),v=u.sub(h),p=wr(d).concat(wr(v)),g=ni(d).concat(ni(v));return rn(p,g).as1D()},n.prototype.fourierTransformByMatmul=function(t,r,i){for(var a=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,u=0,l=0;l<r;l++){var c=a3(o*l,r,i),f=Am(t,l);s+=f.real*c.real-f.imag*c.imag,u+=f.real*c.imag+f.imag*c.real}i&&(s/=r,u/=r),i3(a,s,u,o)}return a},n.prototype.depthToSpace=function(t,r,i){P(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var a=t.shape[0],o=t.shape[1],s=t.shape[2],u=t.shape[3],l=o*r,c=s*r,f=u/(r*r),h=this.readSync(t.dataId),d=new Float32Array(a*l*c*f),v=0,p=0;p<a;++p)for(var g=0;g<l;++g)for(var m=Math.floor(g/r),x=g%r,y=0;y<c;++y)for(var w=Math.floor(y/r),_=(x*r+y%r)*f,S=0;S<f;++S){var E=S+_+u*(w+s*(m+o*p));d[v++]=h[E]}return Un(d,[a,l,c,f])},n.prototype.broadcastedBinaryOp=function(t,r,i,a){var o=Ge(t.shape,r.shape),s=ze(o,i),u=this.readSync(t.dataId),l=this.readSync(r.dataId),c=Qi(t.shape,o),f=Qi(r.shape,o),h=s.values;if(c.length+f.length===0)for(var d=0;d<h.length;++d)h[d]=a(u[d%u.length],l[d%l.length]);else{var v=this.bufferSync(t),p=this.bufferSync(r),g=function(m){var x=s.indexToLoc(m),y=x.slice(-t.rank);c.forEach(function(E){return y[E]=0});var w=v.locToIndex(y),_=x.slice(-r.rank);f.forEach(function(E){return _[E]=0});var S=p.locToIndex(_);h[m]=a(u[w],l[S])};for(d=0;d<h.length;++d)g(d)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(t,r,i){var a=Ge(t.shape,r.shape),o=ze(a,"float32"),s=ze(a,"float32"),u=this.readSync(t.dataId),l=this.readSync(r.dataId),c=Qi(t.shape,a),f=Qi(r.shape,a),h=o.values,d=s.values;if(c.length+f.length===0)for(var v=0;v<h.length;v++){var p=v%u.length,g=v%l.length,m=i(u[2*p],u[2*p+1],l[2*g],l[2*g+1]);h[v]=m.real,d[v]=m.imag}else{var x=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=function(_){var S=o.indexToLoc(_),E=S.slice(-t.rank);c.forEach(function(I){return E[I]=0});var b=x.locToIndex(E),C=S.slice(-r.rank);f.forEach(function(I){return C[I]=0});var T=y.locToIndex(C),F=i(u[2*b],u[2*b+1],l[2*T],l[2*T+1]);h[_]=F.real,d[_]=F.imag};for(v=0;v<h.length;v++)w(v)}return this.complex(o.toTensor(),s.toTensor())},n.prototype.split=function(t,r,i){return ew(t,r,i)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(t,r,i,a,o,s){for(var u=t.shape,l=u[0],c=u[1],f=u[2],h=u[3],d=r.shape[0],v=a[0],p=a[1],g=ze([d,v,p,h],"float32"),m=this.readSync(r.dataId),x=this.readSync(i.dataId),y=this.readSync(t.dataId),w=t.strides,_=g.strides,S=0;S<d;S++){var E=4*S,b=m[E],C=m[E+1],T=m[E+2],F=m[E+3],I=x[S];if(!(I>=l))for(var V=v>1?(T-b)*(c-1)/(v-1):0,K=p>1?(F-C)*(f-1)/(p-1):0,G=0;G<v;G++){var ie=v>1?b*(c-1)+G*V:.5*(b+T)*(c-1);if(ie<0||ie>c-1)for(var re=0;re<p;re++)for(var H=0;H<h;H++){var X=H+re*_[2]+G*_[1]+S*_[0];g.values[X]=s}else if(o==="bilinear"){var Q=Math.floor(ie),fe=Math.ceil(ie),D=ie-Q;for(re=0;re<p;re++)if((Fe=p>1?C*(f-1)+re*K:.5*(C+F)*(f-1))<0||Fe>f-1)for(H=0;H<h;H++)X=H+re*_[2]+G*_[1]+S*_[0],g.values[X]=s;else{var z=Math.floor(Fe),U=Math.ceil(Fe),B=Fe-z;for(H=0;H<h;H++){var J=y[X=H+z*w[2]+Q*w[1]+I*w[0]],he=y[X=H+U*w[2]+Q*w[1]+I*w[0]],ge=y[X=H+z*w[2]+fe*w[1]+I*w[0]],de=J+(he-J)*B,pe=ge+(y[X=H+U*w[2]+fe*w[1]+I*w[0]]-ge)*B;X=H+re*_[2]+G*_[1]+S*_[0],g.values[X]=de+(pe-de)*D}}}else for(re=0;re<p;++re){var Fe;if((Fe=p>1?C*(f-1)+re*K:.5*(C+F)*(f-1))<0||Fe>f-1)for(H=0;H<h;H++)X=H+re*_[2]+G*_[1]+S*_[0],g.values[X]=s;else{var Ie=Math.round(Fe),Le=Math.round(ie);for(H=0;H<h;H++){var Me=H+Ie*w[2]+Le*w[1]+I*w[0],qe=H+re*_[2]+G*_[1]+S*_[0];g.values[qe]=y[Me]}}}}}return g.toTensor()},n.prototype.sparseToDense=function(t,r,i,a){var o=Yc(0,t,i),s=o.sliceRank,u=o.numUpdates,l=o.sliceSize,c=o.strides,f=o.outputSize;return this.scatter(t,r,i,f,l,u,s,c,a,!1)},n.prototype.gatherND=function(t,r){var i=r.shape,a=i[i.length-1],o=$2(t,r),s=o[0],u=o[1],l=o[2],c=o[3];if(u===0)return sn([],s,t.dtype);for(var f=new Du([u,l],t.dtype),h=this.readSync(r.dataId),d=this.readSync(t.dataId),v=0;v<u;v++){for(var p=[],g=0,m=0;m<a;m++){var x=h[v*a+m];g+=x*c[m],p.push(x)}if(g<0||g>=t.size/l)throw new Error("Invalid indices: "+p+" does not index into "+t.shape);for(var y=0;y<l;y++)f.values[v*l+y]=d[g*l+y]}return f.toTensor().reshape(s)},n.prototype.scatterND=function(t,r,i){var a=Yc(0,t,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=Ee(0);return this.scatter(t,r,i,c,u,s,o,l,f,!0)},n.prototype.fill=function(t,r,i){var a=Wc(i=i||Qu(r),Ne(t));return a.fill(r),j.makeTensor(a,t,i,this)},n.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},n.prototype.zerosLike=function(t){var r=Wc(t.dtype,Ne(t.shape));return this.makeOutput(r,t.shape,t.dtype)},n.prototype.linspace=function(t,r,i){return J2(t,r,i)},n.prototype.scatter=function(t,r,i,a,o,s,u,l,c,f){var h=[a/o,o],d=this.readSync(t.dataId),v=this.readSync(r.dataId);if(a===0)return sn([],i,r.dtype);var p=new Du(h,r.dtype);p.values.fill(this.readSync(c.dataId)[0]);for(var g=0;g<s;g++){for(var m=[],x=0,y=0;y<u;y++){var w=d[g*u+y];m.push(w),x+=w*l[y]}if(x<0||x>=a/o)throw new Error("Invalid indices: "+m+" does not index into "+i);for(var _=0;_<o;_++)f?p.values[x*o+_]+=v[g*o+_]:p.values[x*o+_]=r.rank===0?v[0]:v[g*o+_]}return p.toTensor().reshape(i)},n}(q2);j.registerBackend("cpu",function(){return new bF},1);for(var td=0,Ym=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs,i=n,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=t;ue(a,"NonMaxSuppressionWithScore");var d=H0(h.data.get(a.dataId).values,h.data.get(o.dataId).values,u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n.x,i=t;ue(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];o[s]=u*u}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Mu,backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n,i=r.a,a=r.b,o=t;ue([i,a],Mu);var s=o.data.get(i.dataId).values,u=o.data.get(a.dataId).values,l=function(h,d,v,p,g,m){var x=Ge(h,d),y=x.length,w=si(x),_=Nu(g,Ne(x)),S=h.length,E=d.length,b=si(h),C=si(d),T=Qi(h,x),F=Qi(d,x);if(T.length+F.length===0)for(var I=0;I<_.length;++I)_[I]=m(v[I%v.length],p[I%p.length]);else{var V=function(K){var G=OT(K,y,w),ie=G.slice(-S);T.forEach(function(Q){return ie[Q]=0});var re=ym(ie,S,b),H=G.slice(-E);F.forEach(function(Q){return H[Q]=0});var X=ym(H,E,C);_[K]=m(v[re],p[X])};for(I=0;I<_.length;++I)V(I)}return[_,x]}(i.shape,a.shape,s,u,i.dtype,function(h,d){var v=h-d;return v*v}),c=l[0],f=l[1];return{dataId:o.write(c,f,i.dtype),shape:f,dtype:i.dtype}}}];td<Ym.length;td++)S2(Ym[td]);var wo,TF=function(e){this.variableNames=["A"];var n=_n(),t=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},kF=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=_n(),t=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(var nd=0,Qm=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs,i=n.pixels,a=r.numChannels,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],c=u[1],f=[c,l],h=[c,l,a];(s||o)&&(wo==null&&(wo=document.createElement("canvas").getContext("2d")),wo.canvas.width=l,wo.canvas.height=c,wo.drawImage(i,0,0,l,c),i=wo.canvas);var d=t.makeTensorInfo(f,"int32");t.texData.get(d.dataId).usage=or.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(d.dataId),i);var v=oe().getBool("WEBGL_PACK")?new kF(h):new TF(h),p=t.runWebGLProgram(v,[d],"int32");return t.disposeData(d.dataId),p}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs;$c("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=n,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=t,d=H0(h.readSync(a.dataId),h.readSync(o.dataId),u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n.x,i=t,a=new He(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:Mu,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n,i=r.a,a=r.b,o=t,s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gi("return (a - b) * (a - b);",i.shape,a.shape):new Ct("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(s,[i,a])}}];nd<Qm.length;nd++)S2(Qm[nd]);for(var rd=0,Jm=[{kernelName:"Square",gradFunc:function(e,n){var t=n[0];return{x:function(){return e.mul(t.toFloat().mul(2))}}}},{kernelName:Mu,gradFunc:function(e,n){var t=n[0],r=n[1],i=Ee(2);return{a:function(){return Sn(e,Sn(i,Ht(t,r)))},b:function(){return Sn(e,Sn(i,Ht(r,t)))}}}}];rd<Jm.length;rd++)CT(Jm[rd]);var AF=function(){function e(){}return e.prototype.fetch=function(n,t){return fetch(n,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(n,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},e.prototype.decode=function(n,t){return new TextDecoder(t).decode(n)},e}();oe().get("IS_BROWSER")&&oe().setPlatform("browser",new AF);var id,RF=function(){return require("node-fetch")},FF=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(n,t){return oe().global.fetch!=null?oe().global.fetch(n,t):(id==null&&(id=RF()),id(n,t))},e.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},e.prototype.encode=function(n,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(n)},e.prototype.decode=function(n,t){return n.length===0?"":new this.util.TextDecoder(t).decode(n)},e}();oe().get("IS_NODE")&&oe().setPlatform("node",new FF);var Tp={float32:4,int32:4,uint16:2,uint8:1,bool:1},rf=4;function Gw(e,n){for(var t={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,f=Ne(c),h=void 0;if("quantization"in s){var d=s.quantization;if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+d.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=Tp[d.dtype],p=e.slice(r,r+f*v),g=d.dtype==="uint8"?new Uint8Array(p):new Uint16Array(p);if(l==="float32")h=Float32Array.from(g,function(S){return S*d.scale+d.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=Int32Array.from(g,function(S){return Math.round(S*d.scale+d.min)})}r+=f*v}else if(l==="string"){var m=Ne(s.shape);h=[];for(var x=0;x<m;x++){var y=new Uint32Array(e.slice(r,r+rf))[0];r+=rf;var w=new Uint8Array(e.slice(r,r+y));h.push(w),r+=y}}else{var _=Tp[l];if(p=e.slice(r,r+f*_),l==="float32")h=new Float32Array(p);else if(l==="int32")h=new Int32Array(p);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=new Uint8Array(p)}r+=f*_}t[u]=sn(h,c,l)},a=0,o=n;a<o.length;a++)i(o[a]);return t}function IF(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var n=0,t=[];e.forEach(function(a){if(n+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)});var r=new Uint8Array(n),i=0;return t.forEach(function(a){r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}var kp=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Zm(e){return kp?Buffer.byteLength(e):new Blob([e]).size}function uv(e){var n=0;e.forEach(function(i){n+=i.byteLength});var t=new Uint8Array(n),r=0;return e.forEach(function(i){t.set(new Uint8Array(i),r),r+=i.byteLength}),t.buffer}function eg(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var n=e.split("/");return n[n.length-1]}function il(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:Zm(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:Zm(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var sr=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(n){e.getInstance().saveRouters.push(n)},e.registerLoadRouter=function(n){e.getInstance().loadRouters.push(n)},e.getSaveHandlers=function(n){return e.getHandlers(n,"save")},e.getLoadHandlers=function(n,t){return e.getHandlers(n,"load",t)},e.getHandlers=function(n,t,r){var i=[];return(t==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(a){var o=a(n,r);o!==null&&i.push(o)}),i},e}(),Zo="://",ca=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(n,t){P(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(Zo)&&(n=n.slice(0,n.indexOf(Zo))),P(n.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();P(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=t},e.getManager=function(n){var t=this.getInstance().managers[n];if(t==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function pc(e){if(e.indexOf(Zo)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ca.getSchemes().join(","));return{scheme:e.split(Zo)[0],path:e.split(Zo)[1]}}function tg(e,n,t){return t===void 0&&(t=!1),Ae(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f;return Re(this,function(h){switch(h.label){case 0:return P(e!==n,function(){return"Old path and new path are the same: '"+e+"'"}),P((r=sr.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),P(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),i=r[0],P((a=sr.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),P(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),o=a[0],s=pc(e).scheme,u=pc(e).path,l=s===pc(e).scheme,[4,i.load()];case 1:return c=h.sent(),t&&l?[4,ca.getManager(s).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,o.save(c)];case 4:return f=h.sent(),!t||l?[3,6]:[4,ca.getManager(s).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var za="models_store",Ji="model_info_store";function Xw(){if(!oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,n=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function Ap(e){var n=e.result;n.createObjectStore(za,{keyPath:"modelPath"}),n.createObjectStore(Ji,{keyPath:"modelPath"})}var es=function(){function e(n){if(this.indexedDB=Xw(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return e.prototype.save=function(n){return Ae(this,void 0,void 0,function(){return Re(this,function(t){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},e.prototype.load=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(n,t){var r=this;return new Promise(function(i,a){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Ap(o)},o.onsuccess=function(){var s=o.result;if(t==null){var u=s.transaction(za,"readonly"),l=u.objectStore(za).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(p){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var c,f=il(t),h=s.transaction(Ji,"readwrite"),d=h.objectStore(Ji),v=d.put({modelPath:r.modelPath,modelArtifactsInfo:f});v.onsuccess=function(){var p=(c=s.transaction(za,"readwrite")).objectStore(za).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:f});p.onsuccess=function(){return i({modelArtifactsInfo:f})},p.onerror=function(g){var m=(d=h.objectStore(Ji)).delete(r.modelPath);m.onsuccess=function(){return s.close(),a(p.error)},m.onerror=function(x){return s.close(),a(p.error)}}},v.onerror=function(p){return s.close(),a(v.error)},h.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return a(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),ng=function(e){return oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(es.URL_SCHEME)?(n=e.slice(es.URL_SCHEME.length),new es(n)):null;var n};sr.registerSaveRouter(ng),sr.registerLoadRouter(ng);var NF=function(){function e(){this.indexedDB=Xw()}return e.prototype.listModels=function(){return Ae(this,void 0,void 0,function(){var n=this;return Re(this,function(t){return[2,new Promise(function(r,i){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Ap(a)},a.onsuccess=function(){var o=a.result,s=o.transaction(Ji,"readonly"),u=s.objectStore(Ji).getAll();u.onsuccess=function(){for(var l={},c=0,f=u.result;c<f.length;c++){var h=f[c];l[h.modelPath]=h.modelArtifactsInfo}r(l)},u.onerror=function(l){return o.close(),i(u.error)},s.oncomplete=function(){return o.close()}},a.onerror=function(o){return i(a.error)}})]})})},e.prototype.removeModel=function(n){return Ae(this,void 0,void 0,function(){var t=this;return Re(this,function(r){var i;return n=(i=n).startsWith(es.URL_SCHEME)?i.slice(es.URL_SCHEME.length):i,[2,new Promise(function(a,o){var s=t.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return Ap(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(Ji,"readwrite"),f=c.objectStore(Ji),h=f.get(n);h.onsuccess=function(){if(h.result==null)return l.close(),o(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var d=f.delete(n),v=function(){var p=(u=l.transaction(za,"readwrite")).objectStore(za).delete(n);p.onsuccess=function(){return a(h.result.modelArtifactsInfo)},p.onerror=function(g){return o(h.error)}};d.onsuccess=v,d.onerror=function(p){return v(),l.close(),o(h.error)}},h.onerror=function(d){return l.close(),o(h.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return o(s.error)}})]})})},e}();if(oe().getBool("IS_BROWSER"))try{ca.registerManager(es.URL_SCHEME,new NF)}catch{}var wi="/",Ro="tensorflowjs_models",Kw="info",DF="model_topology",PF="weight_specs",OF="weight_data",MF="model_metadata";function qw(e){return{info:[Ro,e,Kw].join(wi),topology:[Ro,e,DF].join(wi),weightSpecs:[Ro,e,PF].join(wi),weightData:[Ro,e,OF].join(wi),modelMetadata:[Ro,e,MF].join(wi)}}function LF(e){var n=e.split(wi);if(n.length<3)throw new Error("Invalid key format: "+e);return n.slice(1,n.length-1).join(wi)}var ts=function(){function e(n){if(!oe().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=qw(this.modelPath)}return e.prototype.save=function(n){return Ae(this,void 0,void 0,function(){var t,r,i;return Re(this,function(a){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),i=il(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(kp)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Ae(this,void 0,void 0,function(){var n,t,r,i,a,o,s;return Re(this,function(u){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=i,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(a),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(l){if(kp){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(l),h=new Uint8Array(f.length),d=0;d<f.length;++d)h.set([f.charCodeAt(d)],d);return h.buffer}(s),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),rg=function(e){return oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ts.URL_SCHEME)?(n=e.slice(ts.URL_SCHEME.length),new ts(n)):null;var n};sr.registerSaveRouter(rg),sr.registerLoadRouter(rg);var BF=function(){function e(){P(oe().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),P(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Ae(this,void 0,void 0,function(){var n,t,r,i,a,o;return Re(this,function(s){for(n={},t=Ro+wi,r=wi+Kw,i=0;i<this.LS.length;++i)(a=this.LS.key(i)).startsWith(t)&&a.endsWith(r)&&(o=LF(a),n[o]=JSON.parse(this.LS.getItem(a)));return[2,n]})})},e.prototype.removeModel=function(n){return Ae(this,void 0,void 0,function(){var t,r;return Re(this,function(i){var a;if(n=(a=n).startsWith(ts.URL_SCHEME)?a.slice(ts.URL_SCHEME.length):a,t=qw(n),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},e}();if(oe().getBool("IS_BROWSER"))try{ca.registerManager(ts.URL_SCHEME,new BF)}catch{}var UF="model",WF=".json",zF=".weights.bin";function ig(e){return new Promise(function(n){return setTimeout(n)}).then(e)}var ad=function(){function e(n){if(!oe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(e.URL_SCHEME)&&(n=n.slice(e.URL_SCHEME.length)),n!=null&&n.length!==0||(n=UF),this.modelTopologyFileName=n+WF,this.weightDataFileName=n+zF}return e.prototype.save=function(n){return Ae(this,void 0,void 0,function(){var t,r,i,a,o,s;return Re(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=a,[4,ig(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=t,[4,ig(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:il(n)}]}})})},e.URL_SCHEME="downloads://",e}(),VF=function(){function e(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return e.prototype.load=function(){return Ae(this,void 0,void 0,function(){var n,t,r=this;return Re(this,function(i){return n=this.files[0],t=this.files.slice(1),[2,new Promise(function(a,o){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){t.length===0&&a({modelTopology:c});var f=l.weightsManifest;if(f!=null){var h;try{h=r.checkManifestAndWeightFiles(f,t)}catch(g){return void o(g)}var d=[],v=[],p=[];f.forEach(function(g){g.paths.forEach(function(m){v.push(m),p.push(null)}),d.push.apply(d,g.weights)}),f.forEach(function(g){g.paths.forEach(function(m){var x=new FileReader;x.onload=function(y){var w=y.target.result,_=v.indexOf(m);p[_]=w,p.indexOf(null)===-1&&a({modelTopology:c,weightSpecs:d,weightData:uv(p),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},x.onerror=function(y){return o("Failed to weights data from file of path '"+m+"'.")},x.readAsArrayBuffer(h[m])})})}else o(new Error("weightManifest field is missing from file "+n.name))}else o(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(u){return o("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},e.prototype.checkManifestAndWeightFiles=function(n,t){for(var r=[],i=t.map(function(u){return eg(u.name)}),a={},o=0,s=n;o<s.length;o++)s[o].paths.forEach(function(u){var l=eg(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");a[u]=t[i.indexOf(l)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return a},e}();function ag(e,n,t,r){(function(a){P(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(e),function(a,o){P(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),P(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),P(o>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+o})}(t=t??0,r=r??1);var i=0;return Promise.all(e.map(function(a){return a.then(function(o){var s=t+ ++i/e.length*(r-t);return n(s),o}),a}))}function Yw(e,n){return Ae(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,c;return Re(this,function(f){switch(f.label){case 0:return n==null&&(n={}),t=n.fetchFunc==null?oe().platform.fetch:n.fetchFunc,r=e.map(function(h){return t(h,n.requestInit,{isBinary:!0})}),i=0,a=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=f.sent(),[3,4];case 2:return[4,ag(r,n.onProgress,i,a)];case 3:o=f.sent(),f.label=4;case 4:return s=o.map(function(h){return h.arrayBuffer()}),u=.5,l=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,ag(s,n.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function og(e){var n=this;return function(t,r,i){return r===void 0&&(r=""),Ae(n,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v;return Re(this,function(p){switch(p.label){case 0:if(a=t.map(function(){return!1}),o={},s=i!=null?i.map(function(){return!1}):[],u=[],t.forEach(function(g,m){var x=0;g.weights.forEach(function(y){var w="quantization"in y?y.quantization.dtype:y.dtype,_=Tp[w]*Ne(y.shape),S=function(){a[m]=!0,o[m]==null&&(o[m]=[]),o[m].push({manifestEntry:y,groupOffset:x,sizeBytes:_})};i!=null?i.forEach(function(E,b){E===y.name&&(S(),s[b]=!0)}):S(),u.push(y.name),x+=_})}),!s.every(function(g){return g}))throw l=i.filter(function(g,m){return!s[m]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=a.reduce(function(g,m,x){return m&&g.push(x),g},[]),f=[],c.forEach(function(g){t[g].paths.forEach(function(m){var x=r+(r.endsWith("/")?"":"/")+m;f.push(x)})}),[4,e(f)];case 1:return h=p.sent(),d={},v=0,c.forEach(function(g){for(var m=t[g].paths.length,x=0,y=0;y<m;y++)x+=h[v+y].byteLength;for(var w=new ArrayBuffer(x),_=new Uint8Array(w),S=0,E=0;E<m;E++){var b=new Uint8Array(h[v+E]);_.set(b,S),S+=b.byteLength}o[g].forEach(function(C){var T=Gw(w.slice(C.groupOffset,C.groupOffset+C.sizeBytes),[C.manifestEntry]);for(var F in T)d[F]=T[F]}),v+=m}),[2,d]}})})}}sr.registerSaveRouter(function(e){return oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ad.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new ad(n)}(e.slice(ad.URL_SCHEME.length)):null});var Qw=function(){function e(n,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(P(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=oe().platform.fetch,P(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&P(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(n){return Ae(this,void 0,void 0,function(){var t,r,i,a;return Re(this,function(o){switch(o.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),n.weightData!=null&&t.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=o.sent()).ok)return[2,{modelArtifactsInfo:il(n),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},e.prototype.load=function(){return Ae(this,void 0,void 0,function(){var n,t,r,i,a,o,s,u,l,c,f,h;return Re(this,function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,n.json()];case 3:return t=d.sent(),[3,5];case 4:throw d.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=t.modelTopology,a=t.weightsManifest,o=t.generatedBy,s=t.convertedBy,u=t.format,l=t.userDefinedMetadata,i==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:h=d.sent(),c=h[0],f=h[1],d.label=7;case 7:return[2,{modelTopology:i,weightSpecs:c,weightData:f,userDefinedMetadata:l,generatedBy:o,convertedBy:s,format:u}]}})})},e.prototype.loadWeights=function(n){return Ae(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,c,f,h;return Re(this,function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(v){var p=v.lastIndexOf("/"),g=v.lastIndexOf("?"),m=v.substring(0,p),x=g>p?v.substring(g):"";return[m+"/",x]}(t),i=r[0],a=r[1],o=this.weightPathPrefix||i,s=[],u=0,l=n;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return f=[],n.forEach(function(v){v.paths.forEach(function(p){f.push(o+p+a)})}),[4,Yw(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=d.sent(),[2,[s,uv(h)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Rp(e){return e.match(Qw.URL_SCHEME_REGEX)!=null}var sg=function(e,n){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(t){return Rp(t)}):Rp(e))?Fp(e,{onProgress:n}):null};function Fp(e,n){return new Qw(e,n)}sr.registerSaveRouter(sg),sr.registerLoadRouter(sg);var od=function(){function e(n){this.modelArtifacts=n}return e.prototype.load=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(n){return[2,this.modelArtifacts]})})},e}(),HF=function(){function e(n){this.saveHandler=n}return e.prototype.save=function(n){return Ae(this,void 0,void 0,function(){return Re(this,function(t){return[2,this.saveHandler(n)]})})},e}(),Jw=Object.freeze({browserFiles:function(e){return new VF(e)},browserHTTPRequest:function(e,n){return Fp(e,n)},concatenateArrayBuffers:uv,decodeWeights:Gw,encodeWeights:function(e,n){return Ae(this,void 0,void 0,function(){var t,r,i,a,o,s=this;return Re(this,function(u){switch(u.label){case 0:for(t=[],r=[],i=Array.isArray(e)?e.map(function(l){return l.name}):Object.keys(e),a=function(l){var c=i[l],f=Array.isArray(e)?e[l].tensor:e[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var h={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var d=new Promise(function(v){return Ae(s,void 0,void 0,function(){var p,g,m,x,y,w,_;return Re(this,function(S){switch(S.label){case 0:return[4,f.bytes()];case 1:for(p=S.sent(),g=p.reduce(function(E,b){return E+b.length},0)+rf*p.length,m=new Uint8Array(g),x=0,y=0;y<p.length;y++)w=p[y],_=new Uint8Array(new Uint32Array([w.length]).buffer),m.set(_,x),x+=rf,m.set(w,x),x+=w.length;return v(m),[2]}})})});r.push(d)}else r.push(f.data());n!=null&&(h.group=n),t.push(h)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:IF(u.sent()),specs:t}]}})})},fromMemory:function(e,n,t,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new od(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new od({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new od({modelTopology:e,weightSpecs:n,weightData:t,trainingConfig:r}))},getLoadHandlers:function(e,n){return sr.getLoadHandlers(e,n)},getModelArtifactsInfoForJSON:il,getSaveHandlers:function(e){return sr.getSaveHandlers(e)},http:Fp,isHTTPScheme:Rp,loadWeights:function(e,n,t,r){return n===void 0&&(n=""),Ae(this,void 0,void 0,function(){return Re(this,function(i){return[2,og(function(a){return Yw(a,{requestInit:r})})(e,n,t)]})})},registerLoadRouter:function(e){return sr.registerLoadRouter(e)},registerSaveRouter:function(e){return sr.registerSaveRouter(e)},weightsLoaderFactory:og,withSaveHandler:function(e){return new HF(e)},copyModel:function(e,n){return Ae(this,void 0,void 0,function(){return Re(this,function(t){return[2,tg(e,n,!1)]})})},listModels:function(){return Ae(this,void 0,void 0,function(){var e,n,t,r,i,a,o;return Re(this,function(s){switch(s.label){case 0:e=ca.getSchemes(),n={},t=0,r=e,s.label=1;case 1:return t<r.length?(i=r[t],[4,ca.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())n[i+Zo+o]=a[o];s.label=3;case 3:return t++,[3,1];case 4:return[2,n]}})})},moveModel:function(e,n){return Ae(this,void 0,void 0,function(){return Re(this,function(t){return[2,tg(e,n,!0)]})})},removeModel:function(e){return Ae(this,void 0,void 0,function(){var n;return Re(this,function(t){return n=pc(e),[2,ca.getManager(n.scheme).removeModel(n.path)]})})}}),_o;W({confusionMatrix_:function(e,n,t){var r=A(e,"labels","confusionMatrix"),i=A(n,"predictions","confusionMatrix");P(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),P(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),P(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),P(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),P(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var a=_p(r.asType("int32"),t),o=_p(i.asType("int32"),t);return a.transpose().matMul(o).asType("int32")}});var $F=W({fromPixels_:function(e,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,i=!1,a=!1,o=!1;if(e.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)a=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(i&&i&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(E2("FromPixels",j.backendName)!=null)return j.runKernel("FromPixels",{pixels:e},{numChannels:n});var s,u,l=i?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],f=l[1];if(o?s=e.getContext("2d").getImageData(0,0,c,f).data:r||t?s=e.data:(a||i)&&(_o==null&&(_o=document.createElement("canvas").getContext("2d")),_o.canvas.width=c,_o.canvas.height=f,_o.drawImage(e,0,0,c,f),s=_o.getImageData(0,0,c,f).data),n===4)u=new Int32Array(s);else{var h=c*f;u=new Int32Array(h*n);for(var d=0;d<h;d++)for(var v=0;v<n;++v)u[d*n+v]=s[4*d+v]}return L0(u,[f,c,n],"int32")}}),lv=Object.freeze({toPixels:function(e,n){return Ae(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,c,f,h,d,v,p,g,m,x,y,w,_,S,E,b;return Re(this,function(C){switch(C.label){case 0:if(t=A(e,"img","toPixels"),e instanceof yt||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),i=r[0],a=r[1],(o=t.rank===2?1:t.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,t.data()];case 1:return s=C.sent(),u=t.min(),l=t.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=C.sent(),f=c[0],h=c[1],d=f[0],v=h[0],u.dispose(),l.dispose(),t.dtype==="float32"){if(d<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+v+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(d<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+v+"].")}for(p=t.dtype==="float32"?255:1,g=new Uint8ClampedArray(a*i*4),m=0;m<i*a;++m)x=void 0,y=void 0,w=void 0,_=void 0,o===1?(x=s[m]*p,y=s[m]*p,w=s[m]*p,_=255):o===3?(x=s[3*m]*p,y=s[3*m+1]*p,w=s[3*m+2]*p,_=255):o===4&&(x=s[4*m]*p,y=s[4*m+1]*p,w=s[4*m+2]*p,_=s[4*m+3]*p),g[(S=4*m)+0]=Math.round(x),g[S+1]=Math.round(y),g[S+2]=Math.round(w),g[S+3]=Math.round(_);return n!=null&&(n.width=a,n.height=i,E=n.getContext("2d"),b=new ImageData(g,a,i),E.putImageData(b,0,0)),t!==e&&t.dispose(),[2,g]}})})},fromPixels:$F}),jF=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(n,t){return new n(t)},e}(),GF=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(n){e.getMap().classNameMap[n.className]=[n,n.fromConfig]},e}();function so(e){P(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),P(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),P(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),GF.register(e)}var uo=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return $r(n,e),n.prototype.minimize=function(t,r,i){r===void 0&&(r=!1);var a=this.computeGradients(t,i),o=a.value,s=a.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return jn(s),r?o:(o.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(t,r){return n3(t,r)},n.prototype.dispose=function(){this.iterations_!=null&&jn(this.iterations_)},n.prototype.saveIterations=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Ee(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return Re(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(t){return Ae(this,void 0,void 0,function(){var r;return Re(this,function(i){switch(i.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,t.slice(1)]}})})},n}(jF);Object.defineProperty(uo,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var XF=function(e){function n(t,r,i){i===void 0&&(i=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],i==null&&(a.epsilon=j.backend.epsilon()),a}return $r(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=j.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accum_grad",variable:be(function(){return Ke(o).variable(!1)})}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:i+"/accum_var",variable:be(function(){return Ke(o).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[i];if(s!=null){var u=r.accumulatedGrads[a].variable,l=r.accumulatedUpdates[a].variable;be(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),h=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(c),l.assign(h);var d=f.mul(-r.learningRate).add(o);o.assign(d)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(jn(this.accumulatedGrads.map(function(t){return t.variable})),jn(this.accumulatedUpdates.map(function(t){return t.variable})))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var t;return Re(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){var r;return Re(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(uo);so(XF);var KF=function(e){function n(t,r){r===void 0&&(r=.1);var i=e.call(this)||this;return i.learningRate=t,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return $r(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=j.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accumulator",variable:be(function(){return ui(o.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[i];if(s!=null){var u=r.accumulatedGrads[a].variable;be(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(j.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(c)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&jn(this.accumulatedGrads.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return Re(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(uo);so(KF);var qF=function(e){function n(t,r,i,a){a===void 0&&(a=null);var o=e.call(this)||this;return o.learningRate=t,o.beta1=r,o.beta2=i,o.epsilon=a,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],be(function(){o.accBeta1=Ee(r).variable(),o.accBeta2=Ee(i).variable()}),a==null&&(o.epsilon=j.backend.epsilon()),o}return $r(n,e),n.prototype.applyGradients=function(t){var r=this,i=Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t);be(function(){var a=Ht(1,r.accBeta1),o=Ht(1,r.accBeta2);i.forEach(function(s,u){var l=j.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:be(function(){return Ke(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:be(function(){return Ke(l).variable(!1)})});var c=Array.isArray(t)?t[u].tensor:t[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedSecondMoment[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),v=h.mul(r.beta2).add(c.square().mul(1-r.beta2)),p=d.div(a),g=v.div(o);f.assign(d),h.assign(v);var m=p.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(m)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&jn(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&jn(this.accumulatedSecondMoment.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var t;return Re(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){var r,i=this;return Re(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),be(function(){i.accBeta1.assign(tf(i.beta1,i.iterations_+1)),i.accBeta2.assign(tf(i.beta2,i.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(uo);so(qF);var YF=function(e){function n(t,r,i,a,o){a===void 0&&(a=null),o===void 0&&(o=0);var s=e.call(this)||this;return s.learningRate=t,s.beta1=r,s.beta2=i,s.epsilon=a,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],be(function(){s.iteration=Ee(0).variable(),s.accBeta1=Ee(r).variable()}),a==null&&(s.epsilon=j.backend.epsilon()),s}return $r(n,e),n.prototype.applyGradients=function(t){var r=this,i=Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t);be(function(){var a=Ht(1,r.accBeta1),o=Or(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=j.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Ke(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Ke(l).variable(!1)});var c=Array.isArray(t)?t[u].tensor:t[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedWeightedInfNorm[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),v=h.mul(r.beta2),p=c.abs(),g=v.maximum(p);f.assign(d),h.assign(g);var m=o.div(a).mul(d.div(g.add(r.epsilon))).add(l);l.assign(m)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&jn(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&jn(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return Re(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(uo);so(YF);var Zw=function(e){function n(t){var r=e.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return $r(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=Array.isArray(t)?t[a].tensor:t[i];if(o!=null){var s=j.registeredVariables[i];be(function(){var u=r.c.mul(o).add(s);s.assign(u)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=m4(Ee(-t))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return Re(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(t,r){return new t(r.learningRate)},n.className="SGD",n}(uo);so(Zw);var QF=function(e){function n(t,r,i){i===void 0&&(i=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Ee(a.momentum),a}return $r(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=j.registeredVariables[i];r.accumulations[a]==null&&(r.accumulations[a]={originalName:i+"/momentum",variable:be(function(){return Ke(o).variable(!1)})});var s=r.accumulations[a].variable,u=Array.isArray(t)?t[a].tensor:t[i];u!=null&&be(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(o):r.c.mul(c).add(o),s.assign(c),o.assign(l)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&jn(this.accumulations.map(function(t){return t.variable}))},n.prototype.setMomentum=function(t){this.momentum=t},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Re(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return Re(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(Zw);so(QF);var JF=function(e){function n(t,r,i,a,o){r===void 0&&(r=.9),i===void 0&&(i=0),a===void 0&&(a=null),o===void 0&&(o=!1);var s=e.call(this)||this;if(s.learningRate=t,s.decay=r,s.momentum=i,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,a==null&&(s.epsilon=j.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return $r(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t)).forEach(function(i,a){var o=j.registeredVariables[i];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:i+"/rms",variable:be(function(){return Ke(o).variable(!1)})}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:i+"/momentum",variable:be(function(){return Ke(o).variable(!1)})}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:i+"/mg",variable:be(function(){return Ke(o).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[i];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,l=r.accumulatedMoments[a].variable;be(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,h=f.mul(r.decay).add(s.mul(1-r.decay)),d=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(h.square().add(r.epsilon)).sqrt()));u.assign(c),f.assign(h),l.assign(d);var v=o.sub(d);o.assign(v)}else{var p=u.mul(r.decay).add(s.square().mul(1-r.decay));d=l.mul(r.momentum).add(s.mul(r.learningRate).div(p.add(r.epsilon).sqrt())),u.assign(p),l.assign(d),v=o.sub(d),o.assign(v)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&jn(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&jn(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&jn(this.accumulatedMoments.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var t;return Re(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){var r;return Re(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(uo);so(JF);yt.prototype.squaredDifference=function(e){return pw(this,e)},ne=CF;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ip=function(e,n){return Ip=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Ip(e,n)};function We(e,n){Ip(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var wn=function(){return wn=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},wn.apply(this,arguments)};function Pe(e,n,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((r=r.apply(e,[])).next())})}function Oe(e,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(c){l=[6,c],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function uu(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var r=Array(e),i=0,n=0;n<t;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var ns=function(){function e(n,t){if(!$a(n)||!$a(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:t}));this._width=n,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function Kf(e,n){return e instanceof yt&&e.shape.length===n}function ZF(e){return Kf(e,2)}function qf(e){return Kf(e,3)}function fa(e){return Kf(e,4)}function eI(e){return e%1!==0}function ug(e){return e%2===0}function tI(e,n){n===void 0&&(n=2);var t=Math.pow(10,n);return Math.floor(e*t)/t}function lg(e){return e&&e.width&&e.height}function nI(e,n){var t=e.width,r=e.height,i=n/Math.max(r,t);return new ns(Math.round(t*i),Math.round(r*i))}function cv(e){return e.reduce(function(n,t){return n.add(t)},new Ze(0,0)).div(new Ze(e.length,e.length))}function Lu(e,n,t){return Array(e).fill(0).map(function(r,i){return n+i*t})}function $a(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function cg(e){return $a(e)&&0<=e&&e<=1}var Ze=function(){function e(n,t){this._x=n,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(n){return new e(this.x+n.x,this.y+n.y)},e.prototype.sub=function(n){return new e(this.x-n.x,this.y-n.y)},e.prototype.mul=function(n){return new e(this.x*n.x,this.y*n.y)},e.prototype.div=function(n){return new e(this.x/n.x,this.y/n.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),va=function(){function e(n,t){t===void 0&&(t=!0);var r=n||{},i=[r.left,r.top,r.right,r.bottom].every($a),a=[r.x,r.y,r.width,r.height].every($a);if(!a&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],u=o[1],l=o[2],c=o[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",t),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every($a)},e.assertIsValidBox=function(n,t,r){if(r===void 0&&(r=!1),!e.isRect(n))throw new Error(t+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(t+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Ze(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Ze(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Ze(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Ze(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),t=n[0],r=n[1],i=n[2],a=n[3];return new e({x:t,y:r,width:i,height:a})},e.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),t=n[0],r=n[1],i=n[2],a=n[3];return new e({x:t,y:r,width:i,height:a})},e.prototype.toSquare=function(){var n=this,t=n.x,r=n.y,i=n.width,a=n.height,o=Math.abs(i-a);return i<a&&(t-=o/2,i+=o),a<i&&(r-=o/2,a+=o),new e({x:t,y:r,width:i,height:a})},e.prototype.rescale=function(n){var t=lg(n)?n.width:n,r=lg(n)?n.height:n;return new e({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},e.prototype.pad=function(n,t){var r=[this.x-n/2,this.y-t/2,this.width+n,this.height+t],i=r[0],a=r[1],o=r[2],s=r[3];return new e({x:i,y:a,width:o,height:s})},e.prototype.clipAtImageBorders=function(n,t){var r=this,i=r.x,a=r.y,o=r.right,s=r.bottom,u=Math.max(i,0),l=Math.max(a,0),c=o-u,f=s-l,h=Math.min(c,n-u),d=Math.min(f,t-l);return new e({x:u,y:l,width:h,height:d}).floor()},e.prototype.shift=function(n,t){var r=this,i=r.width,a=r.height,o=this.x+n,s=this.y+t;return new e({x:o,y:s,width:i,height:a})},e.prototype.padAtBorders=function(n,t){var r=this.width+1,i=this.height+1,a=1,o=1,s=r,u=i,l=this.left,c=this.top,f=this.right,h=this.bottom;return f>t&&(s=-f+t+r,f=t),h>n&&(u=-h+n+i,h=n),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:o,edy:u,dx:a,edx:s,y:c,ey:h,x:l,ex:f,w:r,h:i}},e.prototype.calibrate=function(n){return new e({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},e}(),Yf=function(e){We(n,e);function n(t,r,i,a,o){return o===void 0&&(o=!1),e.call(this,{left:t,top:r,right:i,bottom:a},o)||this}return n}(va),e_=function(){function e(n,t,r,i,a){this._imageDims=new ns(a.width,a.height),this._score=n,this._classScore=t,this._className=r,this._box=new va(i).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new va(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(n,t){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:t})},e}(),pi=function(e){We(n,e);function n(t,r,i){return e.call(this,t,t,"",r,i)||this}return n.prototype.forSize=function(t,r){var i=e.prototype.forSize.call(this,t,r),a=i.score,o=i.relativeBox,s=i.imageDims;return new n(a,o,s)},n}(e_);function rI(e,n,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(e.right,n.right)-Math.max(e.left,n.left)),i=Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),a=r*i;return t?a/(e.area+n.area-a):a/Math.min(e.area,n.area)}function iI(e){var n=e.map(function(s){return s.x}),t=e.map(function(s){return s.y}),r=n.reduce(function(s,u){return u<s?u:s},1/0),i=t.reduce(function(s,u){return u<s?u:s},1/0),a=n.reduce(function(s,u){return s<u?u:s},0),o=t.reduce(function(s,u){return s<u?u:s},0);return new Yf(r,i,a,o)}function Bu(e,n,t,r){r===void 0&&(r=!0);for(var i=n.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],o=function(){var s=i.pop();a.push(s);for(var u=i,l=[],c=0;c<u.length;c++){var f=u[c],h=e[s],d=e[f];l.push(rI(h,d,r))}i=i.filter(function(v,p){return l[p]<=t})};i.length>0;)o();return a}function al(e,n){return be(function(){var t=n[0],r=n[1],i=n[2],a=ui(uu(e.shape.slice(0,3),[1]),t),o=ui(uu(e.shape.slice(0,3),[1]),r),s=ui(uu(e.shape.slice(0,3),[1]),i),u=Wt([a,o,s],3);return Ht(e,u)})}function aI(e,n){return n===void 0&&(n=!1),be(function(){var t=e.shape.slice(1),r=t[0],i=t[1];if(r===i)return e;var a=Math.abs(r-i),o=Math.round(a*(n?.5:1)),s=r>i?2:1,u=function(d){var v=e.shape.slice();return v[s]=d,ui(v,0)},l=u(o),c=a-l.shape[s],f=n&&c?u(c):null,h=[f,e,l].filter(function(d){return!!d}).map(function(d){return d.toFloat()});return Wt(h,s)})}function sd(e){return 1/(1+Math.exp(-e))}var fv=function(e){We(n,e);function n(t,r,i,a,o){return o===void 0&&(o=!1),e.call(this,{x:t,y:r,width:i,height:a},o)||this}return n}(va),oI=.5,sI=.43,uI=.45,af=function(){function e(n,t,r){r===void 0&&(r=new Ze(0,0));var i=t.width,a=t.height;this._imgDims=new ns(i,a),this._shift=r,this._positions=n.map(function(o){return o.mul(new Ze(i,a)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Ze(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(t){return t.sub(n._shift).div(new Ze(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(n,t){return new this.constructor(this.relativePositions,{width:n,height:t})},e.prototype.shiftBy=function(n,t){return new this.constructor(this.relativePositions,this._imgDims,new Ze(n,t))},e.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},e.prototype.align=function(n,t){if(t===void 0&&(t={}),n){var r=n instanceof pi?n.box.floor():new va(n);return this.shiftBy(r.x,r.y).align(null,t)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),a=i.useDlibAlignment,o=i.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),t=n[0],r=n[1],i=n[2],a=function(f){return i.sub(f).magnitude()},o=(a(t)+a(r))/2,s=Math.floor(o/uI),u=cv(n),l=Math.floor(Math.max(0,u.x-oI*s)),c=Math.floor(Math.max(0,u.y-sI*s));return new fv(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},e.prototype.alignMinBbox=function(n){var t=iI(this.positions);return t.pad(t.width*n,t.height*n)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),lI=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],cv([t[3],t[4]])]},n}(af),cI=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(cv)},n}(af),fg=function(){function e(n,t){this._label=n,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+tI(this.distance)+")":"")},e}(),hg=function(e){We(n,e);function n(t,r){var i=e.call(this,t)||this;return i._label=r,i}return n.assertIsValidLabeledBox=function(t,r){if(va.assertIsValidBox(t,r),!$a(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(va),Hl=function(){function e(n,t){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},e.fromJSON=function(n){var t=n.descriptors.map(function(r){return new Float32Array(r)});return new e(n.label,t)},e}();(function(e){We(n,e);function n(t,r,i,a){var o=e.call(this,t,r)||this;return o._score=i,o._classScore=a,o}return n.assertIsValidPredictedBox=function(t,r){if(hg.assertIsValidLabeledBox(t,r),!cg(t.score)||!cg(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n})(hg);function fI(e){return e.detection instanceof pi}function hv(e,n){var t={detection:n};return Object.assign({},e,t)}function t_(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:n}}function n_(e){var n="";if(!e)try{e=require("fs")}catch(r){n=r.toString()}var t=e?function(r){return new Promise(function(i,a){e.readFile(r,function(o,s){return o?a(o):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:t}}function r_(){var e=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,t=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=n_();return wn({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:n||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:t,createImageElement:r,fetch:i},a)}function i_(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function a_(){return typeof global=="object"&&typeof require=="function"&&typeof xS<"u"&&typeof process<"u"&&!!process.version}var Mt;function hI(){if(!Mt)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Mt}function Np(e){Mt=e}function dv(){i_()&&Np(t_()),a_()&&Np(r_())}function dI(e){if(Mt||dv(),!Mt)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=e.Canvas,t=n===void 0?Mt.Canvas:n,r=e.Image,i=r===void 0?Mt.Image:r;Mt.Canvas=t,Mt.Image=i,Mt.createCanvasElement=e.createCanvasElement||function(){return new t},Mt.createImageElement=e.createImageElement||function(){return new i},Mt.ImageData=e.ImageData||Mt.ImageData,Mt.Video=e.Video||Mt.Video,Mt.fetch=e.fetch||Mt.fetch,Mt.readFile=e.readFile||Mt.readFile}var kn={getEnv:hI,setEnv:Np,initialize:dv,createBrowserEnv:t_,createFileSystem:n_,createNodejsEnv:r_,monkeyPatch:dI,isBrowser:i_,isNodejs:a_};dv();function o_(e){return!kn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Ja(e){var n=kn.getEnv(),t=n.Canvas,r=n.CanvasRenderingContext2D;if(e instanceof r)return e;var i=o_(e);if(!(i instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=i.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var dg;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(dg||(dg={}));function s_(e){var n=kn.getEnv(),t=n.Image,r=n.Video;return e instanceof t&&e.complete||e instanceof r&&e.readyState>=3}function pI(e){return new Promise(function(n,t){if(e instanceof kn.getEnv().Canvas||s_(e))return n();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),n(a))}function i(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),t(a))}e.addEventListener("load",r),e.addEventListener("error",i)})}function u_(e){var n=kn.getEnv(),t=n.Image,r=n.Video;return e instanceof t?new ns(e.naturalWidth,e.naturalHeight):e instanceof r?new ns(e.videoWidth,e.videoHeight):new ns(e.width,e.height)}function Qf(e){var n=e.width,t=e.height,r=kn.getEnv().createCanvasElement,i=r();return i.width=n,i.height=t,i}function pv(e,n){var t=kn.getEnv().ImageData;if(!(e instanceof t)&&!s_(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=u_(e),i=r.width,a=r.height,o=Qf({width:i,height:a});return e instanceof t?Ja(o).putImageData(e,0,0):Ja(o).drawImage(e,0,0,i,a),o}function vI(e,n){return Pe(this,void 0,void 0,function(){var t,r,i,a,o,s;return Oe(this,function(u){switch(u.label){case 0:return t=kn.getEnv().createCanvasElement(),r=e.shape.slice(fa(e)?1:0),i=r[0],a=r[1],o=r[2],s=be(function(){return e.as3D(i,a,o).toInt()}),[4,lv.toPixels(s,t)];case 1:return u.sent(),s.dispose(),[2,t]}})})}function pg(e){var n=kn.getEnv(),t=n.Image,r=n.Canvas,i=n.Video;return e instanceof t||e instanceof r||e instanceof i}function mI(e,n,t){t===void 0&&(t=!1);var r=kn.getEnv(),i=r.Image,a=r.Canvas;if(!(e instanceof i||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=u_(e),s=n/Math.max(o.height,o.width),u=s*o.width,l=s*o.height,c=Qf({width:n,height:n}),f=e instanceof a?e:pv(e),h=Math.abs(u-l)/2,d=t&&u<l?h:0,v=t&&l<u?h:0;return Ja(c).drawImage(f,d,v,u,l),c}var of=function(){function e(n,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=t,this._batchSize=n.length,n.forEach(function(i,a){if(qf(i)){r._imageTensors[a]=i,r._inputDimensions[a]=i.shape;return}if(fa(i)){var o=i.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[a]=i,r._inputDimensions[a]=i.shape.slice(1);return}var s=i instanceof kn.getEnv().Canvas?i:pv(i);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var n=this;return Lu(this.batchSize,0,1).map(function(t,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},e.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},e.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},e.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},e.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(n),r=this.getInputHeight(n);return nI({width:t,height:r},this.inputSize)},e.prototype.toBatchTensor=function(n,t){var r=this;return t===void 0&&(t=!0),this._inputSize=n,be(function(){var i=Lu(r.batchSize,0,1).map(function(o){var s=r.getInput(o);if(s instanceof yt){var u=fa(s)?s:s.expandDims();return u=aI(u,t),(u.shape[1]!==n||u.shape[2]!==n)&&(u=rv.resizeBilinear(u,[n,n])),u.as3D(n,n,3)}if(s instanceof kn.getEnv().Canvas)return lv.fromPixels(mI(s,n,t));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=cr(i.map(function(o){return o.toFloat()})).as4D(r.batchSize,n,n,3);return a})},e}();function Zt(e){return Pe(this,void 0,void 0,function(){var n,t,r;return Oe(this,function(i){switch(i.label){case 0:if(e instanceof of)return[2,e];if(n=Array.isArray(e)?e:[e],!n.length)throw new Error("toNetInput - empty array passed as input");return t=function(a){return Array.isArray(e)?" at input index "+a+":":""},r=n.map(o_),r.forEach(function(a,o){if(!pg(a)&&!qf(a)&&!fa(a))throw typeof n[o]=="string"?new Error("toNetInput -"+t(o)+" string passed, but could not resolve HTMLElement for element id "+n[o]):new Error("toNetInput -"+t(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(fa(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+t(o)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return pg(a)&&pI(a)}))];case 1:return i.sent(),[2,new of(r,Array.isArray(e))]}})})}function vv(e,n){return Pe(this,void 0,void 0,function(){var t,r,i,a,o,s,u;return Oe(this,function(l){switch(l.label){case 0:return t=kn.getEnv().Canvas,r=e,e instanceof t?[3,5]:[4,Zt(e)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=i.getInput(0),a instanceof t?(o=a,[3,4]):[3,2];case 2:return[4,vI(a)];case 3:o=l.sent(),l.label=4;case 4:r=o,l.label=5;case 5:return s=Ja(r),u=n.map(function(c){return c instanceof pi?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var f=c.x,h=c.y,d=c.width,v=c.height,p=Qf({width:d,height:v});return Ja(p).putImageData(s.getImageData(f,h,d,v),0,0),p})]}})})}function mv(e,n){return Pe(this,void 0,void 0,function(){return Oe(this,function(t){if(!qf(e)&&!fa(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(fa(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,be(function(){var r=e.shape.slice(fa(e)?1:0),i=r[0],a=r[1],o=r[2],s=n.map(function(l){return l instanceof pi?l.forSize(a,i).box:l}).map(function(l){return l.clipAtImageBorders(a,i)}),u=s.map(function(l){var c=l.x,f=l.y,h=l.width,d=l.height;return Ow(e.as3D(i,a,o),[f,c,0],[d,h,o])});return u})]})})}function gI(e,n){return Pe(this,void 0,void 0,function(){var t,r;return Oe(this,function(i){switch(i.label){case 0:return t=kn.getEnv().fetch,[4,t(e,n)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function xI(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){switch(n.label){case 0:return[4,gI(e)];case 1:return[2,n.sent().json()]}})})}function l_(e,n){var t=n+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:t};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var i=e.split("/").filter(function(s){return s}),a=e.endsWith(".json")?i[i.length-1]:t,o=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+a:o+"/"+a}}function yI(e,n){return Pe(this,void 0,void 0,function(){var t,r,i,a;return Oe(this,function(o){switch(o.label){case 0:return t=l_(e,n),r=t.manifestUri,i=t.modelBaseUri,[4,xI(r)];case 1:return a=o.sent(),[2,Jw.loadWeights(a,i)]}})})}var Li=function(){function e(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(n){var t=this.traversePropertyPath(n),r=t.obj,i=t.objProp;return r[i]},e.prototype.reassignParamFromPath=function(n,t){var r=this.traversePropertyPath(n),i=r.obj,a=r.objProp;i[a].dispose(),i[a]=t},e.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof ms})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof ms)})},e.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(t){var r=t.path,i=t.tensor;n.reassignParamFromPath(r,i.variable())})},e.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(t){var r=t.path,i=t.tensor,a=sn(i.dataSync());i.dispose(),n.reassignParamFromPath(r,a)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(t){if(n&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var t=n.tensor;return Array.from(t.dataSync())}).reduce(function(n,t){return n.concat(t)}))},e.prototype.load=function(n){return Pe(this,void 0,void 0,function(){return Oe(this,function(t){switch(t.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(n){return Pe(this,void 0,void 0,function(){var t;return Oe(this,function(r){switch(r.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,yI(n,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(n){return Pe(this,void 0,void 0,function(){var t,r,i,a,o,s,u,l,c,f;return Oe(this,function(h){switch(h.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=kn.getEnv().readFile,r=l_(n,this.getDefaultModelName()),i=r.manifestUri,a=r.modelBaseUri,o=function(d){return Promise.all(d.map(function(v){return t(v).then(function(p){return p.buffer})}))},s=Jw.weightsLoaderFactory(o),c=(l=JSON).parse,[4,t(i)];case 1:return u=c.apply(l,[h.sent().toString()]),[4,s(u,a)];case 2:return f=h.sent(),this.loadFromWeightMap(f),[2]}})})},e.prototype.loadFromWeightMap=function(n){var t=this.extractParamsFromWeigthMap(n),r=t.paramMappings,i=t.params;this._paramMappings=r,this._params=i},e.prototype.extractWeights=function(n){var t=this.extractParams(n),r=t.paramMappings,i=t.params;this._paramMappings=r,this._params=i},e.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=n.split("/").reduce(function(a,o){if(!a.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+n);return{obj:a.nextObj,objProp:o,nextObj:a.nextObj[o]}},{nextObj:this.params}),r=t.obj,i=t.objProp;if(!r||!i||!(r[i]instanceof yt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:i}},e}();function ur(e,n,t){return be(function(){var r=J0(e,n.depthwise_filter,n.pointwise_filter,t,"same");return r=je(r,n.bias),r})}function ud(e,n,t){return t===void 0&&(t=!1),be(function(){var r=wt(t?je(Tr(e,n.conv0.filters,[2,2],"same"),n.conv0.bias):ur(e,n.conv0,[2,2])),i=ur(r,n.conv1,[1,1]),a=wt(je(r,i)),o=ur(a,n.conv2,[1,1]);return wt(je(r,je(i,o)))})}function $l(e,n,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),be(function(){var i=wt(t?je(Tr(e,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):ur(e,n.conv0,r?[2,2]:[1,1])),a=ur(i,n.conv1,[1,1]),o=wt(je(i,a)),s=ur(o,n.conv2,[1,1]),u=wt(je(i,je(a,s))),l=ur(u,n.conv3,[1,1]);return wt(je(i,je(a,je(s,l))))})}function zr(e,n,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),be(function(){var i=je(Tr(e,n.filters,[1,1],t),n.bias);return r?wt(i):i})}function Bi(e,n){Object.keys(e).forEach(function(t){n.some(function(r){return r.originalPath===t})||e[t].dispose()})}function Jf(e,n){return function(t,r,i,a){var o=Un(e(t*r*i*i),[i,i,t,r]),s=Dt(e(r));return n.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}}function gv(e,n){return function(t,r,i){var a=la(e(t*r),[t,r]),o=Dt(e(r));return n.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:o}}}var c_=function(){function e(n,t,r){this.depthwise_filter=n,this.pointwise_filter=t,this.bias=r}return e}();function xv(e,n){return function(t,r,i){var a=Un(e(9*t),[3,3,t,1]),o=Un(e(t*r),[1,1,t,r]),s=Dt(e(r));return n.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new c_(a,o,s)}}function yv(e){return function(n){var t=e(n+"/depthwise_filter",4),r=e(n+"/pointwise_filter",4),i=e(n+"/bias",1);return new c_(t,r,i)}}function ba(e,n){return function(t,r,i){var a=e[t];if(!Kf(a,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+a);return n.push({originalPath:t,paramPath:i||t}),a}}function Ui(e){var n=e;function t(i){var a=n.slice(0,i);return n=n.slice(i),a}function r(){return n}return{extractWeights:t,getRemainingWeights:r}}function f_(e,n){var t=Jf(e,n),r=xv(e,n);function i(o,s,u,l){l===void 0&&(l=!1);var c=l?t(o,s,3,u+"/conv0"):r(o,s,u+"/conv0"),f=r(s,s,u+"/conv1"),h=r(s,s,u+"/conv2");return{conv0:c,conv1:f,conv2:h}}function a(o,s,u,l){l===void 0&&(l=!1);var c=i(o,s,u,l),f=c.conv0,h=c.conv1,d=c.conv2,v=r(s,s,u+"/conv3");return{conv0:f,conv1:h,conv2:d,conv3:v}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function wI(e){var n=[],t=Ui(e),r=t.extractWeights,i=t.getRemainingWeights,a=f_(r,n).extractDenseBlock4Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:o,dense1:s,dense2:u,dense3:l}}}function h_(e){return function(n){var t=e(n+"/filters",4),r=e(n+"/bias",1);return{filters:t,bias:r}}}function d_(e,n){var t=ba(e,n),r=h_(t),i=yv(t);function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function o(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2"),h=i(s+"/conv3");return{conv0:l,conv1:c,conv2:f,conv3:h}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function _I(e){var n=[],t=d_(e,n).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return Bi(e,n),{params:r,paramMappings:n}}var p_=function(e){We(n,e);function n(){return e.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return be(function(){var i=t.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=al(i,a).div(Ee(255)),s=$l(o,r.dense0,!0);return s=$l(s,r.dense1),s=$l(s,r.dense2),s=$l(s,r.dense3),s=rl(s,[7,7],[2,2],"valid"),s})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(t){return _I(t)},n.prototype.extractParams=function(t){return wI(t)},n}(Li);function ri(e,n){return be(function(){return je(jf(e,n.weights),n.bias)})}function EI(e,n,t){var r=[],i=Ui(e),a=i.extractWeights,o=i.getRemainingWeights,s=gv(a,r),u=s(n,t,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:u}}}function SI(e){var n=[],t=ba(e,n);function r(a){var o=t(a+"/weights",2),s=t(a+"/bias",1);return{weights:o,bias:s}}var i={fc:r("fc")};return Bi(e,n),{params:i,paramMappings:n}}function v_(e){var n={},t={};return Object.keys(e).forEach(function(r){var i=r.startsWith("fc")?t:n;i[r]=e[r]}),{featureExtractorMap:n,classifierMap:t}}var m_=function(e){We(n,e);function n(t,r){var i=e.call(this,t)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(t){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return be(function(){var a=t instanceof of?r.faceFeatureExtractor.forwardInput(t):t;return ri(a.as2D(a.shape[0],-1),i.fc)})},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},n.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},n.prototype.extractClassifierParams=function(t){return EI(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(t){var r=v_(t),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),SI(a)},n.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),a=i*r+i,o=t.slice(0,t.length-a),s=t.slice(t.length-a);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},n}(Li),vg=["neutral","happy","sad","angry","fearful","disgusted","surprised"],CI=function(){function e(n){var t=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);vg.forEach(function(r,i){t[r]=n[i]})}return e.prototype.asSortedArray=function(){var n=this;return vg.map(function(t){return{expression:t,probability:n[t]}}).sort(function(t,r){return r.probability-t.probability})},e}(),bI=function(e){We(n,e);function n(t){return t===void 0&&(t=new p_),e.call(this,"FaceExpressionNet",t)||this}return n.prototype.forwardInput=function(t){var r=this;return be(function(){return Oi(r.runNet(t))})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.predictExpressions=function(t){return Pe(this,void 0,void 0,function(){var r,i,a,o,s=this;return Oe(this,function(u){switch(u.label){case 0:return[4,Zt(t)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(zt(i).map(function(l){return Pe(s,void 0,void 0,function(){var c;return Oe(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return c=f.sent(),l.dispose(),[2,c]}})})}))];case 3:return a=u.sent(),i.dispose(),o=a.map(function(l){return new CI(l)}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(m_);function g_(e,n){var t={expressions:n};return Object.assign({},e,t)}function TI(e){return fI(e)&&e.landmarks instanceof af&&e.unshiftedLandmarks instanceof af&&e.alignedRect instanceof pi}function wv(e,n){var t=e.detection.box,r=n.shiftBy(t.x,t.y),i=r.align(),a=e.detection.imageDims,o=new pi(e.detection.score,i.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:n,alignedRect:o};return Object.assign({},e,s)}function kI(e,n){var t=Jf(e,n),r=xv(e,n);function i(o,s,u){var l=r(o,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),f=t(o,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:f}}function a(o,s){var u=r(o,o,s+"/separable_conv0"),l=r(o,o,s+"/separable_conv1"),c=r(o,o,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:a}}function AI(e,n){var t=[],r=Ui(e),i=r.extractWeights,a=r.getRemainingWeights,o=kI(i,t),s=o.extractConvParams,u=o.extractSeparableConvParams,l=o.extractReductionBlockParams,c=o.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),h=l(32,64,"entry_flow/reduction_block_0"),d=l(64,128,"entry_flow/reduction_block_1"),v={conv_in:f,reduction_block_0:h,reduction_block_1:d},p={};Lu(n,0,1).forEach(function(y){p["main_block_"+y]=c(128,"middle_flow/main_block_"+y)});var g=l(128,256,"exit_flow/reduction_block"),m=u(256,512,"exit_flow/separable_conv"),x={reduction_block:g,separable_conv:m};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{entry_flow:v,middle_flow:p,exit_flow:x}}}function RI(e,n){var t=ba(e,n),r=h_(t),i=yv(t);function a(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function o(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=i(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:a,extractMainBlockParams:o}}function FI(e,n){var t=[],r=RI(e,t),i=r.extractConvParams,a=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=i("entry_flow/conv_in"),l=o("entry_flow/reduction_block_0"),c=o("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:c},h={};Lu(n,0,1).forEach(function(g){h["main_block_"+g]=s("middle_flow/main_block_"+g)});var d=o("exit_flow/reduction_block"),v=a("exit_flow/separable_conv"),p={reduction_block:d,separable_conv:v};return Bi(e,t),{params:{entry_flow:f,middle_flow:h,exit_flow:p},paramMappings:t}}function x_(e,n,t){return je(Tr(e,n.filters,t,"same"),n.bias)}function ld(e,n,t){t===void 0&&(t=!0);var r=t?wt(e):e;return r=ur(r,n.separable_conv0,[1,1]),r=ur(wt(r),n.separable_conv1,[1,1]),r=Gt(r,[3,3],[2,2],"same"),r=je(r,x_(e,n.expansion_conv,[2,2])),r}function II(e,n){var t=ur(wt(e),n.separable_conv0,[1,1]);return t=ur(wt(t),n.separable_conv1,[1,1]),t=ur(wt(t),n.separable_conv2,[1,1]),t=je(t,e),t}var NI=function(e){We(n,e);function n(t){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return n.prototype.forwardInput=function(t){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return be(function(){var a=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=al(a,o).div(Ee(256)),u=wt(x_(s,i.entry_flow.conv_in,[2,2]));return u=ld(u,i.entry_flow.reduction_block_0,!1),u=ld(u,i.entry_flow.reduction_block_1),Lu(r._numMainBlocks,0,1).forEach(function(l){u=II(u,i.middle_flow["main_block_"+l])}),u=ld(u,i.exit_flow.reduction_block),u=wt(ur(u,i.exit_flow.separable_conv,[1,1])),u})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(t){return FI(t,this._numMainBlocks)},n.prototype.extractParams=function(t){return AI(t,this._numMainBlocks)},n}(Li);function DI(e){var n=[],t=Ui(e),r=t.extractWeights,i=t.getRemainingWeights,a=gv(r,n),o=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{fc:{age:o,gender:s}}}}function PI(e){var n=[],t=ba(e,n);function r(a){var o=t(a+"/weights",2),s=t(a+"/bias",1);return{weights:o,bias:s}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Bi(e,n),{params:i,paramMappings:n}}var sf;(function(e){e.FEMALE="female",e.MALE="male"})(sf||(sf={}));var OI=function(e){We(n,e);function n(t){t===void 0&&(t=new NI(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(t){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return be(function(){var a=t instanceof of?r.faceFeatureExtractor.forwardInput(t):t,o=rl(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=ri(o,i.fc.age).as1D(),u=ri(o,i.fc.gender);return{age:s,gender:u}})},n.prototype.forwardInput=function(t){var r=this;return be(function(){var i=r.runNet(t),a=i.age,o=i.gender;return{age:a,gender:Oi(o)}})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.predictAgeAndGender=function(t){return Pe(this,void 0,void 0,function(){var r,i,a,o,s,u,l=this;return Oe(this,function(c){switch(c.label){case 0:return[4,Zt(t)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return i=c.sent(),a=zt(i.age),o=zt(i.gender),s=a.map(function(f,h){return{ageTensor:f,genderTensor:o[h]}}),[4,Promise.all(s.map(function(f){var h=f.ageTensor,d=f.genderTensor;return Pe(l,void 0,void 0,function(){var v,p,g,m,x;return Oe(this,function(y){switch(y.label){case 0:return[4,h.data()];case 1:return v=y.sent()[0],[4,d.data()];case 2:return p=y.sent()[0],g=p>.5,m=g?sf.MALE:sf.FEMALE,x=g?p:1-p,h.dispose(),d.dispose(),[2,{age:v,gender:m,genderProbability:x}]}})})}))];case 3:return u=c.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},n.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},n.prototype.extractClassifierParams=function(t){return DI(t)},n.prototype.extractParamsFromWeigthMap=function(t){var r=v_(t),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),PI(a)},n.prototype.extractParams=function(t){var r=1539,i=t.slice(0,t.length-r),a=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},n}(Li),y_=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.postProcess=function(t,r,i){var a=i.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),o=a.length;return be(function(){var s=function(h,d){return cr([ui([68],h),ui([68],d)],1).as2D(1,136).as1D()},u=function(h,d){var v=a[h],p=v.width,g=v.height;return d(p,g)?Math.abs(p-g)/2:0},l=function(h){return u(h,function(d,v){return d<v})},c=function(h){return u(h,function(d,v){return v<d})},f=t.mul(ui([o,136],r)).sub(cr(Array.from(Array(o),function(h,d){return s(l(d),c(d))}))).div(cr(Array.from(Array(o),function(h,d){return s(a[d].width,a[d].height)})));return f})},n.prototype.forwardInput=function(t){var r=this;return be(function(){var i=r.runNet(t);return r.postProcess(i,t.inputSize,t.inputDimensions.map(function(a){var o=a[0],s=a[1];return{height:o,width:s}}))})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.detectLandmarks=function(t){return Pe(this,void 0,void 0,function(){var r,i,a,o=this;return Oe(this,function(s){switch(s.label){case 0:return[4,Zt(t)];case 1:return r=s.sent(),i=be(function(){return zt(o.forwardInput(r))}),[4,Promise.all(i.map(function(u,l){return Pe(o,void 0,void 0,function(){var c,f,h,d,v;return Oe(this,function(p){switch(p.label){case 0:return h=(f=Array).from,[4,u.data()];case 1:return c=h.apply(f,[p.sent()]),d=c.filter(function(g,m){return ug(m)}),v=c.filter(function(g,m){return!ug(m)}),[2,new cI(Array(68).fill(0).map(function(g,m){return new Ze(d[m],v[m])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(m_),w_=function(e){We(n,e);function n(t){return t===void 0&&(t=new p_),e.call(this,"FaceLandmark68Net",t)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(y_);function MI(e){var n=[],t=d_(e,n).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return Bi(e,n),{params:r,paramMappings:n}}function LI(e){var n=[],t=Ui(e),r=t.extractWeights,i=t.getRemainingWeights,a=f_(r,n).extractDenseBlock3Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:o,dense1:s,dense2:u}}}var BI=function(e){We(n,e);function n(){return e.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return be(function(){var i=t.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=al(i,a).div(Ee(255)),s=ud(o,r.dense0,!0);return s=ud(s,r.dense1),s=ud(s,r.dense2),s=rl(s,[14,14],[2,2],"valid"),s})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(t){return MI(t)},n.prototype.extractParams=function(t){return LI(t)},n}(Li),UI=function(e){We(n,e);function n(t){return t===void 0&&(t=new BI),e.call(this,"FaceLandmark68TinyNet",t)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(y_);(function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n})(w_);function WI(e,n){return je(Sn(e,n.weights),n.biases)}function _v(e,n,t,r,i){i===void 0&&(i="same");var a=n.conv,o=a.filters,s=a.bias,u=Tr(e,o,t,i);return u=je(u,s),u=WI(u,n.scale),r?wt(u):u}function zI(e,n){return _v(e,n,[1,1],!0)}function __(e,n){return _v(e,n,[1,1],!1)}function E_(e,n){return _v(e,n,[2,2],!0,"valid")}function VI(e,n){function t(s,u,l){var c=e(s),f=c.length/(u*l*l);if(eI(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return be(function(){return pa(Un(c,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,c){var f=t(s,u,l),h=Dt(e(u));return n.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:h}}function i(s,u){var l=Dt(e(s)),c=Dt(e(s));return n.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function a(s,u,l,c){var f=r(s,u,l,c+"/conv"),h=i(u,c+"/scale");return{conv:f,scale:h}}function o(s,u,l,c,f){f===void 0&&(f=!1);var h=a((f?.5:1)*s,u,l,c+"/conv1"),d=a(s,u,l,c+"/conv2");return{conv1:h,conv2:d}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function HI(e){var n=Ui(e),t=n.extractWeights,r=n.getRemainingWeights,i=[],a=VI(t,i),o=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=o(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),d=s(36864,64,3,"conv64_1"),v=s(36864,64,3,"conv64_2"),p=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),m=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),_=s(589824,256,3,"conv256_2"),S=s(589824,256,3,"conv256_down_out"),E=be(function(){return pa(la(t(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var b={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:h,conv64_1:d,conv64_2:v,conv64_3:p,conv128_down:g,conv128_1:m,conv128_2:x,conv256_down:y,conv256_1:w,conv256_2:_,conv256_down_out:S,fc:E};return{params:b,paramMappings:i}}function $I(e,n){var t=ba(e,n);function r(o){var s=t(o+"/scale/weights",1),u=t(o+"/scale/biases",1);return{weights:s,biases:u}}function i(o){var s=t(o+"/conv/filters",4),u=t(o+"/conv/bias",1),l=r(o);return{conv:{filters:s,bias:u},scale:l}}function a(o){return{conv1:i(o+"/conv1"),conv2:i(o+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function jI(e){var n=[],t=$I(e,n),r=t.extractConvLayerParams,i=t.extractResidualLayerParams,a=r("conv32_down"),o=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),l=i("conv64_down"),c=i("conv64_1"),f=i("conv64_2"),h=i("conv64_3"),d=i("conv128_down"),v=i("conv128_1"),p=i("conv128_2"),g=i("conv256_down"),m=i("conv256_1"),x=i("conv256_2"),y=i("conv256_down_out"),w=e.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!ZF(w))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var _={conv32_down:a,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:h,conv128_down:d,conv128_1:v,conv128_2:p,conv256_down:g,conv256_1:m,conv256_2:x,conv256_down_out:y,fc:w};return Bi(e,n),{params:_,paramMappings:n}}function Kr(e,n){var t=zI(e,n.conv1);return t=__(t,n.conv2),t=je(t,e),t=wt(t),t}function jl(e,n){var t=E_(e,n.conv1);t=__(t,n.conv2);var r=rl(e,2,2,"valid"),i=ct(r.shape),a=r.shape[3]!==t.shape[3],o=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(o){var s=uu(t.shape);s[1]=1;var u=ct(s);t=Wt([t,u],1);var l=uu(t.shape);l[2]=1;var c=ct(l);t=Wt([t,c],2)}return r=a?Wt([r,i],3):r,t=je(r,t),t=wt(t),t}var GI=function(e){We(n,e);function n(){return e.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return be(function(){var i=t.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],o=al(i,a).div(Ee(256)),s=E_(o,r.conv32_down);s=Gt(s,3,2,"valid"),s=Kr(s,r.conv32_1),s=Kr(s,r.conv32_2),s=Kr(s,r.conv32_3),s=jl(s,r.conv64_down),s=Kr(s,r.conv64_1),s=Kr(s,r.conv64_2),s=Kr(s,r.conv64_3),s=jl(s,r.conv128_down),s=Kr(s,r.conv128_1),s=Kr(s,r.conv128_2),s=jl(s,r.conv256_down),s=Kr(s,r.conv256_1),s=Kr(s,r.conv256_2),s=jl(s,r.conv256_down_out);var u=s.mean([1,2]),l=jf(u,r.fc);return l})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.computeFaceDescriptor=function(t){return Pe(this,void 0,void 0,function(){var r,i,a,o=this;return Oe(this,function(s){switch(s.label){case 0:return[4,Zt(t)];case 1:return r=s.sent(),i=be(function(){return zt(o.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(t){return jI(t)},n.prototype.extractParams=function(t){return HI(t)},n}(Li);function S_(e,n){var t={descriptor:n};return Object.assign({},e,t)}function C_(e,n){var t={age:n};return Object.assign({},e,t)}function b_(e,n,t){var r={gender:n,genderProbability:t};return Object.assign({},e,r)}var T_=function(){function e(n){var t=n===void 0?{}:n,r=t.minFaceSize,i=t.scaleFactor,a=t.maxNumScales,o=t.scoreThresholds,s=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=a||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function XI(e,n){function t(u,l){var c=Un(e(9*u),[3,3,u,1]),f=Dt(e(u)),h=Dt(e(u)),d=Dt(e(u)),v=Dt(e(u));return n.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:h,batch_norm_mean:d,batch_norm_variance:v}}function r(u,l,c,f,h){var d=Un(e(u*l*c*c),[c,c,u,l]),v=Dt(e(l));return n.push({paramPath:f+"/filters"},{paramPath:f+"/"+(h?"batch_norm_offset":"bias")}),{filters:d,bias:v}}function i(u,l,c,f){var h=r(u,l,c,f,!0),d=h.filters,v=h.bias;return{filters:d,batch_norm_offset:v}}function a(u,l,c){var f=t(u,c+"/depthwise_conv"),h=i(u,l,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:h}}function o(){var u=i(3,32,3,"mobilenetv1/conv_0"),l=a(32,64,"mobilenetv1/conv_1"),c=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),h=a(128,256,"mobilenetv1/conv_4"),d=a(256,256,"mobilenetv1/conv_5"),v=a(256,512,"mobilenetv1/conv_6"),p=a(512,512,"mobilenetv1/conv_7"),g=a(512,512,"mobilenetv1/conv_8"),m=a(512,512,"mobilenetv1/conv_9"),x=a(512,512,"mobilenetv1/conv_10"),y=a(512,512,"mobilenetv1/conv_11"),w=a(512,1024,"mobilenetv1/conv_12"),_=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:v,conv_7:p,conv_8:g,conv_9:m,conv_10:x,conv_11:y,conv_12:w,conv_13:_}}function s(){var u=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),f=i(128,256,3,"prediction_layer/conv_3"),h=i(256,128,1,"prediction_layer/conv_4"),d=i(128,256,3,"prediction_layer/conv_5"),v=i(256,64,1,"prediction_layer/conv_6"),p=i(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),m=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),x=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),y=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),w=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),_=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),b=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),C=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),T=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),F=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),I={box_encoding_predictor:g,class_predictor:m},V={box_encoding_predictor:x,class_predictor:y},K={box_encoding_predictor:w,class_predictor:_},G={box_encoding_predictor:S,class_predictor:E},ie={box_encoding_predictor:b,class_predictor:C},re={box_encoding_predictor:T,class_predictor:F};return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:v,conv_7:p,box_predictor_0:I,box_predictor_1:V,box_predictor_2:K,box_predictor_3:G,box_predictor_4:ie,box_predictor_5:re}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function KI(e){var n=[],t=Ui(e),r=t.extractWeights,i=t.getRemainingWeights,a=XI(r,n),o=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=o(),l=s(),c=L0(r(5118*4),[1,5118,4]),f={extra_dim:c};if(n.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:n}}function qI(e,n){var t=ba(e,n);function r(l,c,f){var h=t(l+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),d=t(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:h,batch_norm_offset:d}}function i(l){var c="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",h=c+"/depthwise_conv",d=c+"/pointwise_conv",v=t(f+"/depthwise_weights",4,h+"/filters"),p=t(f+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),g=t(f+"/BatchNorm/beta",1,h+"/batch_norm_offset"),m=t(f+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),x=t(f+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:p,batch_norm_offset:g,batch_norm_mean:m,batch_norm_variance:x},pointwise_conv:r("MobilenetV1",l,d)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function o(l,c){var f=t(l+"/weights",4,c+"/filters"),h=t(l+"/biases",1,c+"/bias");return{filters:f,bias:h}}function s(l){var c=o("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=o("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function YI(e){var n=[],t=qI(e,n),r=t.extractMobilenetV1Params,i=t.extractPredictionLayerParams,a=e["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!qf(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}};return Bi(e,n),{params:o,paramMappings:n}}function Jr(e,n,t){return be(function(){var r=Tr(e,n.filters,t,"same");return r=je(r,n.batch_norm_offset),K0(r,0,6)})}var QI=.0010000000474974513;function JI(e,n,t){return be(function(){var r=$f(e,n.filters,t,"same");return r=ww(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,QI),K0(r,0,6)})}function ZI(e){return[2,4,6,12].some(function(n){return n===e})?[2,2]:[1,1]}function eN(e,n){return be(function(){var t=null,r=Jr(e,n.conv_0,[2,2]),i=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(i.forEach(function(a,o){var s=o+1,u=ZI(s);r=JI(r,a.depthwise_conv,u),r=Jr(r,a.pointwise_conv,[1,1]),s===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function tN(e,n,t,r,i){var a=e.shape[0],o=Math.min(t,a),s=n.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>i}).sort(function(c,f){return f.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=o)){for(var f=c.score,h=l.length-1;h>=0;--h){var d=nN(e,c.boxIndex,l[h]);if(d!==0&&(c.score*=u(d),c.score<=i))break}f===c.score&&l.push(c.boxIndex)}}),l}function nN(e,n,t){var r=e.arraySync(),i=Math.min(r[n][0],r[n][2]),a=Math.min(r[n][1],r[n][3]),o=Math.max(r[n][0],r[n][2]),s=Math.max(r[n][1],r[n][3]),u=Math.min(r[t][0],r[t][2]),l=Math.min(r[t][1],r[t][3]),c=Math.max(r[t][0],r[t][2]),f=Math.max(r[t][1],r[t][3]),h=(o-i)*(s-a),d=(c-u)*(f-l);if(h<=0||d<=0)return 0;var v=Math.max(i,u),p=Math.max(a,l),g=Math.min(o,c),m=Math.min(s,f),x=Math.max(g-v,0)*Math.max(m-p,0);return x/(h+d-x)}function rN(e){var n=zt(pa(e,[1,0])),t=[Ht(n[2],n[0]),Ht(n[3],n[1])],r=[je(n[0],Or(t[0],Ee(2))),je(n[1],Or(t[1],Ee(2)))];return{sizes:t,centers:r}}function iN(e,n){var t=rN(e),r=t.sizes,i=t.centers,a=zt(pa(n,[1,0])),o=Or(Sn(bp(Or(a[2],Ee(5))),r[0]),Ee(2)),s=je(Sn(Or(a[0],Ee(10)),r[0]),i[0]),u=Or(Sn(bp(Or(a[3],Ee(5))),r[1]),Ee(2)),l=je(Sn(Or(a[1],Ee(10)),r[1]),i[1]);return pa(cr([Ht(s,o),Ht(l,u),je(s,o),je(l,u)]),[1,0])}function aN(e,n,t){return be(function(){var r=e.shape[0],i=iN(Lr(Qo(t.extra_dim,[r,1,1]),[-1,4]),Lr(e,[-1,4]));i=Lr(i,[r,i.shape[0]/r,4]);var a=mw(li(n,[0,0,1],[-1,-1,-1])),o=li(a,[0,0,0],[-1,-1,1]);o=Lr(o,[r,o.shape[1]]);var s=zt(i),u=zt(o);return{boxes:s,scores:u}})}function Eo(e,n){return be(function(){var t=e.shape[0],r=Lr(zr(e,n.box_encoding_predictor),[t,-1,1,4]),i=Lr(zr(e,n.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function oN(e,n,t){return be(function(){var r=Jr(e,t.conv_0,[1,1]),i=Jr(r,t.conv_1,[2,2]),a=Jr(i,t.conv_2,[1,1]),o=Jr(a,t.conv_3,[2,2]),s=Jr(o,t.conv_4,[1,1]),u=Jr(s,t.conv_5,[2,2]),l=Jr(u,t.conv_6,[1,1]),c=Jr(l,t.conv_7,[2,2]),f=Eo(n,t.box_predictor_0),h=Eo(e,t.box_predictor_1),d=Eo(i,t.box_predictor_2),v=Eo(o,t.box_predictor_3),p=Eo(u,t.box_predictor_4),g=Eo(c,t.box_predictor_5),m=Wt([f.boxPredictionEncoding,h.boxPredictionEncoding,d.boxPredictionEncoding,v.boxPredictionEncoding,p.boxPredictionEncoding,g.boxPredictionEncoding],1),x=Wt([f.classPrediction,h.classPrediction,d.classPrediction,v.classPrediction,p.classPrediction,g.classPrediction],1);return{boxPredictions:m,classPredictions:x}})}var Zf=function(){function e(n){var t=n===void 0?{}:n,r=t.minConfidence,i=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),k_=function(e){We(n,e);function n(){return e.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return be(function(){var i=t.toBatchTensor(512,!1).toFloat(),a=Ht(Sn(i,Ee(.007843137718737125)),Ee(1)),o=eN(a,r.mobilenetv1),s=oN(o.out,o.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return aN(u,l,r.output_layer)})},n.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Zt(t)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,d,v,p,g,m,x,y,w,_,S,E,b;return Oe(this,function(C){switch(C.label){case 0:return i=new Zf(r),a=i.maxResults,o=i.minConfidence,[4,Zt(t)];case 1:for(s=C.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,f=l[0],h=c[0],d=1;d<l.length;d++)l[d].dispose(),c[d].dispose();return g=(p=Array).from,[4,h.data()];case 2:return v=g.apply(p,[C.sent()]),m=.5,x=tN(f,v,a,m,o),y=s.getReshapedInputDimensions(0),w=s.inputSize,_=w/y.width,S=w/y.height,E=f.arraySync(),b=x.map(function(T){var F=[Math.max(0,E[T][0]),Math.min(1,E[T][2])].map(function(re){return re*S}),I=F[0],V=F[1],K=[Math.max(0,E[T][1]),Math.min(1,E[T][3])].map(function(re){return re*_}),G=K[0],ie=K[1];return new pi(v[T],new fv(G,I,ie-G,V-I),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),h.dispose(),[2,b]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(t){return YI(t)},n.prototype.extractParams=function(t){return KI(t)},n}(Li);(function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n})(k_);var sN=.4,uN=[new Ze(.738768,.874946),new Ze(2.42204,2.65704),new Ze(4.30971,7.04493),new Ze(10.246,4.59428),new Ze(12.6868,11.8741)],lN=[new Ze(1.603231,2.094468),new Ze(6.041143,7.080126),new Ze(2.882459,3.518061),new Ze(4.266906,5.178857),new Ze(9.041765,10.66308)],cN=[117.001,114.697,97.404],fN="tiny_yolov2_model",hN="tiny_yolov2_separable_conv_model",Gl=function(e){return typeof e=="number"};function dN(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Gl(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(n){return n||{}}).every(function(n){return Gl(n.x)&&Gl(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Gl)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function Ev(e){return be(function(){var n=Sn(e,Ee(.10000000149011612));return je(wt(Ht(e,n)),n)})}function Vi(e,n){return be(function(){var t=ao(e,[[0,0],[1,1],[1,1],[0,0]]);return t=Tr(t,n.conv.filters,[1,1],"valid"),t=Ht(t,n.bn.sub),t=Sn(t,n.bn.truediv),t=je(t,n.conv.bias),Ev(t)})}function Hi(e,n){return be(function(){var t=ao(e,[[0,0],[1,1],[1,1],[0,0]]);return t=J0(t,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),t=je(t,n.bias),Ev(t)})}function pN(e,n){var t=Jf(e,n);function r(o,s){var u=Dt(e(o)),l=Dt(e(o));return n.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function i(o,s,u){var l=t(o,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var a=xv(e,n);return{extractConvParams:t,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function vN(e,n,t,r){var i=Ui(e),a=i.extractWeights,o=i.getRemainingWeights,s=[],u=pN(a,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,h;if(n.withSeparableConvs){var d=r[0],v=r[1],p=r[2],g=r[3],m=r[4],x=r[5],y=r[6],w=r[7],_=r[8],S=n.isFirstLayerConv2d?l(d,v,3,"conv0"):f(d,v,"conv0"),E=f(v,p,"conv1"),b=f(p,g,"conv2"),C=f(g,m,"conv3"),T=f(m,x,"conv4"),F=f(x,y,"conv5"),I=w?f(y,w,"conv6"):void 0,V=_?f(w,_,"conv7"):void 0,K=l(_||w||y,5*t,1,"conv8");h={conv0:S,conv1:E,conv2:b,conv3:C,conv4:T,conv5:F,conv6:I,conv7:V,conv8:K}}else{var d=r[0],v=r[1],p=r[2],g=r[3],m=r[4],x=r[5],y=r[6],w=r[7],_=r[8],S=c(d,v,"conv0"),E=c(v,p,"conv1"),b=c(p,g,"conv2"),C=c(g,m,"conv3"),T=c(m,x,"conv4"),F=c(x,y,"conv5"),I=c(y,w,"conv6"),V=c(w,_,"conv7"),K=l(_,5*t,1,"conv8");h={conv0:S,conv1:E,conv2:b,conv3:C,conv4:T,conv5:F,conv6:I,conv7:V,conv8:K}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:h,paramMappings:s}}function mN(e,n){var t=ba(e,n);function r(s){var u=t(s+"/sub",1),l=t(s+"/truediv",1);return{sub:u,truediv:l}}function i(s){var u=t(s+"/filters",4),l=t(s+"/bias",1);return{filters:u,bias:l}}function a(s){var u=i(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var o=yv(t);return{extractConvParams:i,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function gN(e,n){var t=[],r=mN(e,t),i=r.extractConvParams,a=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,s;if(n.withSeparableConvs){var u=n.filterSizes&&n.filterSizes.length||9;s={conv0:n.isFirstLayerConv2d?i("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:u>7?o("conv6"):void 0,conv7:u>8?o("conv7"):void 0,conv8:i("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return Bi(e,t),{params:s,paramMappings:t}}var mg;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(mg||(mg={}));var Sv=function(){function e(n){var t=n===void 0?{}:n,r=t.inputSize,i=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),A_=function(e){We(n,e);function n(t){var r=e.call(this,"TinyYolov2")||this;return dN(t),r._config=t,r}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(t,r){var i=Vi(t,r.conv0);return i=Gt(i,[2,2],[2,2],"same"),i=Vi(i,r.conv1),i=Gt(i,[2,2],[2,2],"same"),i=Vi(i,r.conv2),i=Gt(i,[2,2],[2,2],"same"),i=Vi(i,r.conv3),i=Gt(i,[2,2],[2,2],"same"),i=Vi(i,r.conv4),i=Gt(i,[2,2],[2,2],"same"),i=Vi(i,r.conv5),i=Gt(i,[2,2],[1,1],"same"),i=Vi(i,r.conv6),i=Vi(i,r.conv7),zr(i,r.conv8,"valid",!1)},n.prototype.runMobilenet=function(t,r){var i=this.config.isFirstLayerConv2d?Ev(zr(t,r.conv0,"valid",!1)):Hi(t,r.conv0);return i=Gt(i,[2,2],[2,2],"same"),i=Hi(i,r.conv1),i=Gt(i,[2,2],[2,2],"same"),i=Hi(i,r.conv2),i=Gt(i,[2,2],[2,2],"same"),i=Hi(i,r.conv3),i=Gt(i,[2,2],[2,2],"same"),i=Hi(i,r.conv4),i=Gt(i,[2,2],[2,2],"same"),i=Hi(i,r.conv5),i=Gt(i,[2,2],[1,1],"same"),i=r.conv6?Hi(i,r.conv6):i,i=r.conv7?Hi(i,r.conv7):i,zr(i,r.conv8,"valid",!1)},n.prototype.forwardInput=function(t,r){var i=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return be(function(){var o=t.toBatchTensor(r,!1).toFloat();return o=i.config.meanRgb?al(o,i.config.meanRgb):o,o=o.div(Ee(256)),i.config.withSeparableConvs?i.runMobilenet(o,a):i.runTinyYolov2(o,a)})},n.prototype.forward=function(t,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,Zt(t)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},n.prototype.detect=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,d,v,p,g,m,x=this;return Oe(this,function(y){switch(y.label){case 0:return i=new Sv(r),a=i.inputSize,o=i.scoreThreshold,[4,Zt(t)];case 1:return s=y.sent(),[4,this.forwardInput(s,a)];case 2:return u=y.sent(),l=be(function(){return zt(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),o)];case 3:return f=y.sent(),u.dispose(),l.dispose(),h=f.map(function(w){return w.box}),d=f.map(function(w){return w.score}),v=f.map(function(w){return w.classScore}),p=f.map(function(w){return x.config.classes[w.label]}),g=Bu(h.map(function(w){return w.rescale(a)}),d,this.config.iouThreshold,!0),m=g.map(function(w){return new e_(d[w],v[w],p[w],h[w],c)}),[2,m]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(t){return gN(t,this.config)},n.prototype.extractParams=function(t){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return vN(t,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(t,r,i){return Pe(this,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v,p,g,m,x,y,w,_,S,E,b,C,T,F,I,V,K,G,ie,re,H=this;return Oe(this,function(X){switch(X.label){case 0:return a=r.width,o=r.height,s=Math.max(a,o),u=s/a,l=s/o,c=t.shape[1],f=this.config.anchors.length,h=be(function(){var Q=t.reshape([c,c,f,H.boxEncodingSize]),fe=Q.slice([0,0,0,0],[c,c,f,4]),D=Q.slice([0,0,0,4],[c,c,f,1]),z=H.withClassScores?Oi(Q.slice([0,0,0,5],[c,c,f,H.config.classes.length]),3):Ee(0);return[fe,D,z]}),d=h[0],v=h[1],p=h[2],g=[],[4,v.array()];case 1:return m=X.sent(),[4,d.array()];case 2:x=X.sent(),y=0,X.label=3;case 3:if(!(y<c))return[3,12];w=0,X.label=4;case 4:if(!(w<c))return[3,11];_=0,X.label=5;case 5:return _<f?(S=sd(m[y][w][_][0]),!i||S>i?(E=(w+sd(x[y][w][_][0]))/c*u,b=(y+sd(x[y][w][_][1]))/c*l,C=Math.exp(x[y][w][_][2])*this.config.anchors[_].x/c*u,T=Math.exp(x[y][w][_][3])*this.config.anchors[_].y/c*l,F=E-C/2,I=b-T/2,V={row:y,col:w,anchor:_},this.withClassScores?[4,this.extractPredictedClass(p,V)]:[3,7]):[3,9]):[3,10];case 6:return re=X.sent(),[3,8];case 7:re={classScore:1,label:0},X.label=8;case 8:K=re,G=K.classScore,ie=K.label,g.push(wn({box:new Yf(F,I,F+C,I+T),score:S,classScore:S*G,label:ie},V)),X.label=9;case 9:return _++,[3,5];case 10:return w++,[3,4];case 11:return y++,[3,3];case 12:return d.dispose(),v.dispose(),p.dispose(),[2,g]}})})},n.prototype.extractPredictedClass=function(t,r){return Pe(this,void 0,void 0,function(){var i,a,o,s;return Oe(this,function(u){switch(u.label){case 0:return i=r.row,a=r.col,o=r.anchor,[4,t.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[i][a][o][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(Li),xN=function(e){We(n,e);function n(t){t===void 0&&(t=!0);var r=this,i=Object.assign({},{withSeparableConvs:t,iouThreshold:sN,classes:["face"]},t?{anchors:lN,meanRgb:cN}:{anchors:uN,withClassScores:!0});return r=e.call(this,i)||this,r}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(t,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(a){switch(a.label){case 0:return[4,this.detect(t,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new pi(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?hN:fN},n.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},n}(A_),yN=function(e){We(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return n}(Sv),ol=function(){function e(){}return e.prototype.then=function(n){return Pe(this,void 0,void 0,function(){var t;return Oe(this,function(r){switch(r.label){case 0:return t=n,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},e}();function eh(e,n,t,r,i){return i===void 0&&(i=function(a){var o=a.alignedRect;return o}),Pe(this,void 0,void 0,function(){var a,o,s,u,l;return Oe(this,function(c){switch(c.label){case 0:return a=e.map(function(f){return TI(f)?i(f):f.detection}),s=r,s?[3,5]:n instanceof yt?[4,mv(n,a)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,vv(n,a)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return o=s,[4,t(o)];case 6:return l=c.sent(),o.forEach(function(f){return f instanceof yt&&f.dispose()}),[2,l]}})})}function Cv(e,n,t,r,i){return Pe(this,void 0,void 0,function(){var a=this;return Oe(this,function(o){return[2,eh([e],n,function(s){return Pe(a,void 0,void 0,function(){return Oe(this,function(u){return[2,t(s[0])]})})},r,i)]})})}function wN(e){return be(function(){return cr(zt(e,3).reverse(),3)})}var Xl=2,uf=12;function _N(e,n){var t=Jf(e,n),r=gv(e,n);function i(l,c){var f=Dt(e(l));return n.push({paramPath:c}),f}function a(l,c,f){f===void 0&&(f=!1);var h=t(l[0],l[1],3,c+"/conv1"),d=i(l[1],c+"/prelu1_alpha"),v=t(l[1],l[2],3,c+"/conv2"),p=i(l[2],c+"/prelu2_alpha"),g=t(l[2],l[3],f?2:3,c+"/conv3"),m=i(l[3],c+"/prelu3_alpha");return{conv1:h,prelu1_alpha:d,conv2:v,prelu2_alpha:p,conv3:g,prelu3_alpha:m}}function o(){var l=a([3,10,16,32],"pnet"),c=t(32,2,1,"pnet/conv4_1"),f=t(32,4,1,"pnet/conv4_2");return wn(wn({},l),{conv4_1:c,conv4_2:f})}function s(){var l=a([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),h=r(128,2,"rnet/fc2_1"),d=r(128,4,"rnet/fc2_2");return wn(wn({},l),{fc1:c,prelu4_alpha:f,fc2_1:h,fc2_2:d})}function u(){var l=a([3,32,64,64],"onet"),c=t(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),h=r(1152,256,"onet/fc1"),d=i(256,"onet/prelu5_alpha"),v=r(256,2,"onet/fc2_1"),p=r(256,4,"onet/fc2_2"),g=r(256,10,"onet/fc2_3");return wn(wn({},l),{conv4:c,prelu4_alpha:f,fc1:h,prelu5_alpha:d,fc2_1:v,fc2_2:p,fc2_3:g})}return{extractPNetParams:o,extractRNetParams:s,extractONetParams:u}}function EN(e){var n=Ui(e),t=n.extractWeights,r=n.getRemainingWeights,i=[],a=_N(t,i),o=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=o(),c=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:i}}function SN(e,n){var t=ba(e,n);function r(c){var f=t(c+"/weights",4,c+"/filters"),h=t(c+"/bias",1);return{filters:f,bias:h}}function i(c){var f=t(c+"/weights",2),h=t(c+"/bias",1);return{weights:f,bias:h}}function a(c){return t(c,1)}function o(c){var f=r(c+"/conv1"),h=a(c+"/prelu1_alpha"),d=r(c+"/conv2"),v=a(c+"/prelu2_alpha"),p=r(c+"/conv3"),g=a(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:d,prelu2_alpha:v,conv3:p,prelu3_alpha:g}}function s(){var c=o("pnet"),f=r("pnet/conv4_1"),h=r("pnet/conv4_2");return wn(wn({},c),{conv4_1:f,conv4_2:h})}function u(){var c=o("rnet"),f=i("rnet/fc1"),h=a("rnet/prelu4_alpha"),d=i("rnet/fc2_1"),v=i("rnet/fc2_2");return wn(wn({},c),{fc1:f,prelu4_alpha:h,fc2_1:d,fc2_2:v})}function l(){var c=o("onet"),f=r("onet/conv4"),h=a("onet/prelu4_alpha"),d=i("onet/fc1"),v=a("onet/prelu5_alpha"),p=i("onet/fc2_1"),g=i("onet/fc2_2"),m=i("onet/fc2_3");return wn(wn({},c),{conv4:f,prelu4_alpha:h,fc1:d,prelu5_alpha:v,fc2_1:p,fc2_2:g,fc2_3:m})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function CN(e){var n=[],t=SN(e,n),r=t.extractPNetParams,i=t.extractRNetParams,a=t.extractONetParams,o=r(),s=i(),u=a();return Bi(e,n),{params:{pnet:o,rnet:s,onet:u},paramMappings:n}}function Dp(e,n){var t=n[0],r=n[1];return{height:Math.floor(t*e),width:Math.floor(r*e)}}function bN(e,n,t){for(var r=t[0],i=t[1],a=uf/e,o=[],s=Math.min(r,i)*a,u=0;s>=12;)o.push(a*Math.pow(n,u)),s=s*n,u+=1;return o}var bv=function(e){We(n,e);function n(t,r,i,a){return e.call(this,{left:t,top:r,right:i,bottom:a},!0)||this}return n}(va);function R_(e){return be(function(){return Sn(Ht(e,Ee(127.5)),Ee(.0078125))})}function rs(e,n){return be(function(){return je(wt(e),Sn(n,ef(wt(ef(e)))))})}function Tv(e,n,t){return t===void 0&&(t=!1),be(function(){var r=zr(e,n.conv1,"valid");return r=rs(r,n.prelu1_alpha),r=Gt(r,t?[2,2]:[3,3],[2,2],"same"),r=zr(r,n.conv2,"valid"),r=rs(r,n.prelu2_alpha),r=t?r:Gt(r,[3,3],[2,2],"valid"),r=zr(r,n.conv3,"valid"),r=rs(r,n.prelu3_alpha),r})}function TN(e,n){return be(function(){var t=Tv(e,n,!0),r=zr(t,n.conv4_1,"valid"),i=yr(Gf(r,3),3),a=Oi(Ht(r,i),3),o=zr(t,n.conv4_2,"valid");return{prob:a,regions:o}})}function kN(e,n){return be(function(){var t=Dp(n,e.shape.slice(1)),r=t.height,i=t.width,a=rv.resizeBilinear(e,[r,i]),o=R_(a);return pa(o,[0,2,1,3])})}function AN(e,n,t,r){for(var i=[],a=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)a[o][s]>=r&&i.push(new Ze(s,o));var u=i.map(function(l){var c=new Yf(Math.round((l.y*Xl+1)/t),Math.round((l.x*Xl+1)/t),Math.round((l.y*Xl+uf)/t),Math.round((l.x*Xl+uf)/t)),f=a[l.y][l.x],h=n.arraySync(),d=new bv(h[l.y][l.x][0],h[l.y][l.x][1],h[l.y][l.x][2],h[l.y][l.x][3]);return{cell:c,score:f,region:d}});return u}function RN(e,n,t,r,i){i.stage1=[];var a=n.map(function(h){return be(function(){var d={scale:h},v=kN(e,h),p=Date.now(),g=TN(v,r),m=g.prob,x=g.regions;d.pnet=Date.now()-p;var y=zt(zt(m,3)[1])[0],w=zt(x)[0];return{scoresTensor:y,regionsTensor:w,scale:h,statsForScale:d}})}),o=a.map(function(h){var d=h.scoresTensor,v=h.regionsTensor,p=h.scale,g=h.statsForScale,m=AN(d,v,p,t);if(d.dispose(),v.dispose(),!m.length)return i.stage1.push(g),[];var x=Date.now(),y=Bu(m.map(function(w){return w.cell}),m.map(function(w){return w.score}),.5);return g.nms=Date.now()-x,g.numBoxes=y.length,i.stage1.push(g),y.map(function(w){return m[w]})}),s=o.reduce(function(h,d){return h.concat(d)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=Bu(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);i.stage1_nms=Date.now()-c,l=f.map(function(h){return s[h].score}),u=f.map(function(h){return s[h]}).map(function(h){var d=h.cell,v=h.region;return new Yf(d.left+v.left*d.width,d.top+v.top*d.height,d.right+v.right*d.width,d.bottom+v.bottom*d.height).toSquare().round()})}return{boxes:u,scores:l}}function F_(e,n,t){var r=t.width,i=t.height;return Pe(this,void 0,void 0,function(){var a,o,s,u=this;return Oe(this,function(l){switch(l.label){case 0:return a=Ja(e),[4,Promise.all(n.map(function(c){return Pe(u,void 0,void 0,function(){var f,h,d,v,p,g,m,x;return Oe(this,function(y){return f=c.padAtBorders(e.height,e.width),h=f.y,d=f.ey,v=f.x,p=f.ex,g=v-1,m=h-1,x=a.getImageData(g,m,p-g,d-m),[2,kn.isNodejs()?pv(x):createImageBitmap(x)]})})}))];case 1:return o=l.sent(),s=[],o.forEach(function(c){var f=Qf({width:r,height:i}),h=Ja(f);h.drawImage(c,0,0,r,i);for(var d=h.getImageData(0,0,r,i).data,v=[],p=0;p<d.length;p+=4)v.push(d[p+2]),v.push(d[p+1]),v.push(d[p]);s.push(v)}),[2,s.map(function(c){var f=be(function(){var h=pa(Un(c,[1,r,i,3]),[0,2,1,3]).toFloat();return R_(h)});return f})]}})})}function FN(e,n){return be(function(){var t=Tv(e,n),r=Lr(t,[t.shape[0],n.fc1.weights.shape[0]]),i=ri(r,n.fc1),a=rs(i,n.prelu4_alpha),o=ri(a,n.fc2_1),s=yr(Gf(o,1),1),u=Oi(Ht(o,s),1),l=ri(a,n.fc2_2),c=zt(u,1)[1];return{scores:c,regions:l}})}function IN(e,n,t,r,i){return Pe(this,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v,p,g,m,x;return Oe(this,function(y){switch(y.label){case 0:return a=Date.now(),[4,F_(e,n,{width:24,height:24})];case 1:return o=y.sent(),i.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(w){var _=FN(w,r);return w.dispose(),_}),i.stage2_rnet=Date.now()-a,u=s.length>1?Wt(s.map(function(w){return w.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[y.sent()]),u.dispose(),h=l.map(function(w,_){return{score:w,idx:_}}).filter(function(w){return w.score>t}).map(function(w){var _=w.idx;return _}),d=h.map(function(w){return n[w]}),v=h.map(function(w){return l[w]}),p=[],g=[],d.length>0&&(a=Date.now(),m=Bu(d,v,.7),i.stage2_nms=Date.now()-a,x=m.map(function(w){var _=s[h[w]].regions.arraySync();return new bv(_[0][0],_[0][1],_[0][2],_[0][3])}),g=m.map(function(w){return v[w]}),p=m.map(function(w,_){return d[w].calibrate(x[_])})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose()}),[2,{boxes:p,scores:g}]}})})}function NN(e,n){return be(function(){var t=Tv(e,n);t=Gt(t,[2,2],[2,2],"same"),t=zr(t,n.conv4,"valid"),t=rs(t,n.prelu4_alpha);var r=Lr(t,[t.shape[0],n.fc1.weights.shape[0]]),i=ri(r,n.fc1),a=rs(i,n.prelu5_alpha),o=ri(a,n.fc2_1),s=yr(Gf(o,1),1),u=Oi(Ht(o,s),1),l=ri(a,n.fc2_2),c=ri(a,n.fc2_3),f=zt(u,1)[1];return{scores:f,regions:l,points:c}})}function DN(e,n,t,r,i){return Pe(this,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v,p,g,m,x,y;return Oe(this,function(w){switch(w.label){case 0:return a=Date.now(),[4,F_(e,n,{width:48,height:48})];case 1:return o=w.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(_){var S=NN(_,r);return _.dispose(),S}),i.stage3_onet=Date.now()-a,u=s.length>1?Wt(s.map(function(_){return _.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[w.sent()]),u.dispose(),h=l.map(function(_,S){return{score:_,idx:S}}).filter(function(_){return _.score>t}).map(function(_){var S=_.idx;return S}),d=h.map(function(_){var S=s[_].regions.arraySync();return new bv(S[0][0],S[0][1],S[0][2],S[0][3])}),v=h.map(function(_,S){return n[_].calibrate(d[S])}),p=h.map(function(_){return l[_]}),g=[],m=[],x=[],v.length>0&&(a=Date.now(),y=Bu(v,p,.7,!1),i.stage3_nms=Date.now()-a,g=y.map(function(_){return v[_]}),m=y.map(function(_){return p[_]}),x=y.map(function(_,S){return Array(5).fill(0).map(function(E,b){var C=s[_].points.arraySync();return new Ze(C[0][b]*(g[S].width+1)+g[S].left,C[0][b+5]*(g[S].height+1)+g[S].top)})})),s.forEach(function(_){_.regions.dispose(),_.scores.dispose(),_.points.dispose()}),[2,{boxes:g,scores:m,points:x}]}})})}var PN=function(e){We(n,e);function n(){return e.call(this,"Mtcnn")||this}return n.prototype.load=function(t){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},n.prototype.loadFromDisk=function(t){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},n.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,d,v,p,g,m,x,y,w,_,S,E,b;return Oe(this,function(C){switch(C.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(a=t.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},s=Date.now(),u=be(function(){return wN(yr(lv.fromPixels(a)).toFloat())}),l=function(T){return u.dispose(),o.total=Date.now()-s,T},c=u.shape.slice(1),f=c[0],h=c[1],d=new T_(r),v=d.minFaceSize,p=d.scaleFactor,g=d.maxNumScales,m=d.scoreThresholds,x=d.scaleSteps,y=(x||bN(v,p,[f,h])).filter(function(T){var F=Dp(T,[f,h]);return Math.min(F.width,F.height)>uf}).slice(0,g),o.scales=y,o.pyramid=y.map(function(T){return Dp(T,[f,h])}),w=Date.now(),[4,RN(u,y,m[0],i.pnet,o)];case 1:return _=C.sent(),o.total_stage1=Date.now()-w,_.boxes.length?(o.stage2_numInputBoxes=_.boxes.length,w=Date.now(),[4,IN(a,_.boxes,m[1],i.rnet,o)]):[2,l({results:[],stats:o})];case 2:return S=C.sent(),o.total_stage2=Date.now()-w,S.boxes.length?(o.stage3_numInputBoxes=S.boxes.length,w=Date.now(),[4,DN(a,S.boxes,m[2],i.onet,o)]):[2,l({results:[],stats:o})];case 3:return E=C.sent(),o.total_stage3=Date.now()-w,b=E.boxes.map(function(T,F){return wv(hv({},new pi(E.scores[F],new fv(T.left/h,T.top/f,T.width/h,T.height/f),{height:f,width:h})),new lI(E.points[F].map(function(I){return I.sub(new Ze(T.left,T.top)).div(new Ze(T.width,T.height))}),{width:T.width,height:T.height}))}),[2,l({results:b,stats:o})]}})})},n.prototype.forward=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i;return Oe(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,Zt(t)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},n.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i;return Oe(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,Zt(t)];case 1:return[2,i.apply(this,[a.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(t){return CN(t)},n.prototype.extractParams=function(t){return EN(t)},n}(Li),ON=.4,MN=[new Ze(1.603231,2.094468),new Ze(6.041143,7.080126),new Ze(2.882459,3.518061),new Ze(4.266906,5.178857),new Ze(9.041765,10.66308)],LN=[117.001,114.697,97.404],BN=function(e){We(n,e);function n(){var t=this,r={withSeparableConvs:!0,iouThreshold:ON,classes:["face"],anchors:MN,meanRgb:LN,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=e.call(this,r)||this,t}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(t,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(a){switch(a.label){case 0:return[4,this.detect(t,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new pi(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},n}(A_),In={ssdMobilenetv1:new k_,tinyFaceDetector:new BN,tinyYolov2:new xN,mtcnn:new PN,faceLandmark68Net:new w_,faceLandmark68TinyNet:new UI,faceRecognitionNet:new GI,faceExpressionNet:new bI,ageGenderNet:new OI},I_=function(e){We(n,e);function n(t,r,i){var a=e.call(this)||this;return a.parentTask=t,a.input=r,a.extractedFaces=i,a}return n}(ol),kv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,i=this;return Oe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,eh(t,this.input,function(o){return Pe(i,void 0,void 0,function(){return Oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return In.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,t.map(function(o,s){return g_(o,r[s])})]}})})},n.prototype.withAgeAndGender=function(){return new Iv(this,this.input)},n}(I_),Av=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),t?[4,Cv(t,this.input,function(a){return In.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,g_(t,r)]}})})},n.prototype.withAgeAndGender=function(){return new Nv(this,this.input)},n}(I_),Rv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Dv(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Ov(this,this.input)},n}(kv),Fv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Pv(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Mv(this,this.input)},n}(Av),N_=function(e){We(n,e);function n(t,r,i){var a=e.call(this)||this;return a.parentTask=t,a.input=r,a.extractedFaces=i,a}return n}(ol),Iv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,i=this;return Oe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,eh(t,this.input,function(o){return Pe(i,void 0,void 0,function(){return Oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return In.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,t.map(function(o,s){var u=r[s],l=u.age,c=u.gender,f=u.genderProbability;return C_(b_(o,c,f),l)})]}})})},n.prototype.withFaceExpressions=function(){return new kv(this,this.input)},n}(N_),Nv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,i,a,o;return Oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return t=s.sent(),t?[4,Cv(t,this.input,function(u){return In.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),i=r.age,a=r.gender,o=r.genderProbability,[2,C_(b_(t,a,o),i)]}})})},n.prototype.withFaceExpressions=function(){return new Av(this,this.input)},n}(N_),Dv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Rv(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Ov(this,this.input)},n}(Iv),Pv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Fv(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Mv(this,this.input)},n}(Nv),D_=function(e){We(n,e);function n(t,r){var i=e.call(this)||this;return i.parentTask=t,i.input=r,i}return n}(ol),Ov=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,eh(t,this.input,function(a){return Promise.all(a.map(function(o){return In.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(a,o){return S_(t[o],a)})]}})})},n.prototype.withFaceExpressions=function(){return new Rv(this,this.input)},n.prototype.withAgeAndGender=function(){return new Dv(this,this.input)},n}(D_),Mv=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),t?[4,Cv(t,this.input,function(a){return In.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,S_(t,r)]}})})},n.prototype.withFaceExpressions=function(){return new Fv(this,this.input)},n.prototype.withAgeAndGender=function(){return new Pv(this,this.input)},n}(D_),P_=function(e){We(n,e);function n(t,r,i){var a=e.call(this)||this;return a.parentTask=t,a.input=r,a.useTinyLandmarkNet=i,a}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?In.faceLandmark68TinyNet:In.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(ol),UN=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,i,a,o,s=this;return Oe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),r=t.map(function(l){return l.detection}),this.input instanceof yt?[4,mv(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,vv(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return i=a,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return o=u.sent(),i.forEach(function(l){return l instanceof yt&&l.dispose()}),[2,t.map(function(l,c){return wv(l,o[c])})]}})})},n.prototype.withFaceExpressions=function(){return new Rv(this,this.input)},n.prototype.withAgeAndGender=function(){return new Dv(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Ov(this,this.input)},n}(P_),WN=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,i,a,o;return Oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return t=s.sent(),t?(r=t.detection,this.input instanceof yt?[4,mv(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,vv(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return i=a,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return o=s.sent(),i.forEach(function(u){return u instanceof yt&&u.dispose()}),[2,wv(t,o)]}})})},n.prototype.withFaceExpressions=function(){return new Fv(this,this.input)},n.prototype.withAgeAndGender=function(){return new Pv(this,this.input)},n.prototype.withFaceDescriptor=function(){return new Mv(this,this.input)},n}(P_),O_=function(e){We(n,e);function n(t,r){r===void 0&&(r=new Zf);var i=e.call(this)||this;return i.input=t,i.options=r,i}return n}(ol),zN=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,i,a;return Oe(this,function(o){switch(o.label){case 0:return t=this,r=t.input,i=t.options,i instanceof T_?[4,In.mtcnn.forward(r,i)]:[3,2];case 1:return[2,o.sent().map(function(s){return s.detection})];case 2:if(a=i instanceof yN?function(s){return In.tinyFaceDetector.locateFaces(s,i)}:i instanceof Zf?function(s){return In.ssdMobilenetv1.locateFaces(s,i)}:i instanceof Sv?function(s){return In.tinyYolov2.locateFaces(s,i)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Pe(t,void 0,void 0,function(){var i;return Oe(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i.map(function(o){return hv({},o)}))]}})})})},n.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new UN(this.runAndExtendWithFaceDetections(),this.input,t)},n.prototype.withFaceExpressions=function(){return new kv(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new Iv(this.runAndExtendWithFaceDetections(),this.input)},n}(O_),VN=function(e){We(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Oe(this,function(i){switch(i.label){case 0:return[4,new zN(this.input,this.options)];case 1:return t=i.sent(),r=t[0],t.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Pe(t,void 0,void 0,function(){var i;return Oe(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i?hv({},i):void 0)]}})})})},n.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new WN(this.runAndExtendWithFaceDetection(),this.input,t)},n.prototype.withFaceExpressions=function(){return new Av(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new Nv(this.runAndExtendWithFaceDetection(),this.input)},n}(O_);function HN(e,n){return n===void 0&&(n=new Zf),new VN(e,n)}function M_(e,n){if(e.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(e),r=Array.from(n);return Math.sqrt(t.map(function(i,a){return i-r[a]}).reduce(function(i,a){return i+Math.pow(a,2)},0))}(function(){function e(n,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,a=function(){return"person "+i++};this._labeledDescriptors=r.map(function(o){if(o instanceof Hl)return o;if(o instanceof Float32Array)return new Hl(a(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new Hl(a(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(n,t){return t.map(function(r){return M_(r,n)}).reduce(function(r,i){return r+i},0)/(t.length||1)},e.prototype.matchDescriptor=function(n){var t=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,a=r.label;return new fg(a,t.computeMeanDistance(n,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},e.prototype.findBestMatch=function(n){var t=this.matchDescriptor(n);return t.distance<this.distanceThreshold?t:new fg("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},e.fromJSON=function(n){var t=n.labeledDescriptors.map(function(r){return Hl.fromJSON(r)});return new e(t,n.distanceThreshold)},e})();let gg=!1;async function L_(){if(gg)return;const e="https://justadudewhohacks.github.io/face-api.js/models";await Promise.all([In.faceRecognitionNet.loadFromUri(e),In.faceLandmark68Net.loadFromUri(e),In.ssdMobilenetv1.loadFromUri(e)]),gg=!0}async function Pp(e){try{const n=await HN(e).withFaceLandmarks().withFaceDescriptor();return n?new Float32Array(n.descriptor):null}catch(n){return console.error("Error getting face descriptor:",n),null}}function $N(e,n){return M_(e,n)}const jN=({students:e,onMarkAttendance:n})=>{const t=It.useRef(null),[r,i]=It.useState(!1),[a,o]=It.useState("");It.useEffect(()=>{L_()},[]);const s=async()=>{if(t.current){i(!0),o("Scanning...");try{const u=t.current.getScreenshot();if(!u)throw new Error("Failed to capture image");const l=new Image;l.src=u,await new Promise(d=>l.onload=d);const c=await Pp(l);if(!c){o("No face detected. Please try again."),i(!1);return}let f=null,h=.6;for(const d of e)if(d.faceDescriptor){const v=$N(c,d.faceDescriptor);v<h&&(h=v,f=d)}f?(n(f.id),o(`Attendance marked for ${f.name}`)):o("Student not found. Please register first.")}catch(u){console.error("Error during attendance scanning:",u),o("Error scanning attendance. Please try again.")}i(!1)}};return ce.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[ce.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Attendance Scanner"}),ce.jsxs("div",{className:"relative",children:[ce.jsx(y2,{audio:!1,ref:t,screenshotFormat:"image/jpeg",className:"w-full rounded-lg"}),ce.jsxs("button",{onClick:s,disabled:r,className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-full flex items-center gap-2 hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:[r?ce.jsx(dT,{className:"animate-spin",size:20}):ce.jsx(D0,{size:20}),"Scan Attendance"]})]}),a&&ce.jsx("div",{className:`mt-4 p-3 rounded-lg ${a.includes("not found")||a.includes("Error")?"bg-red-100 text-red-700":a.includes("marked")?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:a})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var lf={};lf.version="0.18.5";var B_=1252,GN=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],U_=function(e){GN.indexOf(e)!=-1&&(B_=e)};function XN(){U_(1252)}var Uu=function(e){U_(e)};function KN(){Uu(1200),XN()}var Kl=function(n){return String.fromCharCode(n)},xg=function(n){return String.fromCharCode(n)},Oa,Zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Wu(e){for(var n="",t=0,r=0,i=0,a=0,o=0,s=0,u=0,l=0;l<e.length;)t=e.charCodeAt(l++),a=t>>2,r=e.charCodeAt(l++),o=(t&3)<<4|r>>4,i=e.charCodeAt(l++),s=(r&15)<<2|i>>6,u=i&63,isNaN(r)?s=u=64:isNaN(i)&&(u=64),n+=Zi.charAt(a)+Zi.charAt(o)+Zi.charAt(s)+Zi.charAt(u);return n}function Ii(e){var n="",t=0,r=0,i=0,a=0,o=0,s=0,u=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)a=Zi.indexOf(e.charAt(l++)),o=Zi.indexOf(e.charAt(l++)),t=a<<2|o>>4,n+=String.fromCharCode(t),s=Zi.indexOf(e.charAt(l++)),r=(o&15)<<4|s>>2,s!==64&&(n+=String.fromCharCode(r)),u=Zi.indexOf(e.charAt(l++)),i=(s&3)<<6|u,u!==64&&(n+=String.fromCharCode(i));return n}var Je=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Wi=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(n,t){return t?new Buffer(n,t):new Buffer(n)}:Buffer.from.bind(Buffer)}return function(){}}();function Za(e){return Je?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function yg(e){return Je?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Mr=function(n){return Je?Wi(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)&255})};function th(e){if(typeof ArrayBuffer>"u")return Mr(e);for(var n=new ArrayBuffer(e.length),t=new Uint8Array(n),r=0;r!=e.length;++r)t[r]=e.charCodeAt(r)&255;return n}function sl(e){if(Array.isArray(e))return e.map(function(r){return String.fromCharCode(r)}).join("");for(var n=[],t=0;t<e.length;++t)n[t]=String.fromCharCode(e[t]);return n.join("")}function qN(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var un=Je?function(e){return Buffer.concat(e.map(function(n){return Buffer.isBuffer(n)?n:Wi(n)}))}:function(e){if(typeof Uint8Array<"u"){var n=0,t=0;for(n=0;n<e.length;++n)t+=e[n].length;var r=new Uint8Array(t),i=0;for(n=0,t=0;n<e.length;t+=i,++n)if(i=e[n].length,e[n]instanceof Uint8Array)r.set(e[n],t);else{if(typeof e[n]=="string")throw"wtf";r.set(new Uint8Array(e[n]),t)}return r}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function YN(e){for(var n=[],t=0,r=e.length+250,i=Za(e.length+255),a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o<128)i[t++]=o;else if(o<2048)i[t++]=192|o>>6&31,i[t++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var s=e.charCodeAt(++a)&1023;i[t++]=240|o>>8&7,i[t++]=128|o>>2&63,i[t++]=128|s>>6&15|(o&3)<<4,i[t++]=128|s&63}else i[t++]=224|o>>12&15,i[t++]=128|o>>6&63,i[t++]=128|o&63;t>r&&(n.push(i.slice(0,t)),t=0,i=Za(65535),r=65530)}return n.push(i.slice(0,t)),un(n)}var lu=/\u0000/g,ql=/[\u0001-\u0006]/g;function is(e){for(var n="",t=e.length-1;t>=0;)n+=e.charAt(t--);return n}function Br(e,n){var t=""+e;return t.length>=n?t:Tt("0",n-t.length)+t}function Lv(e,n){var t=""+e;return t.length>=n?t:Tt(" ",n-t.length)+t}function cf(e,n){var t=""+e;return t.length>=n?t:t+Tt(" ",n-t.length)}function QN(e,n){var t=""+Math.round(e);return t.length>=n?t:Tt("0",n-t.length)+t}function JN(e,n){var t=""+e;return t.length>=n?t:Tt("0",n-t.length)+t}var wg=Math.pow(2,32);function So(e,n){if(e>wg||e<-wg)return QN(e,n);var t=Math.round(e);return JN(t,n)}function ff(e,n){return n=n||0,e.length>=7+n&&(e.charCodeAt(n)|32)===103&&(e.charCodeAt(n+1)|32)===101&&(e.charCodeAt(n+2)|32)===110&&(e.charCodeAt(n+3)|32)===101&&(e.charCodeAt(n+4)|32)===114&&(e.charCodeAt(n+5)|32)===97&&(e.charCodeAt(n+6)|32)===108}var _g=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],cd=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function ZN(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var kt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Eg={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},eD={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function hf(e,n,t){for(var r=e<0?-1:1,i=e*r,a=0,o=1,s=0,u=1,l=0,c=0,f=Math.floor(i);l<n&&(f=Math.floor(i),s=f*o+a,c=f*l+u,!(i-f<5e-8));)i=1/(i-f),a=o,o=s,u=l,l=c;if(c>n&&(l>n?(c=u,s=a):(c=l,s=o)),!t)return[0,r*s,c];var h=Math.floor(r*s/c);return[h,r*s-h*c,c]}function Yl(e,n,t){if(e>2958465||e<0)return null;var r=e|0,i=Math.floor(86400*(e-r)),a=0,o=[],s={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),n&&n.date1904&&(r+=1462),s.u>.9999&&(s.u=0,++i==86400&&(s.T=i=0,++r,++s.D)),r===60)o=t?[1317,10,29]:[1900,2,29],a=3;else if(r===0)o=t?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var u=new Date(1900,0,1);u.setDate(u.getDate()+r-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],a=u.getDay(),r<60&&(a=(a+6)%7),t&&(a=sD(u,o))}return s.y=o[0],s.m=o[1],s.d=o[2],s.S=i%60,i=Math.floor(i/60),s.M=i%60,i=Math.floor(i/60),s.H=i,s.q=a,s}var W_=new Date(1899,11,31,0,0,0),tD=W_.getTime(),nD=new Date(1900,2,1,0,0,0);function z_(e,n){var t=e.getTime();return n?t-=1461*24*60*60*1e3:e>=nD&&(t+=24*60*60*1e3),(t-(tD+(e.getTimezoneOffset()-W_.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Bv(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function rD(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function iD(e){var n=e<0?12:11,t=Bv(e.toFixed(12));return t.length<=n||(t=e.toPrecision(10),t.length<=n)?t:e.toExponential(5)}function aD(e){var n=Bv(e.toFixed(11));return n.length>(e<0?12:11)||n==="0"||n==="-0"?e.toPrecision(6):n}function oD(e){var n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),t;return n>=-4&&n<=-1?t=e.toPrecision(10+n):Math.abs(n)<=9?t=iD(e):n===10?t=e.toFixed(10).substr(0,12):t=aD(e),Bv(rD(t.toUpperCase()))}function Op(e,n){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):oD(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ma(14,z_(e,n&&n.date1904),n)}throw new Error("unsupported value in General format: "+e)}function sD(e,n){n[0]-=581;var t=e.getDay();return e<60&&(t=(t+6)%7),t}function uD(e,n,t,r){var i="",a=0,o=0,s=t.y,u,l=0;switch(e){case 98:s=t.y+543;case 121:switch(n.length){case 1:case 2:u=s%100,l=2;break;default:u=s%1e4,l=4;break}break;case 109:switch(n.length){case 1:case 2:u=t.m,l=n.length;break;case 3:return cd[t.m-1][1];case 5:return cd[t.m-1][0];default:return cd[t.m-1][2]}break;case 100:switch(n.length){case 1:case 2:u=t.d,l=n.length;break;case 3:return _g[t.q][0];default:return _g[t.q][1]}break;case 104:switch(n.length){case 1:case 2:u=1+(t.H+11)%12,l=n.length;break;default:throw"bad hour format: "+n}break;case 72:switch(n.length){case 1:case 2:u=t.H,l=n.length;break;default:throw"bad hour format: "+n}break;case 77:switch(n.length){case 1:case 2:u=t.M,l=n.length;break;default:throw"bad minute format: "+n}break;case 115:if(n!="s"&&n!="ss"&&n!=".0"&&n!=".00"&&n!=".000")throw"bad second format: "+n;return t.u===0&&(n=="s"||n=="ss")?Br(t.S,n.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,a=Math.round(o*(t.S+t.u)),a>=60*o&&(a=0),n==="s"?a===0?"0":""+a/o:(i=Br(a,2+r),n==="ss"?i.substr(0,2):"."+i.substr(2,n.length-1)));case 90:switch(n){case"[h]":case"[hh]":u=t.D*24+t.H;break;case"[m]":case"[mm]":u=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":u=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+n}l=n.length===3?1:2;break;case 101:u=s,l=1;break}var c=l>0?Br(u,l):"";return c}function ea(e){var n=3;if(e.length<=n)return e;for(var t=e.length%n,r=e.substr(0,t);t!=e.length;t+=n)r+=(r.length>0?",":"")+e.substr(t,n);return r}var V_=/%/g;function lD(e,n,t){var r=n.replace(V_,""),i=n.length-r.length;return Ci(e,r,t*Math.pow(10,2*i))+Tt("%",i)}function cD(e,n,t){for(var r=n.length-1;n.charCodeAt(r-1)===44;)--r;return Ci(e,n.substr(0,r),t/Math.pow(10,3*(n.length-r)))}function H_(e,n){var t,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(n==0)return"0.0E+0";if(n<0)return"-"+H_(e,-n);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(n)*Math.LOG10E)%i;if(a<0&&(a+=i),t=(n/Math.pow(10,a)).toPrecision(r+1+(i+a)%i),t.indexOf("e")===-1){var o=Math.floor(Math.log(n)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+a):t+="E+"+(o-a);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,u,l,c){return u+l+c.substr(0,(i+a)%i)+"."+c.substr(a)+"E"})}else t=n.toExponential(r);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var $_=/# (\?+)( ?)\/( ?)(\d+)/;function fD(e,n,t){var r=parseInt(e[4],10),i=Math.round(n*r),a=Math.floor(i/r),o=i-a*r,s=r;return t+(a===0?"":""+a)+" "+(o===0?Tt(" ",e[1].length+1+e[4].length):Lv(o,e[1].length)+e[2]+"/"+e[3]+Br(s,e[4].length))}function hD(e,n,t){return t+(n===0?"":""+n)+Tt(" ",e[1].length+2+e[4].length)}var j_=/^#*0*\.([0#]+)/,G_=/\).*[0#]/,X_=/\(###\) ###\\?-####/;function Rn(e){for(var n="",t,r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function Sg(e,n){var t=Math.pow(10,n);return""+Math.round(e*t)/t}function Cg(e,n){var t=e-Math.floor(e),r=Math.pow(10,n);return n<(""+Math.round(t*r)).length?0:Math.round(t*r)}function dD(e,n){return n<(""+Math.round((e-Math.floor(e))*Math.pow(10,n))).length?1:0}function pD(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function vr(e,n,t){if(e.charCodeAt(0)===40&&!n.match(G_)){var r=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?vr("n",r,t):"("+vr("n",r,-t)+")"}if(n.charCodeAt(n.length-1)===44)return cD(e,n,t);if(n.indexOf("%")!==-1)return lD(e,n,t);if(n.indexOf("E")!==-1)return H_(n,t);if(n.charCodeAt(0)===36)return"$"+vr(e,n.substr(n.charAt(1)==" "?2:1),t);var i,a,o,s,u=Math.abs(t),l=t<0?"-":"";if(n.match(/^00+$/))return l+So(u,n.length);if(n.match(/^[#?]+$/))return i=So(t,0),i==="0"&&(i=""),i.length>n.length?i:Rn(n.substr(0,n.length-i.length))+i;if(a=n.match($_))return fD(a,u,l);if(n.match(/^#+0+$/))return l+So(u,n.length-n.indexOf("0"));if(a=n.match(j_))return i=Sg(t,a[1].length).replace(/^([^\.]+)$/,"$1."+Rn(a[1])).replace(/\.$/,"."+Rn(a[1])).replace(/\.(\d*)$/,function(v,p){return"."+p+Tt("0",Rn(a[1]).length-p.length)}),n.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),a=n.match(/^(0*)\.(#*)$/))return l+Sg(u,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=n.match(/^#{1,3},##0(\.?)$/))return l+ea(So(u,0));if(a=n.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+vr(e,n,-t):ea(""+(Math.floor(t)+dD(t,a[1].length)))+"."+Br(Cg(t,a[1].length),a[1].length);if(a=n.match(/^#,#*,#0/))return vr(e,n.replace(/^#,#*,/,""),t);if(a=n.match(/^([0#]+)(\\?-([0#]+))+$/))return i=is(vr(e,n.replace(/[\\-]/g,""),t)),o=0,is(is(n.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<i.length?i.charAt(o++):v==="0"?"0":""}));if(n.match(X_))return i=vr(e,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(a=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),s=hf(u,Math.pow(10,o)-1,!1),i=""+l,c=Ci("n",a[1],s[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+a[2]+"/"+a[3],c=cf(s[2],o),c.length<a[4].length&&(c=Rn(a[4].substr(a[4].length-c.length))+c),i+=c,i;if(a=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),s=hf(u,Math.pow(10,o)-1,!0),l+(s[0]||(s[1]?"":"0"))+" "+(s[1]?Lv(s[1],o)+a[2]+"/"+a[3]+cf(s[2],o):Tt(" ",2*o+1+a[2].length+a[3].length));if(a=n.match(/^[#0?]+$/))return i=So(t,0),n.length<=i.length?i:Rn(n.substr(0,n.length-i.length))+i;if(a=n.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var f=n.indexOf(".")-o,h=n.length-i.length-f;return Rn(n.substr(0,f)+i+n.substr(n.length-h))}if(a=n.match(/^00,000\.([#0]*0)$/))return o=Cg(t,a[1].length),t<0?"-"+vr(e,n,-t):ea(pD(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Br(0,3-v.length):"")+v})+"."+Br(o,a[1].length);switch(n){case"###,##0.00":return vr(e,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var d=ea(So(u,0));return d!=="0"?l+d:"";case"###,###.00":return vr(e,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return vr(e,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+n+"|")}function vD(e,n,t){for(var r=n.length-1;n.charCodeAt(r-1)===44;)--r;return Ci(e,n.substr(0,r),t/Math.pow(10,3*(n.length-r)))}function mD(e,n,t){var r=n.replace(V_,""),i=n.length-r.length;return Ci(e,r,t*Math.pow(10,2*i))+Tt("%",i)}function K_(e,n){var t,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(n==0)return"0.0E+0";if(n<0)return"-"+K_(e,-n);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(n)*Math.LOG10E)%i;if(a<0&&(a+=i),t=(n/Math.pow(10,a)).toPrecision(r+1+(i+a)%i),!t.match(/[Ee]/)){var o=Math.floor(Math.log(n)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+a):t+="E+"+(o-a),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,u,l,c){return u+l+c.substr(0,(i+a)%i)+"."+c.substr(a)+"E"})}else t=n.toExponential(r);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function qr(e,n,t){if(e.charCodeAt(0)===40&&!n.match(G_)){var r=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?qr("n",r,t):"("+qr("n",r,-t)+")"}if(n.charCodeAt(n.length-1)===44)return vD(e,n,t);if(n.indexOf("%")!==-1)return mD(e,n,t);if(n.indexOf("E")!==-1)return K_(n,t);if(n.charCodeAt(0)===36)return"$"+qr(e,n.substr(n.charAt(1)==" "?2:1),t);var i,a,o,s,u=Math.abs(t),l=t<0?"-":"";if(n.match(/^00+$/))return l+Br(u,n.length);if(n.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>n.length?i:Rn(n.substr(0,n.length-i.length))+i;if(a=n.match($_))return hD(a,u,l);if(n.match(/^#+0+$/))return l+Br(u,n.length-n.indexOf("0"));if(a=n.match(j_))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Rn(a[1])).replace(/\.$/,"."+Rn(a[1])),i=i.replace(/\.(\d*)$/,function(v,p){return"."+p+Tt("0",Rn(a[1]).length-p.length)}),n.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),a=n.match(/^(0*)\.(#*)$/))return l+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=n.match(/^#{1,3},##0(\.?)$/))return l+ea(""+u);if(a=n.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+qr(e,n,-t):ea(""+t)+"."+Tt("0",a[1].length);if(a=n.match(/^#,#*,#0/))return qr(e,n.replace(/^#,#*,/,""),t);if(a=n.match(/^([0#]+)(\\?-([0#]+))+$/))return i=is(qr(e,n.replace(/[\\-]/g,""),t)),o=0,is(is(n.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<i.length?i.charAt(o++):v==="0"?"0":""}));if(n.match(X_))return i=qr(e,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(a=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),s=hf(u,Math.pow(10,o)-1,!1),i=""+l,c=Ci("n",a[1],s[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+a[2]+"/"+a[3],c=cf(s[2],o),c.length<a[4].length&&(c=Rn(a[4].substr(a[4].length-c.length))+c),i+=c,i;if(a=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),s=hf(u,Math.pow(10,o)-1,!0),l+(s[0]||(s[1]?"":"0"))+" "+(s[1]?Lv(s[1],o)+a[2]+"/"+a[3]+cf(s[2],o):Tt(" ",2*o+1+a[2].length+a[3].length));if(a=n.match(/^[#0?]+$/))return i=""+t,n.length<=i.length?i:Rn(n.substr(0,n.length-i.length))+i;if(a=n.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var f=n.indexOf(".")-o,h=n.length-i.length-f;return Rn(n.substr(0,f)+i+n.substr(n.length-h))}if(a=n.match(/^00,000\.([#0]*0)$/))return t<0?"-"+qr(e,n,-t):ea(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Br(0,3-v.length):"")+v})+"."+Br(0,a[1].length);switch(n){case"###,###":case"##,###":case"#,###":var d=ea(""+u);return d!=="0"?l+d:"";default:if(n.match(/\.[0#?]*$/))return qr(e,n.slice(0,n.lastIndexOf(".")),t)+Rn(n.slice(n.lastIndexOf(".")))}throw new Error("unsupported format |"+n+"|")}function Ci(e,n,t){return(t|0)===t?qr(e,n,t):vr(e,n,t)}function gD(e){for(var n=[],t=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:n[n.length]=e.substr(i,r-i),i=r+1}if(n[n.length]=e.substr(i),t===!0)throw new Error("Format |"+e+"| unterminated string ");return n}var q_=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Y_(e){for(var n=0,t="",r="";n<e.length;)switch(t=e.charAt(n)){case"G":ff(e,n)&&(n+=6),n++;break;case'"':for(;e.charCodeAt(++n)!==34&&n<e.length;);++n;break;case"\\":n+=2;break;case"_":n+=2;break;case"@":++n;break;case"B":case"b":if(e.charAt(n+1)==="1"||e.charAt(n+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(n,3).toUpperCase()==="A/P"||e.substr(n,5).toUpperCase()==="AM/PM"||e.substr(n,5).toUpperCase()==="/")return!0;++n;break;case"[":for(r=t;e.charAt(n++)!=="]"&&n<e.length;)r+=e.charAt(n);if(r.match(q_))return!0;break;case".":case"0":case"#":for(;n<e.length&&("0#?.,E+-%".indexOf(t=e.charAt(++n))>-1||t=="\\"&&e.charAt(n+1)=="-"&&"0#".indexOf(e.charAt(n+2))>-1););break;case"?":for(;e.charAt(++n)===t;);break;case"*":++n,(e.charAt(n)==" "||e.charAt(n)=="*")&&++n;break;case"(":case")":++n;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;n<e.length&&"0123456789".indexOf(e.charAt(++n))>-1;);break;case" ":++n;break;default:++n;break}return!1}function xD(e,n,t,r){for(var i=[],a="",o=0,s="",u="t",l,c,f,h="H";o<e.length;)switch(s=e.charAt(o)){case"G":if(!ff(e,o))throw new Error("unrecognized character "+s+" in "+e);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(a="";(f=e.charCodeAt(++o))!==34&&o<e.length;)a+=String.fromCharCode(f);i[i.length]={t:"t",v:a},++o;break;case"\\":var d=e.charAt(++o),v=d==="("||d===")"?d:"t";i[i.length]={t:v,v:d},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:n},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(l==null&&(l=Yl(n,t,e.charAt(o+1)==="2"),l==null))return"";i[i.length]={t:"X",v:e.substr(o,2)},u=s,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":s=s.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(n<0||l==null&&(l=Yl(n,t),l==null))return"";for(a=s;++o<e.length&&e.charAt(o).toLowerCase()===s;)a+=s;s==="m"&&u.toLowerCase()==="h"&&(s="M"),s==="h"&&(s=h),i[i.length]={t:s,v:a},u=s;break;case"A":case"a":case"":var p={t:s,v:s};if(l==null&&(l=Yl(n,t)),e.substr(o,3).toUpperCase()==="A/P"?(l!=null&&(p.v=l.H>=12?"P":"A"),p.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(l!=null&&(p.v=l.H>=12?"PM":"AM"),p.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="/"?(l!=null&&(p.v=l.H>=12?"":""),p.t="T",o+=5,h="h"):(p.t="t",++o),l==null&&p.t==="T")return"";i[i.length]=p,u=s;break;case"[":for(a=s;e.charAt(o++)!=="]"&&o<e.length;)a+=e.charAt(o);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(q_)){if(l==null&&(l=Yl(n,t),l==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},u=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Y_(e)||(i[i.length]={t:"t",v:a}));break;case".":if(l!=null){for(a=s;++o<e.length&&(s=e.charAt(o))==="0";)a+=s;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=s;++o<e.length&&"0#?.,E+-%".indexOf(s=e.charAt(o))>-1;)a+=s;i[i.length]={t:"n",v:a};break;case"?":for(a=s;e.charAt(++o)===s;)a+=s;i[i.length]={t:s,v:a},u=s;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":s,v:s},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=s;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)a+=e.charAt(o);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:s,v:s},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(s)===-1)throw new Error("unrecognized character "+s+" in "+e);i[i.length]={t:"t",v:s},++o;break}var g=0,m=0,x;for(o=i.length-1,u="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=h,u="h",g<1&&(g=1);break;case"s":(x=i[o].v.match(/\.0+$/))&&(m=Math.max(m,x[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":u=i[o].t;break;case"m":u==="s"&&(i[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&i[o].v.match(/[Hh]/)&&(g=1),g<2&&i[o].v.match(/[Mm]/)&&(g=2),g<3&&i[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M),l.M>=60&&(l.M=0,++l.H);break;case 2:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M);break}var y="",w;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=uD(i[o].t.charCodeAt(0),i[o].v,l,m),i[o].t="t";break;case"n":case"?":for(w=o+1;i[w]!=null&&((s=i[w].t)==="?"||s==="D"||(s===" "||s==="t")&&i[w+1]!=null&&(i[w+1].t==="?"||i[w+1].t==="t"&&i[w+1].v==="/")||i[o].t==="("&&(s===" "||s==="n"||s===")")||s==="t"&&(i[w].v==="/"||i[w].v===" "&&i[w+1]!=null&&i[w+1].t=="?"));)i[o].v+=i[w].v,i[w]={v:"",t:";"},++w;y+=i[o].v,o=w-1;break;case"G":i[o].t="t",i[o].v=Op(n,t);break}var _="",S,E;if(y.length>0){y.charCodeAt(0)==40?(S=n<0&&y.charCodeAt(0)===45?-n:n,E=Ci("n",y,S)):(S=n<0&&r>1?-n:n,E=Ci("n",y,S),S<0&&i[0]&&i[0].t=="t"&&(E=E.substr(1),i[0].v="-"+i[0].v)),w=E.length-1;var b=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){b=o;break}var C=i.length;if(b===i.length&&E.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(w>=i[o].v.length-1?(w-=i[o].v.length,i[o].v=E.substr(w+1,i[o].v.length)):w<0?i[o].v="":(i[o].v=E.substr(0,w+1),w=-1),i[o].t="t",C=o);w>=0&&C<i.length&&(i[C].v=E.substr(0,w+1)+i[C].v)}else if(b!==i.length&&E.indexOf("E")===-1){for(w=E.indexOf(".")-1,o=b;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(c=i[o].v.indexOf(".")>-1&&o===b?i[o].v.indexOf(".")-1:i[o].v.length-1,_=i[o].v.substr(c+1);c>=0;--c)w>=0&&(i[o].v.charAt(c)==="0"||i[o].v.charAt(c)==="#")&&(_=E.charAt(w--)+_);i[o].v=_,i[o].t="t",C=o}for(w>=0&&C<i.length&&(i[C].v=E.substr(0,w+1)+i[C].v),w=E.indexOf(".")+1,o=b;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==b)){for(c=i[o].v.indexOf(".")>-1&&o===b?i[o].v.indexOf(".")+1:0,_=i[o].v.substr(0,c);c<i[o].v.length;++c)w<E.length&&(_+=E.charAt(w++));i[o].v=_,i[o].t="t",C=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(S=r>1&&n<0&&o>0&&i[o-1].v==="-"?-n:n,i[o].v=Ci(i[o].t,i[o].v,S),i[o].t="t");var T="";for(o=0;o!==i.length;++o)i[o]!=null&&(T+=i[o].v);return T}var bg=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Tg(e,n){if(n==null)return!1;var t=parseFloat(n[2]);switch(n[1]){case"=":if(e==t)return!0;break;case">":if(e>t)return!0;break;case"<":if(e<t)return!0;break;case"<>":if(e!=t)return!0;break;case">=":if(e>=t)return!0;break;case"<=":if(e<=t)return!0;break}return!1}function yD(e,n){var t=gD(e),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof n!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var a=n>0?t[0]:n<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,a];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var o=t[0].match(bg),s=t[1].match(bg);return Tg(n,o)?[r,t[0]]:Tg(n,s)?[r,t[1]]:[r,t[o!=null&&s!=null?2:1]]}return[r,a]}function ma(e,n,t){t==null&&(t={});var r="";switch(typeof e){case"string":e=="m/d/yy"&&t.dateNF?r=t.dateNF:r=e;break;case"number":e==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:kt)[e],r==null&&(r=t.table&&t.table[Eg[e]]||kt[Eg[e]]),r==null&&(r=eD[e]||"General");break}if(ff(r,0))return Op(n,t);n instanceof Date&&(n=z_(n,t.date1904));var i=yD(r,n);if(ff(i[1]))return Op(n,t);if(n===!0)n="TRUE";else if(n===!1)n="FALSE";else if(n===""||n==null)return"";return xD(i[1],n,t,i[0])}function Q_(e,n){if(typeof n!="number"){n=+n||-1;for(var t=0;t<392;++t){if(kt[t]==null){n<0&&(n=t);continue}if(kt[t]==e){n=t;break}}n<0&&(n=391)}return kt[n]=e,n}function nh(e){for(var n=0;n!=392;++n)e[n]!==void 0&&Q_(e[n],n)}function rh(){kt=ZN()}var J_=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function wD(e){var n=typeof e=="number"?kt[e]:e;return n=n.replace(J_,"(\\d+)"),new RegExp("^"+n+"$")}function _D(e,n,t){var r=-1,i=-1,a=-1,o=-1,s=-1,u=-1;(n.match(J_)||[]).forEach(function(f,h){var d=parseInt(t[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=d;break;case"d":a=d;break;case"h":o=d;break;case"s":u=d;break;case"m":o>=0?s=d:i=d;break}}),u>=0&&s==-1&&i>=0&&(s=i,i=-1);var l=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);l.length==7&&(l="0"+l),l.length==8&&(l="20"+l);var c=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&s==-1&&u==-1?l:r==-1&&i==-1&&a==-1?c:l+"T"+c}var ED=function(){var e={};e.version="1.2.0";function n(){for(var E=0,b=new Array(256),C=0;C!=256;++C)E=C,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,b[C]=E;return typeof Int32Array<"u"?new Int32Array(b):b}var t=n();function r(E){var b=0,C=0,T=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)F[T]=E[T];for(T=0;T!=256;++T)for(C=E[T],b=256+T;b<4096;b+=256)C=F[b]=C>>>8^E[C&255];var I=[];for(T=1;T!=16;++T)I[T-1]=typeof Int32Array<"u"?F.subarray(T*256,T*256+256):F.slice(T*256,T*256+256);return I}var i=r(t),a=i[0],o=i[1],s=i[2],u=i[3],l=i[4],c=i[5],f=i[6],h=i[7],d=i[8],v=i[9],p=i[10],g=i[11],m=i[12],x=i[13],y=i[14];function w(E,b){for(var C=b^-1,T=0,F=E.length;T<F;)C=C>>>8^t[(C^E.charCodeAt(T++))&255];return~C}function _(E,b){for(var C=b^-1,T=E.length-15,F=0;F<T;)C=y[E[F++]^C&255]^x[E[F++]^C>>8&255]^m[E[F++]^C>>16&255]^g[E[F++]^C>>>24]^p[E[F++]]^v[E[F++]]^d[E[F++]]^h[E[F++]]^f[E[F++]]^c[E[F++]]^l[E[F++]]^u[E[F++]]^s[E[F++]]^o[E[F++]]^a[E[F++]]^t[E[F++]];for(T+=15;F<T;)C=C>>>8^t[(C^E[F++])&255];return~C}function S(E,b){for(var C=b^-1,T=0,F=E.length,I=0,V=0;T<F;)I=E.charCodeAt(T++),I<128?C=C>>>8^t[(C^I)&255]:I<2048?(C=C>>>8^t[(C^(192|I>>6&31))&255],C=C>>>8^t[(C^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,V=E.charCodeAt(T++)&1023,C=C>>>8^t[(C^(240|I>>8&7))&255],C=C>>>8^t[(C^(128|I>>2&63))&255],C=C>>>8^t[(C^(128|V>>6&15|(I&3)<<4))&255],C=C>>>8^t[(C^(128|V&63))&255]):(C=C>>>8^t[(C^(224|I>>12&15))&255],C=C>>>8^t[(C^(128|I>>6&63))&255],C=C>>>8^t[(C^(128|I&63))&255]);return~C}return e.table=t,e.bstr=w,e.buf=_,e.str=S,e}(),ot=function(){var n={};n.version="1.2.1";function t(k,O){for(var R=k.split("/"),N=O.split("/"),M=0,L=0,Y=Math.min(R.length,N.length);M<Y;++M){if(L=R[M].length-N[M].length)return L;if(R[M]!=N[M])return R[M]<N[M]?-1:1}return R.length-N.length}function r(k){if(k.charAt(k.length-1)=="/")return k.slice(0,-1).indexOf("/")===-1?k:r(k.slice(0,-1));var O=k.lastIndexOf("/");return O===-1?k:k.slice(0,O+1)}function i(k){if(k.charAt(k.length-1)=="/")return i(k.slice(0,-1));var O=k.lastIndexOf("/");return O===-1?k:k.slice(O+1)}function a(k,O){typeof O=="string"&&(O=new Date(O));var R=O.getHours();R=R<<6|O.getMinutes(),R=R<<5|O.getSeconds()>>>1,k.write_shift(2,R);var N=O.getFullYear()-1980;N=N<<4|O.getMonth()+1,N=N<<5|O.getDate(),k.write_shift(2,N)}function o(k){var O=k.read_shift(2)&65535,R=k.read_shift(2)&65535,N=new Date,M=R&31;R>>>=5;var L=R&15;R>>>=4,N.setMilliseconds(0),N.setFullYear(R+1980),N.setMonth(L-1),N.setDate(M);var Y=O&31;O>>>=5;var se=O&63;return O>>>=6,N.setHours(O),N.setMinutes(se),N.setSeconds(Y<<1),N}function s(k){tr(k,0);for(var O={},R=0;k.l<=k.length-4;){var N=k.read_shift(2),M=k.read_shift(2),L=k.l+M,Y={};switch(N){case 21589:R=k.read_shift(1),R&1&&(Y.mtime=k.read_shift(4)),M>5&&(R&2&&(Y.atime=k.read_shift(4)),R&4&&(Y.ctime=k.read_shift(4))),Y.mtime&&(Y.mt=new Date(Y.mtime*1e3));break}k.l=L,O[N]=Y}return O}var u;function l(){return u||(u={})}function c(k,O){if(k[0]==80&&k[1]==75)return o1(k,O);if((k[0]|32)==109&&(k[1]|32)==105)return AS(k,O);if(k.length<512)throw new Error("CFB file size "+k.length+" < 512");var R=3,N=512,M=0,L=0,Y=0,se=0,q=0,Z=[],te=k.slice(0,512);tr(te,0);var ve=f(te);switch(R=ve[0],R){case 3:N=512;break;case 4:N=4096;break;case 0:if(ve[1]==0)return o1(k,O);default:throw new Error("Major Version: Expected 3 or 4 saw "+R)}N!==512&&(te=k.slice(0,N),tr(te,28));var _e=k.slice(0,N);h(te,R);var Te=te.read_shift(4,"i");if(R===3&&Te!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Te);te.l+=4,Y=te.read_shift(4,"i"),te.l+=4,te.chk("00100000","Mini Stream Cutoff Size: "),se=te.read_shift(4,"i"),M=te.read_shift(4,"i"),q=te.read_shift(4,"i"),L=te.read_shift(4,"i");for(var xe=-1,Ce=0;Ce<109&&(xe=te.read_shift(4,"i"),!(xe<0));++Ce)Z[Ce]=xe;var Ve=d(k,N);g(q,L,Ve,N,Z);var mt=x(Ve,Y,Z,N);mt[Y].name="!Directory",M>0&&se!==V&&(mt[se].name="!MiniFAT"),mt[Z[0]].name="!FAT",mt.fat_addrs=Z,mt.ssz=N;var gt={},vn=[],Fs=[],Is=[];y(Y,mt,Ve,vn,M,gt,Fs,se),v(Fs,Is,vn),vn.shift();var Ns={FileIndex:Fs,FullPaths:Is};return O&&O.raw&&(Ns.raw={header:_e,sectors:Ve}),Ns}function f(k){if(k[k.l]==80&&k[k.l+1]==75)return[0,0];k.chk(K,"Header Signature: "),k.l+=16;var O=k.read_shift(2,"u");return[k.read_shift(2,"u"),O]}function h(k,O){var R=9;switch(k.l+=2,R=k.read_shift(2)){case 9:if(O!=3)throw new Error("Sector Shift: Expected 9 saw "+R);break;case 12:if(O!=4)throw new Error("Sector Shift: Expected 12 saw "+R);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+R)}k.chk("0600","Mini Sector Shift: "),k.chk("000000000000","Reserved: ")}function d(k,O){for(var R=Math.ceil(k.length/O)-1,N=[],M=1;M<R;++M)N[M-1]=k.slice(M*O,(M+1)*O);return N[R-1]=k.slice(R*O),N}function v(k,O,R){for(var N=0,M=0,L=0,Y=0,se=0,q=R.length,Z=[],te=[];N<q;++N)Z[N]=te[N]=N,O[N]=R[N];for(;se<te.length;++se)N=te[se],M=k[N].L,L=k[N].R,Y=k[N].C,Z[N]===N&&(M!==-1&&Z[M]!==M&&(Z[N]=Z[M]),L!==-1&&Z[L]!==L&&(Z[N]=Z[L])),Y!==-1&&(Z[Y]=N),M!==-1&&N!=Z[N]&&(Z[M]=Z[N],te.lastIndexOf(M)<se&&te.push(M)),L!==-1&&N!=Z[N]&&(Z[L]=Z[N],te.lastIndexOf(L)<se&&te.push(L));for(N=1;N<q;++N)Z[N]===N&&(L!==-1&&Z[L]!==L?Z[N]=Z[L]:M!==-1&&Z[M]!==M&&(Z[N]=Z[M]));for(N=1;N<q;++N)if(k[N].type!==0){if(se=N,se!=Z[se])do se=Z[se],O[N]=O[se]+"/"+O[N];while(se!==0&&Z[se]!==-1&&se!=Z[se]);Z[N]=-1}for(O[0]+="/",N=1;N<q;++N)k[N].type!==2&&(O[N]+="/")}function p(k,O,R){for(var N=k.start,M=k.size,L=[],Y=N;R&&M>0&&Y>=0;)L.push(O.slice(Y*I,Y*I+I)),M-=I,Y=Ma(R,Y*4);return L.length===0?ae(0):un(L).slice(0,k.size)}function g(k,O,R,N,M){var L=V;if(k===V){if(O!==0)throw new Error("DIFAT chain shorter than expected")}else if(k!==-1){var Y=R[k],se=(N>>>2)-1;if(!Y)return;for(var q=0;q<se&&(L=Ma(Y,q*4))!==V;++q)M.push(L);g(Ma(Y,N-4),O-1,R,N,M)}}function m(k,O,R,N,M){var L=[],Y=[];M||(M=[]);var se=N-1,q=0,Z=0;for(q=O;q>=0;){M[q]=!0,L[L.length]=q,Y.push(k[q]);var te=R[Math.floor(q*4/N)];if(Z=q*4&se,N<4+Z)throw new Error("FAT boundary crossed: "+q+" 4 "+N);if(!k[te])break;q=Ma(k[te],Z)}return{nodes:L,data:Pg([Y])}}function x(k,O,R,N){var M=k.length,L=[],Y=[],se=[],q=[],Z=N-1,te=0,ve=0,_e=0,Te=0;for(te=0;te<M;++te)if(se=[],_e=te+O,_e>=M&&(_e-=M),!Y[_e]){q=[];var xe=[];for(ve=_e;ve>=0;){xe[ve]=!0,Y[ve]=!0,se[se.length]=ve,q.push(k[ve]);var Ce=R[Math.floor(ve*4/N)];if(Te=ve*4&Z,N<4+Te)throw new Error("FAT boundary crossed: "+ve+" 4 "+N);if(!k[Ce]||(ve=Ma(k[Ce],Te),xe[ve]))break}L[_e]={nodes:se,data:Pg([q])}}return L}function y(k,O,R,N,M,L,Y,se){for(var q=0,Z=N.length?2:0,te=O[k].data,ve=0,_e=0,Te;ve<te.length;ve+=128){var xe=te.slice(ve,ve+128);tr(xe,64),_e=xe.read_shift(2),Te=Hv(xe,0,_e-Z),N.push(Te);var Ce={name:Te,type:xe.read_shift(1),color:xe.read_shift(1),L:xe.read_shift(4,"i"),R:xe.read_shift(4,"i"),C:xe.read_shift(4,"i"),clsid:xe.read_shift(16),state:xe.read_shift(4,"i"),start:0,size:0},Ve=xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2);Ve!==0&&(Ce.ct=w(xe,xe.l-8));var mt=xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2);mt!==0&&(Ce.mt=w(xe,xe.l-8)),Ce.start=xe.read_shift(4,"i"),Ce.size=xe.read_shift(4,"i"),Ce.size<0&&Ce.start<0&&(Ce.size=Ce.type=0,Ce.start=V,Ce.name=""),Ce.type===5?(q=Ce.start,M>0&&q!==V&&(O[q].name="!StreamData")):Ce.size>=4096?(Ce.storage="fat",O[Ce.start]===void 0&&(O[Ce.start]=m(R,Ce.start,O.fat_addrs,O.ssz)),O[Ce.start].name=Ce.name,Ce.content=O[Ce.start].data.slice(0,Ce.size)):(Ce.storage="minifat",Ce.size<0?Ce.size=0:q!==V&&Ce.start!==V&&O[q]&&(Ce.content=p(Ce,O[q].data,(O[se]||{}).data))),Ce.content&&tr(Ce.content,0),L[Te]=Ce,Y.push(Ce)}}function w(k,O){return new Date((ir(k,O+4)/1e7*Math.pow(2,32)+ir(k,O)/1e7-11644473600)*1e3)}function _(k,O){return l(),c(u.readFileSync(k),O)}function S(k,O){var R=O&&O.type;switch(R||Je&&Buffer.isBuffer(k)&&(R="buffer"),R||"base64"){case"file":return _(k,O);case"base64":return c(Mr(Ii(k)),O);case"binary":return c(Mr(k),O)}return c(k,O)}function E(k,O){var R=O||{},N=R.root||"Root Entry";if(k.FullPaths||(k.FullPaths=[]),k.FileIndex||(k.FileIndex=[]),k.FullPaths.length!==k.FileIndex.length)throw new Error("inconsistent CFB structure");k.FullPaths.length===0&&(k.FullPaths[0]=N+"/",k.FileIndex[0]={name:N,type:5}),R.CLSID&&(k.FileIndex[0].clsid=R.CLSID),b(k)}function b(k){var O="Sh33tJ5";if(!ot.find(k,"/"+O)){var R=ae(4);R[0]=55,R[1]=R[3]=50,R[2]=54,k.FileIndex.push({name:O,type:2,content:R,size:4,L:69,R:69,C:69}),k.FullPaths.push(k.FullPaths[0]+O),C(k)}}function C(k,O){E(k);for(var R=!1,N=!1,M=k.FullPaths.length-1;M>=0;--M){var L=k.FileIndex[M];switch(L.type){case 0:N?R=!0:(k.FileIndex.pop(),k.FullPaths.pop());break;case 1:case 2:case 5:N=!0,isNaN(L.R*L.L*L.C)&&(R=!0),L.R>-1&&L.L>-1&&L.R==L.L&&(R=!0);break;default:R=!0;break}}if(!(!R&&!O)){var Y=new Date(1987,1,19),se=0,q=Object.create?Object.create(null):{},Z=[];for(M=0;M<k.FullPaths.length;++M)q[k.FullPaths[M]]=!0,k.FileIndex[M].type!==0&&Z.push([k.FullPaths[M],k.FileIndex[M]]);for(M=0;M<Z.length;++M){var te=r(Z[M][0]);N=q[te],N||(Z.push([te,{name:i(te).replace("/",""),type:1,clsid:ie,ct:Y,mt:Y,content:null}]),q[te]=!0)}for(Z.sort(function(Te,xe){return t(Te[0],xe[0])}),k.FullPaths=[],k.FileIndex=[],M=0;M<Z.length;++M)k.FullPaths[M]=Z[M][0],k.FileIndex[M]=Z[M][1];for(M=0;M<Z.length;++M){var ve=k.FileIndex[M],_e=k.FullPaths[M];if(ve.name=i(_e).replace("/",""),ve.L=ve.R=ve.C=-(ve.color=1),ve.size=ve.content?ve.content.length:0,ve.start=0,ve.clsid=ve.clsid||ie,M===0)ve.C=Z.length>1?1:-1,ve.size=0,ve.type=5;else if(_e.slice(-1)=="/"){for(se=M+1;se<Z.length&&r(k.FullPaths[se])!=_e;++se);for(ve.C=se>=Z.length?-1:se,se=M+1;se<Z.length&&r(k.FullPaths[se])!=r(_e);++se);ve.R=se>=Z.length?-1:se,ve.type=1}else r(k.FullPaths[M+1]||"")==r(_e)&&(ve.R=M+1),ve.type=2}}}function T(k,O){var R=O||{};if(R.fileType=="mad")return RS(k,R);switch(C(k),R.fileType){case"zip":return ES(k,R)}var N=function(Te){for(var xe=0,Ce=0,Ve=0;Ve<Te.FileIndex.length;++Ve){var mt=Te.FileIndex[Ve];if(mt.content){var gt=mt.content.length;gt>0&&(gt<4096?xe+=gt+63>>6:Ce+=gt+511>>9)}}for(var vn=Te.FullPaths.length+3>>2,Fs=xe+7>>3,Is=xe+127>>7,Ns=Fs+Ce+vn+Is,Aa=Ns+127>>7,ch=Aa<=109?0:Math.ceil((Aa-109)/127);Ns+Aa+ch+127>>7>Aa;)ch=++Aa<=109?0:Math.ceil((Aa-109)/127);var vi=[1,ch,Aa,Is,vn,Ce,xe,0];return Te.FileIndex[0].size=xe<<6,vi[7]=(Te.FileIndex[0].start=vi[0]+vi[1]+vi[2]+vi[3]+vi[4]+vi[5])+(vi[6]+7>>3),vi}(k),M=ae(N[7]<<9),L=0,Y=0;{for(L=0;L<8;++L)M.write_shift(1,G[L]);for(L=0;L<8;++L)M.write_shift(2,0);for(M.write_shift(2,62),M.write_shift(2,3),M.write_shift(2,65534),M.write_shift(2,9),M.write_shift(2,6),L=0;L<3;++L)M.write_shift(2,0);for(M.write_shift(4,0),M.write_shift(4,N[2]),M.write_shift(4,N[0]+N[1]+N[2]+N[3]-1),M.write_shift(4,0),M.write_shift(4,4096),M.write_shift(4,N[3]?N[0]+N[1]+N[2]-1:V),M.write_shift(4,N[3]),M.write_shift(-4,N[1]?N[0]-1:V),M.write_shift(4,N[1]),L=0;L<109;++L)M.write_shift(-4,L<N[2]?N[1]+L:-1)}if(N[1])for(Y=0;Y<N[1];++Y){for(;L<236+Y*127;++L)M.write_shift(-4,L<N[2]?N[1]+L:-1);M.write_shift(-4,Y===N[1]-1?V:Y+1)}var se=function(Te){for(Y+=Te;L<Y-1;++L)M.write_shift(-4,L+1);Te&&(++L,M.write_shift(-4,V))};for(Y=L=0,Y+=N[1];L<Y;++L)M.write_shift(-4,re.DIFSECT);for(Y+=N[2];L<Y;++L)M.write_shift(-4,re.FATSECT);se(N[3]),se(N[4]);for(var q=0,Z=0,te=k.FileIndex[0];q<k.FileIndex.length;++q)te=k.FileIndex[q],te.content&&(Z=te.content.length,!(Z<4096)&&(te.start=Y,se(Z+511>>9)));for(se(N[6]+7>>3);M.l&511;)M.write_shift(-4,re.ENDOFCHAIN);for(Y=L=0,q=0;q<k.FileIndex.length;++q)te=k.FileIndex[q],te.content&&(Z=te.content.length,!(!Z||Z>=4096)&&(te.start=Y,se(Z+63>>6)));for(;M.l&511;)M.write_shift(-4,re.ENDOFCHAIN);for(L=0;L<N[4]<<2;++L){var ve=k.FullPaths[L];if(!ve||ve.length===0){for(q=0;q<17;++q)M.write_shift(4,0);for(q=0;q<3;++q)M.write_shift(4,-1);for(q=0;q<12;++q)M.write_shift(4,0);continue}te=k.FileIndex[L],L===0&&(te.start=te.size?te.start-1:V);var _e=L===0&&R.root||te.name;if(Z=2*(_e.length+1),M.write_shift(64,_e,"utf16le"),M.write_shift(2,Z),M.write_shift(1,te.type),M.write_shift(1,te.color),M.write_shift(-4,te.L),M.write_shift(-4,te.R),M.write_shift(-4,te.C),te.clsid)M.write_shift(16,te.clsid,"hex");else for(q=0;q<4;++q)M.write_shift(4,0);M.write_shift(4,te.state||0),M.write_shift(4,0),M.write_shift(4,0),M.write_shift(4,0),M.write_shift(4,0),M.write_shift(4,te.start),M.write_shift(4,te.size),M.write_shift(4,0)}for(L=1;L<k.FileIndex.length;++L)if(te=k.FileIndex[L],te.size>=4096)if(M.l=te.start+1<<9,Je&&Buffer.isBuffer(te.content))te.content.copy(M,M.l,0,te.size),M.l+=te.size+511&-512;else{for(q=0;q<te.size;++q)M.write_shift(1,te.content[q]);for(;q&511;++q)M.write_shift(1,0)}for(L=1;L<k.FileIndex.length;++L)if(te=k.FileIndex[L],te.size>0&&te.size<4096)if(Je&&Buffer.isBuffer(te.content))te.content.copy(M,M.l,0,te.size),M.l+=te.size+63&-64;else{for(q=0;q<te.size;++q)M.write_shift(1,te.content[q]);for(;q&63;++q)M.write_shift(1,0)}if(Je)M.l=M.length;else for(;M.l<M.length;)M.write_shift(1,0);return M}function F(k,O){var R=k.FullPaths.map(function(q){return q.toUpperCase()}),N=R.map(function(q){var Z=q.split("/");return Z[Z.length-(q.slice(-1)=="/"?2:1)]}),M=!1;O.charCodeAt(0)===47?(M=!0,O=R[0].slice(0,-1)+O):M=O.indexOf("/")!==-1;var L=O.toUpperCase(),Y=M===!0?R.indexOf(L):N.indexOf(L);if(Y!==-1)return k.FileIndex[Y];var se=!L.match(ql);for(L=L.replace(lu,""),se&&(L=L.replace(ql,"!")),Y=0;Y<R.length;++Y)if((se?R[Y].replace(ql,"!"):R[Y]).replace(lu,"")==L||(se?N[Y].replace(ql,"!"):N[Y]).replace(lu,"")==L)return k.FileIndex[Y];return null}var I=64,V=-2,K="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],ie="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:K,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ie,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(k,O,R){l();var N=T(k,R);u.writeFileSync(O,N)}function X(k){for(var O=new Array(k.length),R=0;R<k.length;++R)O[R]=String.fromCharCode(k[R]);return O.join("")}function Q(k,O){var R=T(k,O);switch(O&&O.type||"buffer"){case"file":return l(),u.writeFileSync(O.filename,R),R;case"binary":return typeof R=="string"?R:X(R);case"base64":return Wu(typeof R=="string"?R:X(R));case"buffer":if(Je)return Buffer.isBuffer(R)?R:Wi(R);case"array":return typeof R=="string"?Mr(R):R}return R}var fe;function D(k){try{var O=k.InflateRaw,R=new O;if(R._processChunk(new Uint8Array([3,0]),R._finishFlushFlag),R.bytesRead)fe=k;else throw new Error("zlib does not expose bytesRead")}catch(N){console.error("cannot use native zlib: "+(N.message||N))}}function z(k,O){if(!fe)return i1(k,O);var R=fe.InflateRaw,N=new R,M=N._processChunk(k.slice(k.l),N._finishFlushFlag);return k.l+=N.bytesRead,M}function U(k){return fe?fe.deflateRawSync(k):dl(k)}var B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],he=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ge(k){var O=(k<<1|k<<11)&139536|(k<<5|k<<15)&558144;return(O>>16|O>>8|O)&255}for(var de=typeof Uint8Array<"u",pe=de?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)pe[Fe]=ge(Fe);function Ie(k,O){var R=pe[k&255];return O<=8?R>>>8-O:(R=R<<8|pe[k>>8&255],O<=16?R>>>16-O:(R=R<<8|pe[k>>16&255],R>>>24-O))}function Le(k,O){var R=O&7,N=O>>>3;return(k[N]|(R<=6?0:k[N+1]<<8))>>>R&3}function Me(k,O){var R=O&7,N=O>>>3;return(k[N]|(R<=5?0:k[N+1]<<8))>>>R&7}function qe(k,O){var R=O&7,N=O>>>3;return(k[N]|(R<=4?0:k[N+1]<<8))>>>R&15}function Ue(k,O){var R=O&7,N=O>>>3;return(k[N]|(R<=3?0:k[N+1]<<8))>>>R&31}function Se(k,O){var R=O&7,N=O>>>3;return(k[N]|(R<=1?0:k[N+1]<<8))>>>R&127}function pt(k,O,R){var N=O&7,M=O>>>3,L=(1<<R)-1,Y=k[M]>>>N;return R<8-N||(Y|=k[M+1]<<8-N,R<16-N)||(Y|=k[M+2]<<16-N,R<24-N)||(Y|=k[M+3]<<24-N),Y&L}function vt(k,O,R){var N=O&7,M=O>>>3;return N<=5?k[M]|=(R&7)<<N:(k[M]|=R<<N&255,k[M+1]=(R&7)>>8-N),O+3}function Mn(k,O,R){var N=O&7,M=O>>>3;return R=(R&1)<<N,k[M]|=R,O+1}function pn(k,O,R){var N=O&7,M=O>>>3;return R<<=N,k[M]|=R&255,R>>>=8,k[M+1]=R,O+8}function Ar(k,O,R){var N=O&7,M=O>>>3;return R<<=N,k[M]|=R&255,R>>>=8,k[M+1]=R&255,k[M+2]=R>>>8,O+16}function Qn(k,O){var R=k.length,N=2*R>O?2*R:O+5,M=0;if(R>=O)return k;if(Je){var L=yg(N);if(k.copy)k.copy(L);else for(;M<k.length;++M)L[M]=k[M];return L}else if(de){var Y=new Uint8Array(N);if(Y.set)Y.set(k);else for(;M<R;++M)Y[M]=k[M];return Y}return k.length=N,k}function en(k){for(var O=new Array(k),R=0;R<k;++R)O[R]=0;return O}function Ln(k,O,R){var N=1,M=0,L=0,Y=0,se=0,q=k.length,Z=de?new Uint16Array(32):en(32);for(L=0;L<32;++L)Z[L]=0;for(L=q;L<R;++L)k[L]=0;q=k.length;var te=de?new Uint16Array(q):en(q);for(L=0;L<q;++L)Z[M=k[L]]++,N<M&&(N=M),te[L]=0;for(Z[0]=0,L=1;L<=N;++L)Z[L+16]=se=se+Z[L-1]<<1;for(L=0;L<q;++L)se=k[L],se!=0&&(te[L]=Z[se+16]++);var ve=0;for(L=0;L<q;++L)if(ve=k[L],ve!=0)for(se=Ie(te[L],N)>>N-ve,Y=(1<<N+4-ve)-1;Y>=0;--Y)O[se|Y<<ve]=ve&15|L<<4;return N}var ka=de?new Uint16Array(512):en(512),Gr=de?new Uint16Array(32):en(32);if(!de){for(var jt=0;jt<512;++jt)ka[jt]=0;for(jt=0;jt<32;++jt)Gr[jt]=0}(function(){for(var k=[],O=0;O<32;O++)k.push(5);Ln(k,Gr,32);var R=[];for(O=0;O<=143;O++)R.push(8);for(;O<=255;O++)R.push(9);for(;O<=279;O++)R.push(7);for(;O<=287;O++)R.push(8);Ln(R,ka,288)})();var Rs=function(){for(var O=de?new Uint8Array(32768):[],R=0,N=0;R<he.length-1;++R)for(;N<he[R+1];++N)O[N]=R;for(;N<32768;++N)O[N]=29;var M=de?new Uint8Array(259):[];for(R=0,N=0;R<J.length-1;++R)for(;N<J[R+1];++N)M[N]=R;function L(se,q){for(var Z=0;Z<se.length;){var te=Math.min(65535,se.length-Z),ve=Z+te==se.length;for(q.write_shift(1,+ve),q.write_shift(2,te),q.write_shift(2,~te&65535);te-- >0;)q[q.l++]=se[Z++]}return q.l}function Y(se,q){for(var Z=0,te=0,ve=de?new Uint16Array(32768):[];te<se.length;){var _e=Math.min(65535,se.length-te);if(_e<10){for(Z=vt(q,Z,+(te+_e==se.length)),Z&7&&(Z+=8-(Z&7)),q.l=Z/8|0,q.write_shift(2,_e),q.write_shift(2,~_e&65535);_e-- >0;)q[q.l++]=se[te++];Z=q.l*8;continue}Z=vt(q,Z,+(te+_e==se.length)+2);for(var Te=0;_e-- >0;){var xe=se[te];Te=(Te<<5^xe)&32767;var Ce=-1,Ve=0;if((Ce=ve[Te])&&(Ce|=te&-32768,Ce>te&&(Ce-=32768),Ce<te))for(;se[Ce+Ve]==se[te+Ve]&&Ve<250;)++Ve;if(Ve>2){xe=M[Ve],xe<=22?Z=pn(q,Z,pe[xe+1]>>1)-1:(pn(q,Z,3),Z+=5,pn(q,Z,pe[xe-23]>>5),Z+=3);var mt=xe<8?0:xe-4>>2;mt>0&&(Ar(q,Z,Ve-J[xe]),Z+=mt),xe=O[te-Ce],Z=pn(q,Z,pe[xe]>>3),Z-=3;var gt=xe<4?0:xe-2>>1;gt>0&&(Ar(q,Z,te-Ce-he[xe]),Z+=gt);for(var vn=0;vn<Ve;++vn)ve[Te]=te&32767,Te=(Te<<5^se[te])&32767,++te;_e-=Ve-1}else xe<=143?xe=xe+48:Z=Mn(q,Z,1),Z=pn(q,Z,pe[xe]),ve[Te]=te&32767,++te}Z=pn(q,Z,0)-1}return q.l=(Z+7)/8|0,q.l}return function(q,Z){return q.length<8?L(q,Z):Y(q,Z)}}();function dl(k){var O=ae(50+Math.floor(k.length*1.1)),R=Rs(k,O);return O.slice(0,R)}var pl=de?new Uint16Array(32768):en(32768),vl=de?new Uint16Array(32768):en(32768),vo=de?new Uint16Array(128):en(128),mo=1,go=1;function yS(k,O){var R=Ue(k,O)+257;O+=5;var N=Ue(k,O)+1;O+=5;var M=qe(k,O)+4;O+=4;for(var L=0,Y=de?new Uint8Array(19):en(19),se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],q=1,Z=de?new Uint8Array(8):en(8),te=de?new Uint8Array(8):en(8),ve=Y.length,_e=0;_e<M;++_e)Y[B[_e]]=L=Me(k,O),q<L&&(q=L),Z[L]++,O+=3;var Te=0;for(Z[0]=0,_e=1;_e<=q;++_e)te[_e]=Te=Te+Z[_e-1]<<1;for(_e=0;_e<ve;++_e)(Te=Y[_e])!=0&&(se[_e]=te[Te]++);var xe=0;for(_e=0;_e<ve;++_e)if(xe=Y[_e],xe!=0){Te=pe[se[_e]]>>8-xe;for(var Ce=(1<<7-xe)-1;Ce>=0;--Ce)vo[Te|Ce<<xe]=xe&7|_e<<3}var Ve=[];for(q=1;Ve.length<R+N;)switch(Te=vo[Se(k,O)],O+=Te&7,Te>>>=3){case 16:for(L=3+Le(k,O),O+=2,Te=Ve[Ve.length-1];L-- >0;)Ve.push(Te);break;case 17:for(L=3+Me(k,O),O+=3;L-- >0;)Ve.push(0);break;case 18:for(L=11+Se(k,O),O+=7;L-- >0;)Ve.push(0);break;default:Ve.push(Te),q<Te&&(q=Te);break}var mt=Ve.slice(0,R),gt=Ve.slice(R);for(_e=R;_e<286;++_e)mt[_e]=0;for(_e=N;_e<30;++_e)gt[_e]=0;return mo=Ln(mt,pl,286),go=Ln(gt,vl,30),O}function wS(k,O){if(k[0]==3&&!(k[1]&3))return[Za(O),2];for(var R=0,N=0,M=yg(O||1<<18),L=0,Y=M.length>>>0,se=0,q=0;!(N&1);){if(N=Me(k,R),R+=3,N>>>1)N>>1==1?(se=9,q=5):(R=yS(k,R),se=mo,q=go);else{R&7&&(R+=8-(R&7));var Z=k[R>>>3]|k[(R>>>3)+1]<<8;if(R+=32,Z>0)for(!O&&Y<L+Z&&(M=Qn(M,L+Z),Y=M.length);Z-- >0;)M[L++]=k[R>>>3],R+=8;continue}for(;;){!O&&Y<L+32767&&(M=Qn(M,L+32767),Y=M.length);var te=pt(k,R,se),ve=N>>>1==1?ka[te]:pl[te];if(R+=ve&15,ve>>>=4,!(ve>>>8&255))M[L++]=ve;else{if(ve==256)break;ve-=257;var _e=ve<8?0:ve-4>>2;_e>5&&(_e=0);var Te=L+J[ve];_e>0&&(Te+=pt(k,R,_e),R+=_e),te=pt(k,R,q),ve=N>>>1==1?Gr[te]:vl[te],R+=ve&15,ve>>>=4;var xe=ve<4?0:ve-2>>1,Ce=he[ve];for(xe>0&&(Ce+=pt(k,R,xe),R+=xe),!O&&Y<Te&&(M=Qn(M,Te+100),Y=M.length);L<Te;)M[L]=M[L-Ce],++L}}}return O?[M,R+7>>>3]:[M.slice(0,L),R+7>>>3]}function i1(k,O){var R=k.slice(k.l||0),N=wS(R,O);return k.l+=N[1],N[0]}function a1(k,O){if(k)typeof console<"u"&&console.error(O);else throw new Error(O)}function o1(k,O){var R=k;tr(R,0);var N=[],M=[],L={FileIndex:N,FullPaths:M};E(L,{root:O.root});for(var Y=R.length-4;(R[Y]!=80||R[Y+1]!=75||R[Y+2]!=5||R[Y+3]!=6)&&Y>=0;)--Y;R.l=Y+4,R.l+=4;var se=R.read_shift(2);R.l+=6;var q=R.read_shift(4);for(R.l=q,Y=0;Y<se;++Y){R.l+=20;var Z=R.read_shift(4),te=R.read_shift(4),ve=R.read_shift(2),_e=R.read_shift(2),Te=R.read_shift(2);R.l+=8;var xe=R.read_shift(4),Ce=s(R.slice(R.l+ve,R.l+ve+_e));R.l+=ve+_e+Te;var Ve=R.l;R.l=xe+4,_S(R,Z,te,L,Ce),R.l=Ve}return L}function _S(k,O,R,N,M){k.l+=2;var L=k.read_shift(2),Y=k.read_shift(2),se=o(k);if(L&8257)throw new Error("Unsupported ZIP encryption");for(var q=k.read_shift(4),Z=k.read_shift(4),te=k.read_shift(4),ve=k.read_shift(2),_e=k.read_shift(2),Te="",xe=0;xe<ve;++xe)Te+=String.fromCharCode(k[k.l++]);if(_e){var Ce=s(k.slice(k.l,k.l+_e));(Ce[21589]||{}).mt&&(se=Ce[21589].mt),((M||{})[21589]||{}).mt&&(se=M[21589].mt)}k.l+=_e;var Ve=k.slice(k.l,k.l+Z);switch(Y){case 8:Ve=z(k,te);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Y)}var mt=!1;L&8&&(q=k.read_shift(4),q==134695760&&(q=k.read_shift(4),mt=!0),Z=k.read_shift(4),te=k.read_shift(4)),Z!=O&&a1(mt,"Bad compressed size: "+O+" != "+Z),te!=R&&a1(mt,"Bad uncompressed size: "+R+" != "+te),lh(N,Te,Ve,{unsafe:!0,mt:se})}function ES(k,O){var R=O||{},N=[],M=[],L=ae(1),Y=R.compression?8:0,se=0,q=0,Z=0,te=0,ve=0,_e=k.FullPaths[0],Te=_e,xe=k.FileIndex[0],Ce=[],Ve=0;for(q=1;q<k.FullPaths.length;++q)if(Te=k.FullPaths[q].slice(_e.length),xe=k.FileIndex[q],!(!xe.size||!xe.content||Te=="Sh33tJ5")){var mt=te,gt=ae(Te.length);for(Z=0;Z<Te.length;++Z)gt.write_shift(1,Te.charCodeAt(Z)&127);gt=gt.slice(0,gt.l),Ce[ve]=ED.buf(xe.content,0);var vn=xe.content;Y==8&&(vn=U(vn)),L=ae(30),L.write_shift(4,67324752),L.write_shift(2,20),L.write_shift(2,se),L.write_shift(2,Y),xe.mt?a(L,xe.mt):L.write_shift(4,0),L.write_shift(-4,Ce[ve]),L.write_shift(4,vn.length),L.write_shift(4,xe.content.length),L.write_shift(2,gt.length),L.write_shift(2,0),te+=L.length,N.push(L),te+=gt.length,N.push(gt),te+=vn.length,N.push(vn),L=ae(46),L.write_shift(4,33639248),L.write_shift(2,0),L.write_shift(2,20),L.write_shift(2,se),L.write_shift(2,Y),L.write_shift(4,0),L.write_shift(-4,Ce[ve]),L.write_shift(4,vn.length),L.write_shift(4,xe.content.length),L.write_shift(2,gt.length),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(4,0),L.write_shift(4,mt),Ve+=L.l,M.push(L),Ve+=gt.length,M.push(gt),++ve}return L=ae(22),L.write_shift(4,101010256),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(2,ve),L.write_shift(2,ve),L.write_shift(4,Ve),L.write_shift(4,te),L.write_shift(2,0),un([un(N),un(M),L])}var ml={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function SS(k,O){if(k.ctype)return k.ctype;var R=k.name||"",N=R.match(/\.([^\.]+)$/);return N&&ml[N[1]]||O&&(N=(R=O).match(/[\.\\]([^\.\\])+$/),N&&ml[N[1]])?ml[N[1]]:"application/octet-stream"}function CS(k){for(var O=Wu(k),R=[],N=0;N<O.length;N+=76)R.push(O.slice(N,N+76));return R.join(`\r
`)+`\r
`}function bS(k){var O=k.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Z){var te=Z.charCodeAt(0).toString(16).toUpperCase();return"="+(te.length==1?"0"+te:te)});O=O.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),O.charAt(0)==`
`&&(O="=0D"+O.slice(1)),O=O.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var R=[],N=O.split(`\r
`),M=0;M<N.length;++M){var L=N[M];if(L.length==0){R.push("");continue}for(var Y=0;Y<L.length;){var se=76,q=L.slice(Y,Y+se);q.charAt(se-1)=="="?se--:q.charAt(se-2)=="="?se-=2:q.charAt(se-3)=="="&&(se-=3),q=L.slice(Y,Y+se),Y+=se,Y<L.length&&(q+="="),R.push(q)}}return R.join(`\r
`)}function TS(k){for(var O=[],R=0;R<k.length;++R){for(var N=k[R];R<=k.length&&N.charAt(N.length-1)=="=";)N=N.slice(0,N.length-1)+k[++R];O.push(N)}for(var M=0;M<O.length;++M)O[M]=O[M].replace(/[=][0-9A-Fa-f]{2}/g,function(L){return String.fromCharCode(parseInt(L.slice(1),16))});return Mr(O.join(`\r
`))}function kS(k,O,R){for(var N="",M="",L="",Y,se=0;se<10;++se){var q=O[se];if(!q||q.match(/^\s*$/))break;var Z=q.match(/^(.*?):\s*([^\s].*)$/);if(Z)switch(Z[1].toLowerCase()){case"content-location":N=Z[2].trim();break;case"content-type":L=Z[2].trim();break;case"content-transfer-encoding":M=Z[2].trim();break}}switch(++se,M.toLowerCase()){case"base64":Y=Mr(Ii(O.slice(se).join("")));break;case"quoted-printable":Y=TS(O.slice(se));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+M)}var te=lh(k,N.slice(R.length),Y,{unsafe:!0});L&&(te.ctype=L)}function AS(k,O){if(X(k.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var R=O&&O.root||"",N=(Je&&Buffer.isBuffer(k)?k.toString("binary"):X(k)).split(`\r
`),M=0,L="";for(M=0;M<N.length;++M)if(L=N[M],!!/^Content-Location:/i.test(L)&&(L=L.slice(L.indexOf("file")),R||(R=L.slice(0,L.lastIndexOf("/")+1)),L.slice(0,R.length)!=R))for(;R.length>0&&(R=R.slice(0,R.length-1),R=R.slice(0,R.lastIndexOf("/")+1),L.slice(0,R.length)!=R););var Y=(N[1]||"").match(/boundary="(.*?)"/);if(!Y)throw new Error("MAD cannot find boundary");var se="--"+(Y[1]||""),q=[],Z=[],te={FileIndex:q,FullPaths:Z};E(te);var ve,_e=0;for(M=0;M<N.length;++M){var Te=N[M];Te!==se&&Te!==se+"--"||(_e++&&kS(te,N.slice(ve,M),R),ve=M)}return te}function RS(k,O){var R=O||{},N=R.boundary||"SheetJS";N="------="+N;for(var M=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+N.slice(2)+'"',"","",""],L=k.FullPaths[0],Y=L,se=k.FileIndex[0],q=1;q<k.FullPaths.length;++q)if(Y=k.FullPaths[q].slice(L.length),se=k.FileIndex[q],!(!se.size||!se.content||Y=="Sh33tJ5")){Y=Y.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ve){return"_x"+Ve.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ve){return"_u"+Ve.charCodeAt(0).toString(16)+"_"});for(var Z=se.content,te=Je&&Buffer.isBuffer(Z)?Z.toString("binary"):X(Z),ve=0,_e=Math.min(1024,te.length),Te=0,xe=0;xe<=_e;++xe)(Te=te.charCodeAt(xe))>=32&&Te<128&&++ve;var Ce=ve>=_e*4/5;M.push(N),M.push("Content-Location: "+(R.root||"file:///C:/SheetJS/")+Y),M.push("Content-Transfer-Encoding: "+(Ce?"quoted-printable":"base64")),M.push("Content-Type: "+SS(se,Y)),M.push(""),M.push(Ce?bS(te):CS(te))}return M.push(N+`--\r
`),M.join(`\r
`)}function FS(k){var O={};return E(O,k),O}function lh(k,O,R,N){var M=N&&N.unsafe;M||E(k);var L=!M&&ot.find(k,O);if(!L){var Y=k.FullPaths[0];O.slice(0,Y.length)==Y?Y=O:(Y.slice(-1)!="/"&&(Y+="/"),Y=(Y+O).replace("//","/")),L={name:i(O),type:2},k.FileIndex.push(L),k.FullPaths.push(Y),M||ot.utils.cfb_gc(k)}return L.content=R,L.size=R?R.length:0,N&&(N.CLSID&&(L.clsid=N.CLSID),N.mt&&(L.mt=N.mt),N.ct&&(L.ct=N.ct)),L}function IS(k,O){E(k);var R=ot.find(k,O);if(R){for(var N=0;N<k.FileIndex.length;++N)if(k.FileIndex[N]==R)return k.FileIndex.splice(N,1),k.FullPaths.splice(N,1),!0}return!1}function NS(k,O,R){E(k);var N=ot.find(k,O);if(N){for(var M=0;M<k.FileIndex.length;++M)if(k.FileIndex[M]==N)return k.FileIndex[M].name=i(R),k.FullPaths[M]=R,!0}return!1}function DS(k){C(k,!0)}return n.find=F,n.read=S,n.parse=c,n.write=Q,n.writeFile=H,n.utils={cfb_new:FS,cfb_add:lh,cfb_del:IS,cfb_mov:NS,cfb_gc:DS,ReadShift:fu,CheckField:mE,prep_blob:tr,bconcat:un,use_zlib:D,_deflateRaw:dl,_inflateRaw:i1,consts:re},n}();function SD(e){return typeof e=="string"?th(e):Array.isArray(e)?qN(e):e}function ul(e,n,t){if(typeof Deno<"u"){if(t&&typeof n=="string")switch(t){case"utf8":n=new TextEncoder(t).encode(n);break;case"binary":n=th(n);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(e,n)}var r=t=="utf8"?Vu(n):n;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,e);if(typeof Blob<"u"){var i=new Blob([SD(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(typeof saveAs<"u")return saveAs(i,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(e);return s.open("w"),s.encoding="binary",Array.isArray(n)&&(n=sl(n)),s.write(n),s.close(),n}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+e)}function dn(e){for(var n=Object.keys(e),t=[],r=0;r<n.length;++r)Object.prototype.hasOwnProperty.call(e,n[r])&&t.push(n[r]);return t}function kg(e,n){for(var t=[],r=dn(e),i=0;i!==r.length;++i)t[e[r[i]][n]]==null&&(t[e[r[i]][n]]=r[i]);return t}function Uv(e){for(var n=[],t=dn(e),r=0;r!==t.length;++r)n[e[t[r]]]=t[r];return n}function ih(e){for(var n=[],t=dn(e),r=0;r!==t.length;++r)n[e[t[r]]]=parseInt(t[r],10);return n}function CD(e){for(var n=[],t=dn(e),r=0;r!==t.length;++r)n[e[t[r]]]==null&&(n[e[t[r]]]=[]),n[e[t[r]]].push(t[r]);return n}var df=new Date(1899,11,30,0,0,0);function qn(e,n){var t=e.getTime(),r=df.getTime()+(e.getTimezoneOffset()-df.getTimezoneOffset())*6e4;return(t-r)/(24*60*60*1e3)}var Z_=new Date,bD=df.getTime()+(Z_.getTimezoneOffset()-df.getTimezoneOffset())*6e4,Ag=Z_.getTimezoneOffset();function eE(e){var n=new Date;return n.setTime(e*24*60*60*1e3+bD),n.getTimezoneOffset()!==Ag&&n.setTime(n.getTime()+(n.getTimezoneOffset()-Ag)*6e4),n}var Rg=new Date("2017-02-19T19:06:09.000Z"),tE=isNaN(Rg.getFullYear())?new Date("2/19/17"):Rg,TD=tE.getFullYear()==2017;function Dn(e,n){var t=new Date(e);if(TD)return n>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):n<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(e instanceof Date)return e;if(tE.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return e.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function ah(e,n){if(Je&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return t[a]||a})}catch{}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function Yn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=Yn(e[t]));return n}function Tt(e,n){for(var t="";t.length<n;)t+=e;return t}function bi(e){var n=Number(e);if(!isNaN(n))return isFinite(n)?n:NaN;if(!/\d/.test(e))return n;var t=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(n=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,a){return t=-t,a}),!isNaN(n=Number(r)))?n/t:n}var kD=["january","february","march","april","may","june","july","august","september","october","november","december"];function zu(e){var n=new Date(e),t=new Date(NaN),r=n.getYear(),i=n.getMonth(),a=n.getDate();if(isNaN(a))return t;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&kD.indexOf(o)==-1)return t}else if(o.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||a>1)&&r!=101?n:e.match(/[^-0-9:,\/\\]/)?t:n}function $e(e,n,t){if(e.FullPaths){if(typeof t=="string"){var r;return Je?r=Wi(t):r=YN(t),ot.utils.cfb_add(e,n,r)}ot.utils.cfb_add(e,n,t)}else e.file(n,t)}function Wv(){return ot.utils.cfb_new()}var Ot=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,AD={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},zv=Uv(AD),Vv=/[&<>'"]/g,RD=/[\u0000-\u0008\u000b-\u001f]/g;function rt(e){var n=e+"";return n.replace(Vv,function(t){return zv[t]}).replace(RD,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Fg(e){return rt(e).replace(/ /g,"_x0020_")}var nE=/[\u0000-\u001f]/g;function FD(e){var n=e+"";return n.replace(Vv,function(t){return zv[t]}).replace(/\n/g,"<br/>").replace(nE,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function ID(e){var n=e+"";return n.replace(Vv,function(t){return zv[t]}).replace(nE,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function ND(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function DD(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function fd(e){for(var n="",t=0,r=0,i=0,a=0,o=0,s=0;t<e.length;){if(r=e.charCodeAt(t++),r<128){n+=String.fromCharCode(r);continue}if(i=e.charCodeAt(t++),r>191&&r<224){o=(r&31)<<6,o|=i&63,n+=String.fromCharCode(o);continue}if(a=e.charCodeAt(t++),r<240){n+=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63);continue}o=e.charCodeAt(t++),s=((r&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536,n+=String.fromCharCode(55296+(s>>>10&1023)),n+=String.fromCharCode(56320+(s&1023))}return n}function Ig(e){var n=Za(2*e.length),t,r,i=1,a=0,o=0,s;for(r=0;r<e.length;r+=i)i=1,(s=e.charCodeAt(r))<128?t=s:s<224?(t=(s&31)*64+(e.charCodeAt(r+1)&63),i=2):s<240?(t=(s&15)*4096+(e.charCodeAt(r+1)&63)*64+(e.charCodeAt(r+2)&63),i=3):(i=4,t=(s&7)*262144+(e.charCodeAt(r+1)&63)*4096+(e.charCodeAt(r+2)&63)*64+(e.charCodeAt(r+3)&63),t-=65536,o=55296+(t>>>10&1023),t=56320+(t&1023)),o!==0&&(n[a++]=o&255,n[a++]=o>>>8,o=0),n[a++]=t%256,n[a++]=t>>>8;return n.slice(0,a).toString("ucs2")}function Ng(e){return Wi(e,"binary").toString("utf8")}var Ql="foo bar baz",cu=Je&&(Ng(Ql)==fd(Ql)&&Ng||Ig(Ql)==fd(Ql)&&Ig)||fd,Vu=Je?function(e){return Wi(e,"utf8").toString("binary")}:function(e){for(var n=[],t=0,r=0,i=0;t<e.length;)switch(r=e.charCodeAt(t++),!0){case r<128:n.push(String.fromCharCode(r));break;case r<2048:n.push(String.fromCharCode(192+(r>>6))),n.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=e.charCodeAt(t++)-56320+(r<<10),n.push(String.fromCharCode(240+(i>>18&7))),n.push(String.fromCharCode(144+(i>>12&63))),n.push(String.fromCharCode(128+(i>>6&63))),n.push(String.fromCharCode(128+(i&63)));break;default:n.push(String.fromCharCode(224+(r>>12))),n.push(String.fromCharCode(128+(r>>6&63))),n.push(String.fromCharCode(128+(r&63)))}return n.join("")},PD=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(n){return[new RegExp("&"+n[0]+";","ig"),n[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<e.length;++i)r=r.replace(e[i][0],e[i][1]);return r}}(),rE=/(^\s|\s$|\n)/;function ln(e,n){return"<"+e+(n.match(rE)?' xml:space="preserve"':"")+">"+n+"</"+e+">"}function Hu(e){return dn(e).map(function(n){return" "+n+'="'+e[n]+'"'}).join("")}function ye(e,n,t){return"<"+e+(t!=null?Hu(t):"")+(n!=null?(n.match(rE)?' xml:space="preserve"':"")+">"+n+"</"+e:"/")+">"}function Mp(e,n){try{return e.toISOString().replace(/\.\d*/,"")}catch(t){if(n)throw t}return""}function OD(e,n){switch(typeof e){case"string":var t=ye("vt:lpwstr",rt(e));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return ye((e|0)==e?"vt:i4":"vt:r8",rt(String(e)));case"boolean":return ye("vt:bool",e?"true":"false")}if(e instanceof Date)return ye("vt:filetime",Mp(e));throw new Error("Unable to serialize "+e)}var Kt={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},bs=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],rr={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function MD(e,n){for(var t=1-2*(e[n+7]>>>7),r=((e[n+7]&127)<<4)+(e[n+6]>>>4&15),i=e[n+6]&15,a=5;a>=0;--a)i=i*256+e[n+a];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function LD(e,n,t){var r=(n<0||1/n==-1/0?1:0)<<7,i=0,a=0,o=r?-n:n;isFinite(o)?o==0?i=a=0:(i=Math.floor(Math.log(o)/Math.LN2),a=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(n)?26985:0);for(var s=0;s<=5;++s,a/=256)e[t+s]=a&255;e[t+6]=(i&15)<<4|a&15,e[t+7]=i>>4|r}var Dg=function(e){for(var n=[],t=10240,r=0;r<e[0].length;++r)if(e[0][r])for(var i=0,a=e[0][r].length;i<a;i+=t)n.push.apply(n,e[0][r].slice(i,i+t));return n},Pg=Je?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(n){return Buffer.isBuffer(n)?n:Wi(n)})):Dg(e)}:Dg,Og=function(e,n,t){for(var r=[],i=n;i<t;i+=2)r.push(String.fromCharCode(Ys(e,i)));return r.join("").replace(lu,"")},Hv=Je?function(e,n,t){return Buffer.isBuffer(e)?e.toString("utf16le",n,t).replace(lu,""):Og(e,n,t)}:Og,Mg=function(e,n,t){for(var r=[],i=n;i<n+t;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},iE=Je?function(e,n,t){return Buffer.isBuffer(e)?e.toString("hex",n,n+t):Mg(e,n,t)}:Mg,Lg=function(e,n,t){for(var r=[],i=n;i<t;i++)r.push(String.fromCharCode(Fo(e,i)));return r.join("")},ll=Je?function(n,t,r){return Buffer.isBuffer(n)?n.toString("utf8",t,r):Lg(n,t,r)}:Lg,aE=function(e,n){var t=ir(e,n);return t>0?ll(e,n+4,n+4+t-1):""},oE=aE,sE=function(e,n){var t=ir(e,n);return t>0?ll(e,n+4,n+4+t-1):""},uE=sE,lE=function(e,n){var t=2*ir(e,n);return t>0?ll(e,n+4,n+4+t-1):""},cE=lE,fE=function(n,t){var r=ir(n,t);return r>0?Hv(n,t+4,t+4+r):""},hE=fE,dE=function(e,n){var t=ir(e,n);return t>0?ll(e,n+4,n+4+t):""},pE=dE,vE=function(e,n){return MD(e,n)},pf=vE,$v=function(n){return Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array};Je&&(oE=function(n,t){if(!Buffer.isBuffer(n))return aE(n,t);var r=n.readUInt32LE(t);return r>0?n.toString("utf8",t+4,t+4+r-1):""},uE=function(n,t){if(!Buffer.isBuffer(n))return sE(n,t);var r=n.readUInt32LE(t);return r>0?n.toString("utf8",t+4,t+4+r-1):""},cE=function(n,t){if(!Buffer.isBuffer(n))return lE(n,t);var r=2*n.readUInt32LE(t);return n.toString("utf16le",t+4,t+4+r-1)},hE=function(n,t){if(!Buffer.isBuffer(n))return fE(n,t);var r=n.readUInt32LE(t);return n.toString("utf16le",t+4,t+4+r)},pE=function(n,t){if(!Buffer.isBuffer(n))return dE(n,t);var r=n.readUInt32LE(t);return n.toString("utf8",t+4,t+4+r)},pf=function(n,t){return Buffer.isBuffer(n)?n.readDoubleLE(t):vE(n,t)},$v=function(n){return Buffer.isBuffer(n)||Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array});var Fo=function(e,n){return e[n]},Ys=function(e,n){return e[n+1]*256+e[n]},BD=function(e,n){var t=e[n+1]*256+e[n];return t<32768?t:(65535-t+1)*-1},ir=function(e,n){return e[n+3]*(1<<24)+(e[n+2]<<16)+(e[n+1]<<8)+e[n]},Ma=function(e,n){return e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]},UD=function(e,n){return e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]};function fu(e,n){var t="",r,i,a=[],o,s,u,l;switch(n){case"dbcs":if(l=this.l,Je&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*e).toString("utf16le");else for(u=0;u<e;++u)t+=String.fromCharCode(Ys(this,l)),l+=2;e*=2;break;case"utf8":t=ll(this,this.l,this.l+e);break;case"utf16le":e*=2,t=Hv(this,this.l,this.l+e);break;case"wstr":return fu.call(this,e,"dbcs");case"lpstr-ansi":t=oE(this,this.l),e=4+ir(this,this.l);break;case"lpstr-cp":t=uE(this,this.l),e=4+ir(this,this.l);break;case"lpwstr":t=cE(this,this.l),e=4+2*ir(this,this.l);break;case"lpp4":e=4+ir(this,this.l),t=hE(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ir(this,this.l),t=pE(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,t="";(o=Fo(this,this.l+e++))!==0;)a.push(Kl(o));t=a.join("");break;case"_wstr":for(e=0,t="";(o=Ys(this,this.l+e))!==0;)a.push(Kl(o)),e+=2;e+=2,t=a.join("");break;case"dbcs-cont":for(t="",l=this.l,u=0;u<e;++u){if(this.lens&&this.lens.indexOf(l)!==-1)return o=Fo(this,l),this.l=l+1,s=fu.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(Kl(Ys(this,l))),l+=2}t=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(t="",l=this.l,u=0;u!=e;++u){if(this.lens&&this.lens.indexOf(l)!==-1)return o=Fo(this,l),this.l=l+1,s=fu.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(Kl(Fo(this,l))),l+=1}t=a.join("");break;default:switch(e){case 1:return r=Fo(this,this.l),this.l++,r;case 2:return r=(n==="i"?BD:Ys)(this,this.l),this.l+=2,r;case 4:case-4:return n==="i"||!(this[this.l+3]&128)?(r=(e>0?Ma:UD)(this,this.l),this.l+=4,r):(i=ir(this,this.l),this.l+=4,i);case 8:case-8:if(n==="f")return e==8?i=pf(this,this.l):i=pf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:t=iE(this,this.l,e);break}}return this.l+=e,t}var WD=function(e,n,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24&255},zD=function(e,n,t){e[t]=n&255,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},VD=function(e,n,t){e[t]=n&255,e[t+1]=n>>>8&255};function HD(e,n,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=n.length;++i)VD(this,n.charCodeAt(i),this.l+2*i);r=2*n.length}else if(t==="sbcs"){for(n=n.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=n.length;++i)this[this.l+i]=n.charCodeAt(i)&255;r=n.length}else if(t==="hex"){for(;i<e;++i)this[this.l++]=parseInt(n.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(n.length,e);++i){var o=n.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:r=1,this[this.l]=n&255;break;case 2:r=2,this[this.l]=n&255,n>>>=8,this[this.l+1]=n&255;break;case 3:r=3,this[this.l]=n&255,n>>>=8,this[this.l+1]=n&255,n>>>=8,this[this.l+2]=n&255;break;case 4:r=4,WD(this,n,this.l);break;case 8:if(r=8,t==="f"){LD(this,n,this.l);break}case 16:break;case-4:r=4,zD(this,n,this.l);break}return this.l+=r,this}function mE(e,n){var t=iE(this,this.l,e.length>>1);if(t!==e)throw new Error(n+"Expected "+e+" saw "+t);this.l+=e.length>>1}function tr(e,n){e.l=n,e.read_shift=fu,e.chk=mE,e.write_shift=HD}function ci(e,n){e.l+=n}function ae(e){var n=Za(e);return tr(n,0),n}function Gn(){var e=[],n=Je?256:2048,t=function(l){var c=ae(l);return tr(c,0),c},r=t(n),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&e.push(r),r=null)},a=function(l){return r&&l<r.length-r.l?r:(i(),r=t(Math.max(l+1,n)))},o=function(){return i(),un(e)},s=function(l){i(),r=l,r.l==null&&(r.l=r.length),a(n)};return{next:a,push:s,end:o,_bufs:e}}function le(e,n,t,r){var i=+n,a;if(!isNaN(i)){r||(r=MB[i].p||(t||[]).length||0),a=1+(i>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var o=e.next(a);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var s=0;s!=4;++s)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&$v(t)&&e.push(t)}}function hu(e,n,t){var r=Yn(e);if(n.s?(r.cRel&&(r.c+=n.s.c),r.rRel&&(r.r+=n.s.r)):(r.cRel&&(r.c+=n.c),r.rRel&&(r.r+=n.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Bg(e,n,t){var r=Yn(e);return r.s=hu(r.s,n.s,t),r.e=hu(r.e,n.s,t),r}function du(e,n){if(e.cRel&&e.c<0)for(e=Yn(e);e.c<0;)e.c+=n>8?16384:256;if(e.rRel&&e.r<0)for(e=Yn(e);e.r<0;)e.r+=n>8?1048576:n>5?65536:16384;var t=at(e);return!e.cRel&&e.cRel!=null&&(t=GD(t)),!e.rRel&&e.rRel!=null&&(t=$D(t)),t}function hd(e,n){return e.s.r==0&&!e.s.rRel&&e.e.r==(n.biff>=12?1048575:n.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Cn(e.s.c)+":"+(e.e.cRel?"":"$")+Cn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(n.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+fn(e.s.r)+":"+(e.e.rRel?"":"$")+fn(e.e.r):du(e.s,n.biff)+":"+du(e.e,n.biff)}function jv(e){return parseInt(jD(e),10)-1}function fn(e){return""+(e+1)}function $D(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function jD(e){return e.replace(/\$(\d+)$/,"$1")}function Gv(e){for(var n=XD(e),t=0,r=0;r!==n.length;++r)t=26*t+n.charCodeAt(r)-64;return t-1}function Cn(e){if(e<0)throw new Error("invalid column "+e);var n="";for(++e;e;e=Math.floor((e-1)/26))n=String.fromCharCode((e-1)%26+65)+n;return n}function GD(e){return e.replace(/^([A-Z])/,"$$$1")}function XD(e){return e.replace(/^\$([A-Z])/,"$1")}function KD(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function qt(e){for(var n=0,t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?n=10*n+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:n-1}}function at(e){for(var n=e.c+1,t="";n;n=(n-1)/26|0)t=String.fromCharCode((n-1)%26+65)+t;return t+(e.r+1)}function hr(e){var n=e.indexOf(":");return n==-1?{s:qt(e),e:qt(e)}:{s:qt(e.slice(0,n)),e:qt(e.slice(n+1))}}function Pt(e,n){return typeof n>"u"||typeof n=="number"?Pt(e.s,e.e):(typeof e!="string"&&(e=at(e)),typeof n!="string"&&(n=at(n)),e==n?e:e+":"+n)}function ht(e){var n={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,a=e.length;for(t=0;r<a&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(n.s.c=--t,t=0;r<a&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(n.s.r=--t,r===a||i!=10)return n.e.c=n.s.c,n.e.r=n.s.r,n;for(++r,t=0;r!=a&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(n.e.c=--t,t=0;r!=a&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return n.e.r=--t,n}function Ug(e,n){var t=e.t=="d"&&n instanceof Date;if(e.z!=null)try{return e.w=ma(e.z,t?qn(n):n)}catch{}try{return e.w=ma((e.XF||{}).numFmtId||(t?14:0),t?qn(n):n)}catch{return""+n}}function Ni(e,n,t){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&t&&t.dateNF&&(e.z=t.dateNF),e.t=="e"?cl[e.v]||e.v:n==null?Ug(e,e.v):Ug(e,n))}function lo(e,n){var t=n&&n.sheet?n.sheet:"Sheet1",r={};return r[t]=e,{SheetNames:[t],Sheets:r}}function gE(e,n,t){var r=t||{},i=e?Array.isArray(e):r.dense,a=e||(i?[]:{}),o=0,s=0;if(a&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var u=typeof r.origin=="string"?qt(r.origin):r.origin;o=u.r,s=u.c}a["!ref"]||(a["!ref"]="A1:A1")}var l={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var c=ht(a["!ref"]);l.s.c=c.s.c,l.s.r=c.s.r,l.e.c=Math.max(l.e.c,c.e.c),l.e.r=Math.max(l.e.r,c.e.r),o==-1&&(l.e.r=o=c.e.r+1)}for(var f=0;f!=n.length;++f)if(n[f]){if(!Array.isArray(n[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=n[f].length;++h)if(!(typeof n[f][h]>"u")){var d={v:n[f][h]},v=o+f,p=s+h;if(l.s.r>v&&(l.s.r=v),l.s.c>p&&(l.s.c=p),l.e.r<v&&(l.e.r=v),l.e.c<p&&(l.e.c=p),n[f][h]&&typeof n[f][h]=="object"&&!Array.isArray(n[f][h])&&!(n[f][h]instanceof Date))d=n[f][h];else if(Array.isArray(d.v)&&(d.f=n[f][h][1],d.v=d.v[0]),d.v===null)if(d.f)d.t="n";else if(r.nullError)d.t="e",d.v=0;else if(r.sheetStubs)d.t="z";else continue;else typeof d.v=="number"?d.t="n":typeof d.v=="boolean"?d.t="b":d.v instanceof Date?(d.z=r.dateNF||kt[14],r.cellDates?(d.t="d",d.w=ma(d.z,qn(d.v))):(d.t="n",d.v=qn(d.v),d.w=ma(d.z,d.v))):d.t="s";if(i)a[v]||(a[v]=[]),a[v][p]&&a[v][p].z&&(d.z=a[v][p].z),a[v][p]=d;else{var g=at({c:p,r:v});a[g]&&a[g].z&&(d.z=a[g].z),a[g]=d}}}return l.s.c<1e7&&(a["!ref"]=Pt(l)),a}function Ts(e,n){return gE(null,e,n)}function qD(e){return e.read_shift(4,"i")}function Vr(e,n){return n||(n=ae(4)),n.write_shift(4,e),n}function bn(e){var n=e.read_shift(4);return n===0?"":e.read_shift(n,"dbcs")}function Yt(e,n){var t=!1;return n==null&&(t=!0,n=ae(4+2*e.length)),n.write_shift(4,e.length),e.length>0&&n.write_shift(0,e,"dbcs"),t?n.slice(0,n.l):n}function YD(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function QD(e,n){return n||(n=ae(4)),n.write_shift(2,0),n.write_shift(2,0),n}function Xv(e,n){var t=e.l,r=e.read_shift(1),i=bn(e),a=[],o={t:i,h:i};if(r&1){for(var s=e.read_shift(4),u=0;u!=s;++u)a.push(YD(e));o.r=a}else o.r=[{ich:0,ifnt:0}];return e.l=t+n,o}function JD(e,n){var t=!1;return n==null&&(t=!0,n=ae(15+4*e.t.length)),n.write_shift(1,0),Yt(e.t,n),t?n.slice(0,n.l):n}var ZD=Xv;function eP(e,n){var t=!1;return n==null&&(t=!0,n=ae(23+4*e.t.length)),n.write_shift(1,1),Yt(e.t,n),n.write_shift(4,1),QD({ich:0,ifnt:0},n),t?n.slice(0,n.l):n}function kr(e){var n=e.read_shift(4),t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:n,iStyleRef:t}}function co(e,n){return n==null&&(n=ae(8)),n.write_shift(-4,e.c),n.write_shift(3,e.iStyleRef||e.s),n.write_shift(1,0),n}function fo(e){var n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:n}}function ho(e,n){return n==null&&(n=ae(4)),n.write_shift(3,e.iStyleRef||e.s),n.write_shift(1,0),n}var tP=bn,xE=Yt;function Kv(e){var n=e.read_shift(4);return n===0||n===4294967295?"":e.read_shift(n,"dbcs")}function vf(e,n){var t=!1;return n==null&&(t=!0,n=ae(127)),n.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&n.write_shift(0,e,"dbcs"),t?n.slice(0,n.l):n}var nP=bn,Lp=Kv,qv=vf;function yE(e){var n=e.slice(e.l,e.l+4),t=n[0]&1,r=n[0]&2;e.l+=4;var i=r===0?pf([0,0,0,0,n[0]&252,n[1],n[2],n[3]],0):Ma(n,0)>>2;return t?i/100:i}function wE(e,n){n==null&&(n=ae(4));var t=0,r=0,i=e*100;if(e==(e|0)&&e>=-(1<<29)&&e<1<<29?r=1:i==(i|0)&&i>=-(1<<29)&&i<1<<29&&(r=1,t=1),r)n.write_shift(-4,((t?i:e)<<2)+(t+2));else throw new Error("unsupported RkNumber "+e)}function _E(e){var n={s:{},e:{}};return n.s.r=e.read_shift(4),n.e.r=e.read_shift(4),n.s.c=e.read_shift(4),n.e.c=e.read_shift(4),n}function rP(e,n){return n||(n=ae(16)),n.write_shift(4,e.s.r),n.write_shift(4,e.e.r),n.write_shift(4,e.s.c),n.write_shift(4,e.e.c),n}var po=_E,ks=rP;function As(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function eo(e,n){return(n||ae(8)).write_shift(8,e,"f")}function iP(e){var n={},t=e.read_shift(1),r=t>>>1,i=e.read_shift(1),a=e.read_shift(2,"i"),o=e.read_shift(1),s=e.read_shift(1),u=e.read_shift(1);switch(e.l++,r){case 0:n.auto=1;break;case 1:n.index=i;var l=dP[i];l&&(n.rgb=Yg(l));break;case 2:n.rgb=Yg([o,s,u]);break;case 3:n.theme=i;break}return a!=0&&(n.tint=a>0?a/32767:a/32768),n}function mf(e,n){if(n||(n=ae(8)),!e||e.auto)return n.write_shift(4,0),n.write_shift(4,0),n;e.index!=null?(n.write_shift(1,2),n.write_shift(1,e.index)):e.theme!=null?(n.write_shift(1,6),n.write_shift(1,e.theme)):(n.write_shift(1,5),n.write_shift(1,0));var t=e.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),n.write_shift(2,t),!e.rgb||e.theme!=null)n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);else{var r=e.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),n.write_shift(1,parseInt(r.slice(0,2),16)),n.write_shift(1,parseInt(r.slice(2,4),16)),n.write_shift(1,parseInt(r.slice(4,6),16)),n.write_shift(1,255)}return n}function aP(e){var n=e.read_shift(1);e.l++;var t={fBold:n&1,fItalic:n&2,fUnderline:n&4,fStrikeout:n&8,fOutline:n&16,fShadow:n&32,fCondense:n&64,fExtend:n&128};return t}function oP(e,n){n||(n=ae(2));var t=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return n.write_shift(1,t),n.write_shift(1,0),n}var EE=2,Jn=3,Jl=11,gf=19,Zl=64,sP=65,uP=71,lP=4108,cP=4126,an=80,Wg={1:{n:"CodePage",t:EE},2:{n:"Category",t:an},3:{n:"PresentationFormat",t:an},4:{n:"ByteCount",t:Jn},5:{n:"LineCount",t:Jn},6:{n:"ParagraphCount",t:Jn},7:{n:"SlideCount",t:Jn},8:{n:"NoteCount",t:Jn},9:{n:"HiddenCount",t:Jn},10:{n:"MultimediaClipCount",t:Jn},11:{n:"ScaleCrop",t:Jl},12:{n:"HeadingPairs",t:lP},13:{n:"TitlesOfParts",t:cP},14:{n:"Manager",t:an},15:{n:"Company",t:an},16:{n:"LinksUpToDate",t:Jl},17:{n:"CharacterCount",t:Jn},19:{n:"SharedDoc",t:Jl},22:{n:"HyperlinksChanged",t:Jl},23:{n:"AppVersion",t:Jn,p:"version"},24:{n:"DigSig",t:sP},26:{n:"ContentType",t:an},27:{n:"ContentStatus",t:an},28:{n:"Language",t:an},29:{n:"Version",t:an},255:{},2147483648:{n:"Locale",t:gf},2147483651:{n:"Behavior",t:gf},1919054434:{}},zg={1:{n:"CodePage",t:EE},2:{n:"Title",t:an},3:{n:"Subject",t:an},4:{n:"Author",t:an},5:{n:"Keywords",t:an},6:{n:"Comments",t:an},7:{n:"Template",t:an},8:{n:"LastAuthor",t:an},9:{n:"RevNumber",t:an},10:{n:"EditTime",t:Zl},11:{n:"LastPrinted",t:Zl},12:{n:"CreatedDate",t:Zl},13:{n:"ModifiedDate",t:Zl},14:{n:"PageCount",t:Jn},15:{n:"WordCount",t:Jn},16:{n:"CharCount",t:Jn},17:{n:"Thumbnail",t:uP},18:{n:"Application",t:an},19:{n:"DocSecurity",t:Jn},255:{},2147483648:{n:"Locale",t:gf},2147483651:{n:"Behavior",t:gf},1919054434:{}};function fP(e){return e.map(function(n){return[n>>16&255,n>>8&255,n&255]})}var hP=fP([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),dP=Yn(hP),cl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},pP={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ec={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function SE(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function CE(e,n){var t=CD(pP),r=[],i;r[r.length]=Ot,r[r.length]=ye("Types",null,{xmlns:Kt.CT,"xmlns:xsd":Kt.xsd,"xmlns:xsi":Kt.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return ye("Default",null,{Extension:u[0],ContentType:u[1]})}));var a=function(u){e[u]&&e[u].length>0&&(i=e[u][0],r[r.length]=ye("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:ec[u][n.bookType]||ec[u].xlsx}))},o=function(u){(e[u]||[]).forEach(function(l){r[r.length]=ye("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:ec[u][n.bookType]||ec[u].xlsx})})},s=function(u){(e[u]||[]).forEach(function(l){r[r.length]=ye("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:t[u][0]})})};return a("workbooks"),o("sheets"),o("charts"),s("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(s),s("vba"),s("comments"),s("threadedcomments"),s("drawings"),o("metadata"),s("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Qe={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function bE(e){var n=e.lastIndexOf("/");return e.slice(0,n+1)+"_rels/"+e.slice(n+1)+".rels"}function as(e){var n=[Ot,ye("Relationships",null,{xmlns:Kt.RELS})];return dn(e["!id"]).forEach(function(t){n[n.length]=ye("Relationship",null,e["!id"][t])}),n.length>2&&(n[n.length]="</Relationships>",n[1]=n[1].replace("/>",">")),n.join("")}function nt(e,n,t,r,i,a){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),n<0)for(n=e["!idx"];e["!id"]["rId"+n];++n);if(e["!idx"]=n+1,i.Id="rId"+n,i.Type=r,i.Target=t,[Qe.HLINK,Qe.XPATH,Qe.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+n);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,n}function vP(e){var n=[Ot];n.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),n.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<e.length;++t)n.push('  <manifest:file-entry manifest:full-path="'+e[t][0]+'" manifest:media-type="'+e[t][1]+`"/>
`);return n.push("</manifest:manifest>"),n.join("")}function Vg(e,n,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+n+`"/>
`,`  </rdf:Description>
`].join("")}function mP(e,n){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+n+`"/>
`,`  </rdf:Description>
`].join("")}function gP(e){var n=[Ot];n.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=e.length;++t)n.push(Vg(e[t][0],e[t][1])),n.push(mP("",e[t][0]));return n.push(Vg("","Document","pkg")),n.push("</rdf:RDF>"),n.join("")}function TE(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+lf.version+"</meta:generator></office:meta></office:document-meta>"}var ja=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function dd(e,n,t,r,i){i[e]!=null||n==null||n===""||(i[e]=n,n=rt(n),r[r.length]=t?ye(e,n,t):ln(e,n))}function kE(e,n){var t=n||{},r=[Ot,ye("cp:coreProperties",null,{"xmlns:cp":Kt.CORE_PROPS,"xmlns:dc":Kt.dc,"xmlns:dcterms":Kt.dcterms,"xmlns:dcmitype":Kt.dcmitype,"xmlns:xsi":Kt.xsi})],i={};if(!e&&!t.Props)return r.join("");e&&(e.CreatedDate!=null&&dd("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Mp(e.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),e.ModifiedDate!=null&&dd("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Mp(e.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var a=0;a!=ja.length;++a){var o=ja[a],s=t.Props&&t.Props[o[1]]!=null?t.Props[o[1]]:e?e[o[1]]:null;s===!0?s="1":s===!1?s="0":typeof s=="number"&&(s=String(s)),s!=null&&dd(o[0],s,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var os=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],AE=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function RE(e){var n=[],t=ye;return e||(e={}),e.Application="SheetJS",n[n.length]=Ot,n[n.length]=ye("Properties",null,{xmlns:Kt.EXT_PROPS,"xmlns:vt":Kt.vt}),os.forEach(function(r){if(e[r[1]]!==void 0){var i;switch(r[2]){case"string":i=rt(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false";break}i!==void 0&&(n[n.length]=t(r[0],i))}}),n[n.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),n[n.length]=t("TitlesOfParts",t("vt:vector",e.SheetNames.map(function(r){return"<vt:lpstr>"+rt(r)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),n.length>2&&(n[n.length]="</Properties>",n[1]=n[1].replace("/>",">")),n.join("")}function FE(e){var n=[Ot,ye("Properties",null,{xmlns:Kt.CUST_PROPS,"xmlns:vt":Kt.vt})];if(!e)return n.join("");var t=1;return dn(e).forEach(function(i){++t,n[n.length]=ye("property",OD(e[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:rt(i)})}),n.length>2&&(n[n.length]="</Properties>",n[1]=n[1].replace("/>",">")),n.join("")}var Hg={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function xP(e,n){var t=[];return dn(Hg).map(function(r){for(var i=0;i<ja.length;++i)if(ja[i][1]==r)return ja[i];for(i=0;i<os.length;++i)if(os[i][1]==r)return os[i];throw r}).forEach(function(r){if(e[r[1]]!=null){var i=n&&n.Props&&n.Props[r[1]]!=null?n.Props[r[1]]:e[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(ln(Hg[r[1]]||r[1],i))}}),ye("DocumentProperties",t.join(""),{xmlns:rr.o})}function yP(e,n){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&dn(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var o=0;o<ja.length;++o)if(a==ja[o][1])return;for(o=0;o<os.length;++o)if(a==os[o][1])return;for(o=0;o<t.length;++o)if(a==t[o])return;var s=e[a],u="string";typeof s=="number"?(u="float",s=String(s)):s===!0||s===!1?(u="boolean",s=s?"1":"0"):s=String(s),i.push(ye(Fg(a),s,{"dt:dt":u}))}}),n&&dn(n).forEach(function(a){if(Object.prototype.hasOwnProperty.call(n,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var o=n[a],s="string";typeof o=="number"?(s="float",o=String(o)):o===!0||o===!1?(s="boolean",o=o?"1":"0"):o instanceof Date?(s="dateTime.tz",o=o.toISOString()):o=String(o),i.push(ye(Fg(a),o,{"dt:dt":s}))}}),"<"+r+' xmlns="'+rr.o+'">'+i.join("")+"</"+r+">"}function wP(e){var n=typeof e=="string"?new Date(Date.parse(e)):e,t=n.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),i+=a);var o=ae(8);return o.write_shift(4,r),o.write_shift(4,i),o}function $g(e,n){var t=ae(4),r=ae(4);switch(t.write_shift(4,e==80?31:e),e){case 3:r.write_shift(-4,n);break;case 5:r=ae(8),r.write_shift(8,n,"f");break;case 11:r.write_shift(4,n?1:0);break;case 64:r=wP(n);break;case 31:case 80:for(r=ae(4+2*(n.length+1)+(n.length%2?0:2)),r.write_shift(4,n.length+1),r.write_shift(0,n,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}return un([t,r])}var IE=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function _P(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function jg(e,n,t){var r=ae(8),i=[],a=[],o=8,s=0,u=ae(8),l=ae(8);if(u.write_shift(4,2),u.write_shift(4,1200),l.write_shift(4,1),a.push(u),i.push(l),o+=8+u.length,!n){l=ae(8),l.write_shift(4,0),i.unshift(l);var c=[ae(4)];for(c[0].write_shift(4,e.length),s=0;s<e.length;++s){var f=e[s][0];for(u=ae(8+2*(f.length+1)+(f.length%2?0:2)),u.write_shift(4,s+2),u.write_shift(4,f.length+1),u.write_shift(0,f,"dbcs");u.l!=u.length;)u.write_shift(1,0);c.push(u)}u=un(c),a.unshift(u),o+=8+u.length}for(s=0;s<e.length;++s)if(!(n&&!n[e[s][0]])&&!(IE.indexOf(e[s][0])>-1||AE.indexOf(e[s][0])>-1)&&e[s][1]!=null){var h=e[s][1],d=0;if(n){d=+n[e[s][0]];var v=t[d];if(v.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}u=$g(v.t,h)}else{var g=_P(h);g==-1&&(g=31,h=String(h)),u=$g(g,h)}a.push(u),l=ae(8),l.write_shift(4,n?d:2+s),i.push(l),o+=8+u.length}var m=8*(a.length+1);for(s=0;s<a.length;++s)i[s].write_shift(4,m),m+=a[s].length;return r.write_shift(4,o),r.write_shift(4,a.length),un([r].concat(i).concat(a))}function Gg(e,n,t,r,i,a){var o=ae(i?68:48),s=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,ot.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,n,"hex"),o.write_shift(4,i?68:48);var u=jg(e,t,r);if(s.push(u),i){var l=jg(i,null,null);o.write_shift(16,a,"hex"),o.write_shift(4,68+u.length),s.push(l)}return un(s)}function EP(e,n){n||(n=ae(e));for(var t=0;t<e;++t)n.write_shift(1,0);return n}function SP(e,n){return e.read_shift(n)===1}function Fn(e,n){return n||(n=ae(2)),n.write_shift(2,+!!e),n}function NE(e){return e.read_shift(2,"u")}function mr(e,n){return n||(n=ae(2)),n.write_shift(2,e),n}function DE(e,n,t){return t||(t=ae(2)),t.write_shift(1,n=="e"?+e:+!!e),t.write_shift(1,n=="e"?1:0),t}function PE(e,n,t){var r=e.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var a=e.read_shift(1);a&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var o=r?e.read_shift(r,i):"";return o}function CP(e){var n=e.t||"",t=ae(3);t.write_shift(2,n.length),t.write_shift(1,1);var r=ae(2*n.length);r.write_shift(2*n.length,n,"utf16le");var i=[t,r];return un(i)}function bP(e,n,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return e.read_shift(n,"cpstr");if(t.biff>=12)return e.read_shift(n,"dbcs-cont")}var i=e.read_shift(1);return i===0?r=e.read_shift(n,"sbcs-cont"):r=e.read_shift(n,"dbcs-cont"),r}function TP(e,n,t){var r=e.read_shift(t&&t.biff==2?1:2);return r===0?(e.l++,""):bP(e,r,t)}function kP(e,n,t){if(t.biff>5)return TP(e,n,t);var r=e.read_shift(1);return r===0?(e.l++,""):e.read_shift(r,t.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function OE(e,n,t){return t||(t=ae(3+2*e.length)),t.write_shift(2,e.length),t.write_shift(1,1),t.write_shift(31,e,"utf16le"),t}function Xg(e,n){n||(n=ae(6+e.length*2)),n.write_shift(4,1+e.length);for(var t=0;t<e.length;++t)n.write_shift(2,e.charCodeAt(t));return n.write_shift(2,0),n}function AP(e){var n=ae(512),t=0,r=e.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),a=i>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}n.write_shift(4,2),n.write_shift(4,a);var o=[8,6815827,6619237,4849780,83];for(t=0;t<o.length;++t)n.write_shift(4,o[t]);if(a==28)r=r.slice(1),Xg(r,n);else if(a&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<o.length;++t)n.write_shift(1,parseInt(o[t],16));var s=i>-1?r.slice(0,i):r;for(n.write_shift(4,2*(s.length+1)),t=0;t<s.length;++t)n.write_shift(2,s.charCodeAt(t));n.write_shift(2,0),a&8&&Xg(i>-1?r.slice(i+1):"",n)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<o.length;++t)n.write_shift(1,parseInt(o[t],16));for(var u=0;r.slice(u*3,u*3+3)=="../"||r.slice(u*3,u*3+3)=="..\\";)++u;for(n.write_shift(2,u),n.write_shift(4,r.length-3*u+1),t=0;t<r.length-3*u;++t)n.write_shift(1,r.charCodeAt(t+3*u)&255);for(n.write_shift(1,0),n.write_shift(2,65535),n.write_shift(2,57005),t=0;t<6;++t)n.write_shift(4,0)}return n.slice(0,n.l)}function to(e,n,t,r){return r||(r=ae(6)),r.write_shift(2,e),r.write_shift(2,n),r.write_shift(2,t||0),r}function RP(e,n,t){var r=t.biff>8?4:2,i=e.read_shift(r),a=e.read_shift(r,"i"),o=e.read_shift(r,"i");return[i,a,o]}function FP(e){var n=e.read_shift(2),t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2);return{s:{c:r,r:n},e:{c:i,r:t}}}function ME(e,n){return n||(n=ae(8)),n.write_shift(2,e.s.r),n.write_shift(2,e.e.r),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c),n}function Yv(e,n,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ae(i);return a.write_shift(2,r),a.write_shift(2,n),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function IP(e,n){var t=!n||n.biff==8,r=ae(t?112:54);for(r.write_shift(n.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function NP(e,n){var t=!n||n.biff>=8?2:1,r=ae(8+t*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),n.biff>=8&&r.write_shift(1,1),r.write_shift(t*e.name.length,e.name,n.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function DP(e,n){var t=ae(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],i=0;i<e.length;++i)r[i]=CP(e[i]);var a=un([t].concat(r));return a.parts=[t.length].concat(r.map(function(o){return o.length})),a}function PP(){var e=ae(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function OP(e){var n=ae(18),t=1718;return e&&e.RTL&&(t|=64),n.write_shift(2,t),n.write_shift(4,0),n.write_shift(4,64),n.write_shift(4,0),n.write_shift(4,0),n}function MP(e,n){var t=e.name||"Arial",r=n&&n.biff==5,i=r?15+t.length:16+2*t.length,a=ae(i);return a.write_shift(2,(e.sz||12)*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,t.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),a}function LP(e,n,t,r){var i=ae(10);return to(e,n,r,i),i.write_shift(4,t),i}function BP(e,n,t,r,i){var a=!i||i.biff==8,o=ae(8+ +a+(1+a)*t.length);return to(e,n,r,o),o.write_shift(2,t.length),a&&o.write_shift(1,1),o.write_shift((1+a)*t.length,t,a?"utf16le":"sbcs"),o}function UP(e,n,t,r){var i=t&&t.biff==5;r||(r=ae(i?3+n.length:5+2*n.length)),r.write_shift(2,e),r.write_shift(i?1:2,n.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*n.length,n,i?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}function WP(e,n){var t=n.biff==8||!n.biff?4:2,r=ae(2*t+6);return r.write_shift(t,e.s.r),r.write_shift(t,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}function Kg(e,n,t,r){var i=t&&t.biff==5;r||(r=ae(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,n<<4));var a=0;return e.numFmtId>0&&i&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function zP(e){var n=ae(8);return n.write_shift(4,0),n.write_shift(2,0),n.write_shift(2,0),n}function VP(e,n,t,r,i,a){var o=ae(8);return to(e,n,r,o),DE(t,a,o),o}function HP(e,n,t,r){var i=ae(14);return to(e,n,r,i),eo(t,i),i}function $P(e,n,t){if(t.biff<8)return jP(e,n,t);for(var r=[],i=e.l+n,a=e.read_shift(t.biff>8?4:2);a--!==0;)r.push(RP(e,t.biff>8?12:6,t));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function jP(e,n,t){e[e.l+1]==3&&e[e.l]++;var r=PE(e,n,t);return r.charCodeAt(0)==3?r.slice(1):r}function GP(e){var n=ae(2+e.length*8);n.write_shift(2,e.length);for(var t=0;t<e.length;++t)ME(e[t],n);return n}function XP(e){var n=ae(24),t=qt(e[0]);n.write_shift(2,t.r),n.write_shift(2,t.r),n.write_shift(2,t.c),n.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)n.write_shift(1,parseInt(r[i],16));return un([n,AP(e[1])])}function KP(e){var n=e[1].Tooltip,t=ae(10+2*(n.length+1));t.write_shift(2,2048);var r=qt(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<n.length;++i)t.write_shift(2,n.charCodeAt(i));return t.write_shift(2,0),t}function qP(e){return e||(e=ae(4)),e.write_shift(2,1),e.write_shift(2,1),e}function YP(e,n,t){if(!t.cellStyles)return ci(e,n);var r=t&&t.biff>=12?4:2,i=e.read_shift(r),a=e.read_shift(r),o=e.read_shift(r),s=e.read_shift(r),u=e.read_shift(2);r==2&&(e.l+=2);var l={s:i,e:a,w:o,ixfe:s,flags:u};return(t.biff>=5||!t.biff)&&(l.level=u>>8&7),l}function QP(e,n){var t=ae(12);t.write_shift(2,n),t.write_shift(2,n),t.write_shift(2,e.width*256),t.write_shift(2,0);var r=0;return e.hidden&&(r|=1),t.write_shift(1,r),r=e.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function JP(e){for(var n=ae(2*e),t=0;t<e;++t)n.write_shift(2,t+1);return n}function ZP(e,n,t){var r=ae(15);return hl(r,e,n),r.write_shift(8,t,"f"),r}function eO(e,n,t){var r=ae(9);return hl(r,e,n),r.write_shift(2,t),r}var tO=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},n=Uv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(s,u){var l=[],c=Za(1);switch(u.type){case"base64":c=Mr(Ii(s));break;case"binary":c=Mr(s);break;case"buffer":case"array":c=s;break}tr(c,0);var f=c.read_shift(1),h=!!(f&136),d=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:d=!0,h=!0;break;case 49:d=!0,h=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=c.read_shift(2)),c.l+=3,f!=2&&(p=c.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=c.read_shift(2));var m=c.read_shift(2),x=u.codepage||1252;f!=2&&(c.l+=16,c.read_shift(1),c[c.l]!==0&&(x=e[c[c.l]]),c.l+=1,c.l+=2),v&&(c.l+=36);for(var y=[],w={},_=Math.min(c.length,f==2?521:g-10-(d?264:0)),S=v?32:11;c.l<_&&c[c.l]!=13;)switch(w={},w.name=Oa.utils.decode(x,c.slice(c.l,c.l+S)).replace(/[\u0000\r\n].*$/g,""),c.l+=S,w.type=String.fromCharCode(c.read_shift(1)),f!=2&&!v&&(w.offset=c.read_shift(4)),w.len=c.read_shift(1),f==2&&(w.offset=c.read_shift(2)),w.dec=c.read_shift(1),w.name.length&&y.push(w),f!=2&&(c.l+=v?13:14),w.type){case"B":(!d||w.len!=8)&&u.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(c[c.l]!==13&&(c.l=g-1),c.read_shift(1)!==13)throw new Error("DBF Terminator not found "+c.l+" "+c[c.l]);c.l=g;var E=0,b=0;for(l[0]=[],b=0;b!=y.length;++b)l[0][b]=y[b].name;for(;p-- >0;){if(c[c.l]===42){c.l+=m;continue}for(++c.l,l[++E]=[],b=0,b=0;b!=y.length;++b){var C=c.slice(c.l,c.l+y[b].len);c.l+=y[b].len,tr(C,0);var T=Oa.utils.decode(x,C);switch(y[b].type){case"C":T.trim().length&&(l[E][b]=T.replace(/\s+$/,""));break;case"D":T.length===8?l[E][b]=new Date(+T.slice(0,4),+T.slice(4,6)-1,+T.slice(6,8)):l[E][b]=T;break;case"F":l[E][b]=parseFloat(T.trim());break;case"+":case"I":l[E][b]=v?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(T.trim().toUpperCase()){case"Y":case"T":l[E][b]=!0;break;case"N":case"F":l[E][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+T+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));l[E][b]="##MEMO##"+(v?parseInt(T.trim(),10):C.read_shift(4));break;case"N":T=T.replace(/\u0000/g,"").trim(),T&&T!="."&&(l[E][b]=+T||0);break;case"@":l[E][b]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":l[E][b]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":l[E][b]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":l[E][b]=-C.read_shift(-8,"f");break;case"B":if(d&&y[b].len==8){l[E][b]=C.read_shift(8,"f");break}case"G":case"P":C.l+=y[b].len;break;case"0":if(y[b].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[b].type)}}}if(f!=2&&c.l<c.length&&c[c.l++]!=26)throw new Error("DBF EOF Marker missing "+(c.l-1)+" of "+c.length+" "+c[c.l-1].toString(16));return u&&u.sheetRows&&(l=l.slice(0,u.sheetRows)),u.DBF=y,l}function r(s,u){var l=u||{};l.dateNF||(l.dateNF="yyyymmdd");var c=Ts(t(s,l),l);return c["!cols"]=l.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete l.DBF,c}function i(s,u){try{return lo(r(s,u),u)}catch(l){if(u&&u.WTF)throw l}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function o(s,u){var l=u||{};if(+l.codepage>=0&&Uu(+l.codepage),l.type=="string")throw new Error("Cannot write DBF to JS string");var c=Gn(),f=Ef(s,{header:1,raw:!0,cellDates:!0}),h=f[0],d=f.slice(1),v=s["!cols"]||[],p=0,g=0,m=0,x=1;for(p=0;p<h.length;++p){if(((v[p]||{}).DBF||{}).name){h[p]=v[p].DBF.name,++m;continue}if(h[p]!=null){if(++m,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(g=0;g<1024;++g)if(h.indexOf(h[p]+"_"+g)==-1){h[p]+="_"+g;break}}}}var y=ht(s["!ref"]),w=[],_=[],S=[];for(p=0;p<=y.e.c-y.s.c;++p){var E="",b="",C=0,T=[];for(g=0;g<d.length;++g)d[g][p]!=null&&T.push(d[g][p]);if(T.length==0||h[p]==null){w[p]="?";continue}for(g=0;g<T.length;++g){switch(typeof T[g]){case"number":b="B";break;case"string":b="C";break;case"boolean":b="L";break;case"object":b=T[g]instanceof Date?"D":"C";break;default:b="C"}C=Math.max(C,String(T[g]).length),E=E&&E!=b?"C":b}C>250&&(C=250),b=((v[p]||{}).DBF||{}).type,b=="C"&&v[p].DBF.len>C&&(C=v[p].DBF.len),E=="B"&&b=="N"&&(E="N",S[p]=v[p].DBF.dec,C=v[p].DBF.len),_[p]=E=="C"||b=="N"?C:a[E]||0,x+=_[p],w[p]=E}var F=c.next(32);for(F.write_shift(4,318902576),F.write_shift(4,d.length),F.write_shift(2,296+32*m),F.write_shift(2,x),p=0;p<4;++p)F.write_shift(4,0);for(F.write_shift(4,0|(+n[B_]||3)<<8),p=0,g=0;p<h.length;++p)if(h[p]!=null){var I=c.next(32),V=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,V,"sbcs"),I.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),I.write_shift(4,g),I.write_shift(1,_[p]||a[w[p]]||0),I.write_shift(1,S[p]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),g+=_[p]||a[w[p]]||0}var K=c.next(264);for(K.write_shift(4,13),p=0;p<65;++p)K.write_shift(4,0);for(p=0;p<d.length;++p){var G=c.next(x);for(G.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(w[g]){case"L":G.write_shift(1,d[p][g]==null?63:d[p][g]?84:70);break;case"B":G.write_shift(8,d[p][g]||0,"f");break;case"N":var ie="0";for(typeof d[p][g]=="number"&&(ie=d[p][g].toFixed(S[g]||0)),m=0;m<_[g]-ie.length;++m)G.write_shift(1,32);G.write_shift(1,ie,"sbcs");break;case"D":d[p][g]?(G.write_shift(4,("0000"+d[p][g].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(d[p][g].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+d[p][g].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var re=String(d[p][g]!=null?d[p][g]:"").slice(0,_[g]);for(G.write_shift(1,re,"sbcs"),m=0;m<_[g]-re.length;++m)G.write_shift(1,32);break}}return c.next(1).write_shift(1,26),c.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}}(),nO=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},n=new RegExp("\x1BN("+dn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(h,d){var v=e[d];return typeof v=="number"?xg(v):v},r=function(h,d,v){var p=d.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return p==59?h:xg(p)};e["|"]=254;function i(h,d){switch(d.type){case"base64":return a(Ii(h),d);case"binary":return a(h,d);case"buffer":return a(Je&&Buffer.isBuffer(h)?h.toString("binary"):sl(h),d);case"array":return a(ah(h),d)}throw new Error("Unrecognized type "+d.type)}function a(h,d){var v=h.split(/[\n\r]+/),p=-1,g=-1,m=0,x=0,y=[],w=[],_=null,S={},E=[],b=[],C=[],T=0,F;for(+d.codepage>=0&&Uu(+d.codepage);m!==v.length;++m){T=0;var I=v[m].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(n,t),V=I.replace(/;;/g,"\0").split(";").map(function(B){return B.replace(/\u0000/g,";")}),K=V[0],G;if(I.length>0)switch(K){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&w.push(I.slice(3).replace(/;;/g,";"));break;case"C":var ie=!1,re=!1,H=!1,X=!1,Q=-1,fe=-1;for(x=1;x<V.length;++x)switch(V[x].charAt(0)){case"A":break;case"X":g=parseInt(V[x].slice(1))-1,re=!0;break;case"Y":for(p=parseInt(V[x].slice(1))-1,re||(g=0),F=y.length;F<=p;++F)y[F]=[];break;case"K":G=V[x].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN(bi(G))?isNaN(zu(G).getDate())||(G=Dn(G)):(G=bi(G),_!==null&&Y_(_)&&(G=eE(G))),ie=!0;break;case"E":X=!0;var D=eM(V[x].slice(1),{r:p,c:g});y[p][g]=[y[p][g],D];break;case"S":H=!0,y[p][g]=[y[p][g],"S5S"];break;case"G":break;case"R":Q=parseInt(V[x].slice(1))-1;break;case"C":fe=parseInt(V[x].slice(1))-1;break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+I)}if(ie&&(y[p][g]&&y[p][g].length==2?y[p][g][0]=G:y[p][g]=G,_=null),H){if(X)throw new Error("SYLK shared formula cannot have own formula");var z=Q>-1&&y[Q][fe];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");y[p][g][1]=tM(z[1],{r:p-Q,c:g-fe})}break;case"F":var U=0;for(x=1;x<V.length;++x)switch(V[x].charAt(0)){case"X":g=parseInt(V[x].slice(1))-1,++U;break;case"Y":for(p=parseInt(V[x].slice(1))-1,F=y.length;F<=p;++F)y[F]=[];break;case"M":T=parseInt(V[x].slice(1))/20;break;case"F":break;case"G":break;case"P":_=w[parseInt(V[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=V[x].slice(1).split(" "),F=parseInt(C[0],10);F<=parseInt(C[1],10);++F)T=parseInt(C[2],10),b[F-1]=T===0?{hidden:!0}:{wch:T},Qv(b[F-1]);break;case"C":g=parseInt(V[x].slice(1))-1,b[g]||(b[g]={});break;case"R":p=parseInt(V[x].slice(1))-1,E[p]||(E[p]={}),T>0?(E[p].hpt=T,E[p].hpx=zE(T)):T===0&&(E[p].hidden=!0);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+I)}U<1&&(_=null);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+I)}}return E.length>0&&(S["!rows"]=E),b.length>0&&(S["!cols"]=b),d&&d.sheetRows&&(y=y.slice(0,d.sheetRows)),[y,S]}function o(h,d){var v=i(h,d),p=v[0],g=v[1],m=Ts(p,d);return dn(g).forEach(function(x){m[x]=g[x]}),m}function s(h,d){return lo(o(h,d),d)}function u(h,d,v,p){var g="C;Y"+(v+1)+";X"+(p+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+Zv(h.f,{r:v,c:p}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function l(h,d){d.forEach(function(v,p){var g="F;W"+(p+1)+" "+(p+1)+" ";v.hidden?g+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=xf(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=yf(v.wpx)),typeof v.wch=="number"&&(g+=Math.round(v.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function c(h,d){d.forEach(function(v,p){var g="F;";v.hidden?g+="M0;":v.hpt?g+="M"+20*v.hpt+";":v.hpx&&(g+="M"+20*wf(v.hpx)+";"),g.length>2&&h.push(g+"R"+(p+1))})}function f(h,d){var v=["ID;PWXL;N;E"],p=[],g=ht(h["!ref"]),m,x=Array.isArray(h),y=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),h["!cols"]&&l(v,h["!cols"]),h["!rows"]&&c(v,h["!rows"]),v.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var _=g.s.c;_<=g.e.c;++_){var S=at({r:w,c:_});m=x?(h[w]||[])[_]:h[S],!(!m||m.v==null&&(!m.f||m.F))&&p.push(u(m,h,w,_))}return v.join(y)+y+p.join(y)+y+"E"+y}return{to_workbook:s,to_sheet:o,from_sheet:f}}(),rO=function(){function e(a,o){switch(o.type){case"base64":return n(Ii(a),o);case"binary":return n(a,o);case"buffer":return n(Je&&Buffer.isBuffer(a)?a.toString("binary"):sl(a),o);case"array":return n(ah(a),o)}throw new Error("Unrecognized type "+o.type)}function n(a,o){for(var s=a.split(`
`),u=-1,l=-1,c=0,f=[];c!==s.length;++c){if(s[c].trim()==="BOT"){f[++u]=[],l=0;continue}if(!(u<0)){var h=s[c].trim().split(","),d=h[0],v=h[1];++c;for(var p=s[c]||"";(p.match(/["]/g)||[]).length&1&&c<s.length-1;)p+=`
`+s[++c];switch(p=p.trim(),+d){case-1:if(p==="BOT"){f[++u]=[],l=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[u][l]=!0:p==="FALSE"?f[u][l]=!1:isNaN(bi(v))?isNaN(zu(v).getDate())?f[u][l]=v:f[u][l]=Dn(v):f[u][l]=bi(v),++l;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[u][l++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function t(a,o){return Ts(e(a,o),o)}function r(a,o){return lo(t(a,o),o)}var i=function(){var a=function(u,l,c,f,h){u.push(l),u.push(c+","+f),u.push('"'+h.replace(/"/g,'""')+'"')},o=function(u,l,c,f){u.push(l+","+c),u.push(l==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(u){var l=[],c=ht(u["!ref"]),f,h=Array.isArray(u);a(l,"TABLE",0,1,"sheetjs"),a(l,"VECTORS",0,c.e.r-c.s.r+1,""),a(l,"TUPLES",0,c.e.c-c.s.c+1,""),a(l,"DATA",0,0,"");for(var d=c.s.r;d<=c.e.r;++d){o(l,-1,0,"BOT");for(var v=c.s.c;v<=c.e.c;++v){var p=at({r:d,c:v});if(f=h?(u[d]||[])[v]:u[p],!f){o(l,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(l,1,0,"="+f.f):o(l,1,0,""):o(l,0,g,"V");break;case"b":o(l,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(l,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ma(f.z||kt[14],qn(Dn(f.v)))),o(l,0,f.w,"V");break;default:o(l,1,0,"")}}}o(l,-1,0,"EOD");var m=`\r
`,x=l.join(m);return x}}();return{to_workbook:r,to_sheet:t,from_sheet:i}}(),LE=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function n(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(f,h){for(var d=f.split(`
`),v=-1,p=-1,g=0,m=[];g!==d.length;++g){var x=d[g].trim().split(":");if(x[0]==="cell"){var y=qt(x[1]);if(m.length<=y.r)for(v=m.length;v<=y.r;++v)m[v]||(m[v]=[]);switch(v=y.r,p=y.c,x[2]){case"t":m[v][p]=e(x[3]);break;case"v":m[v][p]=+x[3];break;case"vtf":var w=x[x.length-1];case"vtc":switch(x[3]){case"nl":m[v][p]=!!+x[4];break;default:m[v][p]=+x[4];break}x[2]=="vtf"&&(m[v][p]=[m[v][p],w])}}}return h&&h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}function r(f,h){return Ts(t(f,h),h)}function i(f,h){return lo(r(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function l(f){if(!f||!f["!ref"])return"";for(var h=[],d=[],v,p="",g=hr(f["!ref"]),m=Array.isArray(f),x=g.s.r;x<=g.e.r;++x)for(var y=g.s.c;y<=g.e.c;++y)if(p=at({r:x,c:y}),v=m?(f[x]||[])[y]:f[p],!(!v||v.v==null||v.t==="z")){switch(d=["cell",p,"t"],v.t){case"s":case"str":d.push(n(v.v));break;case"n":v.f?(d[2]="vtf",d[3]="n",d[4]=v.v,d[5]=n(v.f)):(d[2]="v",d[3]=v.v);break;case"b":d[2]="vt"+(v.f?"f":"c"),d[3]="nl",d[4]=v.v?"1":"0",d[5]=n(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var w=qn(Dn(v.v));d[2]="vtc",d[3]="nd",d[4]=""+w,d[5]=v.w||ma(v.z||kt[14],w);break;case"e":continue}h.push(d.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function c(f){return[a,o,s,o,l(f),u].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:c}}(),iO=function(){function e(c,f,h,d,v){v.raw?f[h][d]=c:c===""||(c==="TRUE"?f[h][d]=!0:c==="FALSE"?f[h][d]=!1:isNaN(bi(c))?isNaN(zu(c).getDate())?f[h][d]=c:f[h][d]=Dn(c):f[h][d]=bi(c))}function n(c,f){var h=f||{},d=[];if(!c||c.length===0)return d;for(var v=c.split(/[\r\n]/),p=v.length-1;p>=0&&v[p].length===0;)--p;for(var g=10,m=0,x=0;x<=p;++x)m=v[x].indexOf(" "),m==-1?m=v[x].length:m++,g=Math.max(g,m);for(x=0;x<=p;++x){d[x]=[];var y=0;for(e(v[x].slice(0,g).trim(),d,x,y,h),y=1;y<=(v[x].length-g)/10+1;++y)e(v[x].slice(g+(y-1)*10,g+y*10).trim(),d,x,y,h)}return h.sheetRows&&(d=d.slice(0,h.sheetRows)),d}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(c){for(var f={},h=!1,d=0,v=0;d<c.length;++d)(v=c.charCodeAt(d))==34?h=!h:!h&&v in t&&(f[v]=(f[v]||0)+1);v=[];for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&v.push([f[d],d]);if(!v.length){f=r;for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&v.push([f[d],d])}return v.sort(function(p,g){return p[0]-g[0]||r[p[1]]-r[g[1]]}),t[v.pop()[1]]||44}function a(c,f){var h=f||{},d="",v=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};c.slice(0,4)=="sep="?c.charCodeAt(5)==13&&c.charCodeAt(6)==10?(d=c.charAt(4),c=c.slice(7)):c.charCodeAt(5)==13||c.charCodeAt(5)==10?(d=c.charAt(4),c=c.slice(6)):d=i(c.slice(0,1024)):h&&h.FS?d=h.FS:d=i(c.slice(0,1024));var g=0,m=0,x=0,y=0,w=0,_=d.charCodeAt(0),S=!1,E=0,b=c.charCodeAt(0);c=c.replace(/\r\n/mg,`
`);var C=h.dateNF!=null?wD(h.dateNF):null;function T(){var F=c.slice(y,w),I={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)I.t="z";else if(h.raw)I.t="s",I.v=F;else if(F.trim().length===0)I.t="s",I.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(I.t="s",I.v=F.slice(2,-1).replace(/""/g,'"')):nM(F)?(I.t="n",I.f=F.slice(1)):(I.t="s",I.v=F);else if(F=="TRUE")I.t="b",I.v=!0;else if(F=="FALSE")I.t="b",I.v=!1;else if(!isNaN(x=bi(F)))I.t="n",h.cellText!==!1&&(I.w=F),I.v=x;else if(!isNaN(zu(F).getDate())||C&&F.match(C)){I.z=h.dateNF||kt[14];var V=0;C&&F.match(C)&&(F=_D(F,h.dateNF,F.match(C)||[]),V=1),h.cellDates?(I.t="d",I.v=Dn(F,V)):(I.t="n",I.v=qn(Dn(F,V))),h.cellText!==!1&&(I.w=ma(I.z,I.v instanceof Date?qn(I.v):I.v)),h.cellNF||delete I.z}else I.t="s",I.v=F;if(I.t=="z"||(h.dense?(v[g]||(v[g]=[]),v[g][m]=I):v[at({c:m,r:g})]=I),y=w+1,b=c.charCodeAt(y),p.e.c<m&&(p.e.c=m),p.e.r<g&&(p.e.r=g),E==_)++m;else if(m=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;w<c.length;++w)switch(E=c.charCodeAt(w)){case 34:b===34&&(S=!S);break;case _:case 10:case 13:if(!S&&T())break e;break}return w-y>0&&T(),v["!ref"]=Pt(p),v}function o(c,f){return!(f&&f.PRN)||f.FS||c.slice(0,4)=="sep="||c.indexOf("	")>=0||c.indexOf(",")>=0||c.indexOf(";")>=0?a(c,f):Ts(n(c,f),f)}function s(c,f){var h="",d=f.type=="string"?[0,0,0,0]:m8(c,f);switch(f.type){case"base64":h=Ii(c);break;case"binary":h=c;break;case"buffer":f.codepage==65001?h=c.toString("utf8"):f.codepage&&typeof Oa<"u"?h=Oa.utils.decode(f.codepage,c):h=Je&&Buffer.isBuffer(c)?c.toString("binary"):sl(c);break;case"array":h=ah(c);break;case"string":h=c;break;default:throw new Error("Unrecognized type "+f.type)}return d[0]==239&&d[1]==187&&d[2]==191?h=cu(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=cu(h):f.type=="binary"&&typeof Oa<"u"&&f.codepage&&(h=Oa.utils.decode(f.codepage,Oa.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?LE.to_sheet(f.type=="string"?h:cu(h),f):o(h,f)}function u(c,f){return lo(s(c,f),f)}function l(c){for(var f=[],h=ht(c["!ref"]),d,v=Array.isArray(c),p=h.s.r;p<=h.e.r;++p){for(var g=[],m=h.s.c;m<=h.e.c;++m){var x=at({r:p,c:m});if(d=v?(c[p]||[])[m]:c[x],!d||d.v==null){g.push("          ");continue}for(var y=(d.w||(Ni(d),d.w)||"").slice(0,10);y.length<10;)y+=" ";g.push(y+(m===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:u,to_sheet:s,from_sheet:l}}(),qg=function(){function e(D,z,U){if(D){tr(D,D.l||0);for(var B=U.Enum||Q;D.l<D.length;){var J=D.read_shift(2),he=B[J]||B[65535],ge=D.read_shift(2),de=D.l+ge,pe=he.f&&he.f(D,ge,U);if(D.l=de,z(pe,he,J))return}}}function n(D,z){switch(z.type){case"base64":return t(Mr(Ii(D)),z);case"binary":return t(Mr(D),z);case"buffer":case"array":return t(D,z)}throw"Unsupported type "+z.type}function t(D,z){if(!D)return D;var U=z||{},B=U.dense?[]:{},J="Sheet1",he="",ge=0,de={},pe=[],Fe=[],Ie={s:{r:0,c:0},e:{r:0,c:0}},Le=U.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)U.Enum=Q,e(D,function(Se,pt,vt){switch(vt){case 0:U.vers=Se,Se>=4096&&(U.qpro=!0);break;case 6:Ie=Se;break;case 204:Se&&(he=Se);break;case 222:he=Se;break;case 15:case 51:U.qpro||(Se[1].v=Se[1].v.slice(1));case 13:case 14:case 16:vt==14&&(Se[2]&112)==112&&(Se[2]&15)>1&&(Se[2]&15)<15&&(Se[1].z=U.dateNF||kt[14],U.cellDates&&(Se[1].t="d",Se[1].v=eE(Se[1].v))),U.qpro&&Se[3]>ge&&(B["!ref"]=Pt(Ie),de[J]=B,pe.push(J),B=U.dense?[]:{},Ie={s:{r:0,c:0},e:{r:0,c:0}},ge=Se[3],J=he||"Sheet"+(ge+1),he="");var Mn=U.dense?(B[Se[0].r]||[])[Se[0].c]:B[at(Se[0])];if(Mn){Mn.t=Se[1].t,Mn.v=Se[1].v,Se[1].z!=null&&(Mn.z=Se[1].z),Se[1].f!=null&&(Mn.f=Se[1].f);break}U.dense?(B[Se[0].r]||(B[Se[0].r]=[]),B[Se[0].r][Se[0].c]=Se[1]):B[at(Se[0])]=Se[1];break}},U);else if(D[2]==26||D[2]==14)U.Enum=fe,D[2]==14&&(U.qpro=!0,D.l=0),e(D,function(Se,pt,vt){switch(vt){case 204:J=Se;break;case 22:Se[1].v=Se[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Se[3]>ge&&(B["!ref"]=Pt(Ie),de[J]=B,pe.push(J),B=U.dense?[]:{},Ie={s:{r:0,c:0},e:{r:0,c:0}},ge=Se[3],J="Sheet"+(ge+1)),Le>0&&Se[0].r>=Le)break;U.dense?(B[Se[0].r]||(B[Se[0].r]=[]),B[Se[0].r][Se[0].c]=Se[1]):B[at(Se[0])]=Se[1],Ie.e.c<Se[0].c&&(Ie.e.c=Se[0].c),Ie.e.r<Se[0].r&&(Ie.e.r=Se[0].r);break;case 27:Se[14e3]&&(Fe[Se[14e3][0]]=Se[14e3][1]);break;case 1537:Fe[Se[0]]=Se[1],Se[0]==ge&&(J=Se[1]);break}},U);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(B["!ref"]=Pt(Ie),de[he||J]=B,pe.push(he||J),!Fe.length)return{SheetNames:pe,Sheets:de};for(var Me={},qe=[],Ue=0;Ue<Fe.length;++Ue)de[pe[Ue]]?(qe.push(Fe[Ue]||pe[Ue]),Me[Fe[Ue]]=de[Fe[Ue]]||de[pe[Ue]]):(qe.push(Fe[Ue]),Me[Fe[Ue]]={"!ref":"A1"});return{SheetNames:qe,Sheets:Me}}function r(D,z){var U=z||{};if(+U.codepage>=0&&Uu(+U.codepage),U.type=="string")throw new Error("Cannot write WK1 to JS string");var B=Gn(),J=ht(D["!ref"]),he=Array.isArray(D),ge=[];we(B,0,a(1030)),we(B,6,u(J));for(var de=Math.min(J.e.r,8191),pe=J.s.r;pe<=de;++pe)for(var Fe=fn(pe),Ie=J.s.c;Ie<=J.e.c;++Ie){pe===J.s.r&&(ge[Ie]=Cn(Ie));var Le=ge[Ie]+Fe,Me=he?(D[pe]||[])[Ie]:D[Le];if(!(!Me||Me.t=="z"))if(Me.t=="n")(Me.v|0)==Me.v&&Me.v>=-32768&&Me.v<=32767?we(B,13,d(pe,Ie,Me.v)):we(B,14,p(pe,Ie,Me.v));else{var qe=Ni(Me);we(B,15,f(pe,Ie,qe.slice(0,239)))}}return we(B,1),B.end()}function i(D,z){var U=z||{};if(+U.codepage>=0&&Uu(+U.codepage),U.type=="string")throw new Error("Cannot write WK3 to JS string");var B=Gn();we(B,0,o(D));for(var J=0,he=0;J<D.SheetNames.length;++J)(D.Sheets[D.SheetNames[J]]||{})["!ref"]&&we(B,27,X(D.SheetNames[J],he++));var ge=0;for(J=0;J<D.SheetNames.length;++J){var de=D.Sheets[D.SheetNames[J]];if(!(!de||!de["!ref"])){for(var pe=ht(de["!ref"]),Fe=Array.isArray(de),Ie=[],Le=Math.min(pe.e.r,8191),Me=pe.s.r;Me<=Le;++Me)for(var qe=fn(Me),Ue=pe.s.c;Ue<=pe.e.c;++Ue){Me===pe.s.r&&(Ie[Ue]=Cn(Ue));var Se=Ie[Ue]+qe,pt=Fe?(de[Me]||[])[Ue]:de[Se];if(!(!pt||pt.t=="z"))if(pt.t=="n")we(B,23,T(Me,Ue,ge,pt.v));else{var vt=Ni(pt);we(B,22,E(Me,Ue,ge,vt.slice(0,239)))}}++ge}}return we(B,1),B.end()}function a(D){var z=ae(2);return z.write_shift(2,D),z}function o(D){var z=ae(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var U=0,B=0,J=0,he=0;he<D.SheetNames.length;++he){var ge=D.SheetNames[he],de=D.Sheets[ge];if(!(!de||!de["!ref"])){++J;var pe=hr(de["!ref"]);U<pe.e.r&&(U=pe.e.r),B<pe.e.c&&(B=pe.e.c)}}return U>8191&&(U=8191),z.write_shift(2,U),z.write_shift(1,J),z.write_shift(1,B),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function s(D,z,U){var B={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&U.qpro?(B.s.c=D.read_shift(1),D.l++,B.s.r=D.read_shift(2),B.e.c=D.read_shift(1),D.l++,B.e.r=D.read_shift(2),B):(B.s.c=D.read_shift(2),B.s.r=D.read_shift(2),z==12&&U.qpro&&(D.l+=2),B.e.c=D.read_shift(2),B.e.r=D.read_shift(2),z==12&&U.qpro&&(D.l+=2),B.s.c==65535&&(B.s.c=B.e.c=B.s.r=B.e.r=0),B)}function u(D){var z=ae(8);return z.write_shift(2,D.s.c),z.write_shift(2,D.s.r),z.write_shift(2,D.e.c),z.write_shift(2,D.e.r),z}function l(D,z,U){var B=[{c:0,r:0},{t:"n",v:0},0,0];return U.qpro&&U.vers!=20768?(B[0].c=D.read_shift(1),B[3]=D.read_shift(1),B[0].r=D.read_shift(2),D.l+=2):(B[2]=D.read_shift(1),B[0].c=D.read_shift(2),B[0].r=D.read_shift(2)),B}function c(D,z,U){var B=D.l+z,J=l(D,z,U);if(J[1].t="s",U.vers==20768){D.l++;var he=D.read_shift(1);return J[1].v=D.read_shift(he,"utf8"),J}return U.qpro&&D.l++,J[1].v=D.read_shift(B-D.l,"cstr"),J}function f(D,z,U){var B=ae(7+U.length);B.write_shift(1,255),B.write_shift(2,z),B.write_shift(2,D),B.write_shift(1,39);for(var J=0;J<B.length;++J){var he=U.charCodeAt(J);B.write_shift(1,he>=128?95:he)}return B.write_shift(1,0),B}function h(D,z,U){var B=l(D,z,U);return B[1].v=D.read_shift(2,"i"),B}function d(D,z,U){var B=ae(7);return B.write_shift(1,255),B.write_shift(2,z),B.write_shift(2,D),B.write_shift(2,U,"i"),B}function v(D,z,U){var B=l(D,z,U);return B[1].v=D.read_shift(8,"f"),B}function p(D,z,U){var B=ae(13);return B.write_shift(1,255),B.write_shift(2,z),B.write_shift(2,D),B.write_shift(8,U,"f"),B}function g(D,z,U){var B=D.l+z,J=l(D,z,U);if(J[1].v=D.read_shift(8,"f"),U.qpro)D.l=B;else{var he=D.read_shift(2);w(D.slice(D.l,D.l+he),J),D.l+=he}return J}function m(D,z,U){var B=z&32768;return z&=-32769,z=(B?D:0)+(z>=8192?z-16384:z),(B?"":"$")+(U?Cn(z):fn(z))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(D,z){tr(D,0);for(var U=[],B=0,J="",he="",ge="",de="";D.l<D.length;){var pe=D[D.l++];switch(pe){case 0:U.push(D.read_shift(8,"f"));break;case 1:he=m(z[0].c,D.read_shift(2),!0),J=m(z[0].r,D.read_shift(2),!1),U.push(he+J);break;case 2:{var Fe=m(z[0].c,D.read_shift(2),!0),Ie=m(z[0].r,D.read_shift(2),!1);he=m(z[0].c,D.read_shift(2),!0),J=m(z[0].r,D.read_shift(2),!1),U.push(Fe+Ie+":"+he+J)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:U.push("("+U.pop()+")");break;case 5:U.push(D.read_shift(2));break;case 6:{for(var Le="";pe=D[D.l++];)Le+=String.fromCharCode(pe);U.push('"'+Le.replace(/"/g,'""')+'"')}break;case 8:U.push("-"+U.pop());break;case 23:U.push("+"+U.pop());break;case 22:U.push("NOT("+U.pop()+")");break;case 20:case 21:de=U.pop(),ge=U.pop(),U.push(["AND","OR"][pe-20]+"("+ge+","+de+")");break;default:if(pe<32&&y[pe])de=U.pop(),ge=U.pop(),U.push(ge+y[pe]+de);else if(x[pe]){if(B=x[pe][1],B==69&&(B=D[D.l++]),B>U.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+U.join("|")+"|");return}var Me=U.slice(-B);U.length-=B,U.push(x[pe][0]+"("+Me.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}U.length==1?z[1].f=""+U[0]:console.error("WK1 bad formula parse |"+U.join("|")+"|")}function _(D){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=D.read_shift(2),z[3]=D[D.l++],z[0].c=D[D.l++],z}function S(D,z){var U=_(D);return U[1].t="s",U[1].v=D.read_shift(z-4,"cstr"),U}function E(D,z,U,B){var J=ae(6+B.length);J.write_shift(2,D),J.write_shift(1,U),J.write_shift(1,z),J.write_shift(1,39);for(var he=0;he<B.length;++he){var ge=B.charCodeAt(he);J.write_shift(1,ge>=128?95:ge)}return J.write_shift(1,0),J}function b(D,z){var U=_(D);U[1].v=D.read_shift(2);var B=U[1].v>>1;if(U[1].v&1)switch(B&7){case 0:B=(B>>3)*5e3;break;case 1:B=(B>>3)*500;break;case 2:B=(B>>3)/20;break;case 3:B=(B>>3)/200;break;case 4:B=(B>>3)/2e3;break;case 5:B=(B>>3)/2e4;break;case 6:B=(B>>3)/16;break;case 7:B=(B>>3)/64;break}return U[1].v=B,U}function C(D,z){var U=_(D),B=D.read_shift(4),J=D.read_shift(4),he=D.read_shift(2);if(he==65535)return B===0&&J===3221225472?(U[1].t="e",U[1].v=15):B===0&&J===3489660928?(U[1].t="e",U[1].v=42):U[1].v=0,U;var ge=he&32768;return he=(he&32767)-16446,U[1].v=(1-ge*2)*(J*Math.pow(2,he+32)+B*Math.pow(2,he)),U}function T(D,z,U,B){var J=ae(14);if(J.write_shift(2,D),J.write_shift(1,U),J.write_shift(1,z),B==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var he=0,ge=0,de=0,pe=0;return B<0&&(he=1,B=-B),ge=Math.log2(B)|0,B/=Math.pow(2,ge-31),pe=B>>>0,pe&2147483648||(B/=2,++ge,pe=B>>>0),B-=pe,pe|=2147483648,pe>>>=0,B*=Math.pow(2,32),de=B>>>0,J.write_shift(4,de),J.write_shift(4,pe),ge+=16383+(he?32768:0),J.write_shift(2,ge),J}function F(D,z){var U=C(D);return D.l+=z-14,U}function I(D,z){var U=_(D),B=D.read_shift(4);return U[1].v=B>>6,U}function V(D,z){var U=_(D),B=D.read_shift(8,"f");return U[1].v=B,U}function K(D,z){var U=V(D);return D.l+=z-10,U}function G(D,z){return D[D.l+z-1]==0?D.read_shift(z,"cstr"):""}function ie(D,z){var U=D[D.l++];U>z-1&&(U=z-1);for(var B="";B.length<U;)B+=String.fromCharCode(D[D.l++]);return B}function re(D,z,U){if(!(!U.qpro||z<21)){var B=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var J=D.read_shift(z-21,"cstr");return[B,J]}}function H(D,z){for(var U={},B=D.l+z;D.l<B;){var J=D.read_shift(2);if(J==14e3){for(U[J]=[0,""],U[J][0]=D.read_shift(2);D[D.l];)U[J][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return U}function X(D,z){var U=ae(5+D.length);U.write_shift(2,14e3),U.write_shift(2,z);for(var B=0;B<D.length;++B){var J=D.charCodeAt(B);U[U.l++]=J>127?95:J}return U[U.l++]=0,U}var Q={0:{n:"BOF",f:NE},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:s},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:c},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:c},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:ie},65535:{n:""}},fe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:b},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:K},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:n}}(),aO=/^\s|\s$|[\t\n\r]/;function BE(e,n){if(!n.bookSST)return"";var t=[Ot];t[t.length]=ye("sst",null,{xmlns:bs[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(e[r]!=null){var i=e[r],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(aO)&&(a+=' xml:space="preserve"'),a+=">"+rt(i.t)+"</t>"),a+="</si>",t[t.length]=a}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function oO(e){return[e.read_shift(4),e.read_shift(4)]}function sO(e,n){return n||(n=ae(8)),n.write_shift(4,e.Count),n.write_shift(4,e.Unique),n}var uO=JD;function lO(e){var n=Gn();le(n,159,sO(e));for(var t=0;t<e.length;++t)le(n,19,uO(e[t]));return le(n,160),n.end()}function cO(e){for(var n=[],t=e.split(""),r=0;r<t.length;++r)n[r]=t[r].charCodeAt(0);return n}function UE(e){var n=0,t,r=cO(e),i=r.length+1,a,o,s,u,l;for(t=Za(i),t[0]=r.length,a=1;a!=i;++a)t[a]=r[a-1];for(a=i-1;a>=0;--a)o=t[a],s=n&16384?1:0,u=n<<1&32767,l=s|u,n=l^o;return n^52811}var fO=function(){function e(i,a){switch(a.type){case"base64":return n(Ii(i),a);case"binary":return n(i,a);case"buffer":return n(Je&&Buffer.isBuffer(i)?i.toString("binary"):sl(i),a);case"array":return n(ah(i),a)}throw new Error("Unrecognized type "+a.type)}function n(i,a){var o=a||{},s=o.dense?[]:{},u=i.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var l={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(c,f){Array.isArray(s)&&(s[f]=[]);for(var h=/\\\w+\b/g,d=0,v,p=-1;v=h.exec(c);){switch(v[0]){case"\\cell":var g=c.slice(d,h.lastIndex-v[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var m={v:g,t:"s"};Array.isArray(s)?s[f][p]=m:s[at({r:f,c:p})]=m}break}d=h.lastIndex}p>l.e.c&&(l.e.c=p)}),s["!ref"]=Pt(l),s}function t(i,a){return lo(e(i,a),a)}function r(i){for(var a=["{\\rtf1\\ansi"],o=ht(i["!ref"]),s,u=Array.isArray(i),l=o.s.r;l<=o.e.r;++l){a.push("\\trowd\\trautofit1");for(var c=o.s.c;c<=o.e.c;++c)a.push("\\cellx"+(c+1));for(a.push("\\pard\\intbl"),c=o.s.c;c<=o.e.c;++c){var f=at({r:l,c});s=u?(i[l]||[])[c]:i[f],!(!s||s.v==null&&(!s.f||s.F))&&(a.push(" "+(s.w||(Ni(s),s.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:t,to_sheet:e,from_sheet:r}}();function Yg(e){for(var n=0,t=1;n!=3;++n)t=t*256+(e[n]>255?255:e[n]<0?0:e[n]);return t.toString(16).toUpperCase().slice(1)}var hO=6,Ti=hO;function xf(e){return Math.floor((e+Math.round(128/Ti)/256)*Ti)}function yf(e){return Math.floor((e-5)/Ti*100+.5)/100}function Bp(e){return Math.round((e*Ti+5)/Ti*256)/256}function Qv(e){e.width?(e.wpx=xf(e.width),e.wch=yf(e.wpx),e.MDW=Ti):e.wpx?(e.wch=yf(e.wpx),e.width=Bp(e.wch),e.MDW=Ti):typeof e.wch=="number"&&(e.width=Bp(e.wch),e.wpx=xf(e.width),e.MDW=Ti),e.customWidth&&delete e.customWidth}var dO=96,WE=dO;function wf(e){return e*96/WE}function zE(e){return e*WE/96}function pO(e){var n=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)e[r]!=null&&(n[n.length]=ye("numFmt",null,{numFmtId:r,formatCode:rt(e[r])}))}),n.length===1?"":(n[n.length]="</numFmts>",n[0]=ye("numFmts",null,{count:n.length-2}).replace("/>",">"),n.join(""))}function vO(e){var n=[];return n[n.length]=ye("cellXfs",null),e.forEach(function(t){n[n.length]=ye("xf",null,t)}),n[n.length]="</cellXfs>",n.length===2?"":(n[0]=ye("cellXfs",null,{count:n.length-2}).replace("/>",">"),n.join(""))}function VE(e,n){var t=[Ot,ye("styleSheet",null,{xmlns:bs[0],"xmlns:vt":Kt.vt})],r;return e.SSF&&(r=pO(e.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=vO(n.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function mO(e,n){var t=e.read_shift(2),r=bn(e);return[t,r]}function gO(e,n,t){t||(t=ae(6+4*n.length)),t.write_shift(2,e),Yt(n,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function xO(e,n,t){var r={};r.sz=e.read_shift(2)/20;var i=aP(e);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var a=e.read_shift(2);switch(a===700&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(r.underline=o);var s=e.read_shift(1);s>0&&(r.family=s);var u=e.read_shift(1);switch(u>0&&(r.charset=u),e.l++,r.color=iP(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=bn(e),r}function yO(e,n){n||(n=ae(25+4*32)),n.write_shift(2,e.sz*20),oP(e,n),n.write_shift(2,e.bold?700:400);var t=0;e.vertAlign=="superscript"?t=1:e.vertAlign=="subscript"&&(t=2),n.write_shift(2,t),n.write_shift(1,e.underline||0),n.write_shift(1,e.family||0),n.write_shift(1,e.charset||0),n.write_shift(1,0),mf(e.color,n);var r=0;return e.scheme=="major"&&(r=1),e.scheme=="minor"&&(r=2),n.write_shift(1,r),Yt(e.name,n),n.length>n.l?n.slice(0,n.l):n}var wO=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],pd,_O=ci;function Qg(e,n){n||(n=ae(4*3+8*7+16*1)),pd||(pd=Uv(wO));var t=pd[e.patternType];t==null&&(t=40),n.write_shift(4,t);var r=0;if(t!=40)for(mf({auto:1},n),mf({auto:1},n);r<12;++r)n.write_shift(4,0);else{for(;r<4;++r)n.write_shift(4,0);for(;r<12;++r)n.write_shift(4,0)}return n.length>n.l?n.slice(0,n.l):n}function EO(e,n){var t=e.l+n,r=e.read_shift(2),i=e.read_shift(2);return e.l=t,{ixfe:r,numFmtId:i}}function HE(e,n,t){t||(t=ae(16)),t.write_shift(2,n||0),t.write_shift(2,e.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function js(e,n){return n||(n=ae(10)),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(4,0),n}var SO=ci;function CO(e,n){return n||(n=ae(51)),n.write_shift(1,0),js(null,n),js(null,n),js(null,n),js(null,n),js(null,n),n.length>n.l?n.slice(0,n.l):n}function bO(e,n){return n||(n=ae(12+4*10)),n.write_shift(4,e.xfId),n.write_shift(2,1),n.write_shift(1,+e.builtinId),n.write_shift(1,0),vf(e.name||"",n),n.length>n.l?n.slice(0,n.l):n}function TO(e,n,t){var r=ae(2052);return r.write_shift(4,e),vf(n,r),vf(t,r),r.length>r.l?r.slice(0,r.l):r}function kO(e,n){if(n){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)n[i]!=null&&++t}),t!=0&&(le(e,615,Vr(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)n[i]!=null&&le(e,44,gO(i,n[i]))}),le(e,616))}}function AO(e){var n=1;le(e,611,Vr(n)),le(e,43,yO({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),le(e,612)}function RO(e){var n=2;le(e,603,Vr(n)),le(e,45,Qg({patternType:"none"})),le(e,45,Qg({patternType:"gray125"})),le(e,604)}function FO(e){var n=1;le(e,613,Vr(n)),le(e,46,CO()),le(e,614)}function IO(e){var n=1;le(e,626,Vr(n)),le(e,47,HE({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),le(e,627)}function NO(e,n){le(e,617,Vr(n.length)),n.forEach(function(t){le(e,47,HE(t,0))}),le(e,618)}function DO(e){var n=1;le(e,619,Vr(n)),le(e,48,bO({xfId:0,builtinId:0,name:"Normal"})),le(e,620)}function PO(e){var n=0;le(e,505,Vr(n)),le(e,506)}function OO(e){var n=0;le(e,508,TO(n,"TableStyleMedium9","PivotStyleMedium4")),le(e,509)}function MO(e,n){var t=Gn();return le(t,278),kO(t,e.SSF),AO(t),RO(t),FO(t),IO(t),NO(t,n.cellXfs),DO(t),PO(t),OO(t),le(t,279),t.end()}function $E(e,n){if(n&&n.themeXLSX)return n.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var t=[Ot];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function LO(e,n){return{flags:e.read_shift(4),version:e.read_shift(4),name:bn(e)}}function BO(e){var n=ae(12+2*e.name.length);return n.write_shift(4,e.flags),n.write_shift(4,e.version),Yt(e.name,n),n.slice(0,n.l)}function UO(e){for(var n=[],t=e.read_shift(4);t-- >0;)n.push([e.read_shift(4),e.read_shift(4)]);return n}function WO(e){var n=ae(4+8*e.length);n.write_shift(4,e.length);for(var t=0;t<e.length;++t)n.write_shift(4,e[t][0]),n.write_shift(4,e[t][1]);return n}function zO(e,n){var t=ae(8+2*n.length);return t.write_shift(4,e),Yt(n,t),t.slice(0,t.l)}function VO(e){return e.l+=4,e.read_shift(4)!=0}function HO(e,n){var t=ae(8);return t.write_shift(4,e),t.write_shift(4,1),t}function $O(){var e=Gn();return le(e,332),le(e,334,Vr(1)),le(e,335,BO({name:"XLDAPR",version:12e4,flags:3496657072})),le(e,336),le(e,339,zO(1,"XLDAPR")),le(e,52),le(e,35,Vr(514)),le(e,4096,Vr(0)),le(e,4097,mr(1)),le(e,36),le(e,53),le(e,340),le(e,337,HO(1)),le(e,51,WO([[1,0]])),le(e,338),le(e,333),e.end()}function jE(){var e=[Ot];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function jO(e){var n={};n.i=e.read_shift(4);var t={};t.r=e.read_shift(4),t.c=e.read_shift(4),n.r=at(t);var r=e.read_shift(1);return r&2&&(n.l="1"),r&8&&(n.a="1"),n}var Ho=1024;function GE(e,n){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[ye("xml",null,{"xmlns:v":rr.v,"xmlns:o":rr.o,"xmlns:x":rr.x,"xmlns:mv":rr.mv}).replace(/\/>/,">"),ye("o:shapelayout",ye("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ye("v:shapetype",[ye("v:stroke",null,{joinstyle:"miter"}),ye("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Ho<e*1e3;)Ho+=1e3;return n.forEach(function(a){var o=qt(a[0]),s={color2:"#BEFF82",type:"gradient"};s.type=="gradient"&&(s.angle="-180");var u=s.type=="gradient"?ye("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,l=ye("v:fill",u,s),c={on:"t",obscured:"t"};++Ho,i=i.concat(["<v:shape"+Hu({id:"_x0000_s"+Ho,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",l,ye("v:shadow",null,c),ye("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ln("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),ln("x:AutoFill","False"),ln("x:Row",String(o.r)),ln("x:Column",String(o.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function XE(e){var n=[Ot,ye("comments",null,{xmlns:bs[0]})],t=[];return n.push("<authors>"),e.forEach(function(r){r[1].forEach(function(i){var a=rt(i.a);t.indexOf(a)==-1&&(t.push(a),n.push("<author>"+a+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),n.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),n.push("<author>SheetJ5</author>")),n.push("</authors>"),n.push("<commentList>"),e.forEach(function(r){var i=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(u){u.a&&(i=t.indexOf(rt(u.a))),a.push(u.t||"")}),n.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),a.length<=1)n.push(ln("t",rt(a[0]||"")));else{for(var o=`Comment:
    `+a[0]+`
`,s=1;s<a.length;++s)o+=`Reply:
    `+a[s]+`
`;n.push(ln("t",rt(o)))}n.push("</text></comment>")}),n.push("</commentList>"),n.length>2&&(n[n.length]="</comments>",n[1]=n[1].replace("/>",">")),n.join("")}function GO(e,n,t){var r=[Ot,ye("ThreadedComments",null,{xmlns:Kt.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(i){var a="";(i[1]||[]).forEach(function(o,s){if(!o.T){delete o.ID;return}o.a&&n.indexOf(o.a)==-1&&n.push(o.a);var u={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};s==0?a=u.id:u.parentId=a,o.ID=u.id,o.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+n.indexOf(o.a)).slice(-12)+"}"),r.push(ye("threadedComment",ln("text",o.t||""),u))})}),r.push("</ThreadedComments>"),r.join("")}function XO(e){var n=[Ot,ye("personList",null,{xmlns:Kt.TCMNT,"xmlns:x":bs[0]}).replace(/[\/]>/,">")];return e.forEach(function(t,r){n.push(ye("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),n.push("</personList>"),n.join("")}function KO(e){var n={};n.iauthor=e.read_shift(4);var t=po(e);return n.rfx=t.s,n.ref=at(t.s),e.l+=16,n}function qO(e,n){return n==null&&(n=ae(36)),n.write_shift(4,e[1].iauthor),ks(e[0],n),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n}var YO=bn;function QO(e){return Yt(e.slice(0,54))}function JO(e){var n=Gn(),t=[];return le(n,628),le(n,630),e.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),le(n,632,QO(i.a)))})}),le(n,631),le(n,633),e.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var a={s:qt(r[0]),e:qt(r[0])};le(n,635,qO([a,i])),i.t&&i.t.length>0&&le(n,637,eP(i)),le(n,636),delete i.iauthor})}),le(n,634),le(n,629),n.end()}function ZO(e,n){n.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&ot.utils.cfb_add(e,i,n.FileIndex[r].content)}})}var KE=["xlsb","xlsm","xlam","biff8","xla"],eM=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,n={r:0,c:0};function t(r,i,a,o){var s=!1,u=!1;a.length==0?u=!0:a.charAt(0)=="["&&(u=!0,a=a.slice(1,-1)),o.length==0?s=!0:o.charAt(0)=="["&&(s=!0,o=o.slice(1,-1));var l=a.length>0?parseInt(a,10)|0:0,c=o.length>0?parseInt(o,10)|0:0;return s?c+=n.c:--c,u?l+=n.r:--l,i+(s?"":"$")+Cn(c)+(u?"":"$")+fn(l)}return function(i,a){return n=a,i.replace(e,t)}}(),Jv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Zv=function(){return function(n,t){return n.replace(Jv,function(r,i,a,o,s,u){var l=Gv(o)-(a?0:t.c),c=jv(u)-(s?0:t.r),f=c==0?"":s?c+1:"["+c+"]",h=l==0?"":a?l+1:"["+l+"]";return i+"R"+f+"C"+h})}}();function tM(e,n){return e.replace(Jv,function(t,r,i,a,o,s){return r+(i=="$"?i+a:Cn(Gv(a)+n.c))+(o=="$"?o+s:fn(jv(s)+n.r))})}function nM(e){return e.length!=1}function Ft(e){e.l+=1}function ga(e,n){var t=e.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function qE(e,n,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return YE(e);t.biff==12&&(r=4)}var i=e.read_shift(r),a=e.read_shift(r),o=ga(e),s=ga(e);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function YE(e){var n=ga(e),t=ga(e),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:n[0],c:r,cRel:n[1],rRel:n[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function rM(e,n,t){if(t.biff<8)return YE(e);var r=e.read_shift(t.biff==12?4:2),i=e.read_shift(t.biff==12?4:2),a=ga(e),o=ga(e);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function QE(e,n,t){if(t&&t.biff>=2&&t.biff<=5)return iM(e);var r=e.read_shift(t&&t.biff==12?4:2),i=ga(e);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function iM(e){var n=ga(e),t=e.read_shift(1);return{r:n[0],c:t,cRel:n[1],rRel:n[2]}}function aM(e){var n=e.read_shift(2),t=e.read_shift(2);return{r:n,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function oM(e,n,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return sM(e);var i=e.read_shift(r>=12?4:2),a=e.read_shift(2),o=(a&16384)>>14,s=(a&32768)>>15;if(a&=16383,s==1)for(;i>524287;)i-=1048576;if(o==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:o,rRel:s}}function sM(e){var n=e.read_shift(2),t=e.read_shift(1),r=(n&32768)>>15,i=(n&16384)>>14;return n&=16383,r==1&&n>=8192&&(n=n-16384),i==1&&t>=128&&(t=t-256),{r:n,c:t,cRel:i,rRel:r}}function uM(e,n,t){var r=(e[e.l++]&96)>>5,i=qE(e,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function lM(e,n,t){var r=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),a=8;if(t)switch(t.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var o=qE(e,a,t);return[r,i,o]}function cM(e,n,t){var r=(e[e.l++]&96)>>5;return e.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function fM(e,n,t){var r=(e[e.l++]&96)>>5,i=e.read_shift(2),a=8;if(t)switch(t.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[r,i]}function hM(e,n,t){var r=(e[e.l++]&96)>>5,i=rM(e,n-1,t);return[r,i]}function dM(e,n,t){var r=(e[e.l++]&96)>>5;return e.l+=t.biff==2?6:t.biff==12?14:7,[r]}function Jg(e){var n=e[e.l+1]&1,t=1;return e.l+=4,[n,t]}function pM(e,n,t){e.l+=2;for(var r=e.read_shift(t&&t.biff==2?1:2),i=[],a=0;a<=r;++a)i.push(e.read_shift(t&&t.biff==2?1:2));return i}function vM(e,n,t){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(t&&t.biff==2?1:2)]}function mM(e,n,t){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(t&&t.biff==2?1:2)]}function gM(e){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(2)]}function xM(e,n,t){var r=e[e.l+1]&255?1:0;return e.l+=t&&t.biff==2?3:4,[r]}function JE(e){var n=e.read_shift(1),t=e.read_shift(1);return[n,t]}function yM(e){return e.read_shift(2),JE(e)}function wM(e){return e.read_shift(2),JE(e)}function _M(e,n,t){var r=(e[e.l]&96)>>5;e.l+=1;var i=QE(e,0,t);return[r,i]}function EM(e,n,t){var r=(e[e.l]&96)>>5;e.l+=1;var i=oM(e,0,t);return[r,i]}function SM(e,n,t){var r=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);t&&t.biff==5&&(e.l+=12);var a=QE(e,0,t);return[r,i,a]}function CM(e,n,t){var r=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(t&&t.biff<=3?1:2);return[CL[i],tS[i],r]}function bM(e,n,t){var r=e[e.l++],i=e.read_shift(1),a=t&&t.biff<=3?[r==88?-1:0,e.read_shift(1)]:TM(e);return[i,(a[0]===0?tS:SL)[a[1]]]}function TM(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function kM(e,n,t){e.l+=t&&t.biff==2?3:4}function AM(e,n,t){if(e.l++,t&&t.biff==12)return[e.read_shift(4,"i"),0];var r=e.read_shift(2),i=e.read_shift(t&&t.biff==2?1:2);return[r,i]}function RM(e){return e.l++,cl[e.read_shift(1)]}function FM(e){return e.l++,e.read_shift(2)}function IM(e){return e.l++,e.read_shift(1)!==0}function NM(e){return e.l++,As(e)}function DM(e,n,t){return e.l++,PE(e,n-1,t)}function PM(e,n){var t=[e.read_shift(1)];if(n==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=SP(e,1)?"TRUE":"FALSE",n!=12&&(e.l+=7);break;case 37:case 16:t[1]=cl[e[e.l]],e.l+=n==12?4:8;break;case 0:e.l+=8;break;case 1:t[1]=As(e);break;case 2:t[1]=kP(e,0,{biff:n>0&&n<8?2:n});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function OM(e,n,t){for(var r=e.read_shift(t.biff==12?4:2),i=[],a=0;a!=r;++a)i.push((t.biff==12?po:FP)(e));return i}function MM(e,n,t){var r=0,i=0;t.biff==12?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var a=0,o=[];a!=r&&(o[a]=[]);++a)for(var s=0;s!=i;++s)o[a][s]=PM(e,t.biff);return o}function LM(e,n,t){var r=e.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,a=e.read_shift(i);switch(t.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[r,0,a]}function BM(e,n,t){if(t.biff==5)return UM(e);var r=e.read_shift(1)>>>5&3,i=e.read_shift(2),a=e.read_shift(4);return[r,i,a]}function UM(e){var n=e.read_shift(1)>>>5&3,t=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[n,t,r]}function WM(e,n,t){var r=e.read_shift(1)>>>5&3;e.l+=t&&t.biff==2?3:4;var i=e.read_shift(t&&t.biff==2?1:2);return[r,i]}function zM(e,n,t){var r=e.read_shift(1)>>>5&3,i=e.read_shift(t&&t.biff==2?1:2);return[r,i]}function VM(e,n,t){var r=e.read_shift(1)>>>5&3;return e.l+=4,t.biff<8&&e.l--,t.biff==12&&(e.l+=2),[r]}function HM(e,n,t){var r=(e[e.l++]&96)>>5,i=e.read_shift(2),a=4;if(t)switch(t.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[r,i]}var $M=ci,jM=ci,GM=ci;function fl(e,n,t){return e.l+=2,[aM(e)]}function e1(e){return e.l+=6,[]}var XM=fl,KM=e1,qM=e1,YM=fl;function ZE(e){return e.l+=2,[NE(e),e.read_shift(2)&1]}var QM=fl,JM=ZE,ZM=e1,eL=fl,tL=fl,nL=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function rL(e){e.l+=2;var n=e.read_shift(2),t=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),a=e.read_shift(2),o=nL[t>>2&31];return{ixti:n,coltype:t&3,rt:o,idx:r,c:i,C:a}}function iL(e){return e.l+=2,[e.read_shift(4)]}function aL(e,n,t){return e.l+=5,e.l+=2,e.l+=t.biff==2?1:4,["PTGSHEET"]}function oL(e,n,t){return e.l+=t.biff==2?4:5,["PTGENDSHEET"]}function sL(e){var n=e.read_shift(1)>>>5&3,t=e.read_shift(2);return[n,t]}function uL(e){var n=e.read_shift(1)>>>5&3,t=e.read_shift(2);return[n,t]}function lL(e){return e.l+=4,[0,0]}var Zg={1:{n:"PtgExp",f:AM},2:{n:"PtgTbl",f:GM},3:{n:"PtgAdd",f:Ft},4:{n:"PtgSub",f:Ft},5:{n:"PtgMul",f:Ft},6:{n:"PtgDiv",f:Ft},7:{n:"PtgPower",f:Ft},8:{n:"PtgConcat",f:Ft},9:{n:"PtgLt",f:Ft},10:{n:"PtgLe",f:Ft},11:{n:"PtgEq",f:Ft},12:{n:"PtgGe",f:Ft},13:{n:"PtgGt",f:Ft},14:{n:"PtgNe",f:Ft},15:{n:"PtgIsect",f:Ft},16:{n:"PtgUnion",f:Ft},17:{n:"PtgRange",f:Ft},18:{n:"PtgUplus",f:Ft},19:{n:"PtgUminus",f:Ft},20:{n:"PtgPercent",f:Ft},21:{n:"PtgParen",f:Ft},22:{n:"PtgMissArg",f:Ft},23:{n:"PtgStr",f:DM},26:{n:"PtgSheet",f:aL},27:{n:"PtgEndSheet",f:oL},28:{n:"PtgErr",f:RM},29:{n:"PtgBool",f:IM},30:{n:"PtgInt",f:FM},31:{n:"PtgNum",f:NM},32:{n:"PtgArray",f:dM},33:{n:"PtgFunc",f:CM},34:{n:"PtgFuncVar",f:bM},35:{n:"PtgName",f:LM},36:{n:"PtgRef",f:_M},37:{n:"PtgArea",f:uM},38:{n:"PtgMemArea",f:WM},39:{n:"PtgMemErr",f:$M},40:{n:"PtgMemNoMem",f:jM},41:{n:"PtgMemFunc",f:zM},42:{n:"PtgRefErr",f:VM},43:{n:"PtgAreaErr",f:cM},44:{n:"PtgRefN",f:EM},45:{n:"PtgAreaN",f:hM},46:{n:"PtgMemAreaN",f:sL},47:{n:"PtgMemNoMemN",f:uL},57:{n:"PtgNameX",f:BM},58:{n:"PtgRef3d",f:SM},59:{n:"PtgArea3d",f:lM},60:{n:"PtgRefErr3d",f:HM},61:{n:"PtgAreaErr3d",f:fM},255:{}},cL={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},fL={1:{n:"PtgElfLel",f:ZE},2:{n:"PtgElfRw",f:eL},3:{n:"PtgElfCol",f:XM},6:{n:"PtgElfRwV",f:tL},7:{n:"PtgElfColV",f:YM},10:{n:"PtgElfRadical",f:QM},11:{n:"PtgElfRadicalS",f:ZM},13:{n:"PtgElfColS",f:KM},15:{n:"PtgElfColSV",f:qM},16:{n:"PtgElfRadicalLel",f:JM},25:{n:"PtgList",f:rL},29:{n:"PtgSxName",f:iL},255:{}},hL={0:{n:"PtgAttrNoop",f:lL},1:{n:"PtgAttrSemi",f:xM},2:{n:"PtgAttrIf",f:mM},4:{n:"PtgAttrChoose",f:pM},8:{n:"PtgAttrGoto",f:vM},16:{n:"PtgAttrSum",f:kM},32:{n:"PtgAttrBaxcel",f:Jg},33:{n:"PtgAttrBaxcel",f:Jg},64:{n:"PtgAttrSpace",f:yM},65:{n:"PtgAttrSpaceSemi",f:wM},128:{n:"PtgAttrIfError",f:gM},255:{}};function dL(e,n,t,r){if(r.biff<8)return ci(e,n);for(var i=e.l+n,a=[],o=0;o!==t.length;++o)switch(t[o][0]){case"PtgArray":t[o][1]=MM(e,0,r),a.push(t[o][1]);break;case"PtgMemArea":t[o][2]=OM(e,t[o][1],r),a.push(t[o][2]);break;case"PtgExp":r&&r.biff==12&&(t[o][1][1]=e.read_shift(4),a.push(t[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[o][0]}return n=i-e.l,n!==0&&a.push(ci(e,n)),a}function pL(e,n,t){for(var r=e.l+n,i,a,o=[];r!=e.l;)n=r-e.l,a=e[e.l],i=Zg[a]||Zg[cL[a]],(a===24||a===25)&&(i=(a===24?fL:hL)[e[e.l+1]]),!i||!i.f?ci(e,n):o.push([i.n,i.f(e,n,t)]);return o}function vL(e){for(var n=[],t=0;t<e.length;++t){for(var r=e[t],i=[],a=0;a<r.length;++a){var o=r[a];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}n.push(i.join(","))}return n.join(";")}var mL={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function gL(e,n){if(!e&&!(n&&n.biff<=5&&n.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function eS(e,n,t){if(!e)return"SH33TJSERR0";if(t.biff>8&&(!e.XTI||!e.XTI[n]))return e.SheetNames[n];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[n];if(t.biff<8)return n>1e4&&(n-=65536),n<0&&(n=-n),n==0?"":e.XTI[n-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(e[r[0]][0]){case 357:return i=r[1]==-1?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return t.SID!=null?e.SheetNames[t.SID]:"SH33TJSSAME"+e[r[0]][0];case 355:default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[r[0]][0][3]?(i=r[1]==-1?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function ex(e,n,t){var r=eS(e,n,t);return r=="#REF"?r:gL(r,t)}function ys(e,n,t,r,i){var a=i&&i.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},s=[],u,l,c,f=0,h=0,d,v="";if(!e[0]||!e[0][0])return"";for(var p=-1,g="",m=0,x=e[0].length;m<x;++m){var y=e[0][m];switch(y[0]){case"PtgUminus":s.push("-"+s.pop());break;case"PtgUplus":s.push("+"+s.pop());break;case"PtgPercent":s.push(s.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=s.pop(),l=s.pop(),p>=0){switch(e[0][p][1][0]){case 0:g=Tt(" ",e[0][p][1][1]);break;case 1:g=Tt("\r",e[0][p][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}l=l+g,p=-1}s.push(l+mL[y[0]]+u);break;case"PtgIsect":u=s.pop(),l=s.pop(),s.push(l+" "+u);break;case"PtgUnion":u=s.pop(),l=s.pop(),s.push(l+","+u);break;case"PtgRange":u=s.pop(),l=s.pop(),s.push(l+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":c=hu(y[1][1],o,i),s.push(du(c,a));break;case"PtgRefN":c=t?hu(y[1][1],t,i):y[1][1],s.push(du(c,a));break;case"PtgRef3d":f=y[1][1],c=hu(y[1][2],o,i),v=ex(r,f,i),s.push(v+"!"+du(c,a));break;case"PtgFunc":case"PtgFuncVar":var w=y[1][0],_=y[1][1];w||(w=0),w&=127;var S=w==0?[]:s.slice(-w);s.length-=w,_==="User"&&(_=S.shift()),s.push(_+"("+S.join(",")+")");break;case"PtgBool":s.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":s.push(y[1]);break;case"PtgNum":s.push(String(y[1]));break;case"PtgStr":s.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":s.push(y[1]);break;case"PtgAreaN":d=Bg(y[1][1],t?{s:t}:o,i),s.push(hd(d,i));break;case"PtgArea":d=Bg(y[1][1],o,i),s.push(hd(d,i));break;case"PtgArea3d":f=y[1][1],d=y[1][2],v=ex(r,f,i),s.push(v+"!"+hd(d,i));break;case"PtgAttrSum":s.push("SUM("+s.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=y[1][2];var E=(r.names||[])[h-1]||(r[0]||[])[h],b=E?E.Name:"SH33TJSNAME"+String(h);b&&b.slice(0,6)=="_xlfn."&&!i.xlfn&&(b=b.slice(6)),s.push(b);break;case"PtgNameX":var C=y[1][1];h=y[1][2];var T;if(i.biff<=5)C<0&&(C=-C),r[C]&&(T=r[C][h]);else{var F="";if(((r[C]||[])[0]||[])[0]==14849||(((r[C]||[])[0]||[])[0]==1025?r[C][h]&&r[C][h].itab>0&&(F=r.SheetNames[r[C][h].itab-1]+"!"):F=r.SheetNames[h-1]+"!"),r[C]&&r[C][h])F+=r[C][h].Name;else if(r[0]&&r[0][h])F+=r[0][h].Name;else{var I=(eS(r,C,i)||"").split(";;");I[h-1]?F=I[h-1]:F+="SH33TJSERRX"}s.push(F);break}T||(T={Name:"SH33TJSERRY"}),s.push(T.Name);break;case"PtgParen":var V="(",K=")";if(p>=0){switch(g="",e[0][p][1][0]){case 2:V=Tt(" ",e[0][p][1][1])+V;break;case 3:V=Tt("\r",e[0][p][1][1])+V;break;case 4:K=Tt(" ",e[0][p][1][1])+K;break;case 5:K=Tt("\r",e[0][p][1][1])+K;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}s.push(V+s.pop()+K);break;case"PtgRefErr":s.push("#REF!");break;case"PtgRefErr3d":s.push("#REF!");break;case"PtgExp":c={c:y[1][1],r:y[1][0]};var G={c:t.c,r:t.r};if(r.sharedf[at(c)]){var ie=r.sharedf[at(c)];s.push(ys(ie,o,G,r,i))}else{var re=!1;for(u=0;u!=r.arrayf.length;++u)if(l=r.arrayf[u],!(c.c<l[0].s.c||c.c>l[0].e.c)&&!(c.r<l[0].s.r||c.r>l[0].e.r)){s.push(ys(l[1],o,G,r,i)),re=!0;break}re||s.push(y[1])}break;case"PtgArray":s.push("{"+vL(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=m;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":s.push("");break;case"PtgAreaErr":s.push("#REF!");break;case"PtgAreaErr3d":s.push("#REF!");break;case"PtgList":s.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&p>=0&&H.indexOf(e[0][m][0])==-1){y=e[0][p];var X=!0;switch(y[1][0]){case 4:X=!1;case 0:g=Tt(" ",y[1][1]);break;case 5:X=!1;case 1:g=Tt("\r",y[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}s.push((X?g:"")+s.pop()+(X?"":g)),p=-1}}if(s.length>1&&i.WTF)throw new Error("bad formula stack");return s[0]}function xL(e){if(e==null){var n=ae(8);return n.write_shift(1,3),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,65535),n}else if(typeof e=="number")return eo(e);return eo(0)}function yL(e,n,t,r,i){var a=to(n,t,i),o=xL(e.v),s=ae(6),u=33;s.write_shift(2,u),s.write_shift(4,0);for(var l=ae(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];var f=un([a,o,s,l]);return f}function oh(e,n,t){var r=e.read_shift(4),i=pL(e,r,t),a=e.read_shift(4),o=a>0?dL(e,a,i,t):null;return[i,o]}var wL=oh,sh=oh,_L=oh,EL=oh,SL={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},tS={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},CL={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function bL(e){var n="of:="+e.replace(Jv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return n.replace(/;/g,"|").replace(/,/g,";")}function TL(e){return e.replace(/\./,"!")}var pu=typeof Map<"u";function t1(e,n,t){var r=0,i=e.length;if(t){if(pu?t.has(n):Object.prototype.hasOwnProperty.call(t,n)){for(var a=pu?t.get(n):t[n];r<a.length;++r)if(e[a[r]].t===n)return e.Count++,a[r]}}else for(;r<i;++r)if(e[r].t===n)return e.Count++,r;return e[i]={t:n},e.Count++,e.Unique++,t&&(pu?(t.has(n)||t.set(n,[]),t.get(n).push(i)):(Object.prototype.hasOwnProperty.call(t,n)||(t[n]=[]),t[n].push(i))),i}function uh(e,n){var t={min:e+1,max:e+1},r=-1;return n.MDW&&(Ti=n.MDW),n.width!=null?t.customWidth=1:n.wpx!=null?r=yf(n.wpx):n.wch!=null&&(r=n.wch),r>-1?(t.width=Bp(r),t.customWidth=1):n.width!=null&&(t.width=n.width),n.hidden&&(t.hidden=!0),n.level!=null&&(t.outlineLevel=t.level=n.level),t}function nS(e,n){if(e){var t=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=t[0]),e.right==null&&(e.right=t[1]),e.top==null&&(e.top=t[2]),e.bottom==null&&(e.bottom=t[3]),e.header==null&&(e.header=t[4]),e.footer==null&&(e.footer=t[5])}}function Ta(e,n,t){var r=t.revssf[n.z!=null?n.z:"General"],i=60,a=e.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){Q_(n.z,i),t.ssf[i]=n.z,t.revssf[n.z]=r=i;break}}for(i=0;i!=a;++i)if(e[i].numFmtId===r)return i;return e[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function kL(e,n,t){if(e&&e["!ref"]){var r=ht(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+e["!ref"])}}function AL(e){if(e.length===0)return"";for(var n='<mergeCells count="'+e.length+'">',t=0;t!=e.length;++t)n+='<mergeCell ref="'+Pt(e[t])+'"/>';return n+"</mergeCells>"}function RL(e,n,t,r,i){var a=!1,o={},s=null;if(r.bookType!=="xlsx"&&n.vbaraw){var u=n.SheetNames[t];try{n.Workbook&&(u=n.Workbook.Sheets[t].CodeName||u)}catch{}a=!0,o.codeName=Vu(rt(u))}if(e&&e["!outline"]){var l={summaryBelow:1,summaryRight:1};e["!outline"].above&&(l.summaryBelow=0),e["!outline"].left&&(l.summaryRight=0),s=(s||"")+ye("outlinePr",null,l)}!a&&!s||(i[i.length]=ye("sheetPr",s,o))}var FL=["objects","scenarios","selectLockedCells","selectUnlockedCells"],IL=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function NL(e){var n={sheet:1};return FL.forEach(function(t){e[t]!=null&&e[t]&&(n[t]="1")}),IL.forEach(function(t){e[t]!=null&&!e[t]&&(n[t]="0")}),e.password&&(n.password=UE(e.password).toString(16).toUpperCase()),ye("sheetProtection",null,n)}function DL(e){return nS(e),ye("pageMargins",null,e)}function PL(e,n){for(var t=["<cols>"],r,i=0;i!=n.length;++i)(r=n[i])&&(t[t.length]=ye("col",null,uh(i,r)));return t[t.length]="</cols>",t.join("")}function OL(e,n,t,r){var i=typeof e.ref=="string"?e.ref:Pt(e.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=hr(i);o.s.r==o.e.r&&(o.e.r=hr(n["!ref"]).e.r,i=Pt(o));for(var s=0;s<a.length;++s){var u=a[s];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return s==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),ye("autoFilter",null,{ref:i})}function ML(e,n,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),ye("sheetViews",ye("sheetView",null,i),{})}function LL(e,n,t,r){if(e.c&&t["!comments"].push([n,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var i="",a=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=cl[e.v];break;case"d":r&&r.cellDates?i=Dn(e.v,-1).toISOString():(e=Yn(e),e.t="n",i=""+(e.v=qn(Dn(e.v)))),typeof e.z>"u"&&(e.z=kt[14]);break;default:i=e.v;break}var s=ln("v",rt(i)),u={r:n},l=Ta(r.cellXfs,e,r);switch(l!==0&&(u.s=l),e.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){s=ln("v",""+t1(r.Strings,e.v,r.revStrings)),u.t="s";break}u.t="str";break}if(e.t!=a&&(e.t=a,e.v=o),typeof e.f=="string"&&e.f){var c=e.F&&e.F.slice(0,n.length)==n?{t:"array",ref:e.F}:null;s=ye("f",rt(e.f),c)+(e.v!=null?s:"")}return e.l&&t["!links"].push([n,e.l]),e.D&&(u.cm=1),ye("c",s,u)}function BL(e,n,t,r){var i=[],a=[],o=ht(e["!ref"]),s="",u,l="",c=[],f=0,h=0,d=e["!rows"],v=Array.isArray(e),p={r:l},g,m=-1;for(h=o.s.c;h<=o.e.c;++h)c[h]=Cn(h);for(f=o.s.r;f<=o.e.r;++f){for(a=[],l=fn(f),h=o.s.c;h<=o.e.c;++h){u=c[h]+l;var x=v?(e[f]||[])[h]:e[u];x!==void 0&&(s=LL(x,u,e,n))!=null&&a.push(s)}(a.length>0||d&&d[f])&&(p={r:l},d&&d[f]&&(g=d[f],g.hidden&&(p.hidden=1),m=-1,g.hpx?m=wf(g.hpx):g.hpt&&(m=g.hpt),m>-1&&(p.ht=m,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),i[i.length]=ye("row",a.join(""),p))}if(d)for(;f<d.length;++f)d&&d[f]&&(p={r:f+1},g=d[f],g.hidden&&(p.hidden=1),m=-1,g.hpx?m=wf(g.hpx):g.hpt&&(m=g.hpt),m>-1&&(p.ht=m,p.customHeight=1),g.level&&(p.outlineLevel=g.level),i[i.length]=ye("row","",p));return i.join("")}function rS(e,n,t,r){var i=[Ot,ye("worksheet",null,{xmlns:bs[0],"xmlns:r":Kt.r})],a=t.SheetNames[e],o=0,s="",u=t.Sheets[a];u==null&&(u={});var l=u["!ref"]||"A1",c=ht(l);if(c.e.c>16383||c.e.r>1048575){if(n.WTF)throw new Error("Range "+l+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575),l=Pt(c)}r||(r={}),u["!comments"]=[];var f=[];RL(u,t,e,n,i),i[i.length]=ye("dimension",null,{ref:l}),i[i.length]=ML(u,n,e,t),n.sheetFormat&&(i[i.length]=ye("sheetFormatPr",null,{defaultRowHeight:n.sheetFormat.defaultRowHeight||"16",baseColWidth:n.sheetFormat.baseColWidth||"10",outlineLevelRow:n.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(i[i.length]=PL(u,u["!cols"])),i[o=i.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(s=BL(u,n),s.length>0&&(i[i.length]=s)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),u["!protect"]&&(i[i.length]=NL(u["!protect"])),u["!autofilter"]!=null&&(i[i.length]=OL(u["!autofilter"],u,t,e)),u["!merges"]!=null&&u["!merges"].length>0&&(i[i.length]=AL(u["!merges"]));var h=-1,d,v=-1;return u["!links"].length>0&&(i[i.length]="<hyperlinks>",u["!links"].forEach(function(p){p[1].Target&&(d={ref:p[0]},p[1].Target.charAt(0)!="#"&&(v=nt(r,-1,rt(p[1].Target).replace(/#.*$/,""),Qe.HLINK),d["r:id"]="rId"+v),(h=p[1].Target.indexOf("#"))>-1&&(d.location=rt(p[1].Target.slice(h+1))),p[1].Tooltip&&(d.tooltip=rt(p[1].Tooltip)),i[i.length]=ye("hyperlink",null,d))}),i[i.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(i[i.length]=DL(u["!margins"])),(!n||n.ignoreEC||n.ignoreEC==null)&&(i[i.length]=ln("ignoredErrors",ye("ignoredError",null,{numberStoredAsText:1,sqref:l}))),f.length>0&&(v=nt(r,-1,"../drawings/drawing"+(e+1)+".xml",Qe.DRAW),i[i.length]=ye("drawing",null,{"r:id":"rId"+v}),u["!drawing"]=f),u["!comments"].length>0&&(v=nt(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Qe.VML),i[i.length]=ye("legacyDrawing",null,{"r:id":"rId"+v}),u["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function UL(e,n){var t={},r=e.l+n;t.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=r,a&7&&(t.level=a&7),a&16&&(t.hidden=!0),a&32&&(t.hpt=i/20),t}function WL(e,n,t){var r=ae(145),i=(t["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var a=320;i.hpx?a=wf(i.hpx)*20:i.hpt&&(a=i.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var s=0,u=r.l;r.l+=4;for(var l={r:e,c:0},c=0;c<16;++c)if(!(n.s.c>c+1<<10||n.e.c<c<<10)){for(var f=-1,h=-1,d=c<<10;d<c+1<<10;++d){l.c=d;var v=Array.isArray(t)?(t[l.r]||[])[l.c]:t[at(l)];v&&(f<0&&(f=d),h=d)}f<0||(++s,r.write_shift(4,f),r.write_shift(4,h))}var p=r.l;return r.l=u,r.write_shift(4,s),r.l=p,r.length>r.l?r.slice(0,r.l):r}function zL(e,n,t,r){var i=WL(r,t,n);(i.length>17||(n["!rows"]||[])[r])&&le(e,0,i)}var VL=po,HL=ks;function $L(){}function jL(e,n){var t={},r=e[e.l];return++e.l,t.above=!(r&64),t.left=!(r&128),e.l+=18,t.name=tP(e),t}function GL(e,n,t){t==null&&(t=ae(84+4*e.length));var r=192;n&&(n.above&&(r&=-65),n.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return mf({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),xE(e,t),t.slice(0,t.l)}function XL(e){var n=kr(e);return[n]}function KL(e,n,t){return t==null&&(t=ae(8)),co(n,t)}function qL(e){var n=fo(e);return[n]}function YL(e,n,t){return t==null&&(t=ae(4)),ho(n,t)}function QL(e){var n=kr(e),t=e.read_shift(1);return[n,t,"b"]}function JL(e,n,t){return t==null&&(t=ae(9)),co(n,t),t.write_shift(1,e.v?1:0),t}function ZL(e){var n=fo(e),t=e.read_shift(1);return[n,t,"b"]}function e6(e,n,t){return t==null&&(t=ae(5)),ho(n,t),t.write_shift(1,e.v?1:0),t}function t6(e){var n=kr(e),t=e.read_shift(1);return[n,t,"e"]}function n6(e,n,t){return t==null&&(t=ae(9)),co(n,t),t.write_shift(1,e.v),t}function r6(e){var n=fo(e),t=e.read_shift(1);return[n,t,"e"]}function i6(e,n,t){return t==null&&(t=ae(8)),ho(n,t),t.write_shift(1,e.v),t.write_shift(2,0),t.write_shift(1,0),t}function a6(e){var n=kr(e),t=e.read_shift(4);return[n,t,"s"]}function o6(e,n,t){return t==null&&(t=ae(12)),co(n,t),t.write_shift(4,n.v),t}function s6(e){var n=fo(e),t=e.read_shift(4);return[n,t,"s"]}function u6(e,n,t){return t==null&&(t=ae(8)),ho(n,t),t.write_shift(4,n.v),t}function l6(e){var n=kr(e),t=As(e);return[n,t,"n"]}function c6(e,n,t){return t==null&&(t=ae(16)),co(n,t),eo(e.v,t),t}function f6(e){var n=fo(e),t=As(e);return[n,t,"n"]}function h6(e,n,t){return t==null&&(t=ae(12)),ho(n,t),eo(e.v,t),t}function d6(e){var n=kr(e),t=yE(e);return[n,t,"n"]}function p6(e,n,t){return t==null&&(t=ae(12)),co(n,t),wE(e.v,t),t}function v6(e){var n=fo(e),t=yE(e);return[n,t,"n"]}function m6(e,n,t){return t==null&&(t=ae(8)),ho(n,t),wE(e.v,t),t}function g6(e){var n=kr(e),t=Xv(e);return[n,t,"is"]}function x6(e){var n=kr(e),t=bn(e);return[n,t,"str"]}function y6(e,n,t){return t==null&&(t=ae(12+4*e.v.length)),co(n,t),Yt(e.v,t),t.length>t.l?t.slice(0,t.l):t}function w6(e){var n=fo(e),t=bn(e);return[n,t,"str"]}function _6(e,n,t){return t==null&&(t=ae(8+4*e.v.length)),ho(n,t),Yt(e.v,t),t.length>t.l?t.slice(0,t.l):t}function E6(e,n,t){var r=e.l+n,i=kr(e);i.r=t["!row"];var a=e.read_shift(1),o=[i,a,"b"];if(t.cellFormula){e.l+=2;var s=sh(e,r-e.l,t);o[3]=ys(s,null,i,t.supbooks,t)}else e.l=r;return o}function S6(e,n,t){var r=e.l+n,i=kr(e);i.r=t["!row"];var a=e.read_shift(1),o=[i,a,"e"];if(t.cellFormula){e.l+=2;var s=sh(e,r-e.l,t);o[3]=ys(s,null,i,t.supbooks,t)}else e.l=r;return o}function C6(e,n,t){var r=e.l+n,i=kr(e);i.r=t["!row"];var a=As(e),o=[i,a,"n"];if(t.cellFormula){e.l+=2;var s=sh(e,r-e.l,t);o[3]=ys(s,null,i,t.supbooks,t)}else e.l=r;return o}function b6(e,n,t){var r=e.l+n,i=kr(e);i.r=t["!row"];var a=bn(e),o=[i,a,"str"];if(t.cellFormula){e.l+=2;var s=sh(e,r-e.l,t);o[3]=ys(s,null,i,t.supbooks,t)}else e.l=r;return o}var T6=po,k6=ks;function A6(e,n){return n==null&&(n=ae(4)),n.write_shift(4,e),n}function R6(e,n){var t=e.l+n,r=po(e),i=Kv(e),a=bn(e),o=bn(e),s=bn(e);e.l=t;var u={rfx:r,relId:i,loc:a,display:s};return o&&(u.Tooltip=o),u}function F6(e,n){var t=ae(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));ks({s:qt(e[0]),e:qt(e[0])},t),qv("rId"+n,t);var r=e[1].Target.indexOf("#"),i=r==-1?"":e[1].Target.slice(r+1);return Yt(i||"",t),Yt(e[1].Tooltip||"",t),Yt("",t),t.slice(0,t.l)}function I6(){}function N6(e,n,t){var r=e.l+n,i=_E(e),a=e.read_shift(1),o=[i];if(o[2]=a,t.cellFormula){var s=wL(e,r-e.l,t);o[1]=s}else e.l=r;return o}function D6(e,n,t){var r=e.l+n,i=po(e),a=[i];if(t.cellFormula){var o=EL(e,r-e.l,t);a[1]=o,e.l=r}else e.l=r;return a}function P6(e,n,t){t==null&&(t=ae(18));var r=uh(e,n);t.write_shift(-4,e),t.write_shift(-4,e),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return n.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),n.level&&(i|=n.level<<8),t.write_shift(2,i),t}var iS=["left","right","top","bottom","header","footer"];function O6(e){var n={};return iS.forEach(function(t){n[t]=As(e)}),n}function M6(e,n){return n==null&&(n=ae(6*8)),nS(e),iS.forEach(function(t){eo(e[t],n)}),n}function L6(e){var n=e.read_shift(2);return e.l+=28,{RTL:n&32}}function B6(e,n,t){t==null&&(t=ae(30));var r=924;return(((n||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function U6(e){var n=ae(24);return n.write_shift(4,4),n.write_shift(4,1),ks(e,n),n}function W6(e,n){return n==null&&(n=ae(16*4+2)),n.write_shift(2,e.password?UE(e.password):0),n.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?n.write_shift(4,e[t[0]]!=null&&!e[t[0]]?1:0):n.write_shift(4,e[t[0]]!=null&&e[t[0]]?0:1)}),n}function z6(){}function V6(){}function H6(e,n,t,r,i,a,o){if(n.v===void 0)return!1;var s="";switch(n.t){case"b":s=n.v?"1":"0";break;case"d":n=Yn(n),n.z=n.z||kt[14],n.v=qn(Dn(n.v)),n.t="n";break;case"n":case"e":s=""+n.v;break;default:s=n.v;break}var u={r:t,c:r};switch(u.s=Ta(i.cellXfs,n,i),n.l&&a["!links"].push([at(u),n.l]),n.c&&a["!comments"].push([at(u),n.c]),n.t){case"s":case"str":return i.bookSST?(s=t1(i.Strings,n.v,i.revStrings),u.t="s",u.v=s,o?le(e,18,u6(n,u)):le(e,7,o6(n,u))):(u.t="str",o?le(e,17,_6(n,u)):le(e,6,y6(n,u))),!0;case"n":return n.v==(n.v|0)&&n.v>-1e3&&n.v<1e3?o?le(e,13,m6(n,u)):le(e,2,p6(n,u)):o?le(e,16,h6(n,u)):le(e,5,c6(n,u)),!0;case"b":return u.t="b",o?le(e,15,e6(n,u)):le(e,4,JL(n,u)),!0;case"e":return u.t="e",o?le(e,14,i6(n,u)):le(e,3,n6(n,u)),!0}return o?le(e,12,YL(n,u)):le(e,1,KL(n,u)),!0}function $6(e,n,t,r){var i=ht(n["!ref"]||"A1"),a,o="",s=[];le(e,145);var u=Array.isArray(n),l=i.e.r;n["!rows"]&&(l=Math.max(i.e.r,n["!rows"].length-1));for(var c=i.s.r;c<=l;++c){o=fn(c),zL(e,n,i,c);var f=!1;if(c<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){c===i.s.r&&(s[h]=Cn(h)),a=s[h]+o;var d=u?(n[c]||[])[h]:n[a];if(!d){f=!1;continue}f=H6(e,d,c,h,r,n,f)}}le(e,146)}function j6(e,n){!n||!n["!merges"]||(le(e,177,A6(n["!merges"].length)),n["!merges"].forEach(function(t){le(e,176,k6(t))}),le(e,178))}function G6(e,n){!n||!n["!cols"]||(le(e,390),n["!cols"].forEach(function(t,r){t&&le(e,60,P6(r,t))}),le(e,391))}function X6(e,n){!n||!n["!ref"]||(le(e,648),le(e,649,U6(ht(n["!ref"]))),le(e,650))}function K6(e,n,t){n["!links"].forEach(function(r){if(r[1].Target){var i=nt(t,-1,r[1].Target.replace(/#.*$/,""),Qe.HLINK);le(e,494,F6(r,i))}}),delete n["!links"]}function q6(e,n,t,r){if(n["!comments"].length>0){var i=nt(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Qe.VML);le(e,551,qv("rId"+i)),n["!legacy"]=i}}function Y6(e,n,t,r){if(n["!autofilter"]){var i=n["!autofilter"],a=typeof i.ref=="string"?i.ref:Pt(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var o=t.Workbook.Names,s=hr(a);s.s.r==s.e.r&&(s.e.r=hr(n["!ref"]).e.r,a=Pt(s));for(var u=0;u<o.length;++u){var l=o[u];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+a;break}}u==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+a}),le(e,161,ks(ht(a))),le(e,162)}}function Q6(e,n,t){le(e,133),le(e,137,B6(n,t)),le(e,138),le(e,134)}function J6(e,n){n["!protect"]&&le(e,535,W6(n["!protect"]))}function Z6(e,n,t,r){var i=Gn(),a=t.SheetNames[e],o=t.Sheets[a]||{},s=a;try{t&&t.Workbook&&(s=t.Workbook.Sheets[e].CodeName||s)}catch{}var u=ht(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(n.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],le(i,129),(t.vbaraw||o["!outline"])&&le(i,147,GL(s,o["!outline"])),le(i,148,HL(u)),Q6(i,o,t.Workbook),G6(i,o),$6(i,o,e,n),J6(i,o),Y6(i,o,t,e),j6(i,o),K6(i,o,r),o["!margins"]&&le(i,476,M6(o["!margins"])),(!n||n.ignoreEC||n.ignoreEC==null)&&X6(i,o),q6(i,o,e,r),le(i,130),i.end()}function eB(e,n){e.l+=10;var t=bn(e);return{name:t}}var tB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function nB(e){return!e.Workbook||!e.Workbook.WBProps?"false":DD(e.Workbook.WBProps.date1904)?"true":"false"}var rB="][*?/\\".split("");function aS(e,n){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return rB.forEach(function(r){if(e.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function iB(e,n,t){e.forEach(function(r,i){aS(r);for(var a=0;a<i;++a)if(r==e[a])throw new Error("Duplicate Sheet Name: "+r);if(t){var o=n&&n[i]&&n[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function aB(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var n=e.Workbook&&e.Workbook.Sheets||[];iB(e.SheetNames,n,!!e.vbaraw);for(var t=0;t<e.SheetNames.length;++t)kL(e.Sheets[e.SheetNames[t]],e.SheetNames[t],t)}function oS(e){var n=[Ot];n[n.length]=ye("workbook",null,{xmlns:bs[0],"xmlns:r":Kt.r});var t=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(tB.forEach(function(s){e.Workbook.WBProps[s[0]]!=null&&e.Workbook.WBProps[s[0]]!=s[1]&&(r[s[0]]=e.Workbook.WBProps[s[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),n[n.length]=ye("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(n[n.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!i[a]||!i[a].Hidden);++a);a==e.SheetNames.length&&(a=0),n[n.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',n[n.length]="</bookViews>"}for(n[n.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var o={name:rt(e.SheetNames[a].slice(0,31))};if(o.sheetId=""+(a+1),o["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}n[n.length]=ye("sheet",null,o)}return n[n.length]="</sheets>",t&&(n[n.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(s){var u={name:s.Name};s.Comment&&(u.comment=s.Comment),s.Sheet!=null&&(u.localSheetId=""+s.Sheet),s.Hidden&&(u.hidden="1"),s.Ref&&(n[n.length]=ye("definedName",rt(s.Ref),u))}),n[n.length]="</definedNames>"),n.length>2&&(n[n.length]="</workbook>",n[1]=n[1].replace("/>",">")),n.join("")}function oB(e,n){var t={};return t.Hidden=e.read_shift(4),t.iTabID=e.read_shift(4),t.strRelID=Lp(e),t.name=bn(e),t}function sB(e,n){return n||(n=ae(127)),n.write_shift(4,e.Hidden),n.write_shift(4,e.iTabID),qv(e.strRelID,n),Yt(e.name.slice(0,31),n),n.length>n.l?n.slice(0,n.l):n}function uB(e,n){var t={},r=e.read_shift(4);t.defaultThemeVersion=e.read_shift(4);var i=n>8?bn(e):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function lB(e,n){n||(n=ae(72));var t=0;return e&&e.filterPrivacy&&(t|=8),n.write_shift(4,t),n.write_shift(4,0),xE(e&&e.CodeName||"ThisWorkbook",n),n.slice(0,n.l)}function cB(e,n,t){var r=e.l+n;e.l+=4,e.l+=1;var i=e.read_shift(4),a=nP(e),o=_L(e,0,t),s=Kv(e);e.l=r;var u={Name:a,Ptg:o};return i<268435455&&(u.Sheet=i),s&&(u.Comment=s),u}function fB(e,n){le(e,143);for(var t=0;t!=n.SheetNames.length;++t){var r=n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t]&&n.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:n.SheetNames[t]};le(e,156,sB(i))}le(e,144)}function hB(e,n){n||(n=ae(127));for(var t=0;t!=4;++t)n.write_shift(4,0);return Yt("SheetJS",n),Yt(lf.version,n),Yt(lf.version,n),Yt("7262",n),n.length>n.l?n.slice(0,n.l):n}function dB(e,n){n||(n=ae(29)),n.write_shift(-4,0),n.write_shift(-4,460),n.write_shift(4,28800),n.write_shift(4,17600),n.write_shift(4,500),n.write_shift(4,e),n.write_shift(4,e);var t=120;return n.write_shift(1,t),n.length>n.l?n.slice(0,n.l):n}function pB(e,n){if(!(!n.Workbook||!n.Workbook.Sheets)){for(var t=n.Workbook.Sheets,r=0,i=-1,a=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&a==-1&&(a=r);a>i||(le(e,135),le(e,158,dB(i)),le(e,136))}}function vB(e,n){var t=Gn();return le(t,131),le(t,128,hB()),le(t,153,lB(e.Workbook&&e.Workbook.WBProps||null)),pB(t,e),fB(t,e),le(t,132),t.end()}function mB(e,n,t){return(n.slice(-4)===".bin"?vB:oS)(e)}function gB(e,n,t,r,i){return(n.slice(-4)===".bin"?Z6:rS)(e,t,r,i)}function xB(e,n,t){return(n.slice(-4)===".bin"?MO:VE)(e,t)}function yB(e,n,t){return(n.slice(-4)===".bin"?lO:BE)(e,t)}function wB(e,n,t){return(n.slice(-4)===".bin"?JO:XE)(e)}function _B(e){return(e.slice(-4)===".bin"?$O:jE)()}function EB(e,n){var t=[];return e.Props&&t.push(xP(e.Props,n)),e.Custprops&&t.push(yP(e.Props,e.Custprops)),t.join("")}function SB(){return""}function CB(e,n){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return n.cellXfs.forEach(function(r,i){var a=[];a.push(ye("NumberFormat",null,{"ss:Format":rt(kt[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};t.push(ye("Style",a.join(""),o))}),ye("Styles",t.join(""))}function sS(e){return ye("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Zv(e.Ref,{r:0,c:0})})}function bB(e){if(!((e||{}).Workbook||{}).Names)return"";for(var n=e.Workbook.Names,t=[],r=0;r<n.length;++r){var i=n[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(sS(i)))}return ye("Names",t.join(""))}function TB(e,n,t,r){if(!e||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,a=[],o=0;o<i.length;++o){var s=i[o];s.Sheet==t&&(s.Name.match(/^_xlfn\./)||a.push(sS(s)))}return a.join("")}function kB(e,n,t,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(ye("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(ye("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(ye("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(ye("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<t&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(ln("ProtectContents","True")),e["!protect"].objects&&i.push(ln("ProtectObjects","True")),e["!protect"].scenarios&&i.push(ln("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?i.push(ln("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&i.push(ln("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":ye("WorksheetOptions",i.join(""),{xmlns:rr.x})}function AB(e){return e.map(function(n){var t=ND(n.t||""),r=ye("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return ye("Comment",r,{"ss:Author":n.a})}).join("")}function RB(e,n,t,r,i,a,o){if(!e||e.v==null&&e.f==null)return"";var s={};if(e.f&&(s["ss:Formula"]="="+rt(Zv(e.f,o))),e.F&&e.F.slice(0,n.length)==n){var u=qt(e.F.slice(n.length+1));s["ss:ArrayRange"]="RC:R"+(u.r==o.r?"":"["+(u.r-o.r)+"]")+"C"+(u.c==o.c?"":"["+(u.c-o.c)+"]")}if(e.l&&e.l.Target&&(s["ss:HRef"]=rt(e.l.Target),e.l.Tooltip&&(s["x:HRefScreenTip"]=rt(e.l.Tooltip))),t["!merges"])for(var l=t["!merges"],c=0;c!=l.length;++c)l[c].s.c!=o.c||l[c].s.r!=o.r||(l[c].e.c>l[c].s.c&&(s["ss:MergeAcross"]=l[c].e.c-l[c].s.c),l[c].e.r>l[c].s.r&&(s["ss:MergeDown"]=l[c].e.r-l[c].s.r));var f="",h="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=cl[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||kt[14]);break;case"s":f="String",h=ID(e.v||"");break}var d=Ta(r.cellXfs,e,r);s["ss:StyleID"]="s"+(21+d),s["ss:Index"]=o.c+1;var v=e.v!=null?h:"",p=e.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(e.c||[]).length>0&&(p+=AB(e.c)),ye("Cell",p,s)}function FB(e,n){var t='<Row ss:Index="'+(e+1)+'"';return n&&(n.hpt&&!n.hpx&&(n.hpx=zE(n.hpt)),n.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+n.hpx+'"'),n.hidden&&(t+=' ss:Hidden="1"')),t+">"}function IB(e,n,t,r){if(!e["!ref"])return"";var i=ht(e["!ref"]),a=e["!merges"]||[],o=0,s=[];e["!cols"]&&e["!cols"].forEach(function(g,m){Qv(g);var x=!!g.width,y=uh(m,g),w={"ss:Index":m+1};x&&(w["ss:Width"]=xf(y.width)),g.hidden&&(w["ss:Hidden"]="1"),s.push(ye("Column",null,w))});for(var u=Array.isArray(e),l=i.s.r;l<=i.e.r;++l){for(var c=[FB(l,(e["!rows"]||[])[l])],f=i.s.c;f<=i.e.c;++f){var h=!1;for(o=0;o!=a.length;++o)if(!(a[o].s.c>f)&&!(a[o].s.r>l)&&!(a[o].e.c<f)&&!(a[o].e.r<l)){(a[o].s.c!=f||a[o].s.r!=l)&&(h=!0);break}if(!h){var d={r:l,c:f},v=at(d),p=u?(e[l]||[])[f]:e[v];c.push(RB(p,v,e,n,t,r,d))}}c.push("</Row>"),c.length>2&&s.push(c.join(""))}return s.join("")}function NB(e,n,t){var r=[],i=t.SheetNames[e],a=t.Sheets[i],o=a?TB(a,n,e,t):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=a?IB(a,n,e,t):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(kB(a,n,e,t)),r.join("")}function DB(e,n){n||(n={}),e.SSF||(e.SSF=Yn(kt)),e.SSF&&(rh(),nh(e.SSF),n.revssf=ih(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF,n.cellXfs=[],Ta(n.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(EB(e,n)),t.push(SB()),t.push(""),t.push("");for(var r=0;r<e.SheetNames.length;++r)t.push(ye("Worksheet",NB(r,n,e),{"ss:Name":rt(e.SheetNames[r])}));return t[2]=CB(e,n),t[3]=bB(e),Ot+ye("Workbook",t.join(""),{xmlns:rr.ss,"xmlns:o":rr.o,"xmlns:x":rr.x,"xmlns:ss":rr.ss,"xmlns:dt":rr.dt,"xmlns:html":rr.html})}var vd={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function PB(e,n){var t=[],r=[],i=[],a=0,o,s=kg(Wg,"n"),u=kg(zg,"n");if(e.Props)for(o=dn(e.Props),a=0;a<o.length;++a)(Object.prototype.hasOwnProperty.call(s,o[a])?t:Object.prototype.hasOwnProperty.call(u,o[a])?r:i).push([o[a],e.Props[o[a]]]);if(e.Custprops)for(o=dn(e.Custprops),a=0;a<o.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},o[a])||(Object.prototype.hasOwnProperty.call(s,o[a])?t:Object.prototype.hasOwnProperty.call(u,o[a])?r:i).push([o[a],e.Custprops[o[a]]]);var l=[];for(a=0;a<i.length;++a)IE.indexOf(i[a][0])>-1||AE.indexOf(i[a][0])>-1||i[a][1]!=null&&l.push(i[a]);r.length&&ot.utils.cfb_add(n,"/SummaryInformation",Gg(r,vd.SI,u,zg)),(t.length||l.length)&&ot.utils.cfb_add(n,"/DocumentSummaryInformation",Gg(t,vd.DSI,s,Wg,l.length?l:null,vd.UDI))}function OB(e,n){var t=n||{},r=ot.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return ot.utils.cfb_add(r,i,uS(e,t)),t.biff==8&&(e.Props||e.Custprops)&&PB(e,r),t.biff==8&&e.vbaraw&&ZO(r,ot.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),r}var MB={0:{f:UL},1:{f:XL},2:{f:d6},3:{f:t6},4:{f:QL},5:{f:l6},6:{f:x6},7:{f:a6},8:{f:b6},9:{f:C6},10:{f:E6},11:{f:S6},12:{f:qL},13:{f:v6},14:{f:r6},15:{f:ZL},16:{f:f6},17:{f:w6},18:{f:s6},19:{f:Xv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:cB},40:{},42:{},43:{f:xO},44:{f:mO},45:{f:_O},46:{f:SO},47:{f:EO},48:{},49:{f:qD},50:{},51:{f:UO},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:YP},62:{f:g6},63:{f:jO},64:{f:z6},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ci,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:L6},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:jL},148:{f:VL,p:16},151:{f:I6},152:{},153:{f:uB},154:{},155:{},156:{f:oB},157:{},158:{},159:{T:1,f:oO},160:{T:-1},161:{T:1,f:po},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:T6},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:LO},336:{T:-1},337:{f:VO,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Lp},357:{},358:{},359:{},360:{T:1},361:{},362:{f:$P},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:N6},427:{f:D6},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:O6},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:$L},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:R6},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Lp},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:YO},633:{T:1},634:{T:-1},635:{T:1,f:KO},636:{T:-1},637:{f:ZD},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:eB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:V6},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function we(e,n,t,r){var i=n;if(!isNaN(i)){var a=r||(t||[]).length||0,o=e.next(4);o.write_shift(2,i),o.write_shift(2,a),a>0&&$v(t)&&e.push(t)}}function LB(e,n,t,r){var i=(t||[]).length||0;if(i<=8224)return we(e,n,t,i);var a=n;if(!isNaN(a)){for(var o=t.parts||[],s=0,u=0,l=0;l+(o[s]||8224)<=8224;)l+=o[s]||8224,s++;var c=e.next(4);for(c.write_shift(2,a),c.write_shift(2,l),e.push(t.slice(u,u+l)),u+=l;u<i;){for(c=e.next(4),c.write_shift(2,60),l=0;l+(o[s]||8224)<=8224;)l+=o[s]||8224,s++;c.write_shift(2,l),e.push(t.slice(u,u+l)),u+=l}}}function hl(e,n,t){return e||(e=ae(7)),e.write_shift(2,n),e.write_shift(2,t),e.write_shift(2,0),e.write_shift(1,0),e}function BB(e,n,t,r){var i=ae(9);return hl(i,e,n),DE(t,r||"b",i),i}function UB(e,n,t){var r=ae(8+2*t.length);return hl(r,e,n),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function WB(e,n,t,r){if(n.v!=null)switch(n.t){case"d":case"n":var i=n.t=="d"?qn(Dn(n.v)):n.v;i==(i|0)&&i>=0&&i<65536?we(e,2,eO(t,r,i)):we(e,3,ZP(t,r,i));return;case"b":case"e":we(e,5,BB(t,r,n.v,n.t));return;case"s":case"str":we(e,4,UB(t,r,(n.v||"").slice(0,255)));return}we(e,1,hl(null,t,r))}function zB(e,n,t,r){var i=Array.isArray(n),a=ht(n["!ref"]||"A1"),o,s="",u=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(n["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),o=Pt(a)}for(var l=a.s.r;l<=a.e.r;++l){s=fn(l);for(var c=a.s.c;c<=a.e.c;++c){l===a.s.r&&(u[c]=Cn(c)),o=u[c]+s;var f=i?(n[l]||[])[c]:n[o];f&&WB(e,f,l,c)}}}function VB(e,n){for(var t=n||{},r=Gn(),i=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==t.sheet&&(i=a);if(i==0&&t.sheet&&e.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return we(r,t.biff==4?1033:t.biff==3?521:9,Yv(e,16,t)),zB(r,e.Sheets[e.SheetNames[i]],i,t),we(r,10),r.end()}function HB(e,n,t){we(e,49,MP({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},t))}function $B(e,n,t){n&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)n[i]!=null&&we(e,1054,UP(i,n[i],t))})}function jB(e,n){var t=ae(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),we(e,2151,t),t=ae(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),ME(ht(n["!ref"]||"A1"),t),t.write_shift(4,4),we(e,2152,t)}function GB(e,n){for(var t=0;t<16;++t)we(e,224,Kg({numFmtId:0,style:!0},0,n));n.cellXfs.forEach(function(r){we(e,224,Kg(r,0,n))})}function XB(e,n){for(var t=0;t<n["!links"].length;++t){var r=n["!links"][t];we(e,440,XP(r)),r[1].Tooltip&&we(e,2048,KP(r))}delete n["!links"]}function KB(e,n){if(n){var t=0;n.forEach(function(r,i){++t<=256&&r&&we(e,125,QP(uh(i,r),i))})}}function qB(e,n,t,r,i){var a=16+Ta(i.cellXfs,n,i);if(n.v==null&&!n.bf){we(e,513,to(t,r,a));return}if(n.bf)we(e,6,yL(n,t,r,i,a));else switch(n.t){case"d":case"n":var o=n.t=="d"?qn(Dn(n.v)):n.v;we(e,515,HP(t,r,o,a));break;case"b":case"e":we(e,517,VP(t,r,n.v,a,i,n.t));break;case"s":case"str":if(i.bookSST){var s=t1(i.Strings,n.v,i.revStrings);we(e,253,LP(t,r,s,a))}else we(e,516,BP(t,r,(n.v||"").slice(0,255),a,i));break;default:we(e,513,to(t,r,a))}}function YB(e,n,t){var r=Gn(),i=t.SheetNames[e],a=t.Sheets[i]||{},o=(t||{}).Workbook||{},s=(o.Sheets||[])[e]||{},u=Array.isArray(a),l=n.biff==8,c,f="",h=[],d=ht(a["!ref"]||"A1"),v=l?65536:16384;if(d.e.c>255||d.e.r>=v){if(n.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");d.e.c=Math.min(d.e.c,255),d.e.r=Math.min(d.e.c,v-1)}we(r,2057,Yv(t,16,n)),we(r,13,mr(1)),we(r,12,mr(100)),we(r,15,Fn(!0)),we(r,17,Fn(!1)),we(r,16,eo(.001)),we(r,95,Fn(!0)),we(r,42,Fn(!1)),we(r,43,Fn(!1)),we(r,130,mr(1)),we(r,128,zP()),we(r,131,Fn(!1)),we(r,132,Fn(!1)),l&&KB(r,a["!cols"]),we(r,512,WP(d,n)),l&&(a["!links"]=[]);for(var p=d.s.r;p<=d.e.r;++p){f=fn(p);for(var g=d.s.c;g<=d.e.c;++g){p===d.s.r&&(h[g]=Cn(g)),c=h[g]+f;var m=u?(a[p]||[])[g]:a[c];m&&(qB(r,m,p,g,n),l&&m.l&&a["!links"].push([c,m.l]))}}var x=s.CodeName||s.name||i;return l&&we(r,574,OP((o.Views||[])[0])),l&&(a["!merges"]||[]).length&&we(r,229,GP(a["!merges"])),l&&XB(r,a),we(r,442,OE(x)),l&&jB(r,a),we(r,10),r.end()}function QB(e,n,t){var r=Gn(),i=(e||{}).Workbook||{},a=i.Sheets||[],o=i.WBProps||{},s=t.biff==8,u=t.biff==5;if(we(r,2057,Yv(e,5,t)),t.bookType=="xla"&&we(r,135),we(r,225,s?mr(1200):null),we(r,193,EP(2)),u&&we(r,191),u&&we(r,192),we(r,226),we(r,92,IP("SheetJS",t)),we(r,66,mr(s?1200:1252)),s&&we(r,353,mr(0)),s&&we(r,448),we(r,317,JP(e.SheetNames.length)),s&&e.vbaraw&&we(r,211),s&&e.vbaraw){var l=o.CodeName||"ThisWorkbook";we(r,442,OE(l))}we(r,156,mr(17)),we(r,25,Fn(!1)),we(r,18,Fn(!1)),we(r,19,mr(0)),s&&we(r,431,Fn(!1)),s&&we(r,444,mr(0)),we(r,61,PP()),we(r,64,Fn(!1)),we(r,141,mr(0)),we(r,34,Fn(nB(e)=="true")),we(r,14,Fn(!0)),s&&we(r,439,Fn(!1)),we(r,218,mr(0)),HB(r,e,t),$B(r,e.SSF,t),GB(r,t),s&&we(r,352,Fn(!1));var c=r.end(),f=Gn();s&&we(f,140,qP()),s&&t.Strings&&LB(f,252,DP(t.Strings)),we(f,10);var h=f.end(),d=Gn(),v=0,p=0;for(p=0;p<e.SheetNames.length;++p)v+=(s?12:11)+(s?2:1)*e.SheetNames[p].length;var g=c.length+v+h.length;for(p=0;p<e.SheetNames.length;++p){var m=a[p]||{};we(d,133,NP({pos:g,hs:m.Hidden||0,dt:0,name:e.SheetNames[p]},t)),g+=n[p].length}var x=d.end();if(v!=x.length)throw new Error("BS8 "+v+" != "+x.length);var y=[];return c.length&&y.push(c),x.length&&y.push(x),h.length&&y.push(h),un(y)}function JB(e,n){var t=n||{},r=[];e&&!e.SSF&&(e.SSF=Yn(kt)),e&&e.SSF&&(rh(),nh(e.SSF),t.revssf=ih(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,n1(t),t.cellXfs=[],Ta(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=YB(i,t,e);return r.unshift(QB(e,r,t)),un(r)}function uS(e,n){for(var t=0;t<=e.SheetNames.length;++t){var r=e.Sheets[e.SheetNames[t]];if(!(!r||!r["!ref"])){var i=hr(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var a=n||{};switch(a.biff||2){case 8:case 5:return JB(e,n);case 4:case 3:case 2:return VB(e,n)}throw new Error("invalid type "+a.bookType+" for BIFF")}function ZB(e,n,t,r){for(var i=e["!merges"]||[],a=[],o=n.s.c;o<=n.e.c;++o){for(var s=0,u=0,l=0;l<i.length;++l)if(!(i[l].s.r>t||i[l].s.c>o)&&!(i[l].e.r<t||i[l].e.c<o)){if(i[l].s.r<t||i[l].s.c<o){s=-1;break}s=i[l].e.r-i[l].s.r+1,u=i[l].e.c-i[l].s.c+1;break}if(!(s<0)){var c=at({r:t,c:o}),f=r.dense?(e[t]||[])[o]:e[c],h=f&&f.v!=null&&(f.h||FD(f.w||(Ni(f),f.w)||""))||"",d={};s>1&&(d.rowspan=s),u>1&&(d.colspan=u),r.editable?h='<span contenteditable="true">'+h+"</span>":f&&(d["data-t"]=f&&f.t||"z",f.v!=null&&(d["data-v"]=f.v),f.z!=null&&(d["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),d.id=(r.id||"sjs")+"-"+c,a.push(ye("td",h,d))}}var v="<tr>";return v+a.join("")+"</tr>"}var e8='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',t8="</body></html>";function n8(e,n,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function lS(e,n){var t=n||{},r=t.header!=null?t.header:e8,i=t.footer!=null?t.footer:t8,a=[r],o=hr(e["!ref"]);t.dense=Array.isArray(e),a.push(n8(e,o,t));for(var s=o.s.r;s<=o.e.r;++s)a.push(ZB(e,o,s,t));return a.push("</table>"+i),a.join("")}function cS(e,n,t){var r=t||{},i=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?qt(r.origin):r.origin;i=o.r,a=o.c}var s=n.getElementsByTagName("tr"),u=Math.min(r.sheetRows||1e7,s.length),l={s:{r:0,c:0},e:{r:i,c:a}};if(e["!ref"]){var c=hr(e["!ref"]);l.s.r=Math.min(l.s.r,c.s.r),l.s.c=Math.min(l.s.c,c.s.c),l.e.r=Math.max(l.e.r,c.e.r),l.e.c=Math.max(l.e.c,c.e.c),i==-1&&(l.e.r=i=c.e.r+1)}var f=[],h=0,d=e["!rows"]||(e["!rows"]=[]),v=0,p=0,g=0,m=0,x=0,y=0;for(e["!cols"]||(e["!cols"]=[]);v<s.length&&p<u;++v){var w=s[v];if(tx(w)){if(r.display)continue;d[p]={hidden:!0}}var _=w.children;for(g=m=0;g<_.length;++g){var S=_[g];if(!(r.display&&tx(S))){var E=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):PD(S.innerHTML),b=S.getAttribute("data-z")||S.getAttribute("z");for(h=0;h<f.length;++h){var C=f[h];C.s.c==m+a&&C.s.r<p+i&&p+i<=C.e.r&&(m=C.e.c+1-a,h=-1)}y=+S.getAttribute("colspan")||1,((x=+S.getAttribute("rowspan")||1)>1||y>1)&&f.push({s:{r:p+i,c:m+a},e:{r:p+i+(x||1)-1,c:m+a+(y||1)-1}});var T={t:"s",v:E},F=S.getAttribute("data-t")||S.getAttribute("t")||"";E!=null&&(E.length==0?T.t=F||"z":r.raw||E.trim().length==0||F=="s"||(E==="TRUE"?T={t:"b",v:!0}:E==="FALSE"?T={t:"b",v:!1}:isNaN(bi(E))?isNaN(zu(E).getDate())||(T={t:"d",v:Dn(E)},r.cellDates||(T={t:"n",v:qn(T.v)}),T.z=r.dateNF||kt[14]):T={t:"n",v:bi(E)})),T.z===void 0&&b!=null&&(T.z=b);var I="",V=S.getElementsByTagName("A");if(V&&V.length)for(var K=0;K<V.length&&!(V[K].hasAttribute("href")&&(I=V[K].getAttribute("href"),I.charAt(0)!="#"));++K);I&&I.charAt(0)!="#"&&(T.l={Target:I}),r.dense?(e[p+i]||(e[p+i]=[]),e[p+i][m+a]=T):e[at({c:m+a,r:p+i})]=T,l.e.c<m+a&&(l.e.c=m+a),m+=y}}++p}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),l.e.r=Math.max(l.e.r,p-1+i),e["!ref"]=Pt(l),p>=u&&(e["!fullref"]=Pt((l.e.r=s.length-v+p-1+i,l))),e}function fS(e,n){var t=n||{},r=t.dense?[]:{};return cS(r,e,n)}function r8(e,n){return lo(fS(e,n),n)}function tx(e){var n="",t=i8(e);return t&&(n=t(e).getPropertyValue("display")),n||(n=e.style&&e.style.display),n==="none"}function i8(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var a8=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),n="<office:document-styles "+Hu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ot+n}}(),nx=function(){var e=function(a){return rt(a).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},n=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(a,o,s){var u=[];u.push('      <table:table table:name="'+rt(o.SheetNames[s])+`" table:style-name="ta1">
`);var l=0,c=0,f=hr(a["!ref"]||"A1"),h=a["!merges"]||[],d=0,v=Array.isArray(a);if(a["!cols"])for(c=0;c<=f.e.c;++c)u.push("        <table:table-column"+(a["!cols"][c]?' table:style-name="co'+a["!cols"][c].ods+'"':"")+`></table:table-column>
`);var p="",g=a["!rows"]||[];for(l=0;l<f.s.r;++l)p=g[l]?' table:style-name="ro'+g[l].ods+'"':"",u.push("        <table:table-row"+p+`></table:table-row>
`);for(;l<=f.e.r;++l){for(p=g[l]?' table:style-name="ro'+g[l].ods+'"':"",u.push("        <table:table-row"+p+`>
`),c=0;c<f.s.c;++c)u.push(n);for(;c<=f.e.c;++c){var m=!1,x={},y="";for(d=0;d!=h.length;++d)if(!(h[d].s.c>c)&&!(h[d].s.r>l)&&!(h[d].e.c<c)&&!(h[d].e.r<l)){(h[d].s.c!=c||h[d].s.r!=l)&&(m=!0),x["table:number-columns-spanned"]=h[d].e.c-h[d].s.c+1,x["table:number-rows-spanned"]=h[d].e.r-h[d].s.r+1;break}if(m){u.push(t);continue}var w=at({r:l,c}),_=v?(a[l]||[])[c]:a[w];if(_&&_.f&&(x["table:formula"]=rt(bL(_.f)),_.F&&_.F.slice(0,w.length)==w)){var S=hr(_.F);x["table:number-matrix-columns-spanned"]=S.e.c-S.s.c+1,x["table:number-matrix-rows-spanned"]=S.e.r-S.s.r+1}if(!_){u.push(n);continue}switch(_.t){case"b":y=_.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=_.v?"true":"false";break;case"n":y=_.w||String(_.v||0),x["office:value-type"]="float",x["office:value"]=_.v||0;break;case"s":case"str":y=_.v==null?"":_.v,x["office:value-type"]="string";break;case"d":y=_.w||Dn(_.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=Dn(_.v).toISOString(),x["table:style-name"]="ce1";break;default:u.push(n);continue}var E=e(y);if(_.l&&_.l.Target){var b=_.l.Target;b=b.charAt(0)=="#"?"#"+TL(b.slice(1)):b,b.charAt(0)!="#"&&!b.match(/^\w+:/)&&(b="../"+b),E=ye("text:a",E,{"xlink:href":b.replace(/&/g,"&amp;")})}u.push("          "+ye("table:table-cell",ye("text:p",E,{}),x)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},i=function(a,o){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var s=0;o.SheetNames.map(function(l){return o.Sheets[l]}).forEach(function(l){if(l&&l["!cols"]){for(var c=0;c<l["!cols"].length;++c)if(l["!cols"][c]){var f=l["!cols"][c];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Qv(f),f.ods=s;var h=l["!cols"][c].wpx+"px";a.push('  <style:style style:name="co'+s+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++s}}});var u=0;o.SheetNames.map(function(l){return o.Sheets[l]}).forEach(function(l){if(l&&l["!rows"]){for(var c=0;c<l["!rows"].length;++c)if(l["!rows"][c]){l["!rows"][c].ods=u;var f=l["!rows"][c].hpx+"px";a.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++u}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(o,s){var u=[Ot],l=Hu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),c=Hu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});s.bookType=="fods"?(u.push("<office:document"+l+c+`>
`),u.push(TE().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+l+`>
`),i(u,o),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)u.push(r(o.Sheets[o.SheetNames[f]],o,f));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),s.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function hS(e,n){if(n.bookType=="fods")return nx(e,n);var t=Wv(),r="",i=[],a=[];return r="mimetype",$e(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",$e(t,r,nx(e,n)),i.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",$e(t,r,a8(e,n)),i.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",$e(t,r,Ot+TE()),i.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",$e(t,r,gP(a)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",$e(t,r,vP(i)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function _f(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function o8(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Mr(Vu(e))}function s8(e,n){e:for(var t=0;t<=e.length-n.length;++t){for(var r=0;r<n.length;++r)if(e[t+r]!=n[r])continue e;return!0}return!1}function xa(e){var n=e.reduce(function(i,a){return i+a.length},0),t=new Uint8Array(n),r=0;return e.forEach(function(i){t.set(i,r),r+=i.length}),t}function u8(e,n,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);e[n+15]|=r>>7,e[n+14]|=(r&127)<<1;for(var a=0;i>=1;++a,i/=256)e[n+a]=i&255;e[n+15]|=t>=0?0:128}function $u(e,n){var t=n?n[0]:0,r=e[t]&127;e:if(e[t++]>=128&&(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128)||(r+=(e[t]&127)*Math.pow(2,28),++t,e[t++]<128)||(r+=(e[t]&127)*Math.pow(2,35),++t,e[t++]<128)||(r+=(e[t]&127)*Math.pow(2,42),++t,e[t++]<128)))break e;return n&&(n[0]=t),r}function tt(e){var n=new Uint8Array(7);n[0]=e&127;var t=1;e:if(e>127){if(n[t-1]|=128,n[t]=e>>7&127,++t,e<=16383||(n[t-1]|=128,n[t]=e>>14&127,++t,e<=2097151)||(n[t-1]|=128,n[t]=e>>21&127,++t,e<=268435455)||(n[t-1]|=128,n[t]=e/256>>>21&127,++t,e<=34359738367)||(n[t-1]|=128,n[t]=e/65536>>>21&127,++t,e<=4398046511103))break e;n[t-1]|=128,n[t]=e/16777216>>>21&127,++t}return n.slice(0,t)}function ss(e){var n=0,t=e[n]&127;e:if(e[n++]>=128){if(t|=(e[n]&127)<<7,e[n++]<128||(t|=(e[n]&127)<<14,e[n++]<128)||(t|=(e[n]&127)<<21,e[n++]<128))break e;t|=(e[n]&127)<<28}return t}function Lt(e){for(var n=[],t=[0];t[0]<e.length;){var r=t[0],i=$u(e,t),a=i&7;i=Math.floor(i/8);var o=0,s;if(i==0)break;switch(a){case 0:{for(var u=t[0];e[t[0]++]>=128;);s=e.slice(u,t[0])}break;case 5:o=4,s=e.slice(t[0],t[0]+o),t[0]+=o;break;case 1:o=8,s=e.slice(t[0],t[0]+o),t[0]+=o;break;case 2:o=$u(e,t),s=e.slice(t[0],t[0]+o),t[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(r))}var l={data:s,type:a};n[i]==null?n[i]=[l]:n[i].push(l)}return n}function tn(e){var n=[];return e.forEach(function(t,r){t.forEach(function(i){i.data&&(n.push(tt(r*8+i.type)),i.type==2&&n.push(tt(i.data.length)),n.push(i.data))})}),xa(n)}function Fr(e){for(var n,t=[],r=[0];r[0]<e.length;){var i=$u(e,r),a=Lt(e.slice(r[0],r[0]+i));r[0]+=i;var o={id:ss(a[1][0].data),messages:[]};a[2].forEach(function(s){var u=Lt(s.data),l=ss(u[3][0].data);o.messages.push({meta:u,data:e.slice(r[0],r[0]+l)}),r[0]+=l}),(n=a[3])!=null&&n[0]&&(o.merge=ss(a[3][0].data)>>>0>0),t.push(o)}return t}function Co(e){var n=[];return e.forEach(function(t){var r=[];r[1]=[{data:tt(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:tt(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:tt(o.data.length)}],r[2].push({data:tn(o.meta),type:2})});var a=tn(r);n.push(tt(a.length)),n.push(a),i.forEach(function(o){return n.push(o)})}),xa(n)}function l8(e,n){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var t=[0],r=$u(n,t),i=[];t[0]<n.length;){var a=n[t[0]]&3;if(a==0){var o=n[t[0]++]>>2;if(o<60)++o;else{var s=o-59;o=n[t[0]],s>1&&(o|=n[t[0]+1]<<8),s>2&&(o|=n[t[0]+2]<<16),s>3&&(o|=n[t[0]+3]<<24),o>>>=0,o++,t[0]+=s}i.push(n.slice(t[0],t[0]+o)),t[0]+=o;continue}else{var u=0,l=0;if(a==1?(l=(n[t[0]]>>2&7)+4,u=(n[t[0]++]&224)<<3,u|=n[t[0]++]):(l=(n[t[0]++]>>2)+1,a==2?(u=n[t[0]]|n[t[0]+1]<<8,t[0]+=2):(u=(n[t[0]]|n[t[0]+1]<<8|n[t[0]+2]<<16|n[t[0]+3]<<24)>>>0,t[0]+=4)),i=[xa(i)],u==0)throw new Error("Invalid offset 0");if(u>i[0].length)throw new Error("Invalid offset beyond length");if(l>=u)for(i.push(i[0].slice(-u)),l-=u;l>=i[i.length-1].length;)i.push(i[i.length-1]),l-=i[i.length-1].length;i.push(i[0].slice(-u,-u+l))}}var c=xa(i);if(c.length!=r)throw new Error("Unexpected length: ".concat(c.length," != ").concat(r));return c}function Ir(e){for(var n=[],t=0;t<e.length;){var r=e[t++],i=e[t]|e[t+1]<<8|e[t+2]<<16;t+=3,n.push(l8(r,e.slice(t,t+i))),t+=i}if(t!==e.length)throw new Error("data is not a valid framed stream!");return xa(n)}function bo(e){for(var n=[],t=0;t<e.length;){var r=Math.min(e.length-t,268435455),i=new Uint8Array(4);n.push(i);var a=tt(r),o=a.length;n.push(a),r<=60?(o++,n.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,n.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,n.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,n.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,n.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),n.push(e.slice(t,t+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,t+=r}return xa(n)}function md(e,n){var t=new Uint8Array(32),r=_f(t),i=12,a=0;switch(t[0]=5,e.t){case"n":t[1]=2,u8(t,i,e.v),a|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,e.v?1:0,!0),a|=2,i+=8;break;case"s":if(n.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));t[1]=3,r.setUint32(i,n.indexOf(e.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,a,!0),t.slice(0,i)}function gd(e,n){var t=new Uint8Array(32),r=_f(t),i=12,a=0;switch(t[0]=3,e.t){case"n":t[2]=2,r.setFloat64(i,e.v,!0),a|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,e.v?1:0,!0),a|=32,i+=8;break;case"s":if(n.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));t[2]=3,r.setUint32(i,n.indexOf(e.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,a,!0),t.slice(0,i)}function $i(e){var n=Lt(e);return $u(n[1][0].data)}function c8(e,n,t){var r,i,a,o;if(!((r=e[6])!=null&&r[0])||!((i=e[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var s=((o=(a=e[8])==null?void 0:a[0])==null?void 0:o.data)&&ss(e[8][0].data)>0||!1;if(s)throw"Math only works with normal offsets";for(var u=0,l=_f(e[7][0].data),c=0,f=[],h=_f(e[4][0].data),d=0,v=[],p=0;p<n.length;++p){if(n[p]==null){l.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}l.setUint16(p*2,c,!0),h.setUint16(p*2,d,!0);var g,m;switch(typeof n[p]){case"string":g=md({t:"s",v:n[p]},t),m=gd({t:"s",v:n[p]},t);break;case"number":g=md({t:"n",v:n[p]},t),m=gd({t:"n",v:n[p]},t);break;case"boolean":g=md({t:"b",v:n[p]},t),m=gd({t:"b",v:n[p]},t);break;default:throw new Error("Unsupported value "+n[p])}f.push(g),c+=g.length,v.push(m),d+=m.length,++u}for(e[2][0].data=tt(u);p<e[7][0].data.length/2;++p)l.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return e[6][0].data=xa(f),e[3][0].data=xa(v),u}function f8(e,n){if(!n||!n.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=hr(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Pt(r)));var a=Ef(t,{range:r,header:1}),o=["~Sh33tJ5~"];a.forEach(function(z){return z.forEach(function(U){typeof U=="string"&&o.push(U)})});var s={},u=[],l=ot.read(n.numbers,{type:"base64"});l.FileIndex.map(function(z,U){return[z,l.FullPaths[U]]}).forEach(function(z){var U=z[0],B=z[1];if(U.type==2&&U.name.match(/\.iwa/)){var J=U.content,he=Ir(J),ge=Fr(he);ge.forEach(function(de){u.push(de.id),s[de.id]={deps:[],location:B,type:ss(de.messages[0].meta[1][0].data)}})}}),u.sort(function(z,U){return z-U});var c=u.filter(function(z){return z>1}).map(function(z){return[z,tt(z)]});l.FileIndex.map(function(z,U){return[z,l.FullPaths[U]]}).forEach(function(z){var U=z[0];if(z[1],!!U.name.match(/\.iwa/)){var B=Fr(Ir(U.content));B.forEach(function(J){J.messages.forEach(function(he){c.forEach(function(ge){J.messages.some(function(de){return ss(de.meta[1][0].data)!=11006&&s8(de.data,ge[1])})&&s[ge[0]].deps.push(J.id)})})})}});for(var f=ot.find(l,s[1].location),h=Fr(Ir(f.content)),d,v=0;v<h.length;++v){var p=h[v];p.id==1&&(d=p)}var g=$i(Lt(d.messages[0].data)[1][0].data);for(f=ot.find(l,s[g].location),h=Fr(Ir(f.content)),v=0;v<h.length;++v)p=h[v],p.id==g&&(d=p);for(g=$i(Lt(d.messages[0].data)[2][0].data),f=ot.find(l,s[g].location),h=Fr(Ir(f.content)),v=0;v<h.length;++v)p=h[v],p.id==g&&(d=p);for(g=$i(Lt(d.messages[0].data)[2][0].data),f=ot.find(l,s[g].location),h=Fr(Ir(f.content)),v=0;v<h.length;++v)p=h[v],p.id==g&&(d=p);var m=Lt(d.messages[0].data);{m[6][0].data=tt(r.e.r+1),m[7][0].data=tt(r.e.c+1);var x=$i(m[46][0].data),y=ot.find(l,s[x].location),w=Fr(Ir(y.content));{for(var _=0;_<w.length&&w[_].id!=x;++_);if(w[_].id!=x)throw"Bad ColumnRowUIDMapArchive";var S=Lt(w[_].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var E=0;E<=r.e.c;++E){var b=[];b[1]=b[2]=[{type:0,data:tt(E+420690)}],S[1].push({type:2,data:tn(b)}),S[2].push({type:0,data:tt(E)}),S[3].push({type:0,data:tt(E)})}S[4]=[],S[5]=[],S[6]=[];for(var C=0;C<=r.e.r;++C)b=[],b[1]=b[2]=[{type:0,data:tt(C+726270)}],S[4].push({type:2,data:tn(b)}),S[5].push({type:0,data:tt(C)}),S[6].push({type:0,data:tt(C)});w[_].messages[0].data=tn(S)}y.content=bo(Co(w)),y.size=y.content.length,delete m[46];var T=Lt(m[4][0].data);{T[7][0].data=tt(r.e.r+1);var F=Lt(T[1][0].data),I=$i(F[2][0].data);y=ot.find(l,s[I].location),w=Fr(Ir(y.content));{if(w[0].id!=I)throw"Bad HeaderStorageBucket";var V=Lt(w[0].messages[0].data);for(C=0;C<a.length;++C){var K=Lt(V[2][0].data);K[1][0].data=tt(C),K[4][0].data=tt(a[C].length),V[2][C]={type:V[2][0].type,data:tn(K)}}w[0].messages[0].data=tn(V)}y.content=bo(Co(w)),y.size=y.content.length;var G=$i(T[2][0].data);y=ot.find(l,s[G].location),w=Fr(Ir(y.content));{if(w[0].id!=G)throw"Bad HeaderStorageBucket";for(V=Lt(w[0].messages[0].data),E=0;E<=r.e.c;++E)K=Lt(V[2][0].data),K[1][0].data=tt(E),K[4][0].data=tt(r.e.r+1),V[2][E]={type:V[2][0].type,data:tn(K)};w[0].messages[0].data=tn(V)}y.content=bo(Co(w)),y.size=y.content.length;var ie=$i(T[4][0].data);(function(){for(var z=ot.find(l,s[ie].location),U=Fr(Ir(z.content)),B,J=0;J<U.length;++J){var he=U[J];he.id==ie&&(B=he)}var ge=Lt(B.messages[0].data);{ge[3]=[];var de=[];o.forEach(function(Ie,Le){de[1]=[{type:0,data:tt(Le)}],de[2]=[{type:0,data:tt(1)}],de[3]=[{type:2,data:o8(Ie)}],ge[3].push({type:2,data:tn(de)})})}B.messages[0].data=tn(ge);var pe=Co(U),Fe=bo(pe);z.content=Fe,z.size=z.content.length})();var re=Lt(T[3][0].data);{var H=re[1][0];delete re[2];var X=Lt(H.data);{var Q=$i(X[2][0].data);(function(){for(var z=ot.find(l,s[Q].location),U=Fr(Ir(z.content)),B,J=0;J<U.length;++J){var he=U[J];he.id==Q&&(B=he)}var ge=Lt(B.messages[0].data);{delete ge[6],delete re[7];var de=new Uint8Array(ge[5][0].data);ge[5]=[];for(var pe=0,Fe=0;Fe<=r.e.r;++Fe){var Ie=Lt(de);pe+=c8(Ie,a[Fe],o),Ie[1][0].data=tt(Fe),ge[5].push({data:tn(Ie),type:2})}ge[1]=[{type:0,data:tt(r.e.c+1)}],ge[2]=[{type:0,data:tt(r.e.r+1)}],ge[3]=[{type:0,data:tt(pe)}],ge[4]=[{type:0,data:tt(r.e.r+1)}]}B.messages[0].data=tn(ge);var Le=Co(U),Me=bo(Le);z.content=Me,z.size=z.content.length})()}H.data=tn(X)}T[3][0].data=tn(re)}m[4][0].data=tn(T)}d.messages[0].data=tn(m);var fe=Co(h),D=bo(fe);return f.content=D,f.size=f.content.length,l}function h8(e){return function(t){for(var r=0;r!=e.length;++r){var i=e[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function n1(e){h8([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function d8(e,n){return n.bookType=="ods"?hS(e,n):n.bookType=="numbers"?f8(e,n):n.bookType=="xlsb"?p8(e,n):v8(e,n)}function p8(e,n){Ho=1024,e&&!e.SSF&&(e.SSF=Yn(kt)),e&&e.SSF&&(rh(),nh(e.SSF),n.revssf=ih(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.rels={},n.wbrels={},n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,pu?n.revStrings=new Map:(n.revStrings={},n.revStrings.foo=[],delete n.revStrings.foo);var t=n.bookType=="xlsb"?"bin":"xml",r=KE.indexOf(n.bookType)>-1,i=SE();n1(n=n||{});var a=Wv(),o="",s=0;if(n.cellXfs=[],Ta(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",$e(a,o,kE(e.Props,n)),i.coreprops.push(o),nt(n.rels,2,o,Qe.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],l=0;l<e.SheetNames.length;++l)(e.Workbook.Sheets[l]||{}).Hidden!=2&&u.push(e.SheetNames[l]);e.Props.SheetNames=u}for(e.Props.Worksheets=e.Props.SheetNames.length,$e(a,o,RE(e.Props)),i.extprops.push(o),nt(n.rels,3,o,Qe.EXT_PROPS),e.Custprops!==e.Props&&dn(e.Custprops||{}).length>0&&(o="docProps/custom.xml",$e(a,o,FE(e.Custprops)),i.custprops.push(o),nt(n.rels,4,o,Qe.CUST_PROPS)),s=1;s<=e.SheetNames.length;++s){var c={"!id":{}},f=e.Sheets[e.SheetNames[s-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+s+"."+t,$e(a,o,gB(s-1,o,n,e,c)),i.sheets.push(o),nt(n.wbrels,-1,"worksheets/sheet"+s+"."+t,Qe.WS[0])}if(f){var d=f["!comments"],v=!1,p="";d&&d.length>0&&(p="xl/comments"+s+"."+t,$e(a,p,wB(d,p)),i.comments.push(p),nt(c,-1,"../comments"+s+"."+t,Qe.CMNT),v=!0),f["!legacy"]&&v&&$e(a,"xl/drawings/vmlDrawing"+s+".vml",GE(s,f["!comments"])),delete f["!comments"],delete f["!legacy"]}c["!id"].rId1&&$e(a,bE(o),as(c))}return n.Strings!=null&&n.Strings.length>0&&(o="xl/sharedStrings."+t,$e(a,o,yB(n.Strings,o,n)),i.strs.push(o),nt(n.wbrels,-1,"sharedStrings."+t,Qe.SST)),o="xl/workbook."+t,$e(a,o,mB(e,o)),i.workbooks.push(o),nt(n.rels,1,o,Qe.WB),o="xl/theme/theme1.xml",$e(a,o,$E(e.Themes,n)),i.themes.push(o),nt(n.wbrels,-1,"theme/theme1.xml",Qe.THEME),o="xl/styles."+t,$e(a,o,xB(e,o,n)),i.styles.push(o),nt(n.wbrels,-1,"styles."+t,Qe.STY),e.vbaraw&&r&&(o="xl/vbaProject.bin",$e(a,o,e.vbaraw),i.vba.push(o),nt(n.wbrels,-1,"vbaProject.bin",Qe.VBA)),o="xl/metadata."+t,$e(a,o,_B(o)),i.metadata.push(o),nt(n.wbrels,-1,"metadata."+t,Qe.XLMETA),$e(a,"[Content_Types].xml",CE(i,n)),$e(a,"_rels/.rels",as(n.rels)),$e(a,"xl/_rels/workbook."+t+".rels",as(n.wbrels)),delete n.revssf,delete n.ssf,a}function v8(e,n){Ho=1024,e&&!e.SSF&&(e.SSF=Yn(kt)),e&&e.SSF&&(rh(),nh(e.SSF),n.revssf=ih(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.rels={},n.wbrels={},n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,pu?n.revStrings=new Map:(n.revStrings={},n.revStrings.foo=[],delete n.revStrings.foo);var t="xml",r=KE.indexOf(n.bookType)>-1,i=SE();n1(n=n||{});var a=Wv(),o="",s=0;if(n.cellXfs=[],Ta(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",$e(a,o,kE(e.Props,n)),i.coreprops.push(o),nt(n.rels,2,o,Qe.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],l=0;l<e.SheetNames.length;++l)(e.Workbook.Sheets[l]||{}).Hidden!=2&&u.push(e.SheetNames[l]);e.Props.SheetNames=u}e.Props.Worksheets=e.Props.SheetNames.length,$e(a,o,RE(e.Props)),i.extprops.push(o),nt(n.rels,3,o,Qe.EXT_PROPS),e.Custprops!==e.Props&&dn(e.Custprops||{}).length>0&&(o="docProps/custom.xml",$e(a,o,FE(e.Custprops)),i.custprops.push(o),nt(n.rels,4,o,Qe.CUST_PROPS));var c=["SheetJ5"];for(n.tcid=0,s=1;s<=e.SheetNames.length;++s){var f={"!id":{}},h=e.Sheets[e.SheetNames[s-1]],d=(h||{})["!type"]||"sheet";switch(d){case"chart":default:o="xl/worksheets/sheet"+s+"."+t,$e(a,o,rS(s-1,n,e,f)),i.sheets.push(o),nt(n.wbrels,-1,"worksheets/sheet"+s+"."+t,Qe.WS[0])}if(h){var v=h["!comments"],p=!1,g="";if(v&&v.length>0){var m=!1;v.forEach(function(x){x[1].forEach(function(y){y.T==!0&&(m=!0)})}),m&&(g="xl/threadedComments/threadedComment"+s+"."+t,$e(a,g,GO(v,c,n)),i.threadedcomments.push(g),nt(f,-1,"../threadedComments/threadedComment"+s+"."+t,Qe.TCMNT)),g="xl/comments"+s+"."+t,$e(a,g,XE(v)),i.comments.push(g),nt(f,-1,"../comments"+s+"."+t,Qe.CMNT),p=!0}h["!legacy"]&&p&&$e(a,"xl/drawings/vmlDrawing"+s+".vml",GE(s,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&$e(a,bE(o),as(f))}return n.Strings!=null&&n.Strings.length>0&&(o="xl/sharedStrings."+t,$e(a,o,BE(n.Strings,n)),i.strs.push(o),nt(n.wbrels,-1,"sharedStrings."+t,Qe.SST)),o="xl/workbook."+t,$e(a,o,oS(e)),i.workbooks.push(o),nt(n.rels,1,o,Qe.WB),o="xl/theme/theme1.xml",$e(a,o,$E(e.Themes,n)),i.themes.push(o),nt(n.wbrels,-1,"theme/theme1.xml",Qe.THEME),o="xl/styles."+t,$e(a,o,VE(e,n)),i.styles.push(o),nt(n.wbrels,-1,"styles."+t,Qe.STY),e.vbaraw&&r&&(o="xl/vbaProject.bin",$e(a,o,e.vbaraw),i.vba.push(o),nt(n.wbrels,-1,"vbaProject.bin",Qe.VBA)),o="xl/metadata."+t,$e(a,o,jE()),i.metadata.push(o),nt(n.wbrels,-1,"metadata."+t,Qe.XLMETA),c.length>1&&(o="xl/persons/person.xml",$e(a,o,XO(c)),i.people.push(o),nt(n.wbrels,-1,"persons/person.xml",Qe.PEOPLE)),$e(a,"[Content_Types].xml",CE(i,n)),$e(a,"_rels/.rels",as(n.rels)),$e(a,"xl/_rels/workbook."+t+".rels",as(n.wbrels)),delete n.revssf,delete n.ssf,a}function m8(e,n){var t="";switch((n||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":t=Ii(e.slice(0,12));break;case"binary":t=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(n&&n.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function dS(e,n){switch(n.type){case"base64":case"binary":break;case"buffer":case"array":n.type="";break;case"file":return ul(n.file,ot.write(e,{type:Je?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+n.bookType+"' files");default:throw new Error("Unrecognized type "+n.type)}return ot.write(e,n)}function g8(e,n){var t=Yn(n||{}),r=d8(e,t);return x8(r,t)}function x8(e,n){var t={},r=Je?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(n.compression&&(t.compression="DEFLATE"),n.password)t.type=r;else switch(n.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+n.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+n.type)}var i=e.FullPaths?ot.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!n.compression}):e.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(n.type=="binary"||n.type=="base64")return i;i=new Uint8Array(th(i))}return n.password&&typeof encrypt_agile<"u"?dS(encrypt_agile(i,n.password),n):n.type==="file"?ul(n.file,i):n.type=="string"?cu(i):i}function y8(e,n){var t=n||{},r=OB(e,t);return dS(r,t)}function Yr(e,n,t){t||(t="");var r=t+e;switch(n.type){case"base64":return Wu(Vu(r));case"binary":return Vu(r);case"string":return e;case"file":return ul(n.file,r,"utf8");case"buffer":return Je?Wi(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Yr(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+n.type)}function w8(e,n){switch(n.type){case"base64":return Wu(e);case"binary":return e;case"string":return e;case"file":return ul(n.file,e,"binary");case"buffer":return Je?Wi(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+n.type)}function tc(e,n){switch(n.type){case"string":case"base64":case"binary":for(var t="",r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return n.type=="base64"?Wu(t):n.type=="string"?cu(t):t;case"file":return ul(n.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+n.type)}}function pS(e,n){KN(),aB(e);var t=Yn(n||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=pS(e,t);return t.type="array",th(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=e.SheetNames.indexOf(t.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Yr(DB(e,t),t);case"slk":case"sylk":return Yr(nO.from_sheet(e.Sheets[e.SheetNames[i]],t),t);case"htm":case"html":return Yr(lS(e.Sheets[e.SheetNames[i]],t),t);case"txt":return w8(vS(e.Sheets[e.SheetNames[i]],t),t);case"csv":return Yr(r1(e.Sheets[e.SheetNames[i]],t),t,"\uFEFF");case"dif":return Yr(rO.from_sheet(e.Sheets[e.SheetNames[i]],t),t);case"dbf":return tc(tO.from_sheet(e.Sheets[e.SheetNames[i]],t),t);case"prn":return Yr(iO.from_sheet(e.Sheets[e.SheetNames[i]],t),t);case"rtf":return Yr(fO.from_sheet(e.Sheets[e.SheetNames[i]],t),t);case"eth":return Yr(LE.from_sheet(e.Sheets[e.SheetNames[i]],t),t);case"fods":return Yr(hS(e,t),t);case"wk1":return tc(qg.sheet_to_wk1(e.Sheets[e.SheetNames[i]],t),t);case"wk3":return tc(qg.book_to_wk3(e,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),tc(uS(e,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),y8(e,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return g8(e,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function _8(e){if(!e.bookType){var n={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType=n[e.bookType]||e.bookType}}function E8(e,n,t){var r={};return r.type="file",r.file=n,_8(r),pS(e,r)}function S8(e,n,t,r,i,a,o,s){var u=fn(t),l=s.defval,c=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),f=!0,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:t,enumerable:!1})}catch{h.__rowNum__=t}else h.__rowNum__=t;if(!o||e[t])for(var d=n.s.c;d<=n.e.c;++d){var v=o?e[t][d]:e[r[d]+u];if(v===void 0||v.t===void 0){if(l===void 0)continue;a[d]!=null&&(h[a[d]]=l);continue}var p=v.v;switch(v.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(a[d]!=null){if(p==null)if(v.t=="e"&&p===null)h[a[d]]=null;else if(l!==void 0)h[a[d]]=l;else if(c&&p===null)h[a[d]]=null;else continue;else h[a[d]]=c&&(v.t!=="n"||v.t==="n"&&s.rawNumbers!==!1)?p:Ni(v,p,s);p!=null&&(f=!1)}}return{row:h,isempty:f}}function Ef(e,n){if(e==null||e["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,a=[],o=0,s="",u={s:{r:0,c:0},e:{r:0,c:0}},l=n||{},c=l.range!=null?l.range:e["!ref"];switch(l.header===1?r=1:l.header==="A"?r=2:Array.isArray(l.header)?r=3:l.header==null&&(r=0),typeof c){case"string":u=ht(c);break;case"number":u=ht(e["!ref"]),u.s.r=c;break;default:u=c}r>0&&(i=0);var f=fn(u.s.r),h=[],d=[],v=0,p=0,g=Array.isArray(e),m=u.s.r,x=0,y={};g&&!e[m]&&(e[m]=[]);var w=l.skipHidden&&e["!cols"]||[],_=l.skipHidden&&e["!rows"]||[];for(x=u.s.c;x<=u.e.c;++x)if(!(w[x]||{}).hidden)switch(h[x]=Cn(x),t=g?e[m][x]:e[h[x]+f],r){case 1:a[x]=x-u.s.c;break;case 2:a[x]=h[x];break;case 3:a[x]=l.header[x-u.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),s=o=Ni(t,null,l),p=y[o]||0,!p)y[o]=1;else{do s=o+"_"+p++;while(y[s]);y[o]=p,y[s]=1}a[x]=s}for(m=u.s.r+i;m<=u.e.r;++m)if(!(_[m]||{}).hidden){var S=S8(e,u,m,h,r,a,g,l);(S.isempty===!1||(r===1?l.blankrows!==!1:l.blankrows))&&(d[v++]=S.row)}return d.length=v,d}var rx=/"/g;function C8(e,n,t,r,i,a,o,s){for(var u=!0,l=[],c="",f=fn(t),h=n.s.c;h<=n.e.c;++h)if(r[h]){var d=s.dense?(e[t]||[])[h]:e[r[h]+f];if(d==null)c="";else if(d.v!=null){u=!1,c=""+(s.rawNumbers&&d.t=="n"?d.v:Ni(d,null,s));for(var v=0,p=0;v!==c.length;++v)if((p=c.charCodeAt(v))===i||p===a||p===34||s.forceQuotes){c='"'+c.replace(rx,'""')+'"';break}c=="ID"&&(c='"ID"')}else d.f!=null&&!d.F?(u=!1,c="="+d.f,c.indexOf(",")>=0&&(c='"'+c.replace(rx,'""')+'"')):c="";l.push(c)}return s.blankrows===!1&&u?null:l.join(o)}function r1(e,n){var t=[],r=n??{};if(e==null||e["!ref"]==null)return"";var i=ht(e["!ref"]),a=r.FS!==void 0?r.FS:",",o=a.charCodeAt(0),s=r.RS!==void 0?r.RS:`
`,u=s.charCodeAt(0),l=new RegExp((a=="|"?"\\|":a)+"+$"),c="",f=[];r.dense=Array.isArray(e);for(var h=r.skipHidden&&e["!cols"]||[],d=r.skipHidden&&e["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(h[v]||{}).hidden||(f[v]=Cn(v));for(var p=0,g=i.s.r;g<=i.e.r;++g)(d[g]||{}).hidden||(c=C8(e,i,g,f,o,u,a,r),c!=null&&(r.strip&&(c=c.replace(l,"")),(c||r.blankrows!==!1)&&t.push((p++?s:"")+c)));return delete r.dense,t.join("")}function vS(e,n){n||(n={}),n.FS="	",n.RS=`
`;var t=r1(e,n);return t}function b8(e){var n="",t,r="";if(e==null||e["!ref"]==null)return[];var i=ht(e["!ref"]),a="",o=[],s,u=[],l=Array.isArray(e);for(s=i.s.c;s<=i.e.c;++s)o[s]=Cn(s);for(var c=i.s.r;c<=i.e.r;++c)for(a=fn(c),s=i.s.c;s<=i.e.c;++s)if(n=o[s]+a,t=l?(e[c]||[])[s]:e[n],r="",t!==void 0){if(t.F!=null){if(n=t.F,!t.f)continue;r=t.f,n.indexOf(":")==-1&&(n=n+":"+n)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}u[u.length]=n+"="+r}return u}function mS(e,n,t){var r=t||{},i=+!r.skipHeader,a=e||{},o=0,s=0;if(a&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var u=typeof r.origin=="string"?qt(r.origin):r.origin;o=u.r,s=u.c}var l,c={s:{c:0,r:0},e:{c:s,r:o+n.length-1+i}};if(a["!ref"]){var f=ht(a["!ref"]);c.e.c=Math.max(c.e.c,f.e.c),c.e.r=Math.max(c.e.r,f.e.r),o==-1&&(o=f.e.r+1,c.e.r=o+n.length-1+i)}else o==-1&&(o=0,c.e.r=n.length-1+i);var h=r.header||[],d=0;n.forEach(function(p,g){dn(p).forEach(function(m){(d=h.indexOf(m))==-1&&(h[d=h.length]=m);var x=p[m],y="z",w="",_=at({c:s+d,r:o+g+i});l=ju(a,_),x&&typeof x=="object"&&!(x instanceof Date)?a[_]=x:(typeof x=="number"?y="n":typeof x=="boolean"?y="b":typeof x=="string"?y="s":x instanceof Date?(y="d",r.cellDates||(y="n",x=qn(x)),w=r.dateNF||kt[14]):x===null&&r.nullError&&(y="e",x=0),l?(l.t=y,l.v=x,delete l.w,delete l.R,w&&(l.z=w)):a[_]=l={t:y,v:x},w&&(l.z=w))})}),c.e.c=Math.max(c.e.c,s+h.length-1);var v=fn(o);if(i)for(d=0;d<h.length;++d)a[Cn(d+s)+v]={t:"s",v:h[d]};return a["!ref"]=Pt(c),a}function T8(e,n){return mS(null,e,n)}function ju(e,n,t){if(typeof n=="string"){if(Array.isArray(e)){var r=qt(n);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[n]||(e[n]={t:"z"})}return typeof n!="number"?ju(e,at(n)):ju(e,at({r:n,c:t||0}))}function k8(e,n){if(typeof n=="number"){if(n>=0&&e.SheetNames.length>n)return n;throw new Error("Cannot find sheet # "+n)}else if(typeof n=="string"){var t=e.SheetNames.indexOf(n);if(t>-1)return t;throw new Error("Cannot find sheet name |"+n+"|")}else throw new Error("Cannot find sheet |"+n+"|")}function A8(){return{SheetNames:[],Sheets:{}}}function R8(e,n,t,r){var i=1;if(!t)for(;i<=65535&&e.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(t)>=0){var a=t.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var o=a&&a[1]||t;for(++i;i<=65535&&e.SheetNames.indexOf(t=o+i)!=-1;++i);}if(aS(t),e.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return e.SheetNames.push(t),e.Sheets[t]=n,t}function F8(e,n,t){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=k8(e,n);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}e.Workbook.Sheets[r].Hidden=t}function I8(e,n){return e.z=n,e}function gS(e,n,t){return n?(e.l={Target:n},t&&(e.l.Tooltip=t)):delete e.l,e}function N8(e,n,t){return gS(e,"#"+n,t)}function D8(e,n,t){e.c||(e.c=[]),e.c.push({t:n,a:t||"SheetJS"})}function P8(e,n,t,r){for(var i=typeof n!="string"?n:ht(n),a=typeof n=="string"?n:Pt(n),o=i.s.r;o<=i.e.r;++o)for(var s=i.s.c;s<=i.e.c;++s){var u=ju(e,o,s);u.t="n",u.F=a,delete u.v,o==i.s.r&&s==i.s.c&&(u.f=t,r&&(u.D=!0))}return e}var xd={encode_col:Cn,encode_row:fn,encode_cell:at,encode_range:Pt,decode_col:Gv,decode_row:jv,split_cell:KD,decode_cell:qt,decode_range:hr,format_cell:Ni,sheet_add_aoa:gE,sheet_add_json:mS,sheet_add_dom:cS,aoa_to_sheet:Ts,json_to_sheet:T8,table_to_sheet:fS,table_to_book:r8,sheet_to_csv:r1,sheet_to_txt:vS,sheet_to_json:Ef,sheet_to_html:lS,sheet_to_formulae:b8,sheet_to_row_object_array:Ef,sheet_get_cell:ju,book_new:A8,book_append_sheet:R8,book_set_sheet_visibility:F8,cell_set_number_format:I8,cell_set_hyperlink:gS,cell_set_internal_link:N8,cell_add_comment:D8,sheet_set_array_formula:P8,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function O8(e){const n=new Date().toLocaleDateString(),t=new Date().toLocaleTimeString(),r=e.map(o=>({Name:o.name,"Roll Number":o.rollNumber,Status:o.present?"Present":"Absent",Time:o.present?t:"-"})),i=xd.json_to_sheet(r),a=xd.book_new();xd.book_append_sheet(a,i,"Attendance"),E8(a,`attendance_${n.replace(/\//g,"-")}.xlsx`)}function M8(){const[e,n]=It.useState([]),[t,r]=It.useState(!1),[i,a]=It.useState({name:"",rollNumber:""}),[o,s]=It.useState(null),[u,l]=It.useState(!1),[c,f]=It.useState(!0);It.useEffect(()=>{(async()=>{try{await L_(),f(!1)}catch(m){console.error("Error loading face-api models:",m)}})()},[]);const h=async g=>{s(g);const m=new Image;if(m.src=g,await new Promise(y=>m.onload=y),!await Pp(m)){alert("No face detected in the image. Please try again."),s(null);return}s(g)},d=async()=>{if(i.name&&i.rollNumber&&o){const g=new Image;g.src=o,await new Promise(y=>g.onload=y);const m=await Pp(g),x={id:Date.now().toString(),name:i.name,rollNumber:i.rollNumber,image:o,faceDescriptor:m,present:!1};n([...e,x]),a({name:"",rollNumber:""}),s(null),r(!1)}},v=g=>{n(e.map(m=>m.id===g?{...m,present:!m.present}:m))},p=()=>{O8(e)};return c?ce.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-600",children:"Loading face recognition models..."})]})}):ce.jsx("div",{className:"min-h-screen bg-gray-50",children:ce.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[ce.jsxs("div",{className:"flex justify-between items-center mb-8",children:[ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Student Attendance System"}),ce.jsxs("div",{className:"flex gap-4",children:[ce.jsxs("button",{onClick:()=>{r(!1),l(!u)},className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700 transition-colors",children:[ce.jsx(D0,{size:20}),u?"Hide Scanner":"Take Attendance"]}),ce.jsx("button",{onClick:()=>{l(!1),r(!t)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700 transition-colors",children:t?ce.jsxs(ce.Fragment,{children:[ce.jsx(g2,{size:20}),"View Students"]}):ce.jsxs(ce.Fragment,{children:[ce.jsx(vT,{size:20}),"Register New Student"]})}),ce.jsxs("button",{onClick:p,className:"bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-purple-700 transition-colors",children:[ce.jsx(hT,{size:20}),"Export to Excel"]})]})]}),u&&ce.jsx("div",{className:"mb-8",children:ce.jsx(jN,{students:e,onMarkAttendance:v})}),t?ce.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[ce.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Register New Student"}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ce.jsxs("div",{className:"space-y-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),ce.jsx("input",{type:"text",value:i.name,onChange:g=>a({...i,name:g.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roll Number"}),ce.jsx("input",{type:"text",value:i.rollNumber,onChange:g=>a({...i,rollNumber:g.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),ce.jsx("button",{onClick:d,disabled:!i.name||!i.rollNumber||!o,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Register Student"})]}),ce.jsxs("div",{children:[ce.jsx(xT,{onCapture:h}),o&&ce.jsxs("div",{className:"mt-4",children:[ce.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Captured Image:"}),ce.jsx("img",{src:o,alt:"Captured",className:"w-48 h-48 object-cover rounded-lg"})]})]})]})]}):!u&&ce.jsxs(ce.Fragment,{children:[ce.jsx(yT,{students:e}),ce.jsx(wT,{students:e,onMarkAttendance:v})]})]})})}m2(document.getElementById("root")).render(ce.jsx(It.StrictMode,{children:ce.jsx(M8,{})}))});export default L8();
